!function(){"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function createCommonjsModule(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return commonjsRequire(t,null==e?r.path:e)}},r.exports),r.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var check=function(t){return t&&t.Math==Math&&t},global_1=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||Function("return this")(),fails=function(t){try{return!!t()}catch(t){return!0}},descriptors=!fails((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),nativePropertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1),f=NASHORN_BUG?function(t){var e=getOwnPropertyDescriptor(this,t);return!!e&&e.enumerable}:nativePropertyIsEnumerable,objectPropertyIsEnumerable={f:f},createPropertyDescriptor=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},toString={}.toString,classofRaw=function(t){return toString.call(t).slice(8,-1)},split="".split,indexedObject=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==classofRaw(t)?split.call(t,""):Object(t)}:Object,requireObjectCoercible=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},toIndexedObject=function(t){return indexedObject(requireObjectCoercible(t))},isObject=function(t){return"object"==typeof t?null!==t:"function"==typeof t},toPrimitive=function(t,e){if(!isObject(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!isObject(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!isObject(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!isObject(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},hasOwnProperty={}.hasOwnProperty,has=function(t,e){return hasOwnProperty.call(t,e)},document$1=global_1.document,EXISTS=isObject(document$1)&&isObject(document$1.createElement),documentCreateElement=function(t){return EXISTS?document$1.createElement(t):{}},ie8DomDefine=!descriptors&&!fails((function(){return 7!=Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a})),nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,f$1=descriptors?nativeGetOwnPropertyDescriptor:function(t,e){if(t=toIndexedObject(t),e=toPrimitive(e,!0),ie8DomDefine)try{return nativeGetOwnPropertyDescriptor(t,e)}catch(t){}if(has(t,e))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(t,e),t[e])},objectGetOwnPropertyDescriptor={f:f$1},anObject=function(t){if(!isObject(t))throw TypeError(String(t)+" is not an object");return t},nativeDefineProperty=Object.defineProperty,f$2=descriptors?nativeDefineProperty:function(t,e,r){if(anObject(t),e=toPrimitive(e,!0),anObject(r),ie8DomDefine)try{return nativeDefineProperty(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t},objectDefineProperty={f:f$2},createNonEnumerableProperty=descriptors?function(t,e,r){return objectDefineProperty.f(t,e,createPropertyDescriptor(1,r))}:function(t,e,r){return t[e]=r,t},setGlobal=function(t,e){try{createNonEnumerableProperty(global_1,t,e)}catch(r){global_1[t]=e}return e},SHARED="__core-js_shared__",store=global_1[SHARED]||setGlobal(SHARED,{}),sharedStore=store,functionToString=Function.toString;"function"!=typeof sharedStore.inspectSource&&(sharedStore.inspectSource=function(t){return functionToString.call(t)});var inspectSource=sharedStore.inspectSource,WeakMap=global_1.WeakMap,nativeWeakMap="function"==typeof WeakMap&&/native code/.test(inspectSource(WeakMap)),shared=createCommonjsModule((function(t){(t.exports=function(t,e){return sharedStore[t]||(sharedStore[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),id=0,postfix=Math.random(),uid=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++id+postfix).toString(36)},keys=shared("keys"),sharedKey=function(t){return keys[t]||(keys[t]=uid(t))},hiddenKeys={},WeakMap$1=global_1.WeakMap,set,get,has$1,enforce=function(t){return has$1(t)?get(t):set(t,{})},getterFor=function(t){return function(e){var r;if(!isObject(e)||(r=get(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}};if(nativeWeakMap){var store$1=new WeakMap$1,wmget=store$1.get,wmhas=store$1.has,wmset=store$1.set;set=function(t,e){return wmset.call(store$1,t,e),e},get=function(t){return wmget.call(store$1,t)||{}},has$1=function(t){return wmhas.call(store$1,t)}}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=function(t,e){return createNonEnumerableProperty(t,STATE,e),e},get=function(t){return has(t,STATE)?t[STATE]:{}},has$1=function(t){return has(t,STATE)}}var internalState={set:set,get:get,has:has$1,enforce:enforce,getterFor:getterFor},redefine=createCommonjsModule((function(t){var e=internalState.get,r=internalState.enforce,n=String(String).split("String");(t.exports=function(t,e,i,s){var o=!!s&&!!s.unsafe,a=!!s&&!!s.enumerable,l=!!s&&!!s.noTargetGet;"function"==typeof i&&("string"!=typeof e||has(i,"name")||createNonEnumerableProperty(i,"name",e),r(i).source=n.join("string"==typeof e?e:"")),t!==global_1?(o?!l&&t[e]&&(a=!0):delete t[e],a?t[e]=i:createNonEnumerableProperty(t,e,i)):a?t[e]=i:setGlobal(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||inspectSource(this)}))})),path=global_1,aFunction=function(t){return"function"==typeof t?t:void 0},getBuiltIn=function(t,e){return arguments.length<2?aFunction(path[t])||aFunction(global_1[t]):path[t]&&path[t][e]||global_1[t]&&global_1[t][e]},ceil=Math.ceil,floor=Math.floor,toInteger=function(t){return isNaN(t=+t)?0:(t>0?floor:ceil)(t)},min=Math.min,toLength=function(t){return t>0?min(toInteger(t),9007199254740991):0},max=Math.max,min$1=Math.min,toAbsoluteIndex=function(t,e){var r=toInteger(t);return r<0?max(r+e,0):min$1(r,e)},createMethod=function(t){return function(e,r,n){var i,s=toIndexedObject(e),o=toLength(s.length),a=toAbsoluteIndex(n,o);if(t&&r!=r){for(;o>a;)if((i=s[a++])!=i)return!0}else for(;o>a;a++)if((t||a in s)&&s[a]===r)return t||a||0;return!t&&-1}},arrayIncludes={includes:createMethod(!0),indexOf:createMethod(!1)},indexOf=arrayIncludes.indexOf,objectKeysInternal=function(t,e){var r,n=toIndexedObject(t),i=0,s=[];for(r in n)!has(hiddenKeys,r)&&has(n,r)&&s.push(r);for(;e.length>i;)has(n,r=e[i++])&&(~indexOf(s,r)||s.push(r));return s},enumBugKeys=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],hiddenKeys$1=enumBugKeys.concat("length","prototype"),f$3=Object.getOwnPropertyNames||function(t){return objectKeysInternal(t,hiddenKeys$1)},objectGetOwnPropertyNames={f:f$3},f$4=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols={f:f$4},ownKeys=getBuiltIn("Reflect","ownKeys")||function(t){var e=objectGetOwnPropertyNames.f(anObject(t)),r=objectGetOwnPropertySymbols.f;return r?e.concat(r(t)):e},copyConstructorProperties=function(t,e){for(var r=ownKeys(e),n=objectDefineProperty.f,i=objectGetOwnPropertyDescriptor.f,s=0;s<r.length;s++){var o=r[s];has(t,o)||n(t,o,i(e,o))}},replacement=/#|\.prototype\./,isForced=function(t,e){var r=data[normalize(t)];return r==POLYFILL||r!=NATIVE&&("function"==typeof e?fails(e):!!e)},normalize=isForced.normalize=function(t){return String(t).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",isForced_1=isForced,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,_export=function(t,e){var r,n,i,s,o,a=t.target,l=t.global,h=t.stat;if(r=l?global_1:h?global_1[a]||setGlobal(a,{}):(global_1[a]||{}).prototype)for(n in e){if(s=e[n],i=t.noTargetGet?(o=getOwnPropertyDescriptor$1(r,n))&&o.value:r[n],!isForced_1(l?n:a+(h?".":"#")+n,t.forced)&&void 0!==i){if(typeof s==typeof i)continue;copyConstructorProperties(s,i)}(t.sham||i&&i.sham)&&createNonEnumerableProperty(s,"sham",!0),redefine(r,n,s,t)}},arrayMethodIsStrict=function(t,e){var r=[][t];return!!r&&fails((function(){r.call(null,e||function(){throw 1},1)}))},defineProperty=Object.defineProperty,cache={},thrower=function(t){throw t},arrayMethodUsesToLength=function(t,e){if(has(cache,t))return cache[t];e||(e={});var r=[][t],n=!!has(e,"ACCESSORS")&&e.ACCESSORS,i=has(e,0)?e[0]:thrower,s=has(e,1)?e[1]:void 0;return cache[t]=!!r&&!fails((function(){if(n&&!descriptors)return!0;var t={length:-1};n?defineProperty(t,1,{enumerable:!0,get:thrower}):t[1]=1,r.call(t,i,s)}))},$indexOf=arrayIncludes.indexOf,nativeIndexOf=[].indexOf,NEGATIVE_ZERO=!!nativeIndexOf&&1/[1].indexOf(1,-0)<0,STRICT_METHOD=arrayMethodIsStrict("indexOf"),USES_TO_LENGTH=arrayMethodUsesToLength("indexOf",{ACCESSORS:!0,1:0});_export({target:"Array",proto:!0,forced:NEGATIVE_ZERO||!STRICT_METHOD||!USES_TO_LENGTH},{indexOf:function(t){return NEGATIVE_ZERO?nativeIndexOf.apply(this,arguments)||0:$indexOf(this,t,arguments.length>1?arguments[1]:void 0)}});var nativeSymbol=!!Object.getOwnPropertySymbols&&!fails((function(){return!String(Symbol())})),useSymbolAsUid=nativeSymbol&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,WellKnownSymbolsStore=shared("wks"),Symbol$1=global_1.Symbol,createWellKnownSymbol=useSymbolAsUid?Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid,wellKnownSymbol=function(t){return has(WellKnownSymbolsStore,t)||(nativeSymbol&&has(Symbol$1,t)?WellKnownSymbolsStore[t]=Symbol$1[t]:WellKnownSymbolsStore[t]=createWellKnownSymbol("Symbol."+t)),WellKnownSymbolsStore[t]},objectKeys=Object.keys||function(t){return objectKeysInternal(t,enumBugKeys)},objectDefineProperties=descriptors?Object.defineProperties:function(t,e){anObject(t);for(var r,n=objectKeys(e),i=n.length,s=0;i>s;)objectDefineProperty.f(t,r=n[s++],e[r]);return t},html=getBuiltIn("document","documentElement"),GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return LT+SCRIPT+GT+t+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(t){t.write(scriptTag("")),t.close();var e=t.parentWindow.Object;return t=null,e},NullProtoObjectViaIFrame=function(){var t,e=documentCreateElement("iframe"),r="java"+SCRIPT+":";return e.style.display="none",html.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(scriptTag("document.F=Object")),t.close(),t.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=document.domain&&new ActiveXObject("htmlfile")}catch(t){}NullProtoObject=activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame();for(var t=enumBugKeys.length;t--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[t]];return NullProtoObject()};hiddenKeys[IE_PROTO]=!0;var objectCreate=Object.create||function(t,e){var r;return null!==t?(EmptyConstructor[PROTOTYPE]=anObject(t),r=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,r[IE_PROTO]=t):r=NullProtoObject(),void 0===e?r:objectDefineProperties(r,e)},UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&objectDefineProperty.f(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:objectCreate(null)});var addToUnscopables=function(t){ArrayPrototype[UNSCOPABLES][t]=!0},iterators={},toObject=function(t){return Object(requireObjectCoercible(t))},correctPrototypeGetter=!fails((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),IE_PROTO$1=sharedKey("IE_PROTO"),ObjectPrototype=Object.prototype,objectGetPrototypeOf=correctPrototypeGetter?Object.getPrototypeOf:function(t){return t=toObject(t),has(t,IE_PROTO$1)?t[IE_PROTO$1]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ObjectPrototype:null},ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1,returnThis=function(){return this},IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS=!0),null==IteratorPrototype&&(IteratorPrototype={}),has(IteratorPrototype,ITERATOR)||createNonEnumerableProperty(IteratorPrototype,ITERATOR,returnThis);var iteratorsCore={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS},defineProperty$1=objectDefineProperty.f,TO_STRING_TAG=wellKnownSymbol("toStringTag"),setToStringTag=function(t,e,r){t&&!has(t=r?t:t.prototype,TO_STRING_TAG)&&defineProperty$1(t,TO_STRING_TAG,{configurable:!0,value:e})},IteratorPrototype$1=iteratorsCore.IteratorPrototype,returnThis$1=function(){return this},createIteratorConstructor=function(t,e,r){var n=e+" Iterator";return t.prototype=objectCreate(IteratorPrototype$1,{next:createPropertyDescriptor(1,r)}),setToStringTag(t,n,!1),iterators[n]=returnThis$1,t},aPossiblePrototype=function(t){if(!isObject(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return anObject(r),aPossiblePrototype(n),e?t.call(r,n):r.__proto__=n,r}}():void 0),IteratorPrototype$2=iteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS$1=iteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$1=wellKnownSymbol("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis$2=function(){return this},defineIterator=function(t,e,r,n,i,s,o){createIteratorConstructor(r,e,n);var a,l,h,u=function(t){if(t===i&&m)return m;if(!BUGGY_SAFARI_ITERATORS$1&&t in p)return p[t];switch(t){case KEYS:case VALUES:case ENTRIES:return function(){return new r(this,t)}}return function(){return new r(this)}},c=e+" Iterator",f=!1,p=t.prototype,d=p[ITERATOR$1]||p["@@iterator"]||i&&p[i],m=!BUGGY_SAFARI_ITERATORS$1&&d||u(i),y="Array"==e&&p.entries||d;if(y&&(a=objectGetPrototypeOf(y.call(new t)),IteratorPrototype$2!==Object.prototype&&a.next&&(objectGetPrototypeOf(a)!==IteratorPrototype$2&&(objectSetPrototypeOf?objectSetPrototypeOf(a,IteratorPrototype$2):"function"!=typeof a[ITERATOR$1]&&createNonEnumerableProperty(a,ITERATOR$1,returnThis$2)),setToStringTag(a,c,!0))),i==VALUES&&d&&d.name!==VALUES&&(f=!0,m=function(){return d.call(this)}),p[ITERATOR$1]!==m&&createNonEnumerableProperty(p,ITERATOR$1,m),iterators[e]=m,i)if(l={values:u(VALUES),keys:s?m:u(KEYS),entries:u(ENTRIES)},o)for(h in l)(BUGGY_SAFARI_ITERATORS$1||f||!(h in p))&&redefine(p,h,l[h]);else _export({target:e,proto:!0,forced:BUGGY_SAFARI_ITERATORS$1||f},l);return l},ARRAY_ITERATOR="Array Iterator",setInternalState=internalState.set,getInternalState=internalState.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator(Array,"Array",(function(t,e){setInternalState(this,{type:ARRAY_ITERATOR,target:toIndexedObject(t),index:0,kind:e})}),(function(){var t=getInternalState(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");iterators.Arguments=iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries");var nativePromiseConstructor=global_1.Promise,redefineAll=function(t,e,r){for(var n in e)redefine(t,n,e[n],r);return t},SPECIES=wellKnownSymbol("species"),setSpecies=function(t){var e=getBuiltIn(t),r=objectDefineProperty.f;descriptors&&e&&!e[SPECIES]&&r(e,SPECIES,{configurable:!0,get:function(){return this}})},aFunction$1=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},anInstance=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t},ITERATOR$2=wellKnownSymbol("iterator"),ArrayPrototype$1=Array.prototype,isArrayIteratorMethod=function(t){return void 0!==t&&(iterators.Array===t||ArrayPrototype$1[ITERATOR$2]===t)},functionBindContext=function(t,e,r){if(aFunction$1(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}},TO_STRING_TAG$1=wellKnownSymbol("toStringTag"),test={};test[TO_STRING_TAG$1]="z";var toStringTagSupport="[object z]"===String(test),TO_STRING_TAG$2=wellKnownSymbol("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(t,e){try{return t[e]}catch(t){}},classof=toStringTagSupport?classofRaw:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=tryGet(e=Object(t),TO_STRING_TAG$2))?r:CORRECT_ARGUMENTS?classofRaw(e):"Object"==(n=classofRaw(e))&&"function"==typeof e.callee?"Arguments":n},ITERATOR$3=wellKnownSymbol("iterator"),getIteratorMethod=function(t){if(null!=t)return t[ITERATOR$3]||t["@@iterator"]||iterators[classof(t)]},callWithSafeIterationClosing=function(t,e,r,n){try{return n?e(anObject(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&anObject(i.call(t)),e}},iterate_1=createCommonjsModule((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,r,n,i,s){var o,a,l,h,u,c,f,p=functionBindContext(r,n,i?2:1);if(s)o=t;else{if("function"!=typeof(a=getIteratorMethod(t)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(a)){for(l=0,h=toLength(t.length);h>l;l++)if((u=i?p(anObject(f=t[l])[0],f[1]):p(t[l]))&&u instanceof e)return u;return new e(!1)}o=a.call(t)}for(c=o.next;!(f=c.call(o)).done;)if("object"==typeof(u=callWithSafeIterationClosing(o,p,f.value,i))&&u&&u instanceof e)return u;return new e(!1)}).stop=function(t){return new e(!0,t)}})),ITERATOR$4=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$4]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(t){}var checkCorrectnessOfIteration=function(t,e){if(!e&&!SAFE_CLOSING)return!1;var r=!1;try{var n={};n[ITERATOR$4]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},SPECIES$1=wellKnownSymbol("species"),speciesConstructor=function(t,e){var r,n=anObject(t).constructor;return void 0===n||null==(r=anObject(n)[SPECIES$1])?e:aFunction$1(r)},engineUserAgent=getBuiltIn("navigator","userAgent")||"",engineIsIos=/(iphone|ipod|ipad).*applewebkit/i.test(engineUserAgent),location=global_1.location,set$1=global_1.setImmediate,clear=global_1.clearImmediate,process$1=global_1.process,MessageChannel=global_1.MessageChannel,Dispatch=global_1.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(t){if(queue.hasOwnProperty(t)){var e=queue[t];delete queue[t],e()}},runner=function(t){return function(){run(t)}},listener=function(t){run(t.data)},post=function(t){global_1.postMessage(t+"",location.protocol+"//"+location.host)};set$1&&clear||(set$1=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return queue[++counter]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},defer(counter),counter},clear=function(t){delete queue[t]},"process"==classofRaw(process$1)?defer=function(t){process$1.nextTick(runner(t))}:Dispatch&&Dispatch.now?defer=function(t){Dispatch.now(runner(t))}:MessageChannel&&!engineIsIos?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=functionBindContext(port.postMessage,port,1)):!global_1.addEventListener||"function"!=typeof postMessage||global_1.importScripts||fails(post)||"file:"===location.protocol?defer=ONREADYSTATECHANGE in documentCreateElement("script")?function(t){html.appendChild(documentCreateElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(t)}}:function(t){setTimeout(runner(t),0)}:(defer=post,global_1.addEventListener("message",listener,!1)));var task={set:set$1,clear:clear},getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f,macrotask=task.set,MutationObserver=global_1.MutationObserver||global_1.WebKitMutationObserver,process$2=global_1.process,Promise$1=global_1.Promise,IS_NODE="process"==classofRaw(process$2),queueMicrotaskDescriptor=getOwnPropertyDescriptor$2(global_1,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify,toggle,node,promise,then;queueMicrotask||(flush=function(){var t,e;for(IS_NODE&&(t=process$2.domain)&&t.exit();head;){e=head.fn,head=head.next;try{e()}catch(t){throw head?notify():last=void 0,t}}last=void 0,t&&t.enter()},IS_NODE?notify=function(){process$2.nextTick(flush)}:MutationObserver&&!engineIsIos?(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}):Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),then=promise.then,notify=function(){then.call(promise,flush)}):notify=function(){macrotask.call(global_1,flush)});var microtask=queueMicrotask||function(t){var e={fn:t,next:void 0};last&&(last.next=e),head||(head=e,notify()),last=e},PromiseCapability=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=aFunction$1(e),this.reject=aFunction$1(r)},f$5=function(t){return new PromiseCapability(t)},newPromiseCapability={f:f$5},promiseResolve=function(t,e){if(anObject(t),isObject(e)&&e.constructor===t)return e;var r=newPromiseCapability.f(t);return(0,r.resolve)(e),r.promise},hostReportErrors=function(t,e){var r=global_1.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))},perform=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},process$3=global_1.process,versions=process$3&&process$3.versions,v8=versions&&versions.v8,match,version;v8?(match=v8.split("."),version=match[0]+match[1]):engineUserAgent&&(match=engineUserAgent.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=engineUserAgent.match(/Chrome\/(\d+)/),match&&(version=match[1])));var engineV8Version=version&&+version,task$1=task.set,SPECIES$2=wellKnownSymbol("species"),PROMISE="Promise",getInternalState$1=internalState.get,setInternalState$1=internalState.set,getInternalPromiseState=internalState.getterFor(PROMISE),PromiseConstructor=nativePromiseConstructor,TypeError$1=global_1.TypeError,document$2=global_1.document,process$4=global_1.process,$fetch=getBuiltIn("fetch"),newPromiseCapability$1=newPromiseCapability.f,newGenericPromiseCapability=newPromiseCapability$1,IS_NODE$1="process"==classofRaw(process$4),DISPATCH_EVENT=!!(document$2&&document$2.createEvent&&global_1.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,FORCED=isForced_1(PROMISE,(function(){if(!(inspectSource(PromiseConstructor)!==String(PromiseConstructor))){if(66===engineV8Version)return!0;if(!IS_NODE$1&&"function"!=typeof PromiseRejectionEvent)return!0}if(engineV8Version>=51&&/native code/.test(PromiseConstructor))return!1;var t=PromiseConstructor.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[SPECIES$2]=e,!(t.then((function(){}))instanceof e)})),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration((function(t){PromiseConstructor.all(t).catch((function(){}))})),isThenable=function(t){var e;return!(!isObject(t)||"function"!=typeof(e=t.then))&&e},notify$1=function(t,e,r){if(!e.notified){e.notified=!0;var n=e.reactions;microtask((function(){for(var i=e.value,s=e.state==FULFILLED,o=0;n.length>o;){var a,l,h,u=n[o++],c=s?u.ok:u.fail,f=u.resolve,p=u.reject,d=u.domain;try{c?(s||(e.rejection===UNHANDLED&&onHandleUnhandled(t,e),e.rejection=HANDLED),!0===c?a=i:(d&&d.enter(),a=c(i),d&&(d.exit(),h=!0)),a===u.promise?p(TypeError$1("Promise-chain cycle")):(l=isThenable(a))?l.call(a,f,p):f(a)):p(i)}catch(t){d&&!h&&d.exit(),p(t)}}e.reactions=[],e.notified=!1,r&&!e.rejection&&onUnhandled(t,e)}))}},dispatchEvent=function(t,e,r){var n,i;DISPATCH_EVENT?((n=document$2.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),global_1.dispatchEvent(n)):n={promise:e,reason:r},(i=global_1["on"+t])?i(n):t===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",r)},onUnhandled=function(t,e){task$1.call(global_1,(function(){var r,n=e.value;if(isUnhandled(e)&&(r=perform((function(){IS_NODE$1?process$4.emit("unhandledRejection",n,t):dispatchEvent(UNHANDLED_REJECTION,t,n)})),e.rejection=IS_NODE$1||isUnhandled(e)?UNHANDLED:HANDLED,r.error))throw r.value}))},isUnhandled=function(t){return t.rejection!==HANDLED&&!t.parent},onHandleUnhandled=function(t,e){task$1.call(global_1,(function(){IS_NODE$1?process$4.emit("rejectionHandled",t):dispatchEvent(REJECTION_HANDLED,t,e.value)}))},bind=function(t,e,r,n){return function(i){t(e,r,i,n)}},internalReject=function(t,e,r,n){e.done||(e.done=!0,n&&(e=n),e.value=r,e.state=REJECTED,notify$1(t,e,!0))},internalResolve=function(t,e,r,n){if(!e.done){e.done=!0,n&&(e=n);try{if(t===r)throw TypeError$1("Promise can't be resolved itself");var i=isThenable(r);i?microtask((function(){var n={done:!1};try{i.call(r,bind(internalResolve,t,n,e),bind(internalReject,t,n,e))}catch(r){internalReject(t,n,r,e)}})):(e.value=r,e.state=FULFILLED,notify$1(t,e,!1))}catch(r){internalReject(t,{done:!1},r,e)}}};FORCED&&(PromiseConstructor=function(t){anInstance(this,PromiseConstructor,PROMISE),aFunction$1(t),Internal.call(this);var e=getInternalState$1(this);try{t(bind(internalResolve,this,e),bind(internalReject,this,e))}catch(t){internalReject(this,e,t)}},Internal=function(t){setInternalState$1(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:PENDING,value:void 0})},Internal.prototype=redefineAll(PromiseConstructor.prototype,{then:function(t,e){var r=getInternalPromiseState(this),n=newPromiseCapability$1(speciesConstructor(this,PromiseConstructor));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=IS_NODE$1?process$4.domain:void 0,r.parent=!0,r.reactions.push(n),r.state!=PENDING&&notify$1(this,r,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),OwnPromiseCapability=function(){var t=new Internal,e=getInternalState$1(t);this.promise=t,this.resolve=bind(internalResolve,t,e),this.reject=bind(internalReject,t,e)},newPromiseCapability.f=newPromiseCapability$1=function(t){return t===PromiseConstructor||t===PromiseWrapper?new OwnPromiseCapability(t):newGenericPromiseCapability(t)},"function"==typeof nativePromiseConstructor&&(nativeThen=nativePromiseConstructor.prototype.then,redefine(nativePromiseConstructor.prototype,"then",(function(t,e){var r=this;return new PromiseConstructor((function(t,e){nativeThen.call(r,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof $fetch&&_export({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return promiseResolve(PromiseConstructor,$fetch.apply(global_1,arguments))}}))),_export({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1),setSpecies(PROMISE),PromiseWrapper=getBuiltIn(PROMISE),_export({target:PROMISE,stat:!0,forced:FORCED},{reject:function(t){var e=newPromiseCapability$1(this);return e.reject.call(void 0,t),e.promise}}),_export({target:PROMISE,stat:!0,forced:FORCED},{resolve:function(t){return promiseResolve(this,t)}}),_export({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(t){var e=this,r=newPromiseCapability$1(e),n=r.resolve,i=r.reject,s=perform((function(){var r=aFunction$1(e.resolve),s=[],o=0,a=1;iterate_1(t,(function(t){var l=o++,h=!1;s.push(void 0),a++,r.call(e,t).then((function(t){h||(h=!0,s[l]=t,--a||n(s))}),i)})),--a||n(s)}));return s.error&&i(s.value),r.promise},race:function(t){var e=this,r=newPromiseCapability$1(e),n=r.reject,i=perform((function(){var i=aFunction$1(e.resolve);iterate_1(t,(function(t){i.call(e,t).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}});var regexpFlags=function(){var t=anObject(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},TO_STRING="toString",RegExpPrototype=RegExp.prototype,nativeToString=RegExpPrototype[TO_STRING],NOT_GENERIC=fails((function(){return"/a/b"!=nativeToString.call({source:"a",flags:"b"})})),INCORRECT_NAME=nativeToString.name!=TO_STRING;(NOT_GENERIC||INCORRECT_NAME)&&redefine(RegExp.prototype,TO_STRING,(function(){var t=anObject(this),e=String(t.source),r=t.flags;return"/"+e+"/"+String(void 0===r&&t instanceof RegExp&&!("flags"in RegExpPrototype)?regexpFlags.call(t):r)}),{unsafe:!0});var stringRepeat="".repeat||function(t){var e=String(requireObjectCoercible(this)),r="",n=toInteger(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r},ceil$1=Math.ceil,createMethod$1=function(t){return function(e,r,n){var i,s,o=String(requireObjectCoercible(e)),a=o.length,l=void 0===n?" ":String(n),h=toLength(r);return h<=a||""==l?o:(i=h-a,(s=stringRepeat.call(l,ceil$1(i/l.length))).length>i&&(s=s.slice(0,i)),t?o+s:s+o)}},stringPad={start:createMethod$1(!1),end:createMethod$1(!0)},stringPadWebkitBug=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(engineUserAgent),$padStart=stringPad.start;function RE(t,e){return RegExp(t,e)}_export({target:"String",proto:!0,forced:stringPadWebkitBug},{padStart:function(t){return $padStart(this,t,arguments.length>1?arguments[1]:void 0)}});var UNSUPPORTED_Y=fails((function(){var t=RE("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET=fails((function(){var t=RE("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),regexpStickyHelpers={UNSUPPORTED_Y:UNSUPPORTED_Y,BROKEN_CARET:BROKEN_CARET},nativeExec=RegExp.prototype.exec,nativeReplace=String.prototype.replace,patchedExec=nativeExec,UPDATES_LAST_INDEX_WRONG=(re1=/a/,re2=/b*/g,nativeExec.call(re1,"a"),nativeExec.call(re2,"a"),0!==re1.lastIndex||0!==re2.lastIndex),re1,re2,UNSUPPORTED_Y$1=regexpStickyHelpers.UNSUPPORTED_Y||regexpStickyHelpers.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1],PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y$1;PATCH&&(patchedExec=function(t){var e,r,n,i,s=this,o=UNSUPPORTED_Y$1&&s.sticky,a=regexpFlags.call(s),l=s.source,h=0,u=t;return o&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),u=String(t).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==t[s.lastIndex-1])&&(l="(?: "+l+")",u=" "+u,h++),r=new RegExp("^(?:"+l+")",a)),NPCG_INCLUDED&&(r=new RegExp("^"+l+"$(?!\\s)",a)),UPDATES_LAST_INDEX_WRONG&&(e=s.lastIndex),n=nativeExec.call(o?r:s,u),o?n?(n.input=n.input.slice(h),n[0]=n[0].slice(h),n.index=s.lastIndex,s.lastIndex+=n[0].length):s.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&n&&(s.lastIndex=s.global?n.index+n[0].length:e),NPCG_INCLUDED&&n&&n.length>1&&nativeReplace.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n});var regexpExec=patchedExec;_export({target:"RegExp",proto:!0,forced:/./.exec!==regexpExec},{exec:regexpExec});var SPECIES$3=wellKnownSymbol("species"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REPLACE=wellKnownSymbol("replace"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE]&&""===/./[REPLACE]("a","$0"),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),fixRegexpWellKnownSymbolLogic=function(t,e,r,n){var i=wellKnownSymbol(t),s=!fails((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),o=s&&!fails((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[SPECIES$3]=function(){return r},r.flags="",r[i]=/./[i]),r.exec=function(){return e=!0,null},r[i](""),!e}));if(!s||!o||"replace"===t&&(!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE)||"split"===t&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var a=/./[i],l=r(i,""[t],(function(t,e,r,n,i){return e.exec===regexpExec?s&&!i?{done:!0,value:a.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:REPLACE_KEEPS_$0,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE}),h=l[0],u=l[1];redefine(String.prototype,t,h),redefine(RegExp.prototype,i,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)})}n&&createNonEnumerableProperty(RegExp.prototype[i],"sham",!0)},MATCH=wellKnownSymbol("match"),isRegexp=function(t){var e;return isObject(t)&&(void 0!==(e=t[MATCH])?!!e:"RegExp"==classofRaw(t))},createMethod$2=function(t){return function(e,r){var n,i,s=String(requireObjectCoercible(e)),o=toInteger(r),a=s.length;return o<0||o>=a?t?"":void 0:(n=s.charCodeAt(o))<55296||n>56319||o+1===a||(i=s.charCodeAt(o+1))<56320||i>57343?t?s.charAt(o):n:t?s.slice(o,o+2):i-56320+(n-55296<<10)+65536}},stringMultibyte={codeAt:createMethod$2(!1),charAt:createMethod$2(!0)},charAt=stringMultibyte.charAt,advanceStringIndex=function(t,e,r){return e+(r?charAt(t,e).length:1)},regexpExecAbstract=function(t,e){var r=t.exec;if("function"==typeof r){var n=r.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==classofRaw(t))throw TypeError("RegExp#exec called on incompatible receiver");return regexpExec.call(t,e)},arrayPush=[].push,min$2=Math.min,MAX_UINT32=4294967295,SUPPORTS_Y=!fails((function(){return!RegExp(MAX_UINT32,"y")}));fixRegexpWellKnownSymbolLogic("split",2,(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=String(requireObjectCoercible(this)),i=void 0===r?MAX_UINT32:r>>>0;if(0===i)return[];if(void 0===t)return[n];if(!isRegexp(t))return e.call(n,t,i);for(var s,o,a,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,c=new RegExp(t.source,h+"g");(s=regexpExec.call(c,n))&&!((o=c.lastIndex)>u&&(l.push(n.slice(u,s.index)),s.length>1&&s.index<n.length&&arrayPush.apply(l,s.slice(1)),a=s[0].length,u=o,l.length>=i));)c.lastIndex===s.index&&c.lastIndex++;return u===n.length?!a&&c.test("")||l.push(""):l.push(n.slice(u)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var i=requireObjectCoercible(this),s=null==e?void 0:e[t];return void 0!==s?s.call(e,i,r):n.call(String(i),e,r)},function(t,i){var s=r(n,t,this,i,n!==e);if(s.done)return s.value;var o=anObject(t),a=String(this),l=speciesConstructor(o,RegExp),h=o.unicode,u=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),c=new l(SUPPORTS_Y?o:"^(?:"+o.source+")",u),f=void 0===i?MAX_UINT32:i>>>0;if(0===f)return[];if(0===a.length)return null===regexpExecAbstract(c,a)?[a]:[];for(var p=0,d=0,m=[];d<a.length;){c.lastIndex=SUPPORTS_Y?d:0;var y,v=regexpExecAbstract(c,SUPPORTS_Y?a:a.slice(d));if(null===v||(y=min$2(toLength(c.lastIndex+(SUPPORTS_Y?0:d)),a.length))===p)d=advanceStringIndex(a,d,h);else{if(m.push(a.slice(p,d)),m.length===f)return m;for(var g=1;g<=v.length-1;g++)if(m.push(v[g]),m.length===f)return m;d=p=y}}return m.push(a.slice(p)),m}]}),!SUPPORTS_Y);var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ITERATOR$5=wellKnownSymbol("iterator"),TO_STRING_TAG$3=wellKnownSymbol("toStringTag"),ArrayValues=es_array_iterator.values;for(var COLLECTION_NAME in domIterables){var Collection=global_1[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR$5]!==ArrayValues)try{createNonEnumerableProperty(CollectionPrototype,ITERATOR$5,ArrayValues)}catch(t){CollectionPrototype[ITERATOR$5]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG$3]||createNonEnumerableProperty(CollectionPrototype,TO_STRING_TAG$3,COLLECTION_NAME),domIterables[COLLECTION_NAME])for(var METHOD_NAME in es_array_iterator)if(CollectionPrototype[METHOD_NAME]!==es_array_iterator[METHOD_NAME])try{createNonEnumerableProperty(CollectionPrototype,METHOD_NAME,es_array_iterator[METHOD_NAME])}catch(t){CollectionPrototype[METHOD_NAME]=es_array_iterator[METHOD_NAME]}}}function asyncGeneratorStep(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var s=t.apply(e,r);function o(t){asyncGeneratorStep(s,n,i,o,a,"next",t)}function a(t){asyncGeneratorStep(s,n,i,o,a,"throw",t)}o(void 0)}))}}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ownKeys$1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(Object(r),!0).forEach((function(e){_defineProperty(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var SmoothScroll=createCommonjsModule((function(t,e){!function(){var e,r,n,i,s={frameRate:150,animationTime:400,stepSize:100,pulseAlgorithm:!0,pulseScale:4,pulseNormalize:1,accelerationDelta:50,accelerationMax:3,keyboardSupport:!0,arrowScroll:50,fixedBackground:!0,excluded:""},o=s,a=!1,l={x:0,y:0},h=!1,u=document.documentElement,c=[],f=/^Mac/.test(navigator.platform),p=37,d=38,m=39,y=40,v=32,g=33,b=34,_=35,w=36,E={37:1,38:1,39:1,40:1};function S(){if(!h&&document.body){h=!0;var t=document.body,i=document.documentElement,s=window.innerHeight,l=t.scrollHeight;if(u=document.compatMode.indexOf("CSS")>=0?i:t,e=t,o.keyboardSupport&&z("keydown",C),top!=self)a=!0;else if(ot&&l>s&&(t.offsetHeight<=s||i.offsetHeight<=s)){var c,f=document.createElement("div");f.style.cssText="position:absolute; z-index:-10000; top:0; left:0; right:0; height:"+u.scrollHeight+"px",document.body.appendChild(f),n=function(){c||(c=setTimeout((function(){f.style.height="0",f.style.height=u.scrollHeight+"px",c=null}),500))},setTimeout(n,10),z("resize",n);if((r=new X(n)).observe(t,{attributes:!0,childList:!0,characterData:!1}),u.offsetHeight<=s){var p=document.createElement("div");p.style.clear="both",t.appendChild(p)}}o.fixedBackground||(t.style.backgroundAttachment="scroll",i.style.backgroundAttachment="scroll")}}var T=[],x=!1,A=Date.now();function P(t,e,r){if(function(t,e){t=t>0?1:-1,e=e>0?1:-1,(l.x!==t||l.y!==e)&&(l.x=t,l.y=e,T=[],A=0)}(e,r),1!=o.accelerationMax){var n=Date.now()-A;if(n<o.accelerationDelta){var i=(1+50/n)/2;i>1&&(i=Math.min(i,o.accelerationMax),e*=i,r*=i)}A=Date.now()}if(T.push({x:e,y:r,lastX:e<0?.99:-.99,lastY:r<0?.99:-.99,start:Date.now()}),!x){var s=Q(),a=t===s||t===document.body;null==t.$scrollBehavior&&function(t){var e=M(t);if(null==N[e]){var r=getComputedStyle(t,"")["scroll-behavior"];N[e]="smooth"==r}return N[e]}(t)&&(t.$scrollBehavior=t.style.scrollBehavior,t.style.scrollBehavior="auto");var h=function(n){for(var i=Date.now(),s=0,l=0,u=0;u<T.length;u++){var c=T[u],f=i-c.start,p=f>=o.animationTime,d=p?1:f/o.animationTime;o.pulseAlgorithm&&(d=Z(d));var m=c.x*d-c.lastX>>0,y=c.y*d-c.lastY>>0;s+=m,l+=y,c.lastX+=m,c.lastY+=y,p&&(T.splice(u,1),u--)}a?window.scrollBy(s,l):(s&&(t.scrollLeft+=s),l&&(t.scrollTop+=l)),e||r||(T=[]),T.length?K(h,t,1e3/o.frameRate+1):(x=!1,null!=t.$scrollBehavior&&(t.style.scrollBehavior=t.$scrollBehavior,t.$scrollBehavior=null))};K(h,t,0),x=!0}}function I(t,r,n){h||S();var s=t.target;if(t.defaultPrevented||t.ctrlKey)return!0;if(q(e,"embed")||q(s,"embed")&&/\.pdf/i.test(s.src)||q(e,"object")||s.shadowRoot)return!0;var l=void 0!==r?r:-t.wheelDeltaX||t.deltaX||0,u=void 0!==n?n:-t.wheelDeltaY||t.deltaY||0;f&&(t.wheelDeltaX&&H(t.wheelDeltaX,120)&&(l=t.wheelDeltaX/Math.abs(t.wheelDeltaX)*-120),t.wheelDeltaY&&H(t.wheelDeltaY,120)&&(u=t.wheelDeltaY/Math.abs(t.wheelDeltaY)*-120)),l||u||(u=-t.wheelDelta||0),1===t.deltaMode&&(l*=40,u*=40);var p=j(s);return p?!!function(t){if(!t)return;c.length||(c=[t,t,t]);t=Math.abs(t),c.push(t),c.shift(),clearTimeout(i),i=setTimeout((function(){try{localStorage.SS_deltaBuffer=c.join(",")}catch(t){}}),1e3);var e=t>120&&W(t),r=!W(120)&&!W(100)&&!e;return t<50||r}(u)||(Math.abs(l)>1.2&&(l*=o.stepSize/120),Math.abs(u)>1.2&&(u*=o.stepSize/120),P(p,l,u),t.preventDefault(),void L()):!a||!rt||(Object.defineProperty(t,"target",{value:window.frameElement}),parent.wheel(t))}function C(t){var r=t.target,n=t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.keyCode!==v;document.body.contains(e)||(e=document.activeElement);var i=/^(button|submit|radio|checkbox|file|color|image)$/i;if(t.defaultPrevented||/^(textarea|select|embed|object)$/i.test(r.nodeName)||q(r,"input")&&!i.test(r.type)||q(e,"video")||function(t){var e=t.target,r=!1;if(-1!=document.URL.indexOf("www.youtube.com/watch"))do{if(r=e.classList&&e.classList.contains("html5-video-controls"))break}while(e=e.parentNode);return r}(t)||r.isContentEditable||n)return!0;if((q(r,"button")||q(r,"input")&&i.test(r.type))&&t.keyCode===v)return!0;if(q(r,"input")&&"radio"==r.type&&E[t.keyCode])return!0;var s=0,l=0,h=j(e);if(!h)return!a||!rt||parent.keydown(t);var u=h.clientHeight;switch(h==document.body&&(u=window.innerHeight),t.keyCode){case d:l=-o.arrowScroll;break;case y:l=o.arrowScroll;break;case v:l=-(t.shiftKey?1:-1)*u*.9;break;case g:l=.9*-u;break;case b:l=.9*u;break;case w:h==document.body&&document.scrollingElement&&(h=document.scrollingElement),l=-h.scrollTop;break;case _:var c=h.scrollHeight-h.scrollTop-u;l=c>0?c+10:0;break;case p:s=-o.arrowScroll;break;case m:s=o.arrowScroll;break;default:return!0}P(h,s,l),t.preventDefault(),L()}function D(t){e=t.target}var k,O,M=(k=0,function(t){return t.uniqueID||(t.uniqueID=k++)}),R={},F={},N={};function L(){clearTimeout(O),O=setInterval((function(){R=F=N={}}),1e3)}function $(t,e,r){for(var n=r?R:F,i=t.length;i--;)n[M(t[i])]=e;return e}function V(t,e){return(e?R:F)[M(t)]}function j(t){var e=[],r=u.scrollHeight;do{var n=V(t,!1);if(n)return $(e,n);if(e.push(t),r===t.scrollHeight){if(a&&B(u)||!a)return $(e,Q())}else if(B(t)&&G(t))return $(e,t)}while(t=t.parentElement)}function B(t){return t.clientHeight+10<t.scrollHeight}function G(t){var e=getComputedStyle(t,"").getPropertyValue("overflow-y");return"scroll"===e||"auto"===e}function z(t,e,r){window.addEventListener(t,e,r||!1)}function U(t,e,r){window.removeEventListener(t,e,r||!1)}function q(t,e){return t&&(t.nodeName||"").toLowerCase()===e.toLowerCase()}if(window.localStorage&&localStorage.SS_deltaBuffer)try{c=localStorage.SS_deltaBuffer.split(",")}catch(t){}function H(t,e){return Math.floor(t/e)==t/e}function W(t){return H(c[0],t)&&H(c[1],t)&&H(c[2],t)}var Y,K=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t,e,r){window.setTimeout(t,r||1e3/60)},X=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,Q=(Y=document.scrollingElement,function(){if(!Y){var t=document.createElement("div");t.style.cssText="height:10000px;width:1px;",document.body.appendChild(t);var e=document.body.scrollTop;document.documentElement.scrollTop,window.scrollBy(0,3),Y=document.body.scrollTop!=e?document.body:document.documentElement,window.scrollBy(0,-3),document.body.removeChild(t)}return Y});function J(t){var e,r;return(t*=o.pulseScale)<1?e=t-(1-Math.exp(-t)):(t-=1,e=(r=Math.exp(-1))+(1-Math.exp(-t))*(1-r)),e*o.pulseNormalize}function Z(t){return t>=1?1:t<=0?0:(1==o.pulseNormalize&&(o.pulseNormalize/=J(1)),J(t))}var tt=window.navigator.userAgent,et=/Edge/.test(tt),rt=/chrome/i.test(tt)&&!et,nt=/safari/i.test(tt)&&!et,it=/mobile/i.test(tt),st=/Windows NT 6.1/i.test(tt)&&/rv:11/i.test(tt),ot=nt&&(/Version\/8/i.test(tt)||/Version\/9/i.test(tt)),at=(rt||nt||st)&&!it,lt=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){lt=!0}}))}catch(t){}var ht=!!lt&&{passive:!1},ut="onwheel"in document.createElement("div")?"wheel":"mousewheel";function ct(t){for(var e in t)s.hasOwnProperty(e)&&(o[e]=t[e])}ut&&at&&(z(ut,I,ht),z("mousedown",D),z("load",S)),ct.destroy=function(){r&&r.disconnect(),U(ut,I),U("mousedown",D),U("keydown",C),U("resize",n),U("load",S)},ct.wheel=I,ct.wheelEvent=ut,window.SmoothScrollOptions&&ct(window.SmoothScrollOptions),t.exports=ct}()})),pace=createCommonjsModule((function(t,e){(function(){var e,r,n,i,s,o,a,l,h,u,c,f,p,d,m,y,v,g,b,_,w,E,S,T,x,A,P,I,C,D,k,O,M,R,F,N,L,$,V,j,B,G,z,U,q,H,W,Y,K=[].slice,X={}.hasOwnProperty,Q=function(t,e){for(var r in e)X.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},J=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};for(w={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},C=function(){var t;return null!=(t="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?t:+new Date},k=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,_=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==k&&(k=function(t){return setTimeout(t,50)},_=function(t){return clearTimeout(t)}),M=function(t){var e,r;return e=C(),(r=function(){var n;return(n=C()-e)>=33?(e=C(),t(n,(function(){return k(r)}))):setTimeout(r,33-n)})()},O=function(){var t,e,r;return r=arguments[0],e=arguments[1],t=3<=arguments.length?K.call(arguments,2):[],"function"==typeof r[e]?r[e].apply(r,t):r[e]},E=function(){var t,e,r,n,i,s,o;for(e=arguments[0],s=0,o=(n=2<=arguments.length?K.call(arguments,1):[]).length;s<o;s++)if(r=n[s])for(t in r)X.call(r,t)&&(i=r[t],null!=e[t]&&"object"==typeof e[t]&&null!=i&&"object"==typeof i?E(e[t],i):e[t]=i);return e},v=function(t){var e,r,n,i,s;for(r=e=0,i=0,s=t.length;i<s;i++)n=t[i],r+=Math.abs(n),e++;return r/e},T=function(t,e){var r,n,i;if(null==t&&(t="options"),null==e&&(e=!0),i=document.querySelector("[data-pace-"+t+"]")){if(r=i.getAttribute("data-pace-"+t),!e)return r;try{return JSON.parse(r)}catch(t){return n=t,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",n):void 0}}},a=function(){function t(){}return t.prototype.on=function(t,e,r,n){var i;return null==n&&(n=!1),null==this.bindings&&(this.bindings={}),null==(i=this.bindings)[t]&&(i[t]=[]),this.bindings[t].push({handler:e,ctx:r,once:n})},t.prototype.once=function(t,e,r){return this.on(t,e,r,!0)},t.prototype.off=function(t,e){var r,n,i;if(null!=(null!=(n=this.bindings)?n[t]:void 0)){if(null==e)return delete this.bindings[t];for(r=0,i=[];r<this.bindings[t].length;)this.bindings[t][r].handler===e?i.push(this.bindings[t].splice(r,1)):i.push(r++);return i}},t.prototype.trigger=function(){var t,e,r,n,i,s,o,a,l;if(r=arguments[0],t=2<=arguments.length?K.call(arguments,1):[],null!=(o=this.bindings)?o[r]:void 0){for(i=0,l=[];i<this.bindings[r].length;)n=(a=this.bindings[r][i]).handler,e=a.ctx,s=a.once,n.apply(null!=e?e:this,t),s?l.push(this.bindings[r].splice(i,1)):l.push(i++);return l}},t}(),u=window.Pace||{},window.Pace=u,E(u,a.prototype),D=u.options=E({},w,window.paceOptions,T()),z=0,q=(W=["ajax","document","eventLag","elements"]).length;z<q;z++)!0===D[L=W[z]]&&(D[L]=w[L]);h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Q(e,t),e}(Error),r=function(){function t(){this.progress=0}return t.prototype.getElement=function(){var t;if(null==this.el){if(!(t=document.querySelector(D.target)))throw new h;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=t.firstChild?t.insertBefore(this.el,t.firstChild):t.appendChild(this.el)}return this.el},t.prototype.finish=function(){var t;return(t=this.getElement()).className=t.className.replace("pace-active",""),t.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},t.prototype.update=function(t){return this.progress=t,this.render()},t.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(t){h=t}return this.el=void 0},t.prototype.render=function(){var t,e,r,n,i,s,o;if(null==document.querySelector(D.target))return!1;for(t=this.getElement(),n="translate3d("+this.progress+"%, 0, 0)",i=0,s=(o=["webkitTransform","msTransform","transform"]).length;i<s;i++)e=o[i],t.children[0].style[e]=n;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(t.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?r="99":(r=this.progress<10?"0":"",r+=0|this.progress),t.children[0].setAttribute("data-progress",""+r)),this.lastRenderedProgress=this.progress},t.prototype.done=function(){return this.progress>=100},t}(),l=function(){function t(){this.bindings={}}return t.prototype.trigger=function(t,e){var r,n,i,s,o;if(null!=this.bindings[t]){for(o=[],n=0,i=(s=this.bindings[t]).length;n<i;n++)r=s[n],o.push(r.call(this,e));return o}},t.prototype.on=function(t,e){var r;return null==(r=this.bindings)[t]&&(r[t]=[]),this.bindings[t].push(e)},t}(),G=window.XMLHttpRequest,B=window.XDomainRequest,j=window.WebSocket,S=function(t,e){var r,n;for(r in n=[],e.prototype)try{null==t[r]&&"function"!=typeof e[r]?"function"==typeof Object.defineProperty?n.push(Object.defineProperty(t,r,{get:function(){return e.prototype[r]},configurable:!0,enumerable:!0})):n.push(t[r]=e.prototype[r]):n.push(void 0)}catch(t){}return n},P=[],u.ignore=function(){var t,e,r;return e=arguments[0],t=2<=arguments.length?K.call(arguments,1):[],P.unshift("ignore"),r=e.apply(null,t),P.shift(),r},u.track=function(){var t,e,r;return e=arguments[0],t=2<=arguments.length?K.call(arguments,1):[],P.unshift("track"),r=e.apply(null,t),P.shift(),r},N=function(t){var e;if(null==t&&(t="GET"),"track"===P[0])return"force";if(!P.length&&D.ajax){if("socket"===t&&D.ajax.trackWebSockets)return!0;if(e=t.toUpperCase(),J.call(D.ajax.trackMethods,e)>=0)return!0}return!1},c=function(t){function e(){var t,r=this;e.__super__.constructor.apply(this,arguments),t=function(t){var e;return e=t.open,t.open=function(n,i,s){return N(n)&&r.trigger("request",{type:n,url:i,request:t}),e.apply(t,arguments)}},window.XMLHttpRequest=function(e){var r;return r=new G(e),t(r),r};try{S(window.XMLHttpRequest,G)}catch(t){}if(null!=B){window.XDomainRequest=function(){var e;return e=new B,t(e),e};try{S(window.XDomainRequest,B)}catch(t){}}if(null!=j&&D.ajax.trackWebSockets){window.WebSocket=function(t,e){var n;return n=null!=e?new j(t,e):new j(t),N("socket")&&r.trigger("request",{type:"socket",url:t,protocols:e,request:n}),n};try{S(window.WebSocket,j)}catch(t){}}}return Q(e,t),e}(l),U=null,F=function(t){var e,r,n,i;for(r=0,n=(i=D.ajax.ignoreURLs).length;r<n;r++)if("string"==typeof(e=i[r])){if(-1!==t.indexOf(e))return!0}else if(e.test(t))return!0;return!1},(x=function(){return null==U&&(U=new c),U})().on("request",(function(t){var r,n,i,s,o;if(s=t.type,i=t.request,o=t.url,!F(o))return u.running||!1===D.restartOnRequestAfter&&"force"!==N(s)?void 0:(n=arguments,"boolean"==typeof(r=D.restartOnRequestAfter||0)&&(r=0),setTimeout((function(){var t,r,o,a,l;if("socket"===s?i.readyState<2:0<(o=i.readyState)&&o<4){for(u.restart(),l=[],t=0,r=(a=u.sources).length;t<r;t++){if((L=a[t])instanceof e){L.watch.apply(L,n);break}l.push(void 0)}return l}}),r))})),e=function(){function t(){var t=this;this.elements=[],x().on("request",(function(){return t.watch.apply(t,arguments)}))}return t.prototype.watch=function(t){var e,r,n,i;if(n=t.type,e=t.request,i=t.url,!F(i))return r="socket"===n?new d(e):new m(e),this.elements.push(r)},t}(),m=function(t){var e,r,n,i,s,o=this;if(this.progress=0,null!=window.ProgressEvent)for(t.addEventListener("progress",(function(t){return t.lengthComputable?o.progress=100*t.loaded/t.total:o.progress=o.progress+(100-o.progress)/2}),!1),r=0,n=(s=["load","abort","timeout","error"]).length;r<n;r++)e=s[r],t.addEventListener(e,(function(){return o.progress=100}),!1);else i=t.onreadystatechange,t.onreadystatechange=function(){var e;return 0===(e=t.readyState)||4===e?o.progress=100:3===t.readyState&&(o.progress=50),"function"==typeof i?i.apply(null,arguments):void 0}},d=function(t){var e,r,n,i,s=this;for(this.progress=0,r=0,n=(i=["error","open"]).length;r<n;r++)e=i[r],t.addEventListener(e,(function(){return s.progress=100}),!1)},i=function(t){var e,r,n,i;for(null==t&&(t={}),this.elements=[],null==t.selectors&&(t.selectors=[]),r=0,n=(i=t.selectors).length;r<n;r++)e=i[r],this.elements.push(new s(e))},s=function(){function t(t){this.selector=t,this.progress=0,this.check()}return t.prototype.check=function(){var t=this;return document.querySelector(this.selector)?this.done():setTimeout((function(){return t.check()}),D.elements.checkInterval)},t.prototype.done=function(){return this.progress=100},t}(),n=function(){function t(){var t,e,r=this;this.progress=null!=(e=this.states[document.readyState])?e:100,t=document.onreadystatechange,document.onreadystatechange=function(){return null!=r.states[document.readyState]&&(r.progress=r.states[document.readyState]),"function"==typeof t?t.apply(null,arguments):void 0}}return t.prototype.states={loading:0,interactive:50,complete:100},t}(),o=function(){var t,e,r,n,i,s=this;this.progress=0,t=0,i=[],n=0,r=C(),e=setInterval((function(){var o;return o=C()-r-50,r=C(),i.push(o),i.length>D.eventLag.sampleCount&&i.shift(),t=v(i),++n>=D.eventLag.minSamples&&t<D.eventLag.lagThreshold?(s.progress=100,clearInterval(e)):s.progress=3/(t+3)*100}),50)},p=function(){function t(t){this.source=t,this.last=this.sinceLastUpdate=0,this.rate=D.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=O(this.source,"progress"))}return t.prototype.tick=function(t,e){var r;return null==e&&(e=O(this.source,"progress")),e>=100&&(this.done=!0),e===this.last?this.sinceLastUpdate+=t:(this.sinceLastUpdate&&(this.rate=(e-this.last)/this.sinceLastUpdate),this.catchup=(e-this.progress)/D.catchupTime,this.sinceLastUpdate=0,this.last=e),e>this.progress&&(this.progress+=this.catchup*t),r=1-Math.pow(this.progress/100,D.easeFactor),this.progress+=r*this.rate*t,this.progress=Math.min(this.lastProgress+D.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},t}(),$=null,R=null,g=null,V=null,y=null,b=null,u.running=!1,A=function(){if(D.restartOnPushState)return u.restart()},null!=window.history.pushState&&(H=window.history.pushState,window.history.pushState=function(){return A(),H.apply(window.history,arguments)}),null!=window.history.replaceState&&(Y=window.history.replaceState,window.history.replaceState=function(){return A(),Y.apply(window.history,arguments)}),f={ajax:e,elements:i,document:n,eventLag:o},(I=function(){var t,e,n,i,s,o,a,l;for(u.sources=$=[],e=0,i=(o=["ajax","elements","document","eventLag"]).length;e<i;e++)!1!==D[t=o[e]]&&$.push(new f[t](D[t]));for(n=0,s=(l=null!=(a=D.extraSources)?a:[]).length;n<s;n++)L=l[n],$.push(new L(D));return u.bar=g=new r,R=[],V=new p})(),u.stop=function(){return u.trigger("stop"),u.running=!1,g.destroy(),b=!0,null!=y&&("function"==typeof _&&_(y),y=null),I()},u.restart=function(){return u.trigger("restart"),u.stop(),u.start()},u.go=function(){var t;return u.running=!0,g.render(),t=C(),b=!1,y=M((function(e,r){var n,i,s,o,a,l,h,c,f,d,m,y,v,_,w;for(100-g.progress,i=d=0,s=!0,l=m=0,v=$.length;m<v;l=++m)for(L=$[l],f=null!=R[l]?R[l]:R[l]=[],h=y=0,_=(a=null!=(w=L.elements)?w:[L]).length;y<_;h=++y)o=a[h],s&=(c=null!=f[h]?f[h]:f[h]=new p(o)).done,c.done||(i++,d+=c.tick(e));return n=d/i,g.update(V.tick(e,n)),g.done()||s||b?(g.update(100),u.trigger("done"),setTimeout((function(){return g.finish(),u.running=!1,u.trigger("hide")}),Math.max(D.ghostTime,Math.max(D.minTime-(C()-t),0)))):r()}))},u.start=function(t){E(D,t),u.running=!0;try{g.render()}catch(t){h=t}return document.querySelector(".pace")?(u.trigger("start"),u.go()):setTimeout(u.start,50)},t.exports=u}).call(commonjsGlobal)})),notARegexp=function(t){if(isRegexp(t))throw TypeError("The method doesn't accept regular expressions");return t},MATCH$1=wellKnownSymbol("match"),correctIsRegexpLogic=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[MATCH$1]=!1,"/./"[t](e)}catch(t){}}return!1};_export({target:"String",proto:!0,forced:!correctIsRegexpLogic("includes")},{includes:function(t){return!!~String(requireObjectCoercible(this)).indexOf(notARegexp(t),arguments.length>1?arguments[1]:void 0)}});var max$1=Math.max,min$3=Math.min,floor$1=Math.floor,SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d\d?)/g,maybeToString=function(t){return void 0===t?t:String(t)};function isObject$1(t){return null!==t&&"object"==typeof t&&"constructor"in t&&t.constructor===Object}function extend(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(e).forEach((function(r){void 0===t[r]?t[r]=e[r]:isObject$1(e[r])&&isObject$1(t[r])&&Object.keys(e[r]).length>0&&extend(t[r],e[r])}))}fixRegexpWellKnownSymbolLogic("replace",2,(function(t,e,r,n){var i=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,s=n.REPLACE_KEEPS_$0,o=i?"$":"$0";return[function(r,n){var i=requireObjectCoercible(this),s=null==r?void 0:r[t];return void 0!==s?s.call(r,i,n):e.call(String(i),r,n)},function(t,n){if(!i&&s||"string"==typeof n&&-1===n.indexOf(o)){var l=r(e,t,this,n);if(l.done)return l.value}var h=anObject(t),u=String(this),c="function"==typeof n;c||(n=String(n));var f=h.global;if(f){var p=h.unicode;h.lastIndex=0}for(var d=[];;){var m=regexpExecAbstract(h,u);if(null===m)break;if(d.push(m),!f)break;""===String(m[0])&&(h.lastIndex=advanceStringIndex(u,toLength(h.lastIndex),p))}for(var y="",v=0,g=0;g<d.length;g++){m=d[g];for(var b=String(m[0]),_=max$1(min$3(toInteger(m.index),u.length),0),w=[],E=1;E<m.length;E++)w.push(maybeToString(m[E]));var S=m.groups;if(c){var T=[b].concat(w,_,u);void 0!==S&&T.push(S);var x=String(n.apply(void 0,T))}else x=a(b,u,_,w,S,n);_>=v&&(y+=u.slice(v,_)+x,v=_+b.length)}return y+u.slice(v)}];function a(t,r,n,i,s,o){var a=n+t.length,l=i.length,h=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==s&&(s=toObject(s),h=SUBSTITUTION_SYMBOLS),e.call(o,h,(function(e,o){var h;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,n);case"'":return r.slice(a);case"<":h=s[o.slice(1,-1)];break;default:var u=+o;if(0===u)return e;if(u>l){var c=floor$1(u/10);return 0===c?e:c<=l?void 0===i[c-1]?o.charAt(1):i[c-1]+o.charAt(1):e}h=i[u-1]}return void 0===h?"":h}))}}));var ssrDocument={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){var t="undefined"!=typeof document?document:{};return extend(t,ssrDocument),t}var ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return"undefined"==typeof setTimeout?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){"undefined"!=typeof setTimeout&&clearTimeout(t)}};function getWindow(){var t="undefined"!=typeof window?window:{};return extend(t,ssrWindow),t}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _construct(t,e,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&_setPrototypeOf(i,r.prototype),i}).apply(null,arguments)}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,t)})(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function makeReactive(t){var e=t.__proto__;Object.defineProperty(t,"__proto__",{get:function(){return e},set:function(t){e.__proto__=t}})}var Dom7=function(t){function e(e){var r;return makeReactive(_assertThisInitialized(r=t.call.apply(t,[this].concat(e))||this)),r}return _inheritsLoose(e,t),e}(_wrapNativeSuper(Array));function arrayFlat(t){void 0===t&&(t=[]);var e=[];return t.forEach((function(t){Array.isArray(t)?e.push.apply(e,arrayFlat(t)):e.push(t)})),e}function arrayFilter(t,e){return Array.prototype.filter.call(t,e)}function arrayUnique(t){for(var e=[],r=0;r<t.length;r+=1)-1===e.indexOf(t[r])&&e.push(t[r]);return e}function qsa(t,e){if("string"!=typeof t)return[t];for(var r=[],n=e.querySelectorAll(t),i=0;i<n.length;i+=1)r.push(n[i]);return r}function $(t,e){var r=getWindow(),n=getDocument(),i=[];if(!e&&t instanceof Dom7)return t;if(!t)return new Dom7(i);if("string"==typeof t){var s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var o="div";0===s.indexOf("<li")&&(o="ul"),0===s.indexOf("<tr")&&(o="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(o="tr"),0===s.indexOf("<tbody")&&(o="table"),0===s.indexOf("<option")&&(o="select");var a=n.createElement(o);a.innerHTML=s;for(var l=0;l<a.childNodes.length;l+=1)i.push(a.childNodes[l])}else i=qsa(t.trim(),e||n)}else if(t.nodeType||t===r||t===n)i.push(t);else if(Array.isArray(t)){if(t instanceof Dom7)return t;i=t}return new Dom7(arrayUnique(i))}function addClass(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=arrayFlat(e.map((function(t){return t.split(" ")})));return this.forEach((function(t){var e;(e=t.classList).add.apply(e,n)})),this}function removeClass(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=arrayFlat(e.map((function(t){return t.split(" ")})));return this.forEach((function(t){var e;(e=t.classList).remove.apply(e,n)})),this}function toggleClass(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=arrayFlat(e.map((function(t){return t.split(" ")})));this.forEach((function(t){n.forEach((function(e){t.classList.toggle(e)}))}))}function hasClass(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=arrayFlat(e.map((function(t){return t.split(" ")})));return arrayFilter(this,(function(t){return n.filter((function(e){return t.classList.contains(e)})).length>0})).length>0}function attr(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var r=0;r<this.length;r+=1)if(2===arguments.length)this[r].setAttribute(t,e);else for(var n in t)this[r][n]=t[n],this[r].setAttribute(n,t[n]);return this}function removeAttr(t){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function transform(t){for(var e=0;e<this.length;e+=1)this[e].style.transform=t;return this}function transition(t){for(var e=0;e<this.length;e+=1)this[e].style.transition="string"!=typeof t?t+"ms":t;return this}function on(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],i=e[1],s=e[2],o=e[3];function a(t){var e=t.target;if(e){var r=t.target.dom7EventData||[];if(r.indexOf(t)<0&&r.unshift(t),$(e).is(i))s.apply(e,r);else for(var n=$(e).parents(),o=0;o<n.length;o+=1)$(n[o]).is(i)&&s.apply(n[o],r)}}function l(t){var e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),s.apply(this,e)}"function"==typeof e[1]&&(n=e[0],s=e[1],o=e[2],i=void 0),o||(o=!1);for(var h,u=n.split(" "),c=0;c<this.length;c+=1){var f=this[c];if(i)for(h=0;h<u.length;h+=1){var p=u[h];f.dom7LiveListeners||(f.dom7LiveListeners={}),f.dom7LiveListeners[p]||(f.dom7LiveListeners[p]=[]),f.dom7LiveListeners[p].push({listener:s,proxyListener:a}),f.addEventListener(p,a,o)}else for(h=0;h<u.length;h+=1){var d=u[h];f.dom7Listeners||(f.dom7Listeners={}),f.dom7Listeners[d]||(f.dom7Listeners[d]=[]),f.dom7Listeners[d].push({listener:s,proxyListener:l}),f.addEventListener(d,l,o)}}return this}function off(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],i=e[1],s=e[2],o=e[3];"function"==typeof e[1]&&(n=e[0],s=e[1],o=e[2],i=void 0),o||(o=!1);for(var a=n.split(" "),l=0;l<a.length;l+=1)for(var h=a[l],u=0;u<this.length;u+=1){var c=this[u],f=void 0;if(!i&&c.dom7Listeners?f=c.dom7Listeners[h]:i&&c.dom7LiveListeners&&(f=c.dom7LiveListeners[h]),f&&f.length)for(var p=f.length-1;p>=0;p-=1){var d=f[p];s&&d.listener===s||s&&d.listener&&d.listener.dom7proxy&&d.listener.dom7proxy===s?(c.removeEventListener(h,d.proxyListener,o),f.splice(p,1)):s||(c.removeEventListener(h,d.proxyListener,o),f.splice(p,1))}}return this}function trigger(){for(var t=getWindow(),e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(var i=r[0].split(" "),s=r[1],o=0;o<i.length;o+=1)for(var a=i[o],l=0;l<this.length;l+=1){var h=this[l];if(t.CustomEvent){var u=new t.CustomEvent(a,{detail:s,bubbles:!0,cancelable:!0});h.dom7EventData=r.filter((function(t,e){return e>0})),h.dispatchEvent(u),h.dom7EventData=[],delete h.dom7EventData}}return this}function transitionEnd(t){var e=this;return t&&e.on("transitionend",(function r(n){n.target===this&&(t.call(this,n),e.off("transitionend",r))})),this}function outerWidth(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function outerHeight(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function offset(){if(this.length>0){var t=getWindow(),e=getDocument(),r=this[0],n=r.getBoundingClientRect(),i=e.body,s=r.clientTop||i.clientTop||0,o=r.clientLeft||i.clientLeft||0,a=r===t?t.scrollY:r.scrollTop,l=r===t?t.scrollX:r.scrollLeft;return{top:n.top+a-s,left:n.left+l-o}}return null}function styles(){var t=getWindow();return this[0]?t.getComputedStyle(this[0],null):{}}function css(t,e){var r,n=getWindow();if(1===arguments.length){if("string"!=typeof t){for(r=0;r<this.length;r+=1)for(var i in t)this[r].style[i]=t[i];return this}if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(r=0;r<this.length;r+=1)this[r].style[t]=e;return this}return this}function each(t){return t?(this.forEach((function(e,r){t.apply(e,[e,r])})),this):this}function filter(t){return $(arrayFilter(this,t))}function html$1(t){if(void 0===t)return this[0]?this[0].innerHTML:null;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function text(t){if(void 0===t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=t;return this}function is(t){var e,r,n=getWindow(),i=getDocument(),s=this[0];if(!s||void 0===t)return!1;if("string"==typeof t){if(s.matches)return s.matches(t);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(t);if(s.msMatchesSelector)return s.msMatchesSelector(t);for(e=$(t),r=0;r<e.length;r+=1)if(e[r]===s)return!0;return!1}if(t===i)return s===i;if(t===n)return s===n;if(t.nodeType||t instanceof Dom7){for(e=t.nodeType?[t]:t,r=0;r<e.length;r+=1)if(e[r]===s)return!0;return!1}return!1}function index(){var t,e=this[0];if(e){for(t=0;null!==(e=e.previousSibling);)1===e.nodeType&&(t+=1);return t}}function eq(t){if(void 0===t)return this;var e=this.length;if(t>e-1)return $([]);if(t<0){var r=e+t;return $(r<0?[]:[this[r]])}return $([this[t]])}function append(){for(var t,e=getDocument(),r=0;r<arguments.length;r+=1){t=r<0||arguments.length<=r?void 0:arguments[r];for(var n=0;n<this.length;n+=1)if("string"==typeof t){var i=e.createElement("div");for(i.innerHTML=t;i.firstChild;)this[n].appendChild(i.firstChild)}else if(t instanceof Dom7)for(var s=0;s<t.length;s+=1)this[n].appendChild(t[s]);else this[n].appendChild(t)}return this}function prepend(t){var e,r,n=getDocument();for(e=0;e<this.length;e+=1)if("string"==typeof t){var i=n.createElement("div");for(i.innerHTML=t,r=i.childNodes.length-1;r>=0;r-=1)this[e].insertBefore(i.childNodes[r],this[e].childNodes[0])}else if(t instanceof Dom7)for(r=0;r<t.length;r+=1)this[e].insertBefore(t[r],this[e].childNodes[0]);else this[e].insertBefore(t,this[e].childNodes[0]);return this}function next(t){return this.length>0?t?this[0].nextElementSibling&&$(this[0].nextElementSibling).is(t)?$([this[0].nextElementSibling]):$([]):this[0].nextElementSibling?$([this[0].nextElementSibling]):$([]):$([])}function nextAll(t){var e=[],r=this[0];if(!r)return $([]);for(;r.nextElementSibling;){var n=r.nextElementSibling;t?$(n).is(t)&&e.push(n):e.push(n),r=n}return $(e)}function prev(t){if(this.length>0){var e=this[0];return t?e.previousElementSibling&&$(e.previousElementSibling).is(t)?$([e.previousElementSibling]):$([]):e.previousElementSibling?$([e.previousElementSibling]):$([])}return $([])}function prevAll(t){var e=[],r=this[0];if(!r)return $([]);for(;r.previousElementSibling;){var n=r.previousElementSibling;t?$(n).is(t)&&e.push(n):e.push(n),r=n}return $(e)}function parent$1(t){for(var e=[],r=0;r<this.length;r+=1)null!==this[r].parentNode&&(t?$(this[r].parentNode).is(t)&&e.push(this[r].parentNode):e.push(this[r].parentNode));return $(e)}function parents(t){for(var e=[],r=0;r<this.length;r+=1)for(var n=this[r].parentNode;n;)t?$(n).is(t)&&e.push(n):e.push(n),n=n.parentNode;return $(e)}function closest(t){var e=this;return void 0===t?$([]):(e.is(t)||(e=e.parents(t).eq(0)),e)}function find(t){for(var e=[],r=0;r<this.length;r+=1)for(var n=this[r].querySelectorAll(t),i=0;i<n.length;i+=1)e.push(n[i]);return $(e)}function children(t){for(var e=[],r=0;r<this.length;r+=1)for(var n=this[r].children,i=0;i<n.length;i+=1)t&&!$(n[i]).is(t)||e.push(n[i]);return $(e)}function remove(){for(var t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}$.fn=Dom7.prototype;var Methods={addClass:addClass,removeClass:removeClass,hasClass:hasClass,toggleClass:toggleClass,attr:attr,removeAttr:removeAttr,transform:transform,transition:transition,on:on,off:off,trigger:trigger,transitionEnd:transitionEnd,outerWidth:outerWidth,outerHeight:outerHeight,styles:styles,offset:offset,css:css,each:each,html:html$1,text:text,is:is,index:index,eq:eq,append:append,prepend:prepend,next:next,nextAll:nextAll,prev:prev,prevAll:prevAll,parent:parent$1,parents:parents,closest:closest,find:find,children:children,filter:filter,remove:remove},support,device,browser$1;function deleteProps(t){var e=t;Object.keys(e).forEach((function(t){try{e[t]=null}catch(t){}try{delete e[t]}catch(t){}}))}function nextTick(t,e){return void 0===e&&(e=0),setTimeout(t,e)}function now(){return Date.now()}function getTranslate(t,e){void 0===e&&(e="x");var r,n,i,s=getWindow(),o=s.getComputedStyle(t,null);return s.WebKitCSSMatrix?((n=o.transform||o.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(t){return t.replace(",",".")})).join(", ")),i=new s.WebKitCSSMatrix("none"===n?"":n)):r=(i=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===e&&(n=s.WebKitCSSMatrix?i.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===e&&(n=s.WebKitCSSMatrix?i.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),n||0}function isObject$2(t){return"object"==typeof t&&null!==t&&t.constructor&&t.constructor===Object}function extend$1(){for(var t=Object(arguments.length<=0?void 0:arguments[0]),e=1;e<arguments.length;e+=1){var r=e<0||arguments.length<=e?void 0:arguments[e];if(null!=r)for(var n=Object.keys(Object(r)),i=0,s=n.length;i<s;i+=1){var o=n[i],a=Object.getOwnPropertyDescriptor(r,o);void 0!==a&&a.enumerable&&(isObject$2(t[o])&&isObject$2(r[o])?extend$1(t[o],r[o]):!isObject$2(t[o])&&isObject$2(r[o])?(t[o]={},extend$1(t[o],r[o])):t[o]=r[o])}}return t}function bindModuleMethods(t,e){Object.keys(e).forEach((function(r){isObject$2(e[r])&&Object.keys(e[r]).forEach((function(n){"function"==typeof e[r][n]&&(e[r][n]=e[r][n].bind(t))})),t[r]=e[r]}))}function calcSupport(){var t=getWindow(),e=getDocument();return{touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),pointerEvents:!!t.PointerEvent&&"maxTouchPoints"in t.navigator&&t.navigator.maxTouchPoints>=0,observer:"MutationObserver"in t||"WebkitMutationObserver"in t,passiveListener:function(){var e=!1;try{var r=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("testPassiveListener",null,r)}catch(t){}return e}(),gestures:"ongesturestart"in t}}function getSupport(){return support||(support=calcSupport()),support}function calcDevice(t){var e=(void 0===t?{}:t).userAgent,r=getSupport(),n=getWindow(),i=n.navigator.platform,s=e||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,l=n.screen.height,h=s.match(/(Android);?[\s\/]+([\d.]+)?/),u=s.match(/(iPad).*OS\s([\d_]+)/),c=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===i,d="MacIntel"===i;return!u&&d&&r.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768"].indexOf(a+"x"+l)>=0&&((u=s.match(/(Version)\/([\d.]+)/))||(u=[0,1,"13_0_0"]),d=!1),h&&!p&&(o.os="android",o.android=!0),(u||f||c)&&(o.os="ios",o.ios=!0),o}function getDevice(t){return void 0===t&&(t={}),device||(device=calcDevice(t)),device}function calcBrowser(){var t=getWindow();return{isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:function(){var e=t.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function getBrowser(){return browser$1||(browser$1=calcBrowser()),browser$1}Object.keys(Methods).forEach((function(t){$.fn[t]=Methods[t]}));var Resize={name:"resize",create:function(){var t=this;extend$1(t,{resize:{resizeHandler:function(){t&&!t.destroyed&&t.initialized&&(t.emit("beforeResize"),t.emit("resize"))},orientationChangeHandler:function(){t&&!t.destroyed&&t.initialized&&t.emit("orientationchange")}}})},on:{init:function(t){var e=getWindow();e.addEventListener("resize",t.resize.resizeHandler),e.addEventListener("orientationchange",t.resize.orientationChangeHandler)},destroy:function(t){var e=getWindow();e.removeEventListener("resize",t.resize.resizeHandler),e.removeEventListener("orientationchange",t.resize.orientationChangeHandler)}}};function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var Observer={attach:function(t,e){void 0===e&&(e={});var r=getWindow(),n=this,i=new(r.MutationObserver||r.WebkitMutationObserver)((function(t){if(1!==t.length){var e=function(){n.emit("observerUpdate",t[0])};r.requestAnimationFrame?r.requestAnimationFrame(e):r.setTimeout(e,0)}else n.emit("observerUpdate",t[0])}));i.observe(t,{attributes:void 0===e.attributes||e.attributes,childList:void 0===e.childList||e.childList,characterData:void 0===e.characterData||e.characterData}),n.observer.observers.push(i)},init:function(){if(this.support.observer&&this.params.observer){if(this.params.observeParents)for(var t=this.$el.parents(),e=0;e<t.length;e+=1)this.observer.attach(t[e]);this.observer.attach(this.$el[0],{childList:this.params.observeSlideChildren}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(t){t.disconnect()})),this.observer.observers=[]}},Observer$1={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){bindModuleMethods(this,{observer:_extends(_extends({},Observer),{},{observers:[]})})},on:{init:function(t){t.observer.init()},destroy:function(t){t.observer.destroy()}}},modular={useParams:function(t){var e=this;e.modules&&Object.keys(e.modules).forEach((function(r){var n=e.modules[r];n.params&&extend$1(t,n.params)}))},useModules:function(t){void 0===t&&(t={});var e=this;e.modules&&Object.keys(e.modules).forEach((function(r){var n=e.modules[r],i=t[r]||{};n.on&&e.on&&Object.keys(n.on).forEach((function(t){e.on(t,n.on[t])})),n.create&&n.create.bind(e)(i)}))}},eventsEmitter={on:function(t,e,r){var n=this;if("function"!=typeof e)return n;var i=r?"unshift":"push";return t.split(" ").forEach((function(t){n.eventsListeners[t]||(n.eventsListeners[t]=[]),n.eventsListeners[t][i](e)})),n},once:function(t,e,r){var n=this;if("function"!=typeof e)return n;function i(){n.off(t,i),i.__emitterProxy&&delete i.__emitterProxy;for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];e.apply(n,s)}return i.__emitterProxy=e,n.on(t,i,r)},onAny:function(t,e){if("function"!=typeof t)return this;var r=e?"unshift":"push";return this.eventsAnyListeners.indexOf(t)<0&&this.eventsAnyListeners[r](t),this},offAny:function(t){if(!this.eventsAnyListeners)return this;var e=this.eventsAnyListeners.indexOf(t);return e>=0&&this.eventsAnyListeners.splice(e,1),this},off:function(t,e){var r=this;return r.eventsListeners?(t.split(" ").forEach((function(t){void 0===e?r.eventsListeners[t]=[]:r.eventsListeners[t]&&r.eventsListeners[t].forEach((function(n,i){(n===e||n.__emitterProxy&&n.__emitterProxy===e)&&r.eventsListeners[t].splice(i,1)}))})),r):r},emit:function(){var t,e,r,n=this;if(!n.eventsListeners)return n;for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];"string"==typeof s[0]||Array.isArray(s[0])?(t=s[0],e=s.slice(1,s.length),r=n):(t=s[0].events,e=s[0].data,r=s[0].context||n),e.unshift(r);var a=Array.isArray(t)?t:t.split(" ");return a.forEach((function(t){if(n.eventsListeners&&n.eventsListeners[t]){var i=[];n.eventsListeners[t].forEach((function(t){i.push(t)})),i.forEach((function(t){t.apply(r,e)}))}})),n}};function updateSize(){var t,e,r=this.$el;t=void 0!==this.params.width&&null!==this.params.width?this.params.width:r[0].clientWidth,e=void 0!==this.params.height&&null!==this.params.width?this.params.height:r[0].clientHeight,0===t&&this.isHorizontal()||0===e&&this.isVertical()||(t=t-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),e=e-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(e)&&(e=0),extend$1(this,{width:t,height:e,size:this.isHorizontal()?t:e}))}function updateSlides(){var t=getWindow(),e=this.params,r=this.$wrapperEl,n=this.size,i=this.rtlTranslate,s=this.wrongRTL,o=this.virtual&&e.virtual.enabled,a=o?this.virtual.slides.length:this.slides.length,l=r.children("."+this.params.slideClass),h=o?this.virtual.slides.length:l.length,u=[],c=[],f=[];function p(t,r){return!e.cssMode||r!==l.length-1}var d=e.slidesOffsetBefore;"function"==typeof d&&(d=e.slidesOffsetBefore.call(this));var m=e.slidesOffsetAfter;"function"==typeof m&&(m=e.slidesOffsetAfter.call(this));var y=this.snapGrid.length,v=this.snapGrid.length,g=e.spaceBetween,b=-d,_=0,w=0;if(void 0!==n){var E,S;"string"==typeof g&&g.indexOf("%")>=0&&(g=parseFloat(g.replace("%",""))/100*n),this.virtualSize=-g,i?l.css({marginLeft:"",marginTop:""}):l.css({marginRight:"",marginBottom:""}),e.slidesPerColumn>1&&(E=Math.floor(h/e.slidesPerColumn)===h/this.params.slidesPerColumn?h:Math.ceil(h/e.slidesPerColumn)*e.slidesPerColumn,"auto"!==e.slidesPerView&&"row"===e.slidesPerColumnFill&&(E=Math.max(E,e.slidesPerView*e.slidesPerColumn)));for(var T,x=e.slidesPerColumn,A=E/x,P=Math.floor(h/e.slidesPerColumn),I=0;I<h;I+=1){S=0;var C=l.eq(I);if(e.slidesPerColumn>1){var D=void 0,k=void 0,O=void 0;if("row"===e.slidesPerColumnFill&&e.slidesPerGroup>1){var M=Math.floor(I/(e.slidesPerGroup*e.slidesPerColumn)),R=I-e.slidesPerColumn*e.slidesPerGroup*M,F=0===M?e.slidesPerGroup:Math.min(Math.ceil((h-M*x*e.slidesPerGroup)/x),e.slidesPerGroup);D=(k=R-(O=Math.floor(R/F))*F+M*e.slidesPerGroup)+O*E/x,C.css({"-webkit-box-ordinal-group":D,"-moz-box-ordinal-group":D,"-ms-flex-order":D,"-webkit-order":D,order:D})}else"column"===e.slidesPerColumnFill?(O=I-(k=Math.floor(I/x))*x,(k>P||k===P&&O===x-1)&&(O+=1)>=x&&(O=0,k+=1)):k=I-(O=Math.floor(I/A))*A;C.css("margin-"+(this.isHorizontal()?"top":"left"),0!==O&&e.spaceBetween&&e.spaceBetween+"px")}if("none"!==C.css("display")){if("auto"===e.slidesPerView){var N=t.getComputedStyle(C[0],null),L=C[0].style.transform,$=C[0].style.webkitTransform;if(L&&(C[0].style.transform="none"),$&&(C[0].style.webkitTransform="none"),e.roundLengths)S=this.isHorizontal()?C.outerWidth(!0):C.outerHeight(!0);else if(this.isHorizontal()){var V=parseFloat(N.getPropertyValue("width")||0),j=parseFloat(N.getPropertyValue("padding-left")||0),B=parseFloat(N.getPropertyValue("padding-right")||0),G=parseFloat(N.getPropertyValue("margin-left")||0),z=parseFloat(N.getPropertyValue("margin-right")||0),U=N.getPropertyValue("box-sizing");S=U&&"border-box"===U?V+G+z:V+j+B+G+z}else{var q=parseFloat(N.getPropertyValue("height")||0),H=parseFloat(N.getPropertyValue("padding-top")||0),W=parseFloat(N.getPropertyValue("padding-bottom")||0),Y=parseFloat(N.getPropertyValue("margin-top")||0),K=parseFloat(N.getPropertyValue("margin-bottom")||0),X=N.getPropertyValue("box-sizing");S=X&&"border-box"===X?q+Y+K:q+H+W+Y+K}L&&(C[0].style.transform=L),$&&(C[0].style.webkitTransform=$),e.roundLengths&&(S=Math.floor(S))}else S=(n-(e.slidesPerView-1)*g)/e.slidesPerView,e.roundLengths&&(S=Math.floor(S)),l[I]&&(this.isHorizontal()?l[I].style.width=S+"px":l[I].style.height=S+"px");l[I]&&(l[I].swiperSlideSize=S),f.push(S),e.centeredSlides?(b=b+S/2+_/2+g,0===_&&0!==I&&(b=b-n/2-g),0===I&&(b=b-n/2-g),Math.abs(b)<.001&&(b=0),e.roundLengths&&(b=Math.floor(b)),w%e.slidesPerGroup==0&&u.push(b),c.push(b)):(e.roundLengths&&(b=Math.floor(b)),(w-Math.min(this.params.slidesPerGroupSkip,w))%this.params.slidesPerGroup==0&&u.push(b),c.push(b),b=b+S+g),this.virtualSize+=S+g,_=S,w+=1}}if(this.virtualSize=Math.max(this.virtualSize,n)+m,i&&s&&("slide"===e.effect||"coverflow"===e.effect)&&r.css({width:this.virtualSize+e.spaceBetween+"px"}),e.setWrapperSize&&(this.isHorizontal()?r.css({width:this.virtualSize+e.spaceBetween+"px"}):r.css({height:this.virtualSize+e.spaceBetween+"px"})),e.slidesPerColumn>1&&(this.virtualSize=(S+e.spaceBetween)*E,this.virtualSize=Math.ceil(this.virtualSize/e.slidesPerColumn)-e.spaceBetween,this.isHorizontal()?r.css({width:this.virtualSize+e.spaceBetween+"px"}):r.css({height:this.virtualSize+e.spaceBetween+"px"}),e.centeredSlides)){T=[];for(var Q=0;Q<u.length;Q+=1){var J=u[Q];e.roundLengths&&(J=Math.floor(J)),u[Q]<this.virtualSize+u[0]&&T.push(J)}u=T}if(!e.centeredSlides){T=[];for(var Z=0;Z<u.length;Z+=1){var tt=u[Z];e.roundLengths&&(tt=Math.floor(tt)),u[Z]<=this.virtualSize-n&&T.push(tt)}u=T,Math.floor(this.virtualSize-n)-Math.floor(u[u.length-1])>1&&u.push(this.virtualSize-n)}if(0===u.length&&(u=[0]),0!==e.spaceBetween&&(this.isHorizontal()?i?l.filter(p).css({marginLeft:g+"px"}):l.filter(p).css({marginRight:g+"px"}):l.filter(p).css({marginBottom:g+"px"})),e.centeredSlides&&e.centeredSlidesBounds){var et=0;f.forEach((function(t){et+=t+(e.spaceBetween?e.spaceBetween:0)}));var rt=(et-=e.spaceBetween)-n;u=u.map((function(t){return t<0?-d:t>rt?rt+m:t}))}if(e.centerInsufficientSlides){var nt=0;if(f.forEach((function(t){nt+=t+(e.spaceBetween?e.spaceBetween:0)})),(nt-=e.spaceBetween)<n){var it=(n-nt)/2;u.forEach((function(t,e){u[e]=t-it})),c.forEach((function(t,e){c[e]=t+it}))}}extend$1(this,{slides:l,snapGrid:u,slidesGrid:c,slidesSizesGrid:f}),h!==a&&this.emit("slidesLengthChange"),u.length!==y&&(this.params.watchOverflow&&this.checkOverflow(),this.emit("snapGridLengthChange")),c.length!==v&&this.emit("slidesGridLengthChange"),(e.watchSlidesProgress||e.watchSlidesVisibility)&&this.updateSlidesOffset()}}function updateAutoHeight(t){var e,r=[],n=0;if("number"==typeof t?this.setTransition(t):!0===t&&this.setTransition(this.params.speed),"auto"!==this.params.slidesPerView&&this.params.slidesPerView>1)if(this.params.centeredSlides)this.visibleSlides.each((function(t){r.push(t)}));else for(e=0;e<Math.ceil(this.params.slidesPerView);e+=1){var i=this.activeIndex+e;if(i>this.slides.length)break;r.push(this.slides.eq(i)[0])}else r.push(this.slides.eq(this.activeIndex)[0]);for(e=0;e<r.length;e+=1)if(void 0!==r[e]){var s=r[e].offsetHeight;n=s>n?s:n}n&&this.$wrapperEl.css("height",n+"px")}function updateSlidesOffset(){for(var t=this.slides,e=0;e<t.length;e+=1)t[e].swiperSlideOffset=this.isHorizontal()?t[e].offsetLeft:t[e].offsetTop}function updateSlidesProgress(t){void 0===t&&(t=this&&this.translate||0);var e=this.params,r=this.slides,n=this.rtlTranslate;if(0!==r.length){void 0===r[0].swiperSlideOffset&&this.updateSlidesOffset();var i=-t;n&&(i=t),r.removeClass(e.slideVisibleClass),this.visibleSlidesIndexes=[],this.visibleSlides=[];for(var s=0;s<r.length;s+=1){var o=r[s],a=(i+(e.centeredSlides?this.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+e.spaceBetween);if(e.watchSlidesVisibility||e.centeredSlides&&e.autoHeight){var l=-(i-o.swiperSlideOffset),h=l+this.slidesSizesGrid[s];(l>=0&&l<this.size-1||h>1&&h<=this.size||l<=0&&h>=this.size)&&(this.visibleSlides.push(o),this.visibleSlidesIndexes.push(s),r.eq(s).addClass(e.slideVisibleClass))}o.progress=n?-a:a}this.visibleSlides=$(this.visibleSlides)}}function updateProgress(t){if(void 0===t){var e=this.rtlTranslate?-1:1;t=this&&this.translate&&this.translate*e||0}var r=this.params,n=this.maxTranslate()-this.minTranslate(),i=this.progress,s=this.isBeginning,o=this.isEnd,a=s,l=o;0===n?(i=0,s=!0,o=!0):(s=(i=(t-this.minTranslate())/n)<=0,o=i>=1),extend$1(this,{progress:i,isBeginning:s,isEnd:o}),(r.watchSlidesProgress||r.watchSlidesVisibility||r.centeredSlides&&r.autoHeight)&&this.updateSlidesProgress(t),s&&!a&&this.emit("reachBeginning toEdge"),o&&!l&&this.emit("reachEnd toEdge"),(a&&!s||l&&!o)&&this.emit("fromEdge"),this.emit("progress",i)}function updateSlidesClasses(){var t,e=this.slides,r=this.params,n=this.$wrapperEl,i=this.activeIndex,s=this.realIndex,o=this.virtual&&r.virtual.enabled;e.removeClass(r.slideActiveClass+" "+r.slideNextClass+" "+r.slidePrevClass+" "+r.slideDuplicateActiveClass+" "+r.slideDuplicateNextClass+" "+r.slideDuplicatePrevClass),(t=o?this.$wrapperEl.find("."+r.slideClass+'[data-swiper-slide-index="'+i+'"]'):e.eq(i)).addClass(r.slideActiveClass),r.loop&&(t.hasClass(r.slideDuplicateClass)?n.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+s+'"]').addClass(r.slideDuplicateActiveClass):n.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+s+'"]').addClass(r.slideDuplicateActiveClass));var a=t.nextAll("."+r.slideClass).eq(0).addClass(r.slideNextClass);r.loop&&0===a.length&&(a=e.eq(0)).addClass(r.slideNextClass);var l=t.prevAll("."+r.slideClass).eq(0).addClass(r.slidePrevClass);r.loop&&0===l.length&&(l=e.eq(-1)).addClass(r.slidePrevClass),r.loop&&(a.hasClass(r.slideDuplicateClass)?n.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+a.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass):n.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+a.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass),l.hasClass(r.slideDuplicateClass)?n.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass):n.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass)),this.emitSlidesClasses()}function updateActiveIndex(t){var e,r=this.rtlTranslate?this.translate:-this.translate,n=this.slidesGrid,i=this.snapGrid,s=this.params,o=this.activeIndex,a=this.realIndex,l=this.snapIndex,h=t;if(void 0===h){for(var u=0;u<n.length;u+=1)void 0!==n[u+1]?r>=n[u]&&r<n[u+1]-(n[u+1]-n[u])/2?h=u:r>=n[u]&&r<n[u+1]&&(h=u+1):r>=n[u]&&(h=u);s.normalizeSlideIndex&&(h<0||void 0===h)&&(h=0)}if(i.indexOf(r)>=0)e=i.indexOf(r);else{var c=Math.min(s.slidesPerGroupSkip,h);e=c+Math.floor((h-c)/s.slidesPerGroup)}if(e>=i.length&&(e=i.length-1),h!==o){var f=parseInt(this.slides.eq(h).attr("data-swiper-slide-index")||h,10);extend$1(this,{snapIndex:e,realIndex:f,previousIndex:o,activeIndex:h}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),a!==f&&this.emit("realIndexChange"),(this.initialized||this.params.runCallbacksOnInit)&&this.emit("slideChange")}else e!==l&&(this.snapIndex=e,this.emit("snapIndexChange"))}function updateClickedSlide(t){var e=this.params,r=$(t.target).closest("."+e.slideClass)[0],n=!1;if(r)for(var i=0;i<this.slides.length;i+=1)this.slides[i]===r&&(n=!0);if(!r||!n)return this.clickedSlide=void 0,void(this.clickedIndex=void 0);this.clickedSlide=r,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt($(r).attr("data-swiper-slide-index"),10):this.clickedIndex=$(r).index(),e.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}var update={updateSize:updateSize,updateSlides:updateSlides,updateAutoHeight:updateAutoHeight,updateSlidesOffset:updateSlidesOffset,updateSlidesProgress:updateSlidesProgress,updateProgress:updateProgress,updateSlidesClasses:updateSlidesClasses,updateActiveIndex:updateActiveIndex,updateClickedSlide:updateClickedSlide};function getSwiperTranslate(t){void 0===t&&(t=this.isHorizontal()?"x":"y");var e=this.params,r=this.rtlTranslate,n=this.translate,i=this.$wrapperEl;if(e.virtualTranslate)return r?-n:n;if(e.cssMode)return n;var s=getTranslate(i[0],t);return r&&(s=-s),s||0}function setTranslate(t,e){var r=this.rtlTranslate,n=this.params,i=this.$wrapperEl,s=this.wrapperEl,o=this.progress,a=0,l=0;this.isHorizontal()?a=r?-t:t:l=t,n.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),n.cssMode?s[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-a:-l:n.virtualTranslate||i.transform("translate3d("+a+"px, "+l+"px, 0px)"),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?a:l;var h=this.maxTranslate()-this.minTranslate();(0===h?0:(t-this.minTranslate())/h)!==o&&this.updateProgress(t),this.emit("setTranslate",this.translate,e)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(t,e,r,n,i){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===r&&(r=!0),void 0===n&&(n=!0);var s=this,o=s.params,a=s.wrapperEl;if(s.animating&&o.preventInteractionOnTransition)return!1;var l,h=s.minTranslate(),u=s.maxTranslate();if(l=n&&t>h?h:n&&t<u?u:t,s.updateProgress(l),o.cssMode){var c,f=s.isHorizontal();if(0===e)a[f?"scrollLeft":"scrollTop"]=-l;else if(a.scrollTo)a.scrollTo(((c={})[f?"left":"top"]=-l,c.behavior="smooth",c));else a[f?"scrollLeft":"scrollTop"]=-l;return!0}return 0===e?(s.setTransition(0),s.setTranslate(l),r&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(l),r&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(t){s&&!s.destroyed&&t.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,r&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate:setTranslate,minTranslate:minTranslate,maxTranslate:maxTranslate,translateTo:translateTo};function setTransition(t,e){this.params.cssMode||this.$wrapperEl.transition(t),this.emit("setTransition",t,e)}function transitionStart(t,e){void 0===t&&(t=!0);var r=this.activeIndex,n=this.params,i=this.previousIndex;if(!n.cssMode){n.autoHeight&&this.updateAutoHeight();var s=e;if(s||(s=r>i?"next":r<i?"prev":"reset"),this.emit("transitionStart"),t&&r!==i){if("reset"===s)return void this.emit("slideResetTransitionStart");this.emit("slideChangeTransitionStart"),"next"===s?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}}}function transitionEnd$1(t,e){void 0===t&&(t=!0);var r=this.activeIndex,n=this.previousIndex,i=this.params;if(this.animating=!1,!i.cssMode){this.setTransition(0);var s=e;if(s||(s=r>n?"next":r<n?"prev":"reset"),this.emit("transitionEnd"),t&&r!==n){if("reset"===s)return void this.emit("slideResetTransitionEnd");this.emit("slideChangeTransitionEnd"),"next"===s?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}}var transition$1={setTransition:setTransition,transitionStart:transitionStart,transitionEnd:transitionEnd$1};function slideTo(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===r&&(r=!0);var i=this,s=t;s<0&&(s=0);var o=i.params,a=i.snapGrid,l=i.slidesGrid,h=i.previousIndex,u=i.activeIndex,c=i.rtlTranslate,f=i.wrapperEl;if(i.animating&&o.preventInteractionOnTransition)return!1;var p=Math.min(i.params.slidesPerGroupSkip,s),d=p+Math.floor((s-p)/i.params.slidesPerGroup);d>=a.length&&(d=a.length-1),(u||o.initialSlide||0)===(h||0)&&r&&i.emit("beforeSlideChangeStart");var m,y=-a[d];if(i.updateProgress(y),o.normalizeSlideIndex)for(var v=0;v<l.length;v+=1)-Math.floor(100*y)>=Math.floor(100*l[v])&&(s=v);if(i.initialized&&s!==u){if(!i.allowSlideNext&&y<i.translate&&y<i.minTranslate())return!1;if(!i.allowSlidePrev&&y>i.translate&&y>i.maxTranslate()&&(u||0)!==s)return!1}if(m=s>u?"next":s<u?"prev":"reset",c&&-y===i.translate||!c&&y===i.translate)return i.updateActiveIndex(s),o.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),"slide"!==o.effect&&i.setTranslate(y),"reset"!==m&&(i.transitionStart(r,m),i.transitionEnd(r,m)),!1;if(o.cssMode){var g,b=i.isHorizontal(),_=-y;if(c&&(_=f.scrollWidth-f.offsetWidth-_),0===e)f[b?"scrollLeft":"scrollTop"]=_;else if(f.scrollTo)f.scrollTo(((g={})[b?"left":"top"]=_,g.behavior="smooth",g));else f[b?"scrollLeft":"scrollTop"]=_;return!0}return 0===e?(i.setTransition(0),i.setTranslate(y),i.updateActiveIndex(s),i.updateSlidesClasses(),i.emit("beforeTransitionStart",e,n),i.transitionStart(r,m),i.transitionEnd(r,m)):(i.setTransition(e),i.setTranslate(y),i.updateActiveIndex(s),i.updateSlidesClasses(),i.emit("beforeTransitionStart",e,n),i.transitionStart(r,m),i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(t){i&&!i.destroyed&&t.target===this&&(i.$wrapperEl[0].removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.$wrapperEl[0].removeEventListener("webkitTransitionEnd",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(r,m))}),i.$wrapperEl[0].addEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.$wrapperEl[0].addEventListener("webkitTransitionEnd",i.onSlideToWrapperTransitionEnd))),!0}function slideToLoop(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===r&&(r=!0);var i=t;return this.params.loop&&(i+=this.loopedSlides),this.slideTo(i,e,r,n)}function slideNext(t,e,r){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var n=this.params,i=this.animating,s=this.activeIndex<n.slidesPerGroupSkip?1:n.slidesPerGroup;if(n.loop){if(i&&n.loopPreventsSlide)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}return this.slideTo(this.activeIndex+s,t,e,r)}function slidePrev(t,e,r){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var n=this.params,i=this.animating,s=this.snapGrid,o=this.slidesGrid,a=this.rtlTranslate;if(n.loop){if(i&&n.loopPreventsSlide)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}function l(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}var h,u=l(a?this.translate:-this.translate),c=s.map((function(t){return l(t)})),f=(s[c.indexOf(u)],s[c.indexOf(u)-1]);return void 0===f&&n.cssMode&&s.forEach((function(t){!f&&u>=t&&(f=t)})),void 0!==f&&(h=o.indexOf(f))<0&&(h=this.activeIndex-1),this.slideTo(h,t,e,r)}function slideReset(t,e,r){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);return this.slideTo(this.activeIndex,t,e,r)}function slideToClosest(t,e,r,n){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),void 0===n&&(n=.5);var i=this.activeIndex,s=Math.min(this.params.slidesPerGroupSkip,i),o=s+Math.floor((i-s)/this.params.slidesPerGroup),a=this.rtlTranslate?this.translate:-this.translate;if(a>=this.snapGrid[o]){var l=this.snapGrid[o];a-l>(this.snapGrid[o+1]-l)*n&&(i+=this.params.slidesPerGroup)}else{var h=this.snapGrid[o-1];a-h<=(this.snapGrid[o]-h)*n&&(i-=this.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,this.slidesGrid.length-1),this.slideTo(i,t,e,r)}function slideToClickedSlide(){var t,e=this,r=e.params,n=e.$wrapperEl,i="auto"===r.slidesPerView?e.slidesPerViewDynamic():r.slidesPerView,s=e.clickedIndex;if(r.loop){if(e.animating)return;t=parseInt($(e.clickedSlide).attr("data-swiper-slide-index"),10),r.centeredSlides?s<e.loopedSlides-i/2||s>e.slides.length-e.loopedSlides+i/2?(e.loopFix(),s=n.children("."+r.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+r.slideDuplicateClass+")").eq(0).index(),nextTick((function(){e.slideTo(s)}))):e.slideTo(s):s>e.slides.length-i?(e.loopFix(),s=n.children("."+r.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+r.slideDuplicateClass+")").eq(0).index(),nextTick((function(){e.slideTo(s)}))):e.slideTo(s)}else e.slideTo(s)}var slide={slideTo:slideTo,slideToLoop:slideToLoop,slideNext:slideNext,slidePrev:slidePrev,slideReset:slideReset,slideToClosest:slideToClosest,slideToClickedSlide:slideToClickedSlide};function loopCreate(){var t=this,e=getDocument(),r=t.params,n=t.$wrapperEl;n.children("."+r.slideClass+"."+r.slideDuplicateClass).remove();var i=n.children("."+r.slideClass);if(r.loopFillGroupWithBlank){var s=r.slidesPerGroup-i.length%r.slidesPerGroup;if(s!==r.slidesPerGroup){for(var o=0;o<s;o+=1){var a=$(e.createElement("div")).addClass(r.slideClass+" "+r.slideBlankClass);n.append(a)}i=n.children("."+r.slideClass)}}"auto"!==r.slidesPerView||r.loopedSlides||(r.loopedSlides=i.length),t.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),t.loopedSlides+=r.loopAdditionalSlides,t.loopedSlides>i.length&&(t.loopedSlides=i.length);var l=[],h=[];i.each((function(e,r){var n=$(e);r<t.loopedSlides&&h.push(e),r<i.length&&r>=i.length-t.loopedSlides&&l.push(e),n.attr("data-swiper-slide-index",r)}));for(var u=0;u<h.length;u+=1)n.append($(h[u].cloneNode(!0)).addClass(r.slideDuplicateClass));for(var c=l.length-1;c>=0;c-=1)n.prepend($(l[c].cloneNode(!0)).addClass(r.slideDuplicateClass))}function loopFix(){this.emit("beforeLoopFix");var t,e=this.activeIndex,r=this.slides,n=this.loopedSlides,i=this.allowSlidePrev,s=this.allowSlideNext,o=this.snapGrid,a=this.rtlTranslate;this.allowSlidePrev=!0,this.allowSlideNext=!0;var l=-o[e]-this.getTranslate();if(e<n)t=r.length-3*n+e,t+=n,this.slideTo(t,0,!1,!0)&&0!==l&&this.setTranslate((a?-this.translate:this.translate)-l);else if(e>=r.length-n){t=-r.length+e+n,t+=n,this.slideTo(t,0,!1,!0)&&0!==l&&this.setTranslate((a?-this.translate:this.translate)-l)}this.allowSlidePrev=i,this.allowSlideNext=s,this.emit("loopFix")}function loopDestroy(){var t=this.$wrapperEl,e=this.params,r=this.slides;t.children("."+e.slideClass+"."+e.slideDuplicateClass+",."+e.slideClass+"."+e.slideBlankClass).remove(),r.removeAttr("data-swiper-slide-index")}var loop={loopCreate:loopCreate,loopFix:loopFix,loopDestroy:loopDestroy};function setGrabCursor(t){if(!(this.support.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||this.params.cssMode)){var e=this.el;e.style.cursor="move",e.style.cursor=t?"-webkit-grabbing":"-webkit-grab",e.style.cursor=t?"-moz-grabbin":"-moz-grab",e.style.cursor=t?"grabbing":"grab"}}function unsetGrabCursor(){this.support.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this.el.style.cursor="")}var grabCursor={setGrabCursor:setGrabCursor,unsetGrabCursor:unsetGrabCursor};function appendSlide(t){var e=this.$wrapperEl,r=this.params;if(r.loop&&this.loopDestroy(),"object"==typeof t&&"length"in t)for(var n=0;n<t.length;n+=1)t[n]&&e.append(t[n]);else e.append(t);r.loop&&this.loopCreate(),r.observer&&this.support.observer||this.update()}function prependSlide(t){var e=this.params,r=this.$wrapperEl,n=this.activeIndex;e.loop&&this.loopDestroy();var i=n+1;if("object"==typeof t&&"length"in t){for(var s=0;s<t.length;s+=1)t[s]&&r.prepend(t[s]);i=n+t.length}else r.prepend(t);e.loop&&this.loopCreate(),e.observer&&this.support.observer||this.update(),this.slideTo(i,0,!1)}function addSlide(t,e){var r=this.$wrapperEl,n=this.params,i=this.activeIndex;n.loop&&(i-=this.loopedSlides,this.loopDestroy(),this.slides=r.children("."+n.slideClass));var s=this.slides.length;if(t<=0)this.prependSlide(e);else if(t>=s)this.appendSlide(e);else{for(var o=i>t?i+1:i,a=[],l=s-1;l>=t;l-=1){var h=this.slides.eq(l);h.remove(),a.unshift(h)}if("object"==typeof e&&"length"in e){for(var u=0;u<e.length;u+=1)e[u]&&r.append(e[u]);o=i>t?i+e.length:i}else r.append(e);for(var c=0;c<a.length;c+=1)r.append(a[c]);n.loop&&this.loopCreate(),n.observer&&this.support.observer||this.update(),n.loop?this.slideTo(o+this.loopedSlides,0,!1):this.slideTo(o,0,!1)}}function removeSlide(t){var e=this.params,r=this.$wrapperEl,n=this.activeIndex;e.loop&&(n-=this.loopedSlides,this.loopDestroy(),this.slides=r.children("."+e.slideClass));var i,s=n;if("object"==typeof t&&"length"in t){for(var o=0;o<t.length;o+=1)i=t[o],this.slides[i]&&this.slides.eq(i).remove(),i<s&&(s-=1);s=Math.max(s,0)}else i=t,this.slides[i]&&this.slides.eq(i).remove(),i<s&&(s-=1),s=Math.max(s,0);e.loop&&this.loopCreate(),e.observer&&this.support.observer||this.update(),e.loop?this.slideTo(s+this.loopedSlides,0,!1):this.slideTo(s,0,!1)}function removeAllSlides(){for(var t=[],e=0;e<this.slides.length;e+=1)t.push(e);this.removeSlide(t)}var manipulation={appendSlide:appendSlide,prependSlide:prependSlide,addSlide:addSlide,removeSlide:removeSlide,removeAllSlides:removeAllSlides};function onTouchStart(t){var e=getDocument(),r=getWindow(),n=this.touchEventsData,i=this.params,s=this.touches;if(!this.animating||!i.preventInteractionOnTransition){var o=t;o.originalEvent&&(o=o.originalEvent);var a=$(o.target);if(("wrapper"!==i.touchEventsTarget||a.closest(this.wrapperEl).length)&&(n.isTouchEvent="touchstart"===o.type,(n.isTouchEvent||!("which"in o)||3!==o.which)&&!(!n.isTouchEvent&&"button"in o&&o.button>0||n.isTouched&&n.isMoved)))if(i.noSwiping&&a.closest(i.noSwipingSelector?i.noSwipingSelector:"."+i.noSwipingClass)[0])this.allowClick=!0;else if(!i.swipeHandler||a.closest(i.swipeHandler)[0]){s.currentX="touchstart"===o.type?o.targetTouches[0].pageX:o.pageX,s.currentY="touchstart"===o.type?o.targetTouches[0].pageY:o.pageY;var l=s.currentX,h=s.currentY,u=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,c=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(!u||!(l<=c||l>=r.screen.width-c)){if(extend$1(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=l,s.startY=h,n.touchStartTime=now(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,i.threshold>0&&(n.allowThresholdMove=!1),"touchstart"!==o.type){var f=!0;a.is(n.formElements)&&(f=!1),e.activeElement&&$(e.activeElement).is(n.formElements)&&e.activeElement!==a[0]&&e.activeElement.blur();var p=f&&this.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||p)&&o.preventDefault()}this.emit("touchStart",o)}}}}function onTouchMove(t){var e=getDocument(),r=this.touchEventsData,n=this.params,i=this.touches,s=this.rtlTranslate,o=t;if(o.originalEvent&&(o=o.originalEvent),r.isTouched){if(!r.isTouchEvent||"touchmove"===o.type){var a="touchmove"===o.type&&o.targetTouches&&(o.targetTouches[0]||o.changedTouches[0]),l="touchmove"===o.type?a.pageX:o.pageX,h="touchmove"===o.type?a.pageY:o.pageY;if(o.preventedByNestedSwiper)return i.startX=l,void(i.startY=h);if(!this.allowTouchMove)return this.allowClick=!1,void(r.isTouched&&(extend$1(i,{startX:l,startY:h,currentX:l,currentY:h}),r.touchStartTime=now()));if(r.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop)if(this.isVertical()){if(h<i.startY&&this.translate<=this.maxTranslate()||h>i.startY&&this.translate>=this.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(l<i.startX&&this.translate<=this.maxTranslate()||l>i.startX&&this.translate>=this.minTranslate())return;if(r.isTouchEvent&&e.activeElement&&o.target===e.activeElement&&$(o.target).is(r.formElements))return r.isMoved=!0,void(this.allowClick=!1);if(r.allowTouchCallbacks&&this.emit("touchMove",o),!(o.targetTouches&&o.targetTouches.length>1)){i.currentX=l,i.currentY=h;var u=i.currentX-i.startX,c=i.currentY-i.startY;if(!(this.params.threshold&&Math.sqrt(Math.pow(u,2)+Math.pow(c,2))<this.params.threshold)){var f;if(void 0===r.isScrolling)this.isHorizontal()&&i.currentY===i.startY||this.isVertical()&&i.currentX===i.startX?r.isScrolling=!1:u*u+c*c>=25&&(f=180*Math.atan2(Math.abs(c),Math.abs(u))/Math.PI,r.isScrolling=this.isHorizontal()?f>n.touchAngle:90-f>n.touchAngle);if(r.isScrolling&&this.emit("touchMoveOpposite",o),void 0===r.startMoving&&(i.currentX===i.startX&&i.currentY===i.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){this.allowClick=!1,!n.cssMode&&o.cancelable&&o.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&o.stopPropagation(),r.isMoved||(n.loop&&this.loopFix(),r.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!n.grabCursor||!0!==this.allowSlideNext&&!0!==this.allowSlidePrev||this.setGrabCursor(!0),this.emit("sliderFirstMove",o)),this.emit("sliderMove",o),r.isMoved=!0;var p=this.isHorizontal()?u:c;i.diff=p,p*=n.touchRatio,s&&(p=-p),this.swipeDirection=p>0?"prev":"next",r.currentTranslate=p+r.startTranslate;var d=!0,m=n.resistanceRatio;if(n.touchReleaseOnEdges&&(m=0),p>0&&r.currentTranslate>this.minTranslate()?(d=!1,n.resistance&&(r.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+r.startTranslate+p,m))):p<0&&r.currentTranslate<this.maxTranslate()&&(d=!1,n.resistance&&(r.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-r.startTranslate-p,m))),d&&(o.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.threshold>0){if(!(Math.abs(p)>n.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,r.currentTranslate=r.startTranslate,void(i.diff=this.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY)}n.followFinger&&!n.cssMode&&((n.freeMode||n.watchSlidesProgress||n.watchSlidesVisibility)&&(this.updateActiveIndex(),this.updateSlidesClasses()),n.freeMode&&(0===r.velocities.length&&r.velocities.push({position:i[this.isHorizontal()?"startX":"startY"],time:r.touchStartTime}),r.velocities.push({position:i[this.isHorizontal()?"currentX":"currentY"],time:now()})),this.updateProgress(r.currentTranslate),this.setTranslate(r.currentTranslate))}}}}}else r.startMoving&&r.isScrolling&&this.emit("touchMoveOpposite",o)}function onTouchEnd(t){var e=this,r=e.touchEventsData,n=e.params,i=e.touches,s=e.rtlTranslate,o=e.$wrapperEl,a=e.slidesGrid,l=e.snapGrid,h=t;if(h.originalEvent&&(h=h.originalEvent),r.allowTouchCallbacks&&e.emit("touchEnd",h),r.allowTouchCallbacks=!1,!r.isTouched)return r.isMoved&&n.grabCursor&&e.setGrabCursor(!1),r.isMoved=!1,void(r.startMoving=!1);n.grabCursor&&r.isMoved&&r.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);var u,c=now(),f=c-r.touchStartTime;if(e.allowClick&&(e.updateClickedSlide(h),e.emit("tap click",h),f<300&&c-r.lastClickTime<300&&e.emit("doubleTap doubleClick",h)),r.lastClickTime=now(),nextTick((function(){e.destroyed||(e.allowClick=!0)})),!r.isTouched||!r.isMoved||!e.swipeDirection||0===i.diff||r.currentTranslate===r.startTranslate)return r.isTouched=!1,r.isMoved=!1,void(r.startMoving=!1);if(r.isTouched=!1,r.isMoved=!1,r.startMoving=!1,u=n.followFinger?s?e.translate:-e.translate:-r.currentTranslate,!n.cssMode)if(n.freeMode){if(u<-e.minTranslate())return void e.slideTo(e.activeIndex);if(u>-e.maxTranslate())return void(e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1));if(n.freeModeMomentum){if(r.velocities.length>1){var p=r.velocities.pop(),d=r.velocities.pop(),m=p.position-d.position,y=p.time-d.time;e.velocity=m/y,e.velocity/=2,Math.abs(e.velocity)<n.freeModeMinimumVelocity&&(e.velocity=0),(y>150||now()-p.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=n.freeModeMomentumVelocityRatio,r.velocities.length=0;var v=1e3*n.freeModeMomentumRatio,g=e.velocity*v,b=e.translate+g;s&&(b=-b);var _,w,E=!1,S=20*Math.abs(e.velocity)*n.freeModeMomentumBounceRatio;if(b<e.maxTranslate())n.freeModeMomentumBounce?(b+e.maxTranslate()<-S&&(b=e.maxTranslate()-S),_=e.maxTranslate(),E=!0,r.allowMomentumBounce=!0):b=e.maxTranslate(),n.loop&&n.centeredSlides&&(w=!0);else if(b>e.minTranslate())n.freeModeMomentumBounce?(b-e.minTranslate()>S&&(b=e.minTranslate()+S),_=e.minTranslate(),E=!0,r.allowMomentumBounce=!0):b=e.minTranslate(),n.loop&&n.centeredSlides&&(w=!0);else if(n.freeModeSticky){for(var T,x=0;x<l.length;x+=1)if(l[x]>-b){T=x;break}b=-(b=Math.abs(l[T]-b)<Math.abs(l[T-1]-b)||"next"===e.swipeDirection?l[T]:l[T-1])}if(w&&e.once("transitionEnd",(function(){e.loopFix()})),0!==e.velocity){if(v=s?Math.abs((-b-e.translate)/e.velocity):Math.abs((b-e.translate)/e.velocity),n.freeModeSticky){var A=Math.abs((s?-b:b)-e.translate),P=e.slidesSizesGrid[e.activeIndex];v=A<P?n.speed:A<2*P?1.5*n.speed:2.5*n.speed}}else if(n.freeModeSticky)return void e.slideToClosest();n.freeModeMomentumBounce&&E?(e.updateProgress(_),e.setTransition(v),e.setTranslate(b),e.transitionStart(!0,e.swipeDirection),e.animating=!0,o.transitionEnd((function(){e&&!e.destroyed&&r.allowMomentumBounce&&(e.emit("momentumBounce"),e.setTransition(n.speed),setTimeout((function(){e.setTranslate(_),o.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()}))}),0))}))):e.velocity?(e.updateProgress(b),e.setTransition(v),e.setTranslate(b),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,o.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()})))):e.updateProgress(b),e.updateActiveIndex(),e.updateSlidesClasses()}else if(n.freeModeSticky)return void e.slideToClosest();(!n.freeModeMomentum||f>=n.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}else{for(var I=0,C=e.slidesSizesGrid[0],D=0;D<a.length;D+=D<n.slidesPerGroupSkip?1:n.slidesPerGroup){var k=D<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;void 0!==a[D+k]?u>=a[D]&&u<a[D+k]&&(I=D,C=a[D+k]-a[D]):u>=a[D]&&(I=D,C=a[a.length-1]-a[a.length-2])}var O=(u-a[I])/C,M=I<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(f>n.longSwipesMs){if(!n.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(O>=n.longSwipesRatio?e.slideTo(I+M):e.slideTo(I)),"prev"===e.swipeDirection&&(O>1-n.longSwipesRatio?e.slideTo(I+M):e.slideTo(I))}else{if(!n.shortSwipes)return void e.slideTo(e.activeIndex);e.navigation&&(h.target===e.navigation.nextEl||h.target===e.navigation.prevEl)?h.target===e.navigation.nextEl?e.slideTo(I+M):e.slideTo(I):("next"===e.swipeDirection&&e.slideTo(I+M),"prev"===e.swipeDirection&&e.slideTo(I))}}}function onResize(){var t=this.params,e=this.el;if(!e||0!==e.offsetWidth){t.breakpoints&&this.setBreakpoint();var r=this.allowSlideNext,n=this.allowSlidePrev,i=this.snapGrid;this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),this.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&this.isEnd&&!this.isBeginning&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0),this.autoplay&&this.autoplay.running&&this.autoplay.paused&&this.autoplay.run(),this.allowSlidePrev=n,this.allowSlideNext=r,this.params.watchOverflow&&i!==this.snapGrid&&this.checkOverflow()}}function onClick(t){this.allowClick||(this.params.preventClicks&&t.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function onScroll(){var t=this.wrapperEl,e=this.rtlTranslate;this.previousTranslate=this.translate,this.isHorizontal()?this.translate=e?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:this.translate=-t.scrollTop,-0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();var r=this.maxTranslate()-this.minTranslate();(0===r?0:(this.translate-this.minTranslate())/r)!==this.progress&&this.updateProgress(e?-this.translate:this.translate),this.emit("setTranslate",this.translate,!1)}var dummyEventAttached=!1;function dummyEventListener(){}function attachEvents(){var t=getDocument(),e=this.params,r=this.touchEvents,n=this.el,i=this.wrapperEl,s=this.device,o=this.support;this.onTouchStart=onTouchStart.bind(this),this.onTouchMove=onTouchMove.bind(this),this.onTouchEnd=onTouchEnd.bind(this),e.cssMode&&(this.onScroll=onScroll.bind(this)),this.onClick=onClick.bind(this);var a=!!e.nested;if(!o.touch&&o.pointerEvents)n.addEventListener(r.start,this.onTouchStart,!1),t.addEventListener(r.move,this.onTouchMove,a),t.addEventListener(r.end,this.onTouchEnd,!1);else{if(o.touch){var l=!("touchstart"!==r.start||!o.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};n.addEventListener(r.start,this.onTouchStart,l),n.addEventListener(r.move,this.onTouchMove,o.passiveListener?{passive:!1,capture:a}:a),n.addEventListener(r.end,this.onTouchEnd,l),r.cancel&&n.addEventListener(r.cancel,this.onTouchEnd,l),dummyEventAttached||(t.addEventListener("touchstart",dummyEventListener),dummyEventAttached=!0)}(e.simulateTouch&&!s.ios&&!s.android||e.simulateTouch&&!o.touch&&s.ios)&&(n.addEventListener("mousedown",this.onTouchStart,!1),t.addEventListener("mousemove",this.onTouchMove,a),t.addEventListener("mouseup",this.onTouchEnd,!1))}(e.preventClicks||e.preventClicksPropagation)&&n.addEventListener("click",this.onClick,!0),e.cssMode&&i.addEventListener("scroll",this.onScroll),e.updateOnWindowResize?this.on(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):this.on("observerUpdate",onResize,!0)}function detachEvents(){var t=getDocument(),e=this.params,r=this.touchEvents,n=this.el,i=this.wrapperEl,s=this.device,o=this.support,a=!!e.nested;if(!o.touch&&o.pointerEvents)n.removeEventListener(r.start,this.onTouchStart,!1),t.removeEventListener(r.move,this.onTouchMove,a),t.removeEventListener(r.end,this.onTouchEnd,!1);else{if(o.touch){var l=!("onTouchStart"!==r.start||!o.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};n.removeEventListener(r.start,this.onTouchStart,l),n.removeEventListener(r.move,this.onTouchMove,a),n.removeEventListener(r.end,this.onTouchEnd,l),r.cancel&&n.removeEventListener(r.cancel,this.onTouchEnd,l)}(e.simulateTouch&&!s.ios&&!s.android||e.simulateTouch&&!o.touch&&s.ios)&&(n.removeEventListener("mousedown",this.onTouchStart,!1),t.removeEventListener("mousemove",this.onTouchMove,a),t.removeEventListener("mouseup",this.onTouchEnd,!1))}(e.preventClicks||e.preventClicksPropagation)&&n.removeEventListener("click",this.onClick,!0),e.cssMode&&i.removeEventListener("scroll",this.onScroll),this.off(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize)}var events={attachEvents:attachEvents,detachEvents:detachEvents};function setBreakpoint(){var t=this.activeIndex,e=this.initialized,r=this.loopedSlides,n=void 0===r?0:r,i=this.params,s=this.$el,o=i.breakpoints;if(o&&(!o||0!==Object.keys(o).length)){var a=this.getBreakpoint(o);if(a&&this.currentBreakpoint!==a){var l=a in o?o[a]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(t){var e=l[t];void 0!==e&&(l[t]="slidesPerView"!==t||"AUTO"!==e&&"auto"!==e?"slidesPerView"===t?parseFloat(e):parseInt(e,10):"auto")}));var h=l||this.originalParams,u=i.slidesPerColumn>1,c=h.slidesPerColumn>1;u&&!c?(s.removeClass(i.containerModifierClass+"multirow "+i.containerModifierClass+"multirow-column"),this.emitContainerClasses()):!u&&c&&(s.addClass(i.containerModifierClass+"multirow"),"column"===h.slidesPerColumnFill&&s.addClass(i.containerModifierClass+"multirow-column"),this.emitContainerClasses());var f=h.direction&&h.direction!==i.direction,p=i.loop&&(h.slidesPerView!==i.slidesPerView||f);f&&e&&this.changeDirection(),extend$1(this.params,h),extend$1(this,{allowTouchMove:this.params.allowTouchMove,allowSlideNext:this.params.allowSlideNext,allowSlidePrev:this.params.allowSlidePrev}),this.currentBreakpoint=a,p&&e&&(this.loopDestroy(),this.loopCreate(),this.updateSlides(),this.slideTo(t-n+this.loopedSlides,0,!1)),this.emit("breakpoint",h)}}}function getBreakpoints(t){var e=getWindow();if(t){var r=!1,n=Object.keys(t).map((function(t){if("string"==typeof t&&0===t.indexOf("@")){var r=parseFloat(t.substr(1));return{value:e.innerHeight*r,point:t}}return{value:t,point:t}}));n.sort((function(t,e){return parseInt(t.value,10)-parseInt(e.value,10)}));for(var i=0;i<n.length;i+=1){var s=n[i],o=s.point;s.value<=e.innerWidth&&(r=o)}return r||"max"}}var breakpoints={setBreakpoint:setBreakpoint,getBreakpoint:getBreakpoints};function addClasses(){var t=this.classNames,e=this.params,r=this.rtl,n=this.$el,i=this.device,s=[];s.push("initialized"),s.push(e.direction),e.freeMode&&s.push("free-mode"),e.autoHeight&&s.push("autoheight"),r&&s.push("rtl"),e.slidesPerColumn>1&&(s.push("multirow"),"column"===e.slidesPerColumnFill&&s.push("multirow-column")),i.android&&s.push("android"),i.ios&&s.push("ios"),e.cssMode&&s.push("css-mode"),s.forEach((function(r){t.push(e.containerModifierClass+r)})),n.addClass(t.join(" ")),this.emitContainerClasses()}function removeClasses(){var t=this.$el,e=this.classNames;t.removeClass(e.join(" ")),this.emitContainerClasses()}var classes={addClasses:addClasses,removeClasses:removeClasses};function loadImage(t,e,r,n,i,s){var o,a=getWindow();function l(){s&&s()}$(t).parent("picture")[0]||t.complete&&i?l():e?((o=new a.Image).onload=l,o.onerror=l,n&&(o.sizes=n),r&&(o.srcset=r),e&&(o.src=e)):l()}function preloadImages(){var t=this;function e(){null!=t&&t&&!t.destroyed&&(void 0!==t.imagesLoaded&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}t.imagesToLoad=t.$el.find("img");for(var r=0;r<t.imagesToLoad.length;r+=1){var n=t.imagesToLoad[r];t.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,e)}}var images={loadImage:loadImage,preloadImages:preloadImages};function checkOverflow(){var t=this.params,e=this.isLocked,r=this.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(this.slides.length-1)+this.slides[0].offsetWidth*this.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&r?this.isLocked=r<=this.size:this.isLocked=1===this.snapGrid.length,this.allowSlideNext=!this.isLocked,this.allowSlidePrev=!this.isLocked,e!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock"),e&&e!==this.isLocked&&(this.isEnd=!1,this.navigation&&this.navigation.update())}var checkOverflow$1={checkOverflow:checkOverflow},defaults={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}var prototypes={modular:modular,eventsEmitter:eventsEmitter,update:update,translate:translate,transition:transition$1,slide:slide,loop:loop,grabCursor:grabCursor,manipulation:manipulation,events:events,breakpoints:breakpoints,checkOverflow:checkOverflow$1,classes:classes,images:images},extendedDefaults={},Swiper=function(){function t(){for(var e,r,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];1===i.length&&i[0].constructor&&i[0].constructor===Object?r=i[0]:(e=i[0],r=i[1]),r||(r={}),r=extend$1({},r),e&&!r.el&&(r.el=e);var o=this;o.support=getSupport(),o.device=getDevice({userAgent:r.userAgent}),o.browser=getBrowser(),o.eventsListeners={},o.eventsAnyListeners=[],Object.keys(prototypes).forEach((function(e){Object.keys(prototypes[e]).forEach((function(r){t.prototype[r]||(t.prototype[r]=prototypes[e][r])}))})),void 0===o.modules&&(o.modules={}),Object.keys(o.modules).forEach((function(t){var e=o.modules[t];if(e.params){var n=Object.keys(e.params)[0],i=e.params[n];if("object"!=typeof i||null===i)return;if(!(n in r)||!("enabled"in i))return;!0===r[n]&&(r[n]={enabled:!0}),"object"!=typeof r[n]||"enabled"in r[n]||(r[n].enabled=!0),r[n]||(r[n]={enabled:!1})}}));var a=extend$1({},defaults);o.useParams(a),o.params=extend$1({},a,extendedDefaults,r),o.originalParams=extend$1({},o.params),o.passedParams=extend$1({},r),o.params&&o.params.on&&Object.keys(o.params.on).forEach((function(t){o.on(t,o.params.on[t])})),o.$=$;var l=$(o.params.el);if(e=l[0]){if(l.length>1){var h=[];return l.each((function(e){var n=extend$1({},r,{el:e});h.push(new t(n))})),h}var u,c,f;return e.swiper=o,e&&e.shadowRoot&&e.shadowRoot.querySelector?(u=$(e.shadowRoot.querySelector("."+o.params.wrapperClass))).children=function(t){return l.children(t)}:u=l.children("."+o.params.wrapperClass),extend$1(o,{$el:l,el:e,$wrapperEl:u,wrapperEl:u[0],classNames:[],slides:$(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===o.params.direction},isVertical:function(){return"vertical"===o.params.direction},rtl:"rtl"===e.dir.toLowerCase()||"rtl"===l.css("direction"),rtlTranslate:"horizontal"===o.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===l.css("direction")),wrongRTL:"-webkit-box"===u.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEvents:(c=["touchstart","touchmove","touchend","touchcancel"],f=["mousedown","mousemove","mouseup"],o.support.pointerEvents&&(f=["pointerdown","pointermove","pointerup"]),o.touchEventsTouch={start:c[0],move:c[1],end:c[2],cancel:c[3]},o.touchEventsDesktop={start:f[0],move:f[1],end:f[2]},o.support.touch||!o.params.simulateTouch?o.touchEventsTouch:o.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video, label",lastClickTime:now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.useModules(),o.emit("_swiper"),o.params.init&&o.init(),o}}var e=t.prototype;return e.emitContainerClasses=function(){var t=this;if(t.params._emitClasses&&t.el){var e=t.el.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-container")||0===e.indexOf(t.params.containerModifierClass)}));t.emit("_containerClasses",e.join(" "))}},e.emitSlidesClasses=function(){var t=this;t.params._emitClasses&&t.el&&t.slides.each((function(e){var r=e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)}));t.emit("_slideClass",e,r.join(" "))}))},e.slidesPerViewDynamic=function(){var t=this.params,e=this.slides,r=this.slidesGrid,n=this.size,i=this.activeIndex,s=1;if(t.centeredSlides){for(var o,a=e[i].swiperSlideSize,l=i+1;l<e.length;l+=1)e[l]&&!o&&(s+=1,(a+=e[l].swiperSlideSize)>n&&(o=!0));for(var h=i-1;h>=0;h-=1)e[h]&&!o&&(s+=1,(a+=e[h].swiperSlideSize)>n&&(o=!0))}else for(var u=i+1;u<e.length;u+=1)r[u]-r[i]<n&&(s+=1);return s},e.update=function(){var t=this;if(t&&!t.destroyed){var e=t.snapGrid,r=t.params;r.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.params.freeMode?(n(),t.params.autoHeight&&t.updateAutoHeight()):(("auto"===t.params.slidesPerView||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0))||n(),r.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}function n(){var e=t.rtlTranslate?-1*t.translate:t.translate,r=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(r),t.updateActiveIndex(),t.updateSlidesClasses()}},e.changeDirection=function(t,e){void 0===e&&(e=!0);var r=this.params.direction;return t||(t="horizontal"===r?"vertical":"horizontal"),t===r||"horizontal"!==t&&"vertical"!==t||(this.$el.removeClass(""+this.params.containerModifierClass+r).addClass(""+this.params.containerModifierClass+t),this.emitContainerClasses(),this.params.direction=t,this.slides.each((function(e){"vertical"===t?e.style.width="":e.style.height=""})),this.emit("changeDirection"),e&&this.update()),this},e.init=function(){this.initialized||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit),this.attachEvents(),this.initialized=!0,this.emit("init"))},e.destroy=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var r=this,n=r.params,i=r.$el,s=r.$wrapperEl,o=r.slides;return void 0===r.params||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),n.loop&&r.loopDestroy(),e&&(r.removeClasses(),i.removeAttr("style"),s.removeAttr("style"),o&&o.length&&o.removeClass([n.slideVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),r.emit("destroy"),Object.keys(r.eventsListeners).forEach((function(t){r.off(t)})),!1!==t&&(r.$el[0].swiper=null,deleteProps(r)),r.destroyed=!0),null},t.extendDefaults=function(t){extend$1(extendedDefaults,t)},t.installModule=function(e){t.prototype.modules||(t.prototype.modules={});var r=e.name||Object.keys(t.prototype.modules).length+"_"+now();t.prototype.modules[r]=e},t.use=function(e){return Array.isArray(e)?(e.forEach((function(e){return t.installModule(e)})),t):(t.installModule(e),t)},_createClass(t,null,[{key:"extendedDefaults",get:function(){return extendedDefaults}},{key:"defaults",get:function(){return defaults}}]),t}();Swiper.use([Resize,Observer$1]);var nativeAssign=Object.assign,defineProperty$2=Object.defineProperty,objectAssign=!nativeAssign||fails((function(){if(descriptors&&1!==nativeAssign({b:1},nativeAssign(defineProperty$2({},"a",{enumerable:!0,get:function(){defineProperty$2(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=nativeAssign({},t)[r]||"abcdefghijklmnopqrst"!=objectKeys(nativeAssign({},e)).join("")}))?function(t,e){for(var r=toObject(t),n=arguments.length,i=1,s=objectGetOwnPropertySymbols.f,o=objectPropertyIsEnumerable.f;n>i;)for(var a,l=indexedObject(arguments[i++]),h=s?objectKeys(l).concat(s(l)):objectKeys(l),u=h.length,c=0;u>c;)a=h[c++],descriptors&&!o.call(l,a)||(r[a]=l[a]);return r}:nativeAssign;_export({target:"Object",stat:!0,forced:Object.assign!==objectAssign},{assign:objectAssign});var sameValue=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};fixRegexpWellKnownSymbolLogic("search",1,(function(t,e,r){return[function(e){var r=requireObjectCoercible(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,r):new RegExp(e)[t](String(r))},function(t){var n=r(e,t,this);if(n.done)return n.value;var i=anObject(t),s=String(this),o=i.lastIndex;sameValue(o,0)||(i.lastIndex=0);var a=regexpExecAbstract(i,s);return sameValue(i.lastIndex,o)||(i.lastIndex=o),null===a?-1:a.index}]}));var whitespaces="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",whitespace="["+whitespaces+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod$3=function(t){return function(e){var r=String(requireObjectCoercible(e));return 1&t&&(r=r.replace(ltrim,"")),2&t&&(r=r.replace(rtrim,"")),r}},stringTrim={start:createMethod$3(1),end:createMethod$3(2),trim:createMethod$3(3)},non="âÂá ",stringTrimForced=function(t){return fails((function(){return!!whitespaces[t]()||non[t]()!=non||whitespaces[t].name!==t}))},$trim=stringTrim.trim;_export({target:"String",proto:!0,forced:stringTrimForced("trim")},{trim:function(){return $trim(this)}});class $Factory{create(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ForUtility.addToArrayPrototype();var e=_objectSpread2({evaluate(t){return this.apply(t(this))},addClass(t){switch(t.constructor){case String:t.split(" ").fastEach(t=>{this.classList.add(t)});break;case Array:t.fastEach(t=>{this.addClass(t)})}return this},removeClass(t){switch(t.constructor){case String:t.split(" ").fastEach(t=>{this.classList.remove(t)});break;case Array:t.fastEach(t=>{this.removeClass(t)})}return this},toggleClass(t){switch(t.constructor){case String:t.split(" ").fastEach(t=>{this.classList.toggle(t)});break;case Array:t.fastEach(t=>{this.toggleClass(t)})}return this},css(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&e.constructor===Object)return this.css(t,void 0,e);var n=null,i=null,s=null,o=null;switch(t.constructor){case String:if([{name:"transition",hasParentheses:!1},{name:"transform",hasParentheses:!0}].fastEach(e=>{var{name:r,hasParentheses:n}=e;r===t&&(o=!0,s=n)}),void 0===e)return n=this.style[t],r.computed&&(n=function(t){if(!1===t.includes("px"))return t;return t.replace(/px/g,"")}(getComputedStyle(this)[t])),o&&r.returnAsObject&&(n=c(n,s)),n;if(n=e,!1===["opacity","gridRowStart","gridRowEnd","columns","columnCount"].includes(t)&&(n=function(t){if(!t)return t;if(t.constructor===Number||!1===Number.isNaN(Number(t)))return"".concat(t,"px");return t}(e)),o){var a=c(this.style[t],s),l=c(n,s),h=a;Object.assign(h,l),n=function(t,e){var r=null,n=null;e?(r=Object.keys(t).map(e=>"".concat(e,"(").concat(t[e],")")),n=r.join("")):(r=Object.keys(t).map(e=>"".concat(e).concat(t[e])),n=r.join(","));return n}(h,s)}return this.style[t]=n,this;case Array:return void 0===e?(i={},t.fastEach(t=>{i[t]=this.css(t)}),i):(t.fastEach((t,r)=>{this.css(t,e[r])}),this);case Object:return i={},Object.keys(t).fastEach(e=>{var r=this.css(e,t[e]);r!==this&&(i[e]=r)}),i==={}?this:i;default:return this.style}function u(t){return t.toLowerCase().replace(/\s/g,"")}function c(t,e){var r=null,n=null,i=null;e?(n=(r=u(t).split(")")).map(t=>t.substr(0,t.indexOf("(")).trim()),i=r.map(t=>t.substr(t.indexOf("(")+1))):(n=(r=u(t).split(",")).map(t=>t.substring(0,t.search(/[^a-zA-Z]/))),i=r.map(t=>t.substr(t.search(/[^a-zA-Z]/))));var s={};return n.fastEach((t,e)=>{t&&(s[t]=i[e])}),s}},on(t){for(var e=t.split(" "),r=null,n=null,i={},s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];return o.fastEach(t=>{switch(typeof t){case"string":null===r&&(r=t);break;case"function":null===n&&(n=t);break;case"object":if(null===t)break;0===Object.keys(i).length&&(i=t)}}),e.fastEach(t=>{this.addEventListener(t,t=>{var e=t;if(!t)return n(void 0);var{target:i}=e;return i?null!==r&&!1===i.matches(r)?null:n.call(i,e):null},i)}),this},off(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=t.split(" "),s=null,o=null;return r.fastEach((t,e)=>{switch(t.constructor){case String:if(null!==s)break;s=t;break;case Function:if(e!==r.length-1)break;o=t}}),i.fastEach(t=>{this.removeEventListener(t,t=>{var e=t;if(!t)return o(void 0);var{target:r}=e;return r?null!==s&&!1===r.matches(s)?null:o.call(r,e):null})}),this},getJSON:(t,e)=>_asyncToGenerator((function*(){var r=yield fetch(t);return e?e(yield r.json()):r.json()}))(),$:$$1,$$:$$},{});return Object.assign(t,e),t}}class NotJQuery{$(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new $Factory;switch(!0){case this&&this.constructor===Object&&t.constructor===String:return e.create(Object.values(this).find(e=>e.matches&&e.matches(t)));case void 0===t:return e.create({});case null===t:throw new Error("Cannot create from null!");case t.constructor===String:var r=document.querySelector(t);return r&&e.create(r);default:return e.create(t)}}$$(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new $Factory;switch(!0){case this&&this.constructor===Object&&t.constructor===String:return Object.values(this).getAll(e=>e.matches&&e.matches(t)).map(t=>e.create(t));case void 0===t:return[e.create({})];case null===t:throw new Error("Cannot create from null!");case t.constructor===String:return Array.from(document.querySelectorAll(t)).map(t=>e.create(t));default:return[e.create(t)]}}}var mNotJQuery=new NotJQuery,{$:$$1}=mNotJQuery,{$$:$$}=mNotJQuery;class ForUtility{static addToArrayPrototype(){if(!Array.prototype.__forUtilitySingletonExecuted){var t={fastEach(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==e)for(var r=0,n=this.length;r<n;++r)t.call(e||this,this[r],r);else for(var i=0,s=this.length;i<s;++i)t(this[i],i)},forAwait(t){var e=arguments,r=this;return _asyncToGenerator((function*(){for(var n=e.length>1&&void 0!==e[1]?e[1]:null,i=r,s=0,o=i.length;s<o;++s)yield t.call(n||r,i[s],s)}))()},getAll(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[],n=0,i=this.length;n<i;++n)t.call(e||this,this[n],n)&&r.push(this[n]);return r},getSome(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0,n=this.length;r<n;++r)if(t.call(e||this,this[r],r))return this[r];return null}};Object.keys(t).forEach(e=>{Array.prototype[e]=t[e]}),Array.prototype.__forUtilitySingletonExecuted=!0}}}class WindowUtility{static invalidateCache(){this.cache={}}static refresh(){this.invalidateCache(),this.cache={inner:this.inner,viewport:this.viewport,client:this.client,isMobile:this.isMobile}}static vh(t){return this.viewport.height/100*t}static vw(t){return this.viewport.width/100*t}static px(t){return t*window.devicePixelRatio}static get client(){var t,e,r,n;return(null===(t=this.cache)||void 0===t||null===(e=t.client)||void 0===e?void 0:e.height)||(null===(r=this.cache)||void 0===r||null===(n=r.client)||void 0===n?void 0:n.width)?this.cache.client:{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth}}static get inner(){var t,e,r,n;return(null===(t=this.cache)||void 0===t||null===(e=t.inner)||void 0===e?void 0:e.height)||(null===(r=this.cache)||void 0===r||null===(n=r.inner)||void 0===n?void 0:n.width)?this.cache.inner:{height:window.innerHeight,width:window.innerWidth}}static get viewport(){var t,e,r,n;if((null===(t=this.cache)||void 0===t||null===(e=t.viewport)||void 0===e?void 0:e.height)||(null===(r=this.cache)||void 0===r||null===(n=r.viewport)||void 0===n?void 0:n.width))return this.cache.viewport;var i=$$1(".__windowUtility.viewportCalibrator");return{height:i.offsetHeight,width:i.offsetWidth}}static get isMobile(){var t;if(null===(t=this.cache)||void 0===t?void 0:t.isMobile)return this.cache.isMobile;var e=window.matchMedia("(pointer: coarse)").matches||window.matchMedia("(pointer: cnone)").matches;return this.cache.isMobile=e,e}}WindowUtility.cache={},$$1(window).on("resize",()=>WindowUtility.refresh());var arrayBufferNative="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,toIndex=function(t){if(void 0===t)return 0;var e=toInteger(t),r=toLength(e);if(e!==r)throw RangeError("Wrong length or index");return r},Infinity$1=1/0,abs=Math.abs,pow=Math.pow,floor$2=Math.floor,log=Math.log,LN2=Math.LN2,pack=function(t,e,r){var n,i,s,o=new Array(r),a=8*r-e-1,l=(1<<a)-1,h=l>>1,u=23===e?pow(2,-24)-pow(2,-77):0,c=t<0||0===t&&1/t<0?1:0,f=0;for((t=abs(t))!=t||t===Infinity$1?(i=t!=t?1:0,n=l):(n=floor$2(log(t)/LN2),t*(s=pow(2,-n))<1&&(n--,s*=2),(t+=n+h>=1?u/s:u*pow(2,1-h))*s>=2&&(n++,s/=2),n+h>=l?(i=0,n=l):n+h>=1?(i=(t*s-1)*pow(2,e),n+=h):(i=t*pow(2,h-1)*pow(2,e),n=0));e>=8;o[f++]=255&i,i/=256,e-=8);for(n=n<<e|i,a+=e;a>0;o[f++]=255&n,n/=256,a-=8);return o[--f]|=128*c,o},unpack=function(t,e){var r,n=t.length,i=8*n-e-1,s=(1<<i)-1,o=s>>1,a=i-7,l=n-1,h=t[l--],u=127&h;for(h>>=7;a>0;u=256*u+t[l],l--,a-=8);for(r=u&(1<<-a)-1,u>>=-a,a+=e;a>0;r=256*r+t[l],l--,a-=8);if(0===u)u=1-o;else{if(u===s)return r?NaN:h?-Infinity$1:Infinity$1;r+=pow(2,e),u-=o}return(h?-1:1)*r*pow(2,u-e)},ieee754={pack:pack,unpack:unpack},arrayFill=function(t){for(var e=toObject(this),r=toLength(e.length),n=arguments.length,i=toAbsoluteIndex(n>1?arguments[1]:void 0,r),s=n>2?arguments[2]:void 0,o=void 0===s?r:toAbsoluteIndex(s,r);o>i;)e[i++]=t;return e},getOwnPropertyNames=objectGetOwnPropertyNames.f,defineProperty$3=objectDefineProperty.f,getInternalState$2=internalState.get,setInternalState$2=internalState.set,ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE$1="prototype",WRONG_LENGTH="Wrong length",WRONG_INDEX="Wrong index",NativeArrayBuffer=global_1[ARRAY_BUFFER],$ArrayBuffer=NativeArrayBuffer,$DataView=global_1[DATA_VIEW],$DataViewPrototype=$DataView&&$DataView[PROTOTYPE$1],ObjectPrototype$1=Object.prototype,RangeError$1=global_1.RangeError,packIEEE754=ieee754.pack,unpackIEEE754=ieee754.unpack,packInt8=function(t){return[255&t]},packInt16=function(t){return[255&t,t>>8&255]},packInt32=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},unpackInt32=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},packFloat32=function(t){return packIEEE754(t,23,4)},packFloat64=function(t){return packIEEE754(t,52,8)},addGetter=function(t,e){defineProperty$3(t[PROTOTYPE$1],e,{get:function(){return getInternalState$2(this)[e]}})},get$1=function(t,e,r,n){var i=toIndex(r),s=getInternalState$2(t);if(i+e>s.byteLength)throw RangeError$1(WRONG_INDEX);var o=getInternalState$2(s.buffer).bytes,a=i+s.byteOffset,l=o.slice(a,a+e);return n?l:l.reverse()},set$2=function(t,e,r,n,i,s){var o=toIndex(r),a=getInternalState$2(t);if(o+e>a.byteLength)throw RangeError$1(WRONG_INDEX);for(var l=getInternalState$2(a.buffer).bytes,h=o+a.byteOffset,u=n(+i),c=0;c<e;c++)l[h+c]=u[s?c:e-c-1]};if(arrayBufferNative){if(!fails((function(){NativeArrayBuffer(1)}))||!fails((function(){new NativeArrayBuffer(-1)}))||fails((function(){return new NativeArrayBuffer,new NativeArrayBuffer(1.5),new NativeArrayBuffer(NaN),NativeArrayBuffer.name!=ARRAY_BUFFER}))){$ArrayBuffer=function(t){return anInstance(this,$ArrayBuffer),new NativeArrayBuffer(toIndex(t))};for(var ArrayBufferPrototype=$ArrayBuffer[PROTOTYPE$1]=NativeArrayBuffer[PROTOTYPE$1],keys$1=getOwnPropertyNames(NativeArrayBuffer),j=0,key;keys$1.length>j;)(key=keys$1[j++])in $ArrayBuffer||createNonEnumerableProperty($ArrayBuffer,key,NativeArrayBuffer[key]);ArrayBufferPrototype.constructor=$ArrayBuffer}objectSetPrototypeOf&&objectGetPrototypeOf($DataViewPrototype)!==ObjectPrototype$1&&objectSetPrototypeOf($DataViewPrototype,ObjectPrototype$1);var testView=new $DataView(new $ArrayBuffer(2)),nativeSetInt8=$DataViewPrototype.setInt8;testView.setInt8(0,2147483648),testView.setInt8(1,2147483649),!testView.getInt8(0)&&testView.getInt8(1)||redefineAll($DataViewPrototype,{setInt8:function(t,e){nativeSetInt8.call(this,t,e<<24>>24)},setUint8:function(t,e){nativeSetInt8.call(this,t,e<<24>>24)}},{unsafe:!0})}else $ArrayBuffer=function(t){anInstance(this,$ArrayBuffer,ARRAY_BUFFER);var e=toIndex(t);setInternalState$2(this,{bytes:arrayFill.call(new Array(e),0),byteLength:e}),descriptors||(this.byteLength=e)},$DataView=function(t,e,r){anInstance(this,$DataView,DATA_VIEW),anInstance(t,$ArrayBuffer,DATA_VIEW);var n=getInternalState$2(t).byteLength,i=toInteger(e);if(i<0||i>n)throw RangeError$1("Wrong offset");if(i+(r=void 0===r?n-i:toLength(r))>n)throw RangeError$1(WRONG_LENGTH);setInternalState$2(this,{buffer:t,byteLength:r,byteOffset:i}),descriptors||(this.buffer=t,this.byteLength=r,this.byteOffset=i)},descriptors&&(addGetter($ArrayBuffer,"byteLength"),addGetter($DataView,"buffer"),addGetter($DataView,"byteLength"),addGetter($DataView,"byteOffset")),redefineAll($DataView[PROTOTYPE$1],{getInt8:function(t){return get$1(this,1,t)[0]<<24>>24},getUint8:function(t){return get$1(this,1,t)[0]},getInt16:function(t){var e=get$1(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=get$1(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return unpackInt32(get$1(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return unpackInt32(get$1(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return unpackIEEE754(get$1(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return unpackIEEE754(get$1(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){set$2(this,1,t,packInt8,e)},setUint8:function(t,e){set$2(this,1,t,packInt8,e)},setInt16:function(t,e){set$2(this,2,t,packInt16,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){set$2(this,2,t,packInt16,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){set$2(this,4,t,packInt32,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){set$2(this,4,t,packInt32,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){set$2(this,4,t,packFloat32,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){set$2(this,8,t,packFloat64,e,arguments.length>2?arguments[2]:void 0)}});setToStringTag($ArrayBuffer,ARRAY_BUFFER),setToStringTag($DataView,DATA_VIEW);var arrayBuffer={ArrayBuffer:$ArrayBuffer,DataView:$DataView},ArrayBuffer$1=arrayBuffer.ArrayBuffer,DataView$1=arrayBuffer.DataView,nativeArrayBufferSlice=ArrayBuffer$1.prototype.slice,INCORRECT_SLICE=fails((function(){return!new ArrayBuffer$1(2).slice(1,void 0).byteLength}));_export({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:INCORRECT_SLICE},{slice:function(t,e){if(void 0!==nativeArrayBufferSlice&&void 0===e)return nativeArrayBufferSlice.call(anObject(this),t);for(var r=anObject(this).byteLength,n=toAbsoluteIndex(t,r),i=toAbsoluteIndex(void 0===e?r:e,r),s=new(speciesConstructor(this,ArrayBuffer$1))(toLength(i-n)),o=new DataView$1(this),a=new DataView$1(s),l=0;n<i;)a.setUint8(l++,o.getUint8(n++));return s}});var defineProperty$4=objectDefineProperty.f,Int8Array=global_1.Int8Array,Int8ArrayPrototype=Int8Array&&Int8Array.prototype,Uint8ClampedArray$1=global_1.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray$1&&Uint8ClampedArray$1.prototype,TypedArray=Int8Array&&objectGetPrototypeOf(Int8Array),TypedArrayPrototype=Int8ArrayPrototype&&objectGetPrototypeOf(Int8ArrayPrototype),ObjectPrototype$2=Object.prototype,isPrototypeOf=ObjectPrototype$2.isPrototypeOf,TO_STRING_TAG$4=wellKnownSymbol("toStringTag"),TYPED_ARRAY_TAG=uid("TYPED_ARRAY_TAG"),NATIVE_ARRAY_BUFFER_VIEWS=arrayBufferNative&&!!objectSetPrototypeOf&&"Opera"!==classof(global_1.opera),TYPED_ARRAY_TAG_REQIRED=!1,NAME,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},isView=function(t){var e=classof(t);return"DataView"===e||has(TypedArrayConstructorsList,e)},isTypedArray=function(t){return isObject(t)&&has(TypedArrayConstructorsList,classof(t))},aTypedArray=function(t){if(isTypedArray(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor=function(t){if(objectSetPrototypeOf){if(isPrototypeOf.call(TypedArray,t))return t}else for(var e in TypedArrayConstructorsList)if(has(TypedArrayConstructorsList,NAME)){var r=global_1[e];if(r&&(t===r||isPrototypeOf.call(r,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod=function(t,e,r){if(descriptors){if(r)for(var n in TypedArrayConstructorsList){var i=global_1[n];i&&has(i.prototype,t)&&delete i.prototype[t]}TypedArrayPrototype[t]&&!r||redefine(TypedArrayPrototype,t,r?e:NATIVE_ARRAY_BUFFER_VIEWS&&Int8ArrayPrototype[t]||e)}},exportTypedArrayStaticMethod=function(t,e,r){var n,i;if(descriptors){if(objectSetPrototypeOf){if(r)for(n in TypedArrayConstructorsList)(i=global_1[n])&&has(i,t)&&delete i[t];if(TypedArray[t]&&!r)return;try{return redefine(TypedArray,t,r?e:NATIVE_ARRAY_BUFFER_VIEWS&&Int8Array[t]||e)}catch(t){}}for(n in TypedArrayConstructorsList)!(i=global_1[n])||i[t]&&!r||redefine(i,t,e)}};for(NAME in TypedArrayConstructorsList)global_1[NAME]||(NATIVE_ARRAY_BUFFER_VIEWS=!1);if((!NATIVE_ARRAY_BUFFER_VIEWS||"function"!=typeof TypedArray||TypedArray===Function.prototype)&&(TypedArray=function(){throw TypeError("Incorrect invocation")},NATIVE_ARRAY_BUFFER_VIEWS))for(NAME in TypedArrayConstructorsList)global_1[NAME]&&objectSetPrototypeOf(global_1[NAME],TypedArray);if((!NATIVE_ARRAY_BUFFER_VIEWS||!TypedArrayPrototype||TypedArrayPrototype===ObjectPrototype$2)&&(TypedArrayPrototype=TypedArray.prototype,NATIVE_ARRAY_BUFFER_VIEWS))for(NAME in TypedArrayConstructorsList)global_1[NAME]&&objectSetPrototypeOf(global_1[NAME].prototype,TypedArrayPrototype);if(NATIVE_ARRAY_BUFFER_VIEWS&&objectGetPrototypeOf(Uint8ClampedArrayPrototype)!==TypedArrayPrototype&&objectSetPrototypeOf(Uint8ClampedArrayPrototype,TypedArrayPrototype),descriptors&&!has(TypedArrayPrototype,TO_STRING_TAG$4))for(NAME in TYPED_ARRAY_TAG_REQIRED=!0,defineProperty$4(TypedArrayPrototype,TO_STRING_TAG$4,{get:function(){return isObject(this)?this[TYPED_ARRAY_TAG]:void 0}}),TypedArrayConstructorsList)global_1[NAME]&&createNonEnumerableProperty(global_1[NAME],TYPED_ARRAY_TAG,NAME);var arrayBufferViewCore={NATIVE_ARRAY_BUFFER_VIEWS:NATIVE_ARRAY_BUFFER_VIEWS,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQIRED&&TYPED_ARRAY_TAG,aTypedArray:aTypedArray,aTypedArrayConstructor:aTypedArrayConstructor,exportTypedArrayMethod:exportTypedArrayMethod,exportTypedArrayStaticMethod:exportTypedArrayStaticMethod,isView:isView,isTypedArray:isTypedArray,TypedArray:TypedArray,TypedArrayPrototype:TypedArrayPrototype},NATIVE_ARRAY_BUFFER_VIEWS$1=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,ArrayBuffer$2=global_1.ArrayBuffer,Int8Array$1=global_1.Int8Array,typedArrayConstructorsRequireWrappers=!NATIVE_ARRAY_BUFFER_VIEWS$1||!fails((function(){Int8Array$1(1)}))||!fails((function(){new Int8Array$1(-1)}))||!checkCorrectnessOfIteration((function(t){new Int8Array$1,new Int8Array$1(null),new Int8Array$1(1.5),new Int8Array$1(t)}),!0)||fails((function(){return 1!==new Int8Array$1(new ArrayBuffer$2(2),1,void 0).length})),toPositiveInteger=function(t){var e=toInteger(t);if(e<0)throw RangeError("The argument can't be less than 0");return e},toOffset=function(t,e){var r=toPositiveInteger(t);if(r%e)throw RangeError("Wrong offset");return r},aTypedArrayConstructor$1=arrayBufferViewCore.aTypedArrayConstructor,typedArrayFrom=function(t){var e,r,n,i,s,o,a=toObject(t),l=arguments.length,h=l>1?arguments[1]:void 0,u=void 0!==h,c=getIteratorMethod(a);if(null!=c&&!isArrayIteratorMethod(c))for(o=(s=c.call(a)).next,a=[];!(i=o.call(s)).done;)a.push(i.value);for(u&&l>2&&(h=functionBindContext(h,arguments[2],2)),r=toLength(a.length),n=new(aTypedArrayConstructor$1(this))(r),e=0;r>e;e++)n[e]=u?h(a[e],e):a[e];return n},isArray=Array.isArray||function(t){return"Array"==classofRaw(t)},SPECIES$4=wellKnownSymbol("species"),arraySpeciesCreate=function(t,e){var r;return isArray(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!isArray(r.prototype)?isObject(r)&&null===(r=r[SPECIES$4])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},push=[].push,createMethod$4=function(t){var e=1==t,r=2==t,n=3==t,i=4==t,s=6==t,o=5==t||s;return function(a,l,h,u){for(var c,f,p=toObject(a),d=indexedObject(p),m=functionBindContext(l,h,3),y=toLength(d.length),v=0,g=u||arraySpeciesCreate,b=e?g(a,y):r?g(a,0):void 0;y>v;v++)if((o||v in d)&&(f=m(c=d[v],v,p),t))if(e)b[v]=f;else if(f)switch(t){case 3:return!0;case 5:return c;case 6:return v;case 2:push.call(b,c)}else if(i)return!1;return s?-1:n||i?i:b}},arrayIteration={forEach:createMethod$4(0),map:createMethod$4(1),filter:createMethod$4(2),some:createMethod$4(3),every:createMethod$4(4),find:createMethod$4(5),findIndex:createMethod$4(6)},inheritIfRequired=function(t,e,r){var n,i;return objectSetPrototypeOf&&"function"==typeof(n=e.constructor)&&n!==r&&isObject(i=n.prototype)&&i!==r.prototype&&objectSetPrototypeOf(t,i),t},typedArrayConstructor=createCommonjsModule((function(t){var e=objectGetOwnPropertyNames.f,r=arrayIteration.forEach,n=internalState.get,i=internalState.set,s=objectDefineProperty.f,o=objectGetOwnPropertyDescriptor.f,a=Math.round,l=global_1.RangeError,h=arrayBuffer.ArrayBuffer,u=arrayBuffer.DataView,c=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,f=arrayBufferViewCore.TYPED_ARRAY_TAG,p=arrayBufferViewCore.TypedArray,d=arrayBufferViewCore.TypedArrayPrototype,m=arrayBufferViewCore.aTypedArrayConstructor,y=arrayBufferViewCore.isTypedArray,v=function(t,e){for(var r=0,n=e.length,i=new(m(t))(n);n>r;)i[r]=e[r++];return i},g=function(t,e){s(t,e,{get:function(){return n(this)[e]}})},b=function(t){var e;return t instanceof h||"ArrayBuffer"==(e=classof(t))||"SharedArrayBuffer"==e},_=function(t,e){return y(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},w=function(t,e){return _(t,e=toPrimitive(e,!0))?createPropertyDescriptor(2,t[e]):o(t,e)},E=function(t,e,r){return!(_(t,e=toPrimitive(e,!0))&&isObject(r)&&has(r,"value"))||has(r,"get")||has(r,"set")||r.configurable||has(r,"writable")&&!r.writable||has(r,"enumerable")&&!r.enumerable?s(t,e,r):(t[e]=r.value,t)};descriptors?(c||(objectGetOwnPropertyDescriptor.f=w,objectDefineProperty.f=E,g(d,"buffer"),g(d,"byteOffset"),g(d,"byteLength"),g(d,"length")),_export({target:"Object",stat:!0,forced:!c},{getOwnPropertyDescriptor:w,defineProperty:E}),t.exports=function(t,o,m){var g=t.match(/\d+$/)[0]/8,_=t+(m?"Clamped":"")+"Array",w="get"+t,E="set"+t,S=global_1[_],T=S,x=T&&T.prototype,A={},P=function(t,e){s(t,e,{get:function(){return function(t,e){var r=n(t);return r.view[w](e*g+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var i=n(t);m&&(r=(r=a(r))<0?0:r>255?255:255&r),i.view[E](e*g+i.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};c?typedArrayConstructorsRequireWrappers&&(T=o((function(t,e,r,n){return anInstance(t,T,_),inheritIfRequired(isObject(e)?b(e)?void 0!==n?new S(e,toOffset(r,g),n):void 0!==r?new S(e,toOffset(r,g)):new S(e):y(e)?v(T,e):typedArrayFrom.call(T,e):new S(toIndex(e)),t,T)})),objectSetPrototypeOf&&objectSetPrototypeOf(T,p),r(e(S),(function(t){t in T||createNonEnumerableProperty(T,t,S[t])})),T.prototype=x):(T=o((function(t,e,r,n){anInstance(t,T,_);var s,o,a,c=0,f=0;if(isObject(e)){if(!b(e))return y(e)?v(T,e):typedArrayFrom.call(T,e);s=e,f=toOffset(r,g);var p=e.byteLength;if(void 0===n){if(p%g)throw l("Wrong length");if((o=p-f)<0)throw l("Wrong length")}else if((o=toLength(n)*g)+f>p)throw l("Wrong length");a=o/g}else a=toIndex(e),s=new h(o=a*g);for(i(t,{buffer:s,byteOffset:f,byteLength:o,length:a,view:new u(s)});c<a;)P(t,c++)})),objectSetPrototypeOf&&objectSetPrototypeOf(T,p),x=T.prototype=objectCreate(d)),x.constructor!==T&&createNonEnumerableProperty(x,"constructor",T),f&&createNonEnumerableProperty(x,f,_),A[_]=T,_export({global:!0,forced:T!=S,sham:!c},A),"BYTES_PER_ELEMENT"in T||createNonEnumerableProperty(T,"BYTES_PER_ELEMENT",g),"BYTES_PER_ELEMENT"in x||createNonEnumerableProperty(x,"BYTES_PER_ELEMENT",g),setSpecies(_)}):t.exports=function(){}}));typedArrayConstructor("Float32",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var Int8Array$2=global_1.Int8Array,aTypedArray$1=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$1=arrayBufferViewCore.exportTypedArrayMethod,$toLocaleString=[].toLocaleString,$slice=[].slice,TO_LOCALE_STRING_BUG=!!Int8Array$2&&fails((function(){$toLocaleString.call(new Int8Array$2(1))})),FORCED$1=fails((function(){return[1,2].toLocaleString()!=new Int8Array$2([1,2]).toLocaleString()}))||!fails((function(){Int8Array$2.prototype.toLocaleString.call([1,2])}));exportTypedArrayMethod$1("toLocaleString",(function(){return $toLocaleString.apply(TO_LOCALE_STRING_BUG?$slice.call(aTypedArray$1(this)):aTypedArray$1(this),arguments)}),FORCED$1);class BezierUtility{constructor(t,e,r,n){if(this.mX1=t,this.mY1=e,this.mX2=r,this.mY2=n,this.NEWTON_ITERATIONS=4,this.NEWTON_MIN_SLOPE=.001,this.SUBDIVISION_PRECISION=1e-7,this.SUBDIVISION_MAX_ITERATIONS=10,this.kSplineTableSize=11,this.kSampleStepSize=1/(this.kSplineTableSize-1),this.sampleValues="function"==typeof Float32Array?new Float32Array(this.kSplineTableSize):new Array(this.kSplineTableSize),!(t>=0&&t<=1&&r>=0&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&r===n)return this;for(var i=0;i<this.kSplineTableSize;++i)this.sampleValues[i]=this.calcBezier(i*this.kSampleStepSize,t,r)}getValue(t){return this.mX1===this.mY1&&this.mX2===this.mY2||0===t||1===t||this.mX1===this.mY1&&this.mX2===this.mY2?t:this.calcBezier(this.getTForX(t,this.mX1,this.mX2),this.mY1,this.mY2)}getTForX(t,e,r){for(var n=0,i=1,s=this.kSplineTableSize-1;i!==s&&this.sampleValues[i]<=t;++i)n+=this.kSampleStepSize;--i;var o=n+(t-this.sampleValues[i])/(this.sampleValues[i+1]-this.sampleValues[i])*this.kSampleStepSize,a=this.getSlope(o,e,r);return a>=this.NEWTON_MIN_SLOPE?this.newtonRaphsonIterate(t,o,e,r):0===a?o:this.binarySubdivide(t,n,n+this.kSampleStepSize,e,r)}A(t,e){return 1-3*e+3*t}B(t,e){return 3*e-6*t}C(t){return 3*t}calcBezier(t,e,r){return((this.A(e,r)*t+this.B(e,r))*t+this.C(e))*t}getSlope(t,e,r){return 3*this.A(e,r)*t*t+2*this.B(e,r)*t+this.C(e)}binarySubdivide(t,e,r,n,i){var s,o,a=0;do{o=e+(r-e)/2,(s=this.calcBezier(o,n,i)-t)>0?r=o:e=o}while(Math.abs(s)>this.SUBDIVISION_PRECISION&&++a<this.SUBDIVISION_MAX_ITERATIONS);return o}newtonRaphsonIterate(t,e,r,n){for(var i=0;i<this.NEWTON_ITERATIONS;++i){var s=this.getSlope(e,r,n);if(0===s)return e;e-=(this.calcBezier(e,r,n)-t)/s}return e}}var lottie=createCommonjsModule((function(module){"undefined"!=typeof navigator&&function(t,e){module.exports?module.exports=e(t):(t.lottie=e(t),t.bodymovin=t.lottie)}(window||{},(function(window){var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,BMMath={};function ProjectInterface(){return{}}!function(){var t,e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],r=e.length;for(t=0;t<r;t+=1)BMMath[e[t]]=Math[e[t]]}(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"===typeof t&&t.length){var e,r=createSizedArray(t.length),n=t.length;for(e=0;e<n;e+=1)r[e]=Math.abs(t[e]);return r}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin=t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility=t.style.webkitBackfaceVisibility="visible",t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,r,n){this.type=t,this.currentTime=e,this.totalTime=r,this.direction=n<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,r,n){this.type=t,this.currentLoop=r,this.totalLoops=e,this.direction=n<0?-1:1}function BMSegmentStartEvent(t,e,r){this.type=t,this.firstFrame=e,this.totalFrames=r}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}var createElementID=(_count=0,function(){return"__lottie_element_"+ ++_count}),_count;function HSVtoRGB(t,e,r){var n,i,s,o,a,l,h,u;switch(l=r*(1-e),h=r*(1-(a=6*t-(o=Math.floor(6*t)))*e),u=r*(1-(1-a)*e),o%6){case 0:n=r,i=u,s=l;break;case 1:n=h,i=r,s=l;break;case 2:n=l,i=r,s=u;break;case 3:n=l,i=h,s=r;break;case 4:n=u,i=l,s=r;break;case 5:n=r,i=l,s=h}return[n,i,s]}function RGBtoHSV(t,e,r){var n,i=Math.max(t,e,r),s=Math.min(t,e,r),o=i-s,a=0===i?0:o/i,l=i/255;switch(i){case s:n=0;break;case t:n=e-r+o*(e<r?6:0),n/=6*o;break;case e:n=r-t+2*o,n/=6*o;break;case r:n=t-e+4*o,n/=6*o}return[n,a,l]}function addSaturationToRGB(t,e){var r=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return r[1]+=e,r[1]>1?r[1]=1:r[1]<=0&&(r[1]=0),HSVtoRGB(r[0],r[1],r[2])}function addBrightnessToRGB(t,e){var r=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return r[2]+=e,r[2]>1?r[2]=1:r[2]<0&&(r[2]=0),HSVtoRGB(r[0],r[1],r[2])}function addHueToRGB(t,e){var r=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return r[0]+=e/360,r[0]>1?r[0]-=1:r[0]<0&&(r[0]+=1),HSVtoRGB(r[0],r[1],r[2])}var rgbToHex=function(){var t,e,r=[];for(t=0;t<256;t+=1)e=t.toString(16),r[t]=1==e.length?"0"+e:e;return function(t,e,n){return t<0&&(t=0),e<0&&(e=0),n<0&&(n=0),"#"+r[t]+r[e]+r[n]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var r=this._cbs[t].length,n=0;n<r;n++)this._cbs[t][n](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var r=0,n=this._cbs[t].length;r<n;)this._cbs[t][r]===e&&(this._cbs[t].splice(r,1),r-=1,n-=1),r+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var createTypedArray="function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,e){return"float32"===t?new Float32Array(e):"int16"===t?new Int16Array(e):"uint8c"===t?new Uint8ClampedArray(e):void 0}:function(t,e){var r,n=0,i=[];switch(t){case"int16":case"uint8c":r=1;break;default:r=1.1}for(n=0;n<e;n+=1)i.push(r);return i};function createSizedArray(t){return Array.apply(null,{length:t})}function createNS(t){return document.createElementNS(svgNS,t)}function createTag(t){return document.createElement(t)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(t){return blendModeEnums[t]||""}),blendModeEnums,Matrix=function(){var t=Math.cos,e=Math.sin,r=Math.tan,n=Math.round;function i(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(r){if(0===r)return this;var n=t(r),i=e(r);return this._t(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1)}function o(r){if(0===r)return this;var n=t(r),i=e(r);return this._t(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1)}function a(r){if(0===r)return this;var n=t(r),i=e(r);return this._t(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1)}function l(r){if(0===r)return this;var n=t(r),i=e(r);return this._t(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1)}function h(t,e){return this._t(1,e,t,1,0,0)}function u(t,e){return this.shear(r(t),r(e))}function c(n,i){var s=t(i),o=e(i);return this._t(s,o,0,0,-o,s,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,r(n),1,0,0,0,0,1,0,0,0,0,1)._t(s,-o,0,0,o,s,0,0,0,0,1,0,0,0,0,1)}function f(t,e,r){return r||0===r||(r=1),1===t&&1===e&&1===r?this:this._t(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1)}function p(t,e,r,n,i,s,o,a,l,h,u,c,f,p,d,m){return this.props[0]=t,this.props[1]=e,this.props[2]=r,this.props[3]=n,this.props[4]=i,this.props[5]=s,this.props[6]=o,this.props[7]=a,this.props[8]=l,this.props[9]=h,this.props[10]=u,this.props[11]=c,this.props[12]=f,this.props[13]=p,this.props[14]=d,this.props[15]=m,this}function d(t,e,r){return r=r||0,0!==t||0!==e||0!==r?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1):this}function m(t,e,r,n,i,s,o,a,l,h,u,c,f,p,d,m){var y=this.props;if(1===t&&0===e&&0===r&&0===n&&0===i&&1===s&&0===o&&0===a&&0===l&&0===h&&1===u&&0===c)return y[12]=y[12]*t+y[15]*f,y[13]=y[13]*s+y[15]*p,y[14]=y[14]*u+y[15]*d,y[15]=y[15]*m,this._identityCalculated=!1,this;var v=y[0],g=y[1],b=y[2],_=y[3],w=y[4],E=y[5],S=y[6],T=y[7],x=y[8],A=y[9],P=y[10],I=y[11],C=y[12],D=y[13],k=y[14],O=y[15];return y[0]=v*t+g*i+b*l+_*f,y[1]=v*e+g*s+b*h+_*p,y[2]=v*r+g*o+b*u+_*d,y[3]=v*n+g*a+b*c+_*m,y[4]=w*t+E*i+S*l+T*f,y[5]=w*e+E*s+S*h+T*p,y[6]=w*r+E*o+S*u+T*d,y[7]=w*n+E*a+S*c+T*m,y[8]=x*t+A*i+P*l+I*f,y[9]=x*e+A*s+P*h+I*p,y[10]=x*r+A*o+P*u+I*d,y[11]=x*n+A*a+P*c+I*m,y[12]=C*t+D*i+k*l+O*f,y[13]=C*e+D*s+k*h+O*p,y[14]=C*r+D*o+k*u+O*d,y[15]=C*n+D*a+k*c+O*m,this._identityCalculated=!1,this}function y(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function v(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function g(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e]}function b(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function _(t,e,r){return{x:t*this.props[0]+e*this.props[4]+r*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+r*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+r*this.props[10]+this.props[14]}}function w(t,e,r){return t*this.props[0]+e*this.props[4]+r*this.props[8]+this.props[12]}function E(t,e,r){return t*this.props[1]+e*this.props[5]+r*this.props[9]+this.props[13]}function S(t,e,r){return t*this.props[2]+e*this.props[6]+r*this.props[10]+this.props[14]}function T(){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],e=this.props[5]/t,r=-this.props[1]/t,n=-this.props[4]/t,i=this.props[0]/t,s=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,o=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,a=new Matrix;return a.props[0]=e,a.props[1]=r,a.props[4]=n,a.props[5]=i,a.props[12]=s,a.props[13]=o,a}function x(t){return this.getInverseMatrix().applyToPointArray(t[0],t[1],t[2]||0)}function A(t){var e,r=t.length,n=[];for(e=0;e<r;e+=1)n[e]=x(t[e]);return n}function P(t,e,r){var n=createTypedArray("float32",6);if(this.isIdentity())n[0]=t[0],n[1]=t[1],n[2]=e[0],n[3]=e[1],n[4]=r[0],n[5]=r[1];else{var i=this.props[0],s=this.props[1],o=this.props[4],a=this.props[5],l=this.props[12],h=this.props[13];n[0]=t[0]*i+t[1]*o+l,n[1]=t[0]*s+t[1]*a+h,n[2]=e[0]*i+e[1]*o+l,n[3]=e[0]*s+e[1]*a+h,n[4]=r[0]*i+r[1]*o+l,n[5]=r[0]*s+r[1]*a+h}return n}function I(t,e,r){return this.isIdentity()?[t,e,r]:[t*this.props[0]+e*this.props[4]+r*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+r*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+r*this.props[10]+this.props[14]]}function C(t,e){if(this.isIdentity())return t+","+e;var r=this.props;return Math.round(100*(t*r[0]+e*r[4]+r[12]))/100+","+Math.round(100*(t*r[1]+e*r[5]+r[13]))/100}function D(){for(var t=0,e=this.props,r="matrix3d(";t<16;)r+=n(1e4*e[t])/1e4,r+=15===t?")":",",t+=1;return r}function k(t){return t<1e-6&&t>0||t>-1e-6&&t<0?n(1e4*t)/1e4:t}function O(){var t=this.props;return"matrix("+k(t[0])+","+k(t[1])+","+k(t[4])+","+k(t[5])+","+k(t[12])+","+k(t[13])+")"}return function(){this.reset=i,this.rotate=s,this.rotateX=o,this.rotateY=a,this.rotateZ=l,this.skew=u,this.skewFromAxis=c,this.shear=h,this.scale=f,this.setTransform=p,this.translate=d,this.transform=m,this.applyToPoint=_,this.applyToX=w,this.applyToY=E,this.applyToZ=S,this.applyToPointArray=I,this.applyToTriplePoints=P,this.applyToPointStringified=C,this.toCSS=D,this.to2dCSS=O,this.clone=g,this.cloneFromProps=b,this.equals=v,this.inversePoints=A,this.inversePoint=x,this.getInverseMatrix=T,this._t=this.transform,this.isIdentity=y,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();
/*!
	 Transformation Matrix v2.0
	 (c) Epistemex 2014-2015
	 www.epistemex.com
	 By Ken Fyrstenberg
	 Contributions by leeoniya.
	 License: MIT, header required.
	 */!function(t,e){var r=this,n=e.pow(256,6),i=e.pow(2,52),s=2*i;function o(t){var e,r=t.length,n=this,i=0,s=n.i=n.j=0,o=n.S=[];for(r||(t=[r++]);i<256;)o[i]=i++;for(i=0;i<256;i++)o[i]=o[s=255&s+t[i%r]+(e=o[i])],o[s]=e;n.g=function(t){for(var e,r=0,i=n.i,s=n.j,o=n.S;t--;)e=o[i=255&i+1],r=256*r+o[255&(o[i]=o[s=255&s+e])+(o[s]=e)];return n.i=i,n.j=s,r}}function a(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function l(t,e){for(var r,n=t+"",i=0;i<n.length;)e[255&i]=255&(r^=19*e[255&i])+n.charCodeAt(i++);return h(e)}function h(t){return String.fromCharCode.apply(0,t)}e.seedrandom=function(u,c,f){var p=[],d=l(function t(e,r){var n,i=[],s=typeof e;if(r&&"object"==s)for(n in e)try{i.push(t(e[n],r-1))}catch(t){}return i.length?i:"string"==s?e:e+"\0"}((c=!0===c?{entropy:!0}:c||{}).entropy?[u,h(t)]:null===u?function(){try{void 0;var e=new Uint8Array(256);return(r.crypto||r.msCrypto).getRandomValues(e),h(e)}catch(e){var n=r.navigator,i=n&&n.plugins;return[+new Date,r,i,r.screen,h(t)]}}():u,3),p),m=new o(p),y=function(){for(var t=m.g(6),e=n,r=0;t<i;)t=256*(t+r),e*=256,r=m.g(1);for(;t>=s;)t/=2,e/=2,r>>>=1;return(t+r)/e};return y.int32=function(){return 0|m.g(4)},y.quick=function(){return m.g(4)/4294967296},y.double=y,l(h(m.S),t),(c.pass||f||function(t,r,n,i){return i&&(i.S&&a(i,m),t.state=function(){return a(m,{})}),n?(e.random=t,r):t})(y,d,"global"in c?c.global:this==e,c.state)},l(e.random(),t)}([],BMMath);var BezierFactory=function(){var t={getBezierEasing:function(t,r,n,i,s){var o=s||("bez_"+t+"_"+r+"_"+n+"_"+i).replace(/\./g,"p");if(e[o])return e[o];var a=new l([t,r,n,i]);return e[o]=a,a}},e={};var r="function"==typeof Float32Array;function n(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function s(t){return 3*t}function o(t,e,r){return((n(e,r)*t+i(e,r))*t+s(e))*t}function a(t,e,r){return 3*n(e,r)*t*t+2*i(e,r)*t+s(e)}function l(t){this._p=t,this._mSampleValues=r?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return l.prototype={get:function(t){var e=this._p[0],r=this._p[1],n=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),e===r&&n===i?t:0===t?0:1===t?1:o(this._getTForX(t),r,i)},_precompute:function(){var t=this._p[0],e=this._p[1],r=this._p[2],n=this._p[3];this._precomputed=!0,t===e&&r===n||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],r=0;r<11;++r)this._mSampleValues[r]=o(.1*r,t,e)},_getTForX:function(t){for(var e=this._p[0],r=this._p[2],n=this._mSampleValues,i=0,s=1;10!==s&&n[s]<=t;++s)i+=.1;var l=i+.1*((t-n[--s])/(n[s+1]-n[s])),h=a(l,e,r);return h>=.001?function(t,e,r,n){for(var i=0;i<4;++i){var s=a(e,r,n);if(0===s)return e;e-=(o(e,r,n)-t)/s}return e}(t,l,e,r):0===h?l:function(t,e,r,n,i){var s,a,l=0;do{(s=o(a=e+(r-e)/2,n,i)-t)>0?r=a:e=a}while(Math.abs(s)>1e-7&&++l<10);return a}(t,i,i+.1,e,r)}},t}();function extendPrototype(t,e){var r,n,i=t.length;for(r=0;r<i;r+=1)for(var s in n=t[r].prototype)n.hasOwnProperty(s)&&(e.prototype[s]=n[s])}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}function bezFunction(){function t(t,e,r,n,i,s){var o=t*n+e*i+r*s-i*n-s*t-r*e;return o>-.001&&o<.001}var e=function(t,e,r,n){var i,s,o,a,l,h,u=defaultCurveSegments,c=0,f=[],p=[],d=bezier_length_pool.newElement();for(o=r.length,i=0;i<u;i+=1){for(l=i/(u-1),h=0,s=0;s<o;s+=1)a=bm_pow(1-l,3)*t[s]+3*bm_pow(1-l,2)*l*r[s]+3*(1-l)*bm_pow(l,2)*n[s]+bm_pow(l,3)*e[s],f[s]=a,null!==p[s]&&(h+=bm_pow(f[s]-p[s],2)),p[s]=f[s];h&&(c+=h=bm_sqrt(h)),d.percents[i]=l,d.lengths[i]=c}return d.addedLength=c,d};function r(t){this.segmentLength=0,this.points=new Array(t)}function n(t,e){this.partialLength=t,this.point=e}var i,s=(i={},function(e,s,o,a){var l=(e[0]+"_"+e[1]+"_"+s[0]+"_"+s[1]+"_"+o[0]+"_"+o[1]+"_"+a[0]+"_"+a[1]).replace(/\./g,"p");if(!i[l]){var h,u,c,f,p,d,m,y=defaultCurveSegments,v=0,g=null;2===e.length&&(e[0]!=s[0]||e[1]!=s[1])&&t(e[0],e[1],s[0],s[1],e[0]+o[0],e[1]+o[1])&&t(e[0],e[1],s[0],s[1],s[0]+a[0],s[1]+a[1])&&(y=2);var b=new r(y);for(c=o.length,h=0;h<y;h+=1){for(m=createSizedArray(c),p=h/(y-1),d=0,u=0;u<c;u+=1)f=bm_pow(1-p,3)*e[u]+3*bm_pow(1-p,2)*p*(e[u]+o[u])+3*(1-p)*bm_pow(p,2)*(s[u]+a[u])+bm_pow(p,3)*s[u],m[u]=f,null!==g&&(d+=bm_pow(m[u]-g[u],2));v+=d=bm_sqrt(d),b.points[h]=new n(d,m),g=m}b.segmentLength=v,i[l]=b}return i[l]});function o(t,e){var r=e.percents,n=e.lengths,i=r.length,s=bm_floor((i-1)*t),o=t*e.addedLength,a=0;if(s===i-1||0===s||o===n[s])return r[s];for(var l=n[s]>o?-1:1,h=!0;h;)if(n[s]<=o&&n[s+1]>o?(a=(o-n[s])/(n[s+1]-n[s]),h=!1):s+=l,s<0||s>=i-1){if(s===i-1)return r[s];h=!1}return r[s]+(r[s+1]-r[s])*a}var a=createTypedArray("float32",8);return{getSegmentsLength:function(t){var r,n=segments_length_pool.newElement(),i=t.c,s=t.v,o=t.o,a=t.i,l=t._length,h=n.lengths,u=0;for(r=0;r<l-1;r+=1)h[r]=e(s[r],s[r+1],o[r],a[r+1]),u+=h[r].addedLength;return i&&l&&(h[r]=e(s[r],s[0],o[r],a[0]),u+=h[r].addedLength),n.totalLength=u,n},getNewSegment:function(t,e,r,n,i,s,l){var h,u=o(i=i<0?0:i>1?1:i,l),c=o(s=s>1?1:s,l),f=t.length,p=1-u,d=1-c,m=p*p*p,y=u*p*p*3,v=u*u*p*3,g=u*u*u,b=p*p*d,_=u*p*d+p*u*d+p*p*c,w=u*u*d+p*u*c+u*p*c,E=u*u*c,S=p*d*d,T=u*d*d+p*c*d+p*d*c,x=u*c*d+p*c*c+u*d*c,A=u*c*c,P=d*d*d,I=c*d*d+d*c*d+d*d*c,C=c*c*d+d*c*c+c*d*c,D=c*c*c;for(h=0;h<f;h+=1)a[4*h]=Math.round(1e3*(m*t[h]+y*r[h]+v*n[h]+g*e[h]))/1e3,a[4*h+1]=Math.round(1e3*(b*t[h]+_*r[h]+w*n[h]+E*e[h]))/1e3,a[4*h+2]=Math.round(1e3*(S*t[h]+T*r[h]+x*n[h]+A*e[h]))/1e3,a[4*h+3]=Math.round(1e3*(P*t[h]+I*r[h]+C*n[h]+D*e[h]))/1e3;return a},getPointInSegment:function(t,e,r,n,i,s){var a=o(i,s),l=1-a;return[Math.round(1e3*(l*l*l*t[0]+(a*l*l+l*a*l+l*l*a)*r[0]+(a*a*l+l*a*a+a*l*a)*n[0]+a*a*a*e[0]))/1e3,Math.round(1e3*(l*l*l*t[1]+(a*l*l+l*a*l+l*l*a)*r[1]+(a*a*l+l*a*a+a*l*a)*n[1]+a*a*a*e[1]))/1e3]},buildBezierData:s,pointOnLine2D:t,pointOnLine3D:function(e,r,n,i,s,o,a,l,h){if(0===n&&0===o&&0===h)return t(e,r,i,s,a,l);var u,c=Math.sqrt(Math.pow(i-e,2)+Math.pow(s-r,2)+Math.pow(o-n,2)),f=Math.sqrt(Math.pow(a-e,2)+Math.pow(l-r,2)+Math.pow(h-n,2)),p=Math.sqrt(Math.pow(a-i,2)+Math.pow(l-s,2)+Math.pow(h-o,2));return(u=c>f?c>p?c-f-p:p-f-c:p>f?p-f-c:f-c-p)>-1e-4&&u<1e-4}}}!function(){for(var t=0,e=["ms","moz","webkit","o"],r=0;r<e.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[e[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[r]+"CancelAnimationFrame"]||window[e[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,r){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),s=setTimeout((function(){e(n+i)}),i);return t=n+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var bez=bezFunction();function dataFunctionManager(){function t(i,s,o){var a,l,h,c,f,p,d=i.length;for(l=0;l<d;l+=1)if("ks"in(a=i[l])&&!a.completed){if(a.completed=!0,a.tt&&(i[l-1].td=a.tt),a.hasMask){var m=a.masksProperties;for(c=m.length,h=0;h<c;h+=1)if(m[h].pt.k.i)n(m[h].pt.k);else for(p=m[h].pt.k.length,f=0;f<p;f+=1)m[h].pt.k[f].s&&n(m[h].pt.k[f].s[0]),m[h].pt.k[f].e&&n(m[h].pt.k[f].e[0])}0===a.ty?(a.layers=e(a.refId,s),t(a.layers,s)):4===a.ty?r(a.shapes):5==a.ty&&u(a)}}function e(t,e){for(var r=0,n=e.length;r<n;){if(e[r].id===t)return e[r].layers.__used?JSON.parse(JSON.stringify(e[r].layers)):(e[r].layers.__used=!0,e[r].layers);r+=1}}function r(t){var e,i,s;for(e=t.length-1;e>=0;e-=1)if("sh"==t[e].ty)if(t[e].ks.k.i)n(t[e].ks.k);else for(s=t[e].ks.k.length,i=0;i<s;i+=1)t[e].ks.k[i].s&&n(t[e].ks.k[i].s[0]),t[e].ks.k[i].e&&n(t[e].ks.k[i].e[0]);else"gr"==t[e].ty&&r(t[e].it)}function n(t){var e,r=t.i.length;for(e=0;e<r;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function i(t,e){var r=e?e.split("."):[100,100,100];return t[0]>r[0]||!(r[0]>t[0])&&(t[1]>r[1]||!(r[1]>t[1])&&(t[2]>r[2]||!(r[2]>t[2])&&void 0))}var s,o=function(){var t=[4,4,14];function e(t){var e,r,n,i=t.length;for(e=0;e<i;e+=1)5===t[e].ty&&(r=t[e],n=void 0,n=r.t.d,r.t.d={k:[{s:n,t:0}]})}return function(r){if(i(t,r.v)&&(e(r.layers),r.assets)){var n,s=r.assets.length;for(n=0;n<s;n+=1)r.assets[n].layers&&e(r.assets[n].layers)}}}(),a=(s=[4,7,99],function(t){if(t.chars&&!i(s,t.v)){var e,r,o,a,l,h=t.chars.length;for(e=0;e<h;e+=1)if(t.chars[e].data&&t.chars[e].data.shapes)for(o=(l=t.chars[e].data.shapes[0].it).length,r=0;r<o;r+=1)(a=l[r].ks.k).__converted||(n(l[r].ks.k),a.__converted=!0)}}),l=function(){var t=[4,1,9];function e(t){var r,n,i,s=t.length;for(r=0;r<s;r+=1)if("gr"===t[r].ty)e(t[r].it);else if("fl"===t[r].ty||"st"===t[r].ty)if(t[r].c.k&&t[r].c.k[0].i)for(i=t[r].c.k.length,n=0;n<i;n+=1)t[r].c.k[n].s&&(t[r].c.k[n].s[0]/=255,t[r].c.k[n].s[1]/=255,t[r].c.k[n].s[2]/=255,t[r].c.k[n].s[3]/=255),t[r].c.k[n].e&&(t[r].c.k[n].e[0]/=255,t[r].c.k[n].e[1]/=255,t[r].c.k[n].e[2]/=255,t[r].c.k[n].e[3]/=255);else t[r].c.k[0]/=255,t[r].c.k[1]/=255,t[r].c.k[2]/=255,t[r].c.k[3]/=255}function r(t){var r,n=t.length;for(r=0;r<n;r+=1)4===t[r].ty&&e(t[r].shapes)}return function(e){if(i(t,e.v)&&(r(e.layers),e.assets)){var n,s=e.assets.length;for(n=0;n<s;n+=1)e.assets[n].layers&&r(e.assets[n].layers)}}}(),h=function(){var t=[4,4,18];function e(t){var r,n,i;for(r=t.length-1;r>=0;r-=1)if("sh"==t[r].ty)if(t[r].ks.k.i)t[r].ks.k.c=t[r].closed;else for(i=t[r].ks.k.length,n=0;n<i;n+=1)t[r].ks.k[n].s&&(t[r].ks.k[n].s[0].c=t[r].closed),t[r].ks.k[n].e&&(t[r].ks.k[n].e[0].c=t[r].closed);else"gr"==t[r].ty&&e(t[r].it)}function r(t){var r,n,i,s,o,a,l=t.length;for(n=0;n<l;n+=1){if((r=t[n]).hasMask){var h=r.masksProperties;for(s=h.length,i=0;i<s;i+=1)if(h[i].pt.k.i)h[i].pt.k.c=h[i].cl;else for(a=h[i].pt.k.length,o=0;o<a;o+=1)h[i].pt.k[o].s&&(h[i].pt.k[o].s[0].c=h[i].cl),h[i].pt.k[o].e&&(h[i].pt.k[o].e[0].c=h[i].cl)}4===r.ty&&e(r.shapes)}}return function(e){if(i(t,e.v)&&(r(e.layers),e.assets)){var n,s=e.assets.length;for(n=0;n<s;n+=1)e.assets[n].layers&&r(e.assets[n].layers)}}}();function u(t,e){0!==t.t.a.length||"m"in t.t.p||(t.singleShape=!0)}var c={completeData:function(e,r){e.__complete||(l(e),o(e),a(e),h(e),t(e.layers,e.assets),e.__complete=!0)}};return c.checkColors=l,c.checkChars=a,c.checkShapes=h,c.completeLayers=t,c}var dataManager=dataFunctionManager(),FontManager=function(){var t={w:0,size:0,shapes:[]},e=[];function r(t,e){var r=createTag("span");r.style.fontFamily=e;var n=createTag("span");n.innerText="giItT1WQy@!-/#",r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.style.fontSize="300px",r.style.fontVariant="normal",r.style.fontStyle="normal",r.style.fontWeight="normal",r.style.letterSpacing="0",r.appendChild(n),document.body.appendChild(r);var i=n.offsetWidth;return n.style.fontFamily=function(t){var e,r=t.split(","),n=r.length,i=[];for(e=0;e<n;e+=1)"sans-serif"!==r[e]&&"monospace"!==r[e]&&i.push(r[e]);return i.join(",")}(t)+", "+e,{node:n,w:i,parent:r}}function n(t,e){var r=createNS("text");return r.style.fontSize="100px",r.setAttribute("font-family",e.fFamily),r.setAttribute("font-style",e.fStyle),r.setAttribute("font-weight",e.fWeight),r.textContent="1",e.fClass?(r.style.fontFamily="inherit",r.setAttribute("class",e.fClass)):r.style.fontFamily=e.fFamily,t.appendChild(r),createTag("canvas").getContext("2d").font=e.fWeight+" "+e.fStyle+" 100px "+e.fFamily,r}e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var i=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return i.getCombinedCharacterCodes=function(){return e},i.prototype={addChars:function(t){if(t){this.chars||(this.chars=[]);var e,r,n,i=t.length,s=this.chars.length;for(e=0;e<i;e+=1){for(r=0,n=!1;r<s;)this.chars[r].style===t[e].style&&this.chars[r].fFamily===t[e].fFamily&&this.chars[r].ch===t[e].ch&&(n=!0),r+=1;n||(this.chars.push(t[e]),s+=1)}}},addFonts:function(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);var i,s=t.list,o=s.length,a=o;for(i=0;i<o;i+=1){var l,h,u=!0;if(s[i].loaded=!1,s[i].monoCase=r(s[i].fFamily,"monospace"),s[i].sansCase=r(s[i].fFamily,"sans-serif"),s[i].fPath){if("p"===s[i].fOrigin||3===s[i].origin){if((l=document.querySelectorAll('style[f-forigin="p"][f-family="'+s[i].fFamily+'"], style[f-origin="3"][f-family="'+s[i].fFamily+'"]')).length>0&&(u=!1),u){var c=createTag("style");c.setAttribute("f-forigin",s[i].fOrigin),c.setAttribute("f-origin",s[i].origin),c.setAttribute("f-family",s[i].fFamily),c.type="text/css",c.innerText="@font-face {font-family: "+s[i].fFamily+"; font-style: normal; src: url('"+s[i].fPath+"');}",e.appendChild(c)}}else if("g"===s[i].fOrigin||1===s[i].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),h=0;h<l.length;h++)-1!==l[h].href.indexOf(s[i].fPath)&&(u=!1);if(u){var f=createTag("link");f.setAttribute("f-forigin",s[i].fOrigin),f.setAttribute("f-origin",s[i].origin),f.type="text/css",f.rel="stylesheet",f.href=s[i].fPath,document.body.appendChild(f)}}else if("t"===s[i].fOrigin||2===s[i].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),h=0;h<l.length;h++)s[i].fPath===l[h].src&&(u=!1);if(u){var p=createTag("link");p.setAttribute("f-forigin",s[i].fOrigin),p.setAttribute("f-origin",s[i].origin),p.setAttribute("rel","stylesheet"),p.setAttribute("href",s[i].fPath),e.appendChild(p)}}}else s[i].loaded=!0,a-=1;s[i].helper=n(e,s[i]),s[i].cache={},this.fonts.push(s[i])}0===a?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(e,r,n){for(var i=0,s=this.chars.length;i<s;){if(this.chars[i].ch===e&&this.chars[i].style===r&&this.chars[i].fFamily===n)return this.chars[i];i+=1}return("string"==typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&console.warn("Missing character from exported characters list: ",e,r,n),t},getFontByName:function(t){for(var e=0,r=this.fonts.length;e<r;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]},measureText:function(t,e,r){var n=this.getFontByName(e),i=t.charCodeAt(0);if(!n.cache[i+1]){var s=n.helper;if(" "===t){s.textContent="|"+t+"|";var o=s.getComputedTextLength();s.textContent="||";var a=s.getComputedTextLength();n.cache[i+1]=(o-a)/100}else s.textContent=t,n.cache[i+1]=s.getComputedTextLength()/100}return n.cache[i+1]*r},checkLoadedFonts:function(){var t,e,r,n=this.fonts.length,i=n;for(t=0;t<n;t+=1)this.fonts[t].loaded?i-=1:"n"===this.fonts[t].fOrigin||0===this.fonts[t].origin?this.fonts[t].loaded=!0:(e=this.fonts[t].monoCase.node,r=this.fonts[t].monoCase.w,e.offsetWidth!==r?(i-=1,this.fonts[t].loaded=!0):(e=this.fonts[t].sansCase.node,r=this.fonts[t].sansCase.w,e.offsetWidth!==r&&(i-=1,this.fonts[t].loaded=!0)),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==i&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},i}(),PropertyFactory=function(){var t=initialDefaultFrame,e=Math.abs;function r(t,e){var r,i=this.offsetTime;"multidimensional"===this.propType&&(r=createTypedArray("float32",this.pv.length));for(var s,o,a,l,h,u,c,f,p=e.lastIndex,d=p,m=this.keyframes.length-1,y=!0;y;){if(s=this.keyframes[d],o=this.keyframes[d+1],d===m-1&&t>=o.t-i){s.h&&(s=o),p=0;break}if(o.t-i>t){p=d;break}d<m-1?d+=1:(p=0,y=!1)}var v,g=o.t-i,b=s.t-i;if(s.to){s.bezierData||(s.bezierData=bez.buildBezierData(s.s,o.s||s.e,s.to,s.ti));var _=s.bezierData;if(t>=g||t<b){var w=t>=g?_.points.length-1:0;for(l=_.points[w].point.length,a=0;a<l;a+=1)r[a]=_.points[w].point[a]}else{s.__fnct?f=s.__fnct:(f=BezierFactory.getBezierEasing(s.o.x,s.o.y,s.i.x,s.i.y,s.n).get,s.__fnct=f),h=f((t-b)/(g-b));var E,S=_.segmentLength*h,T=e.lastFrame<t&&e._lastKeyframeIndex===d?e._lastAddedLength:0;for(c=e.lastFrame<t&&e._lastKeyframeIndex===d?e._lastPoint:0,y=!0,u=_.points.length;y;){if(T+=_.points[c].partialLength,0===S||0===h||c===_.points.length-1){for(l=_.points[c].point.length,a=0;a<l;a+=1)r[a]=_.points[c].point[a];break}if(S>=T&&S<T+_.points[c+1].partialLength){for(E=(S-T)/_.points[c+1].partialLength,l=_.points[c].point.length,a=0;a<l;a+=1)r[a]=_.points[c].point[a]+(_.points[c+1].point[a]-_.points[c].point[a])*E;break}c<u-1?c+=1:y=!1}e._lastPoint=c,e._lastAddedLength=T-_.points[c].partialLength,e._lastKeyframeIndex=d}}else{var x,A,P,I,C;if(m=s.s.length,v=o.s||s.e,this.sh&&1!==s.h)if(t>=g)r[0]=v[0],r[1]=v[1],r[2]=v[2];else if(t<=b)r[0]=s.s[0],r[1]=s.s[1],r[2]=s.s[2];else{!function(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],o=Math.atan2(2*n*s-2*r*i,1-2*n*n-2*i*i),a=Math.asin(2*r*n+2*i*s),l=Math.atan2(2*r*s-2*n*i,1-2*r*r-2*i*i);t[0]=o/degToRads,t[1]=a/degToRads,t[2]=l/degToRads}(r,function(t,e,r){var n,i,s,o,a,l=[],h=t[0],u=t[1],c=t[2],f=t[3],p=e[0],d=e[1],m=e[2],y=e[3];(i=h*p+u*d+c*m+f*y)<0&&(i=-i,p=-p,d=-d,m=-m,y=-y);1-i>1e-6?(n=Math.acos(i),s=Math.sin(n),o=Math.sin((1-r)*n)/s,a=Math.sin(r*n)/s):(o=1-r,a=r);return l[0]=o*h+a*p,l[1]=o*u+a*d,l[2]=o*c+a*m,l[3]=o*f+a*y,l}(n(s.s),n(v),(t-b)/(g-b)))}else for(d=0;d<m;d+=1)1!==s.h&&(t>=g?h=1:t<b?h=0:(s.o.x.constructor===Array?(s.__fnct||(s.__fnct=[]),s.__fnct[d]?f=s.__fnct[d]:(x=void 0===s.o.x[d]?s.o.x[0]:s.o.x[d],A=void 0===s.o.y[d]?s.o.y[0]:s.o.y[d],P=void 0===s.i.x[d]?s.i.x[0]:s.i.x[d],I=void 0===s.i.y[d]?s.i.y[0]:s.i.y[d],f=BezierFactory.getBezierEasing(x,A,P,I).get,s.__fnct[d]=f)):s.__fnct?f=s.__fnct:(x=s.o.x,A=s.o.y,P=s.i.x,I=s.i.y,f=BezierFactory.getBezierEasing(x,A,P,I).get,s.__fnct=f),h=f((t-b)/(g-b)))),v=o.s||s.e,C=1===s.h?s.s[d]:s.s[d]+(v[d]-s.s[d])*h,"multidimensional"===this.propType?r[d]=C:r=C}return e.lastIndex=p,r}function n(t){var e=t[0]*degToRads,r=t[1]*degToRads,n=t[2]*degToRads,i=Math.cos(e/2),s=Math.cos(r/2),o=Math.cos(n/2),a=Math.sin(e/2),l=Math.sin(r/2),h=Math.sin(n/2);return[a*l*o+i*s*h,a*s*o+i*l*h,i*l*o-a*s*h,i*s*o-a*l*h]}function i(){var e=this.comp.renderedFrame-this.offsetTime,r=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==t&&(this._caching.lastFrame>=n&&e>=n||this._caching.lastFrame<r&&e<r))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(e,this._caching);this.pv=i}return this._caching.lastFrame=e,this.pv}function s(t){var r;if("unidimensional"===this.propType)r=t*this.mult,e(this.v-r)>1e-5&&(this.v=r,this._mdf=!0);else for(var n=0,i=this.v.length;n<i;)r=t[n]*this.mult,e(this.v[n]-r)>1e-5&&(this.v[n]=r,this._mdf=!0),n+=1}function o(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=this._isFirstFrame;var t,e=this.effectsSequence.length,r=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)r=this.effectsSequence[t](r);this.setVValue(r),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function a(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function l(t,e,r,n){this.propType="unidimensional",this.mult=r||1,this.data=e,this.v=r?e.k*r:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=n,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=o,this.setVValue=s,this.addEffect=a}function h(t,e,r,n){this.propType="multidimensional",this.mult=r||1,this.data=e,this._mdf=!1,this.elem=t,this.container=n,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i,l=e.k.length;this.v=createTypedArray("float32",l),this.pv=createTypedArray("float32",l);createTypedArray("float32",l);for(this.vel=createTypedArray("float32",l),i=0;i<l;i+=1)this.v[i]=e.k[i]*this.mult,this.pv[i]=e.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=o,this.setVValue=s,this.addEffect=a}function u(e,n,l,h){this.propType="unidimensional",this.keyframes=n.k,this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:t,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=n,this.mult=l||1,this.elem=e,this.container=h,this.comp=e.comp,this.v=t,this.pv=t,this._isFirstFrame=!0,this.getValue=o,this.setVValue=s,this.interpolateValue=r,this.effectsSequence=[i.bind(this)],this.addEffect=a}function c(e,n,l,h){this.propType="multidimensional";var u,c,f,p,d,m=n.k.length;for(u=0;u<m-1;u+=1)n.k[u].to&&n.k[u].s&&n.k[u+1]&&n.k[u+1].s&&(c=n.k[u].s,f=n.k[u+1].s,p=n.k[u].to,d=n.k[u].ti,(2===c.length&&(c[0]!==f[0]||c[1]!==f[1])&&bez.pointOnLine2D(c[0],c[1],f[0],f[1],c[0]+p[0],c[1]+p[1])&&bez.pointOnLine2D(c[0],c[1],f[0],f[1],f[0]+d[0],f[1]+d[1])||3===c.length&&(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2])&&bez.pointOnLine3D(c[0],c[1],c[2],f[0],f[1],f[2],c[0]+p[0],c[1]+p[1],c[2]+p[2])&&bez.pointOnLine3D(c[0],c[1],c[2],f[0],f[1],f[2],f[0]+d[0],f[1]+d[1],f[2]+d[2]))&&(n.k[u].to=null,n.k[u].ti=null),c[0]===f[0]&&c[1]===f[1]&&0===p[0]&&0===p[1]&&0===d[0]&&0===d[1]&&(2===c.length||c[2]===f[2]&&0===p[2]&&0===d[2])&&(n.k[u].to=null,n.k[u].ti=null));this.effectsSequence=[i.bind(this)],this.keyframes=n.k,this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=l||1,this.elem=e,this.container=h,this.comp=e.comp,this.getValue=o,this.setVValue=s,this.interpolateValue=r,this.frameId=-1;var y=n.k[0].s.length;for(this.v=createTypedArray("float32",y),this.pv=createTypedArray("float32",y),u=0;u<y;u+=1)this.v[u]=t,this.pv[u]=t;this._caching={lastFrame:t,lastIndex:0,value:createTypedArray("float32",y)},this.addEffect=a}return{getProp:function(t,e,r,n,i){var s;if(e.k.length)if("number"==typeof e.k[0])s=new h(t,e,n,i);else switch(r){case 0:s=new u(t,e,n,i);break;case 1:s=new c(t,e,n,i)}else s=new l(t,e,n,i);return s.effectsSequence.length&&i.addDynamicProperty(s),s}}}(),TransformPropertyFactory=function(){var t=[0,0];function e(t,e,r){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(r||t),e.p&&e.p.s?(this.px=PropertyFactory.getProp(t,e.p.x,0,0,this),this.py=PropertyFactory.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=PropertyFactory.getProp(t,e.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=PropertyFactory.getProp(t,e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,e.rz,0,degToRads,this),e.or.k[0].ti){var n,i=e.or.k.length;for(n=0;n<i;n+=1)e.or.k[n].to=e.or.k[n].ti=null}this.or=PropertyFactory.getProp(t,e.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,e.r||{k:0},0,degToRads,this);e.sk&&(this.sk=PropertyFactory.getProp(t,e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,e.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=PropertyFactory.getProp(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return e.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,n,i=this.elem.globalData.frameRate;if(this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/i,0),n=this.p.getValueAtTime(this.p.keyframes[0].t/i,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/i,0),n=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/i,0)):(r=this.p.pv,n=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/i,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],n=[];var s=this.px,o=this.py;s._caching.lastFrame+s.offsetTime<=s.keyframes[0].t?(r[0]=s.getValueAtTime((s.keyframes[0].t+.01)/i,0),r[1]=o.getValueAtTime((o.keyframes[0].t+.01)/i,0),n[0]=s.getValueAtTime(s.keyframes[0].t/i,0),n[1]=o.getValueAtTime(o.keyframes[0].t/i,0)):s._caching.lastFrame+s.offsetTime>=s.keyframes[s.keyframes.length-1].t?(r[0]=s.getValueAtTime(s.keyframes[s.keyframes.length-1].t/i,0),r[1]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/i,0),n[0]=s.getValueAtTime((s.keyframes[s.keyframes.length-1].t-.01)/i,0),n[1]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/i,0)):(r=[s.pv,o.pv],n[0]=s.getValueAtTime((s._caching.lastFrame+s.offsetTime-.01)/i,s.offsetTime),n[1]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/i,o.offsetTime))}else r=n=t;this.v.rotate(-Math.atan2(r[1]-n[1],r[0]-n[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}if(this.r){if(this.r.effectsSequence.length)return;this.pre.rotate(-this.r.v),this.appliedTransformations=4}else this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],e),e.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},e.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(t,r,n){return new e(t,r,n)}}}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var r=0;r<e;)this.v[r]=point_pool.newElement(),this.o[r]=point_pool.newElement(),this.i[r]=point_pool.newElement(),r+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,r,n,i){var s;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),r){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o}(!s[n]||s[n]&&!i)&&(s[n]=point_pool.newElement()),s[n][0]=t,s[n][1]=e},ShapePath.prototype.setTripleAt=function(t,e,r,n,i,s,o,a){this.setXYAt(t,e,"v",o,a),this.setXYAt(r,n,"o",o,a),this.setXYAt(i,s,"i",o,a)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,r=this.o,n=this.i,i=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],n[0][0],n[0][1],r[0][0],r[0][1],0,!1),i=1);var s,o=this._length-1,a=this._length;for(s=i;s<a;s+=1)t.setTripleAt(e[o][0],e[o][1],n[o][0],n[o][1],r[o][0],r[o][1],s,!1),o-=1;return t};var ShapePropertyFactory=function(){function t(t,e,r){var n,i,s,o,a,l,h,u,c,f=r.lastIndex,p=this.keyframes;if(t<p[0].t-this.offsetTime)n=p[0].s[0],s=!0,f=0;else if(t>=p[p.length-1].t-this.offsetTime)n=p[p.length-1].s?p[p.length-1].s[0]:p[p.length-2].e[0],s=!0;else{for(var d,m,y=f,v=p.length-1,g=!0;g&&(d=p[y],!((m=p[y+1]).t-this.offsetTime>t));)y<v-1?y+=1:g=!1;if(f=y,!(s=1===d.h)){if(t>=m.t-this.offsetTime)u=1;else if(t<d.t-this.offsetTime)u=0;else{var b;d.__fnct?b=d.__fnct:(b=BezierFactory.getBezierEasing(d.o.x,d.o.y,d.i.x,d.i.y).get,d.__fnct=b),u=b((t-(d.t-this.offsetTime))/(m.t-this.offsetTime-(d.t-this.offsetTime)))}i=m.s?m.s[0]:d.e[0]}n=d.s[0]}for(l=e._length,h=n.i[0].length,r.lastIndex=f,o=0;o<l;o+=1)for(a=0;a<h;a+=1)c=s?n.i[o][a]:n.i[o][a]+(i.i[o][a]-n.i[o][a])*u,e.i[o][a]=c,c=s?n.o[o][a]:n.o[o][a]+(i.o[o][a]-n.o[o][a])*u,e.o[o][a]=c,c=s?n.v[o][a]:n.v[o][a]+(i.v[o][a]-n.v[o][a])*u,e.v[o][a]=c}function e(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,n=this._caching.lastFrame;return-999999!==n&&(n<e&&t<e||n>r&&t>r)||(this._caching.lastIndex=n<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}function r(){this.paths=this.localShapeCollection}function n(t){(function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var r,n=t._length;for(r=0;r<n;r+=1)if(t.v[r][0]!==e.v[r][0]||t.v[r][1]!==e.v[r][1]||t.o[r][0]!==e.o[r][0]||t.o[r][1]!==e.o[r][1]||t.i[r][0]!==e.i[r][0]||t.i[r][1]!==e.i[r][1])return!1;return!0})(this.v,t)||(this.v=shape_pool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function i(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1;var t,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,r=this.effectsSequence.length;for(t=0;t<r;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function s(t,e,n){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;var i=3===n?e.pt.k:e.ks.k;this.v=shape_pool.clone(i),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function o(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function a(t,n,i){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=3===i?n.pt.k:n.ks.k,this.k=!0,this.kf=!0;var s=this.keyframes[0].s[0].i.length;this.keyframes[0].s[0].i[0].length;this.v=shape_pool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,s),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=-999999,this.reset=r,this._caching={lastFrame:-999999,lastIndex:0},this.effectsSequence=[e.bind(this)]}s.prototype.interpolateShape=t,s.prototype.getValue=i,s.prototype.setVValue=n,s.prototype.addEffect=o,a.prototype.getValue=i,a.prototype.interpolateShape=t,a.prototype.setVValue=n,a.prototype.addEffect=o;var l=function(){var t=roundCorner;function e(t,e){this.v=shape_pool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],r=this.p.v[1],n=this.s.v[0]/2,i=this.s.v[1]/2,s=3!==this.d,o=this.v;o.v[0][0]=e,o.v[0][1]=r-i,o.v[1][0]=s?e+n:e-n,o.v[1][1]=r,o.v[2][0]=e,o.v[2][1]=r+i,o.v[3][0]=s?e-n:e+n,o.v[3][1]=r,o.i[0][0]=s?e-n*t:e+n*t,o.i[0][1]=r-i,o.i[1][0]=s?e+n:e-n,o.i[1][1]=r-i*t,o.i[2][0]=s?e+n*t:e-n*t,o.i[2][1]=r+i,o.i[3][0]=s?e-n:e+n,o.i[3][1]=r+i*t,o.o[0][0]=s?e+n*t:e-n*t,o.o[0][1]=r-i,o.o[1][0]=s?e+n:e-n,o.o[1][1]=r+i*t,o.o[2][0]=s?e-n*t:e+n*t,o.o[2][1]=r+i,o.o[3][0]=s?e-n:e+n,o.o[3][1]=r-i*t}},extendPrototype([DynamicPropertyContainer],e),e}(),h=function(){function t(t,e){this.v=shape_pool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=PropertyFactory.getProp(t,e.ir,0,0,this),this.is=PropertyFactory.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,e.pt,0,0,this),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,e.or,0,0,this),this.os=PropertyFactory.getProp(t,e.os,0,.01,this),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var t,e,r,n,i=2*Math.floor(this.pt.v),s=2*Math.PI/i,o=!0,a=this.or.v,l=this.ir.v,h=this.os.v,u=this.is.v,c=2*Math.PI*a/(2*i),f=2*Math.PI*l/(2*i),p=-Math.PI/2;p+=this.r.v;var d=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<i;t+=1){r=o?h:u,n=o?c:f;var m=(e=o?a:l)*Math.cos(p),y=e*Math.sin(p),v=0===m&&0===y?0:y/Math.sqrt(m*m+y*y),g=0===m&&0===y?0:-m/Math.sqrt(m*m+y*y);m+=+this.p.v[0],y+=+this.p.v[1],this.v.setTripleAt(m,y,m-v*n*r*d,y-g*n*r*d,m+v*n*r*d,y+g*n*r*d,t,!0),o=!o,p+=s*d}},convertPolygonToPath:function(){var t,e=Math.floor(this.pt.v),r=2*Math.PI/e,n=this.or.v,i=this.os.v,s=2*Math.PI*n/(4*e),o=-Math.PI/2,a=3===this.data.d?-1:1;for(o+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var l=n*Math.cos(o),h=n*Math.sin(o),u=0===l&&0===h?0:h/Math.sqrt(l*l+h*h),c=0===l&&0===h?0:-l/Math.sqrt(l*l+h*h);l+=+this.p.v[0],h+=+this.p.v[1],this.v.setTripleAt(l,h,l-u*s*i*a,h-c*s*i*a,l+u*s*i*a,h+c*s*i*a,t,!0),o+=r*a}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],t),t}(),u=function(){function t(t,e){this.v=shape_pool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],r=this.s.v[0]/2,n=this.s.v[1]/2,i=bm_min(r,n,this.r.v),s=i*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+r,e-n+i,t+r,e-n+i,t+r,e-n+s,0,!0),this.v.setTripleAt(t+r,e+n-i,t+r,e+n-s,t+r,e+n-i,1,!0),0!==i?(this.v.setTripleAt(t+r-i,e+n,t+r-i,e+n,t+r-s,e+n,2,!0),this.v.setTripleAt(t-r+i,e+n,t-r+s,e+n,t-r+i,e+n,3,!0),this.v.setTripleAt(t-r,e+n-i,t-r,e+n-i,t-r,e+n-s,4,!0),this.v.setTripleAt(t-r,e-n+i,t-r,e-n+s,t-r,e-n+i,5,!0),this.v.setTripleAt(t-r+i,e-n,t-r+i,e-n,t-r+s,e-n,6,!0),this.v.setTripleAt(t+r-i,e-n,t+r-s,e-n,t+r-i,e-n,7,!0)):(this.v.setTripleAt(t-r,e+n,t-r+s,e+n,t-r,e+n,2),this.v.setTripleAt(t-r,e-n,t-r,e-n+s,t-r,e-n,3))):(this.v.setTripleAt(t+r,e-n+i,t+r,e-n+s,t+r,e-n+i,0,!0),0!==i?(this.v.setTripleAt(t+r-i,e-n,t+r-i,e-n,t+r-s,e-n,1,!0),this.v.setTripleAt(t-r+i,e-n,t-r+s,e-n,t-r+i,e-n,2,!0),this.v.setTripleAt(t-r,e-n+i,t-r,e-n+i,t-r,e-n+s,3,!0),this.v.setTripleAt(t-r,e+n-i,t-r,e+n-s,t-r,e+n-i,4,!0),this.v.setTripleAt(t-r+i,e+n,t-r+i,e+n,t-r+s,e+n,5,!0),this.v.setTripleAt(t+r-i,e+n,t+r-s,e+n,t+r-i,e+n,6,!0),this.v.setTripleAt(t+r,e+n-i,t+r,e+n-i,t+r,e+n-s,7,!0)):(this.v.setTripleAt(t-r,e-n,t-r+s,e-n,t-r,e-n,1,!0),this.v.setTripleAt(t-r,e+n,t-r,e+n-s,t-r,e+n,2,!0),this.v.setTripleAt(t+r,e+n,t+r-s,e+n,t+r,e+n,3,!0)))},getValue:function(t){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],t),t}();var c={getShapeProp:function(t,e,r){var n;return 3===r||4===r?n=(3===r?e.pt:e.ks).k.length?new a(t,e,r):new s(t,e,r):5===r?n=new u(t,e):6===r?n=new l(t,e):7===r&&(n=new h(t,e)),n.k&&t.addDynamicProperty(n),n},getConstructorFunction:function(){return s},getKeyframedConstructorFunction:function(){return a}};return c}(),ShapeModifiers=function(){var t={},e={};return t.registerModifier=function(t,r){e[t]||(e[t]=r)},t.getModifier=function(t,r,n){return new e[t](r,n)},t}();function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function PuckerAndBloatModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(t,e,r,n){this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=r,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(n);var i,s,o=e.length||0;for(i=0;i<o;i+=1)s=PropertyFactory.getProp(t,e[i].v,0,0,this),this.k=s.k||this.k,this.dataProps[i]={n:e[i].n,p:s};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(t,e,r){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var n=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",n),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=n,this.initDynamicPropertyContainer(r),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollection_pool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,r,n,i){var s=[];e<=1?s.push({s:t,e:e}):t>=1?s.push({s:t-1,e:e-1}):(s.push({s:t,e:1}),s.push({s:0,e:e-1}));var o,a,l=[],h=s.length;for(o=0;o<h;o+=1){var u,c;if((a=s[o]).e*i<n||a.s*i>n+r);else u=a.s*i<=n?0:(a.s*i-n)/r,c=a.e*i>=n+r?1:(a.e*i-n)/r,l.push([u,c])}return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(t){var e,r=t.length;for(e=0;e<r;e+=1)segments_length_pool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,r,n;if(this._mdf||t){var i=this.o.v%360/360;if(i<0&&(i+=1),(e=(this.s.v>1?1:this.s.v<0?0:this.s.v)+i)>(r=(this.e.v>1?1:this.e.v<0?0:this.e.v)+i)){var s=e;e=r,r=s}e=1e-4*Math.round(1e4*e),r=1e-4*Math.round(1e4*r),this.sValue=e,this.eValue=r}else e=this.sValue,r=this.eValue;var o,a,l,h,u,c,f=this.shapes.length,p=0;if(r===e)for(o=0;o<f;o+=1)this.shapes[o].localShapeCollection.releaseShapes(),this.shapes[o].shape._mdf=!0,this.shapes[o].shape.paths=this.shapes[o].localShapeCollection,this._mdf&&(this.shapes[o].pathsData.length=0);else if(1===r&&0===e||0===r&&1===e){if(this._mdf)for(o=0;o<f;o+=1)this.shapes[o].pathsData.length=0,this.shapes[o].shape._mdf=!0}else{var d,m,y=[];for(o=0;o<f;o+=1)if((d=this.shapes[o]).shape._mdf||this._mdf||t||2===this.m){if(l=(n=d.shape.paths)._length,c=0,!d.shape._mdf&&d.pathsData.length)c=d.totalShapeLength;else{for(h=this.releasePathsData(d.pathsData),a=0;a<l;a+=1)u=bez.getSegmentsLength(n.shapes[a]),h.push(u),c+=u.totalLength;d.totalShapeLength=c,d.pathsData=h}p+=c,d.shape._mdf=!0}else d.shape.paths=d.localShapeCollection;var v,g=e,b=r,_=0;for(o=f-1;o>=0;o-=1)if((d=this.shapes[o]).shape._mdf){for((m=d.localShapeCollection).releaseShapes(),2===this.m&&f>1?(v=this.calculateShapeEdges(e,r,d.totalShapeLength,_,p),_+=d.totalShapeLength):v=[[g,b]],l=v.length,a=0;a<l;a+=1){g=v[a][0],b=v[a][1],y.length=0,b<=1?y.push({s:d.totalShapeLength*g,e:d.totalShapeLength*b}):g>=1?y.push({s:d.totalShapeLength*(g-1),e:d.totalShapeLength*(b-1)}):(y.push({s:d.totalShapeLength*g,e:d.totalShapeLength}),y.push({s:0,e:d.totalShapeLength*(b-1)}));var w=this.addShapes(d,y[0]);if(y[0].s!==y[0].e){if(y.length>1)if(d.shape.paths.shapes[d.shape.paths._length-1].c){var E=w.pop();this.addPaths(w,m),w=this.addShapes(d,y[1],E)}else this.addPaths(w,m),w=this.addShapes(d,y[1]);this.addPaths(w,m)}}d.shape.paths=m}}},TrimModifier.prototype.addPaths=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)e.addShape(t[r])},TrimModifier.prototype.addSegment=function(t,e,r,n,i,s,o){i.setXYAt(e[0],e[1],"o",s),i.setXYAt(r[0],r[1],"i",s+1),o&&i.setXYAt(t[0],t[1],"v",s),i.setXYAt(n[0],n[1],"v",s+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,r,n){e.setXYAt(t[1],t[5],"o",r),e.setXYAt(t[2],t[6],"i",r+1),n&&e.setXYAt(t[0],t[4],"v",r),e.setXYAt(t[3],t[7],"v",r+1)},TrimModifier.prototype.addShapes=function(t,e,r){var n,i,s,o,a,l,h,u,c=t.pathsData,f=t.shape.paths.shapes,p=t.shape.paths._length,d=0,m=[],y=!0;for(r?(a=r._length,u=r._length):(r=shape_pool.newElement(),a=0,u=0),m.push(r),n=0;n<p;n+=1){for(l=c[n].lengths,r.c=f[n].c,s=f[n].c?l.length:l.length+1,i=1;i<s;i+=1)if(d+(o=l[i-1]).addedLength<e.s)d+=o.addedLength,r.c=!1;else{if(d>e.e){r.c=!1;break}e.s<=d&&e.e>=d+o.addedLength?(this.addSegment(f[n].v[i-1],f[n].o[i-1],f[n].i[i],f[n].v[i],r,a,y),y=!1):(h=bez.getNewSegment(f[n].v[i-1],f[n].v[i],f[n].o[i-1],f[n].i[i],(e.s-d)/o.addedLength,(e.e-d)/o.addedLength,l[i-1]),this.addSegmentFromArray(h,r,a,y),y=!1,r.c=!1),d+=o.addedLength,a+=1}if(f[n].c&&l.length){if(o=l[i-1],d<=e.e){var v=l[i-1].addedLength;e.s<=d&&e.e>=d+v?(this.addSegment(f[n].v[i-1],f[n].o[i-1],f[n].i[0],f[n].v[0],r,a,y),y=!1):(h=bez.getNewSegment(f[n].v[i-1],f[n].v[0],f[n].o[i-1],f[n].i[0],(e.s-d)/v,(e.e-d)/v,l[i-1]),this.addSegmentFromArray(h,r,a,y),y=!1,r.c=!1)}else r.c=!1;d+=o.addedLength,a+=1}if(r._length&&(r.setXYAt(r.v[u][0],r.v[u][1],"i",u),r.setXYAt(r.v[r._length-1][0],r.v[r._length-1][1],"o",r._length-1)),d>e.e)break;n<p-1&&(r=shape_pool.newElement(),y=!0,m.push(r),a=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var r=shape_pool.newElement();r.c=t.c;var n,i,s,o,a,l,h,u,c,f,p,d,m,y=t._length,v=0;for(n=0;n<y;n+=1)i=t.v[n],o=t.o[n],s=t.i[n],i[0]===o[0]&&i[1]===o[1]&&i[0]===s[0]&&i[1]===s[1]?0!==n&&n!==y-1||t.c?(a=0===n?t.v[y-1]:t.v[n-1],h=(l=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)))?Math.min(l/2,e)/l:0,u=d=i[0]+(a[0]-i[0])*h,c=m=i[1]-(i[1]-a[1])*h,f=u-(u-i[0])*roundCorner,p=c-(c-i[1])*roundCorner,r.setTripleAt(u,c,f,p,d,m,v),v+=1,a=n===y-1?t.v[0]:t.v[n+1],h=(l=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)))?Math.min(l/2,e)/l:0,u=f=i[0]+(a[0]-i[0])*h,c=p=i[1]+(a[1]-i[1])*h,d=u-(u-i[0])*roundCorner,m=c-(c-i[1])*roundCorner,r.setTripleAt(u,c,f,p,d,m,v),v+=1):(r.setTripleAt(i[0],i[1],o[0],o[1],s[0],s[1],v),v+=1):(r.setTripleAt(t.v[n][0],t.v[n][1],t.o[n][0],t.o[n][1],t.i[n][0],t.i[n][1],v),v+=1);return r},RoundCornersModifier.prototype.processShapes=function(t){var e,r,n,i,s,o,a=this.shapes.length,l=this.rd.v;if(0!==l)for(r=0;r<a;r+=1){if((s=this.shapes[r]).shape.paths,o=s.localShapeCollection,s.shape._mdf||this._mdf||t)for(o.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,i=s.shape.paths._length,n=0;n<i;n+=1)o.addShape(this.processPath(e[n],l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var r=e/100,n=[0,0],i=t._length,s=0;for(s=0;s<i;s+=1)n[0]+=t.v[s][0],n[1]+=t.v[s][1];n[0]/=i,n[1]/=i;var o,a,l,h,u,c,f=shape_pool.newElement();for(f.c=t.c,s=0;s<i;s+=1)o=t.v[s][0]+(n[0]-t.v[s][0])*r,a=t.v[s][1]+(n[1]-t.v[s][1])*r,l=t.o[s][0]+(n[0]-t.o[s][0])*-r,h=t.o[s][1]+(n[1]-t.o[s][1])*-r,u=t.i[s][0]+(n[0]-t.i[s][0])*-r,c=t.i[s][1]+(n[1]-t.i[s][1])*-r,f.setTripleAt(o,a,l,h,u,c,s);return f},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,r,n,i,s,o,a=this.shapes.length,l=this.amount.v;if(0!==l)for(r=0;r<a;r+=1){if((s=this.shapes[r]).shape.paths,o=s.localShapeCollection,s.shape._mdf||this._mdf||t)for(o.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,i=s.shape.paths._length,n=0;n<i;n+=1)o.addShape(this.processPath(e[n],l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,r,n,i,s){var o=s?-1:1,a=n.s.v[0]+(1-n.s.v[0])*(1-i),l=n.s.v[1]+(1-n.s.v[1])*(1-i);t.translate(n.p.v[0]*o*i,n.p.v[1]*o*i,n.p.v[2]),e.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),e.rotate(-n.r.v*o*i),e.translate(n.a.v[0],n.a.v[1],n.a.v[2]),r.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),r.scale(s?1/a:a,s?1/l:l),r.translate(n.a.v[0],n.a.v[1],n.a.v[2])},RepeaterModifier.prototype.init=function(t,e,r,n){for(this.elem=t,this.arr=e,this.pos=r,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[r]);r>0;)r-=1,this._elements.unshift(e[r]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){t.length;var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)t[r]._render=e,"gr"===t[r].ty&&this.changeGroupRender(t[r].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,r,n,i,s;if(this._mdf||t){var o,a=Math.ceil(this.c.v);if(this._groups.length<a){for(;this._groups.length<a;){var l={it:this.cloneElements(this._elements),ty:"gr"};l.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,l),this._groups.splice(0,0,l),this._currentCopies+=1}this.elem.reloadShapes()}for(s=0,n=0;n<=this._groups.length-1;n+=1)o=s<a,this._groups[n]._render=o,this.changeGroupRender(this._groups[n].it,o),s+=1;this._currentCopies=a;var h=this.o.v,u=h%1,c=h>0?Math.floor(h):Math.ceil(h),f=(this.tr.v.props,this.pMatrix.props),p=this.rMatrix.props,d=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var m,y,v=0;if(h>0){for(;v<c;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),v+=1;u&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,u,!1),v+=u)}else if(h<0){for(;v>c;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),v-=1;u&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-u,!0),v-=u)}for(n=1===this.data.m?0:this._currentCopies-1,i=1===this.data.m?1:-1,s=this._currentCopies;s;){if(y=(r=(e=this.elemsData[n].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(n/(this._currentCopies-1)),0!==v){for((0!==n&&1===i||n!==this._currentCopies-1&&-1===i)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),this.matrix.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),m=0;m<y;m+=1)r[m]=this.matrix.props[m];this.matrix.reset()}else for(this.matrix.reset(),m=0;m<y;m+=1)r[m]=this.matrix.props[m];v+=1,s-=1,n+=i}}else for(s=this._currentCopies,n=0,i=1;s;)r=(e=this.elemsData[n].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,s-=1,n+=i},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shape_pool.release(this.shapes[t]);this._length=0},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,r=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<r;e+=1)"o"!=this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(t,e){for(var r=0,n=this.o.length/2;r<n;){if(Math.abs(t[4*r]-t[4*e+2*r])>.01)return!1;r+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,r,n,i=4*this.data.p;for(e=0;e<i;e+=1)r=e%4==0?100:255,n=Math.round(this.prop.v[e]*r),this.c[e]!==n&&(this.c[e]=n,this._cmdf=!t);if(this.o.length)for(i=this.prop.v.length,e=4*this.data.p;e<i;e+=1)r=e%2==0?100:1,n=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==n&&(this.o[e-4*this.data.p]=n,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(t,e,r,n){if(0===e)return"";var i,s=t.o,o=t.i,a=t.v,l=" M"+n.applyToPointStringified(a[0][0],a[0][1]);for(i=1;i<e;i+=1)l+=" C"+n.applyToPointStringified(s[i-1][0],s[i-1][1])+" "+n.applyToPointStringified(o[i][0],o[i][1])+" "+n.applyToPointStringified(a[i][0],a[i][1]);return r&&e&&(l+=" C"+n.applyToPointStringified(s[i-1][0],s[i-1][1])+" "+n.applyToPointStringified(o[0][0],o[0][1])+" "+n.applyToPointStringified(a[0][0],a[0][1]),l+="z"),l},audioControllerFactory=function(){function t(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].pause()},resume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].resume()},setRate:function(t){var e,r=this.audios.length;for(e=0;e<r;e+=1)this.audios[e].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):Howl?new Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(t){return this._volume},_updateVolume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),ImagePreloader=function(){var t=function(){var t=createTag("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),t}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(t,e,r){var n="";if(t.e)n=t.p;else if(e){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),n=e+i}else n=r,n+=t.u?t.u:"",n+=t.p;return n}function n(t){this._imageLoaded=e.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.loadedAssets=0,this.imagesLoadedCb=null,this.images=[]}return n.prototype={loadAssets:function(t,e){this.imagesLoadedCb=e;var r,n=t.length;for(r=0;r<n;r+=1)t[r].layers||(this.totalImages+=1,this.images.push(this._createImageData(t[r])))},setAssetsPath:function(t){this.assetsPath=t||""},setPath:function(t){this.path=t||""},loaded:function(){return this.totalImages===this.loadedAssets},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getImage:function(t){for(var e=0,r=this.images.length;e<r;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}},createImgData:function(e){var n=r(e,this.assetsPath,this.path),i=createTag("img");i.crossOrigin="anonymous",i.addEventListener("load",this._imageLoaded,!1),i.addEventListener("error",function(){s.img=t,this._imageLoaded()}.bind(this),!1),i.src=n;var s={img:i,assetData:e};return s},createImageData:function(e){var n=r(e,this.assetsPath,this.path),i=createNS("image");i.addEventListener("load",this._imageLoaded,!1),i.addEventListener("error",function(){s.img=t,this._imageLoaded()}.bind(this),!1),i.setAttributeNS("http://www.w3.org/1999/xlink","href",n);var s={img:i,assetData:e};return s},imageLoaded:e,setCacheType:function(t){this._createImageData="svg"===t?this.createImageData.bind(this):this.createImgData.bind(this)}},n}(),featureSupport=function(){var t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),t}(),filtersFactory=function(){var t={};return t.createFilter=function(t){var e=createNS("filter");return e.setAttribute("id",t),e.setAttribute("filterUnits","objectBoundingBox"),e.setAttribute("x","0%"),e.setAttribute("y","0%"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e},t.createAlphaToLuminanceFilter=function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t},t}(),assetLoader=function(){function t(t){return t.response&&"object"==typeof t.response?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):void 0}return{load:function(e,r,n){var i,s=new XMLHttpRequest;s.open("GET",e,!0);try{s.responseType="json"}catch(t){}s.send(),s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status)i=t(s),r(i);else try{i=t(s),r(i)}catch(t){n&&n(t)}}}}}();function TextAnimatorProperty(t,e,r){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=r,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(r)}function TextAnimatorDataProperty(t,e,r){var n={propType:!1},i=PropertyFactory.getProp,s=e.a;this.a={r:s.r?i(t,s.r,0,degToRads,r):n,rx:s.rx?i(t,s.rx,0,degToRads,r):n,ry:s.ry?i(t,s.ry,0,degToRads,r):n,sk:s.sk?i(t,s.sk,0,degToRads,r):n,sa:s.sa?i(t,s.sa,0,degToRads,r):n,s:s.s?i(t,s.s,1,.01,r):n,a:s.a?i(t,s.a,1,0,r):n,o:s.o?i(t,s.o,0,.01,r):n,p:s.p?i(t,s.p,1,0,r):n,sw:s.sw?i(t,s.sw,0,0,r):n,sc:s.sc?i(t,s.sc,1,0,r):n,fc:s.fc?i(t,s.fc,1,0,r):n,fh:s.fh?i(t,s.fh,0,0,r):n,fs:s.fs?i(t,s.fs,0,.01,r):n,fb:s.fb?i(t,s.fb,0,.01,r):n,t:s.t?i(t,s.t,0,0,r):n},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,r),this.s.t=e.s.t}function LetterProps(t,e,r,n,i,s){this.o=t,this.sw=e,this.sc=r,this.fc=n,this.m=i,this.p=s,this._mdf={o:!0,sw:!!e,sc:!!r,fc:!!n,m:!0,p:!0}}function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e,r=this._textData.a.length,n=PropertyFactory.getProp;for(t=0;t<r;t+=1)e=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var r,n,i,s,o,a,l,h,u,c,f,p,d,m,y,v,g,b,_,w=this._moreOptions.alignment.v,E=this._animatorsData,S=this._textData,T=this.mHelper,x=this._renderType,A=this.renderedLetters.length,P=(this.data,t.l);if(this._hasMaskedPath){if(_=this._pathData.m,!this._pathData.n||this._pathData._mdf){var I,C=_.v;for(this._pathData.r&&(C=C.reverse()),o={tLength:0,segments:[]},s=C._length-1,v=0,i=0;i<s;i+=1)I=bez.buildBezierData(C.v[i],C.v[i+1],[C.o[i][0]-C.v[i][0],C.o[i][1]-C.v[i][1]],[C.i[i+1][0]-C.v[i+1][0],C.i[i+1][1]-C.v[i+1][1]]),o.tLength+=I.segmentLength,o.segments.push(I),v+=I.segmentLength;i=s,_.v.c&&(I=bez.buildBezierData(C.v[i],C.v[0],[C.o[i][0]-C.v[i][0],C.o[i][1]-C.v[i][1]],[C.i[0][0]-C.v[0][0],C.i[0][1]-C.v[0][1]]),o.tLength+=I.segmentLength,o.segments.push(I),v+=I.segmentLength),this._pathData.pi=o}if(o=this._pathData.pi,a=this._pathData.f.v,f=0,c=1,h=0,u=!0,m=o.segments,a<0&&_.v.c)for(o.tLength<Math.abs(a)&&(a=-Math.abs(a)%o.tLength),c=(d=m[f=m.length-1].points).length-1;a<0;)a+=d[c].partialLength,(c-=1)<0&&(c=(d=m[f-=1].points).length-1);p=(d=m[f].points)[c-1],y=(l=d[c]).partialLength}s=P.length,r=0,n=0;var D,k,O,M,R=1.2*t.finalSize*.714,F=!0;O=E.length;var N,L,$,V,j,B,G,z,U,q,H,W,Y,K=-1,X=a,Q=f,J=c,Z=-1,tt="",et=this.defaultPropsArray;if(2===t.j||1===t.j){var rt=0,nt=0,it=2===t.j?-.5:-1,st=0,ot=!0;for(i=0;i<s;i+=1)if(P[i].n){for(rt&&(rt+=nt);st<i;)P[st].animatorJustifyOffset=rt,st+=1;rt=0,ot=!0}else{for(k=0;k<O;k+=1)(D=E[k].a).t.propType&&(ot&&2===t.j&&(nt+=D.t.v*it),(N=E[k].s.getMult(P[i].anIndexes[k],S.a[k].s.totalChars)).length?rt+=D.t.v*N[0]*it:rt+=D.t.v*N*it);ot=!1}for(rt&&(rt+=nt);st<i;)P[st].animatorJustifyOffset=rt,st+=1}for(i=0;i<s;i+=1){if(T.reset(),j=1,P[i].n)r=0,n+=t.yOffset,n+=F?1:0,a=X,F=!1,0,this._hasMaskedPath&&(c=J,p=(d=m[f=Q].points)[c-1],y=(l=d[c]).partialLength,h=0),Y=q=W=tt="",et=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Z!==P[i].line){switch(t.j){case 1:a+=v-t.lineWidths[P[i].line];break;case 2:a+=(v-t.lineWidths[P[i].line])/2}Z=P[i].line}K!==P[i].ind&&(P[K]&&(a+=P[K].extra),a+=P[i].an/2,K=P[i].ind),a+=w[0]*P[i].an/200;var at=0;for(k=0;k<O;k+=1)(D=E[k].a).p.propType&&((N=E[k].s.getMult(P[i].anIndexes[k],S.a[k].s.totalChars)).length?at+=D.p.v[0]*N[0]:at+=D.p.v[0]*N),D.a.propType&&((N=E[k].s.getMult(P[i].anIndexes[k],S.a[k].s.totalChars)).length?at+=D.a.v[0]*N[0]:at+=D.a.v[0]*N);for(u=!0;u;)h+y>=a+at||!d?(g=(a+at-h)/l.partialLength,$=p.point[0]+(l.point[0]-p.point[0])*g,V=p.point[1]+(l.point[1]-p.point[1])*g,T.translate(-w[0]*P[i].an/200,-w[1]*R/100),u=!1):d&&(h+=l.partialLength,(c+=1)>=d.length&&(c=0,m[f+=1]?d=m[f].points:_.v.c?(c=0,d=m[f=0].points):(h-=l.partialLength,d=null)),d&&(p=l,y=(l=d[c]).partialLength));L=P[i].an/2-P[i].add,T.translate(-L,0,0)}else L=P[i].an/2-P[i].add,T.translate(-L,0,0),T.translate(-w[0]*P[i].an/200,-w[1]*R/100,0);for(P[i].l/2,k=0;k<O;k+=1)(D=E[k].a).t.propType&&(N=E[k].s.getMult(P[i].anIndexes[k],S.a[k].s.totalChars),0===r&&0===t.j||(this._hasMaskedPath?N.length?a+=D.t.v*N[0]:a+=D.t.v*N:N.length?r+=D.t.v*N[0]:r+=D.t.v*N));for(P[i].l/2,t.strokeWidthAnim&&(G=t.sw||0),t.strokeColorAnim&&(B=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(z=[t.fc[0],t.fc[1],t.fc[2]]),k=0;k<O;k+=1)(D=E[k].a).a.propType&&((N=E[k].s.getMult(P[i].anIndexes[k],S.a[k].s.totalChars)).length?T.translate(-D.a.v[0]*N[0],-D.a.v[1]*N[1],D.a.v[2]*N[2]):T.translate(-D.a.v[0]*N,-D.a.v[1]*N,D.a.v[2]*N));for(k=0;k<O;k+=1)(D=E[k].a).s.propType&&((N=E[k].s.getMult(P[i].anIndexes[k],S.a[k].s.totalChars)).length?T.scale(1+(D.s.v[0]-1)*N[0],1+(D.s.v[1]-1)*N[1],1):T.scale(1+(D.s.v[0]-1)*N,1+(D.s.v[1]-1)*N,1));for(k=0;k<O;k+=1){if(D=E[k].a,N=E[k].s.getMult(P[i].anIndexes[k],S.a[k].s.totalChars),D.sk.propType&&(N.length?T.skewFromAxis(-D.sk.v*N[0],D.sa.v*N[1]):T.skewFromAxis(-D.sk.v*N,D.sa.v*N)),D.r.propType&&(N.length?T.rotateZ(-D.r.v*N[2]):T.rotateZ(-D.r.v*N)),D.ry.propType&&(N.length?T.rotateY(D.ry.v*N[1]):T.rotateY(D.ry.v*N)),D.rx.propType&&(N.length?T.rotateX(D.rx.v*N[0]):T.rotateX(D.rx.v*N)),D.o.propType&&(N.length?j+=(D.o.v*N[0]-j)*N[0]:j+=(D.o.v*N-j)*N),t.strokeWidthAnim&&D.sw.propType&&(N.length?G+=D.sw.v*N[0]:G+=D.sw.v*N),t.strokeColorAnim&&D.sc.propType)for(U=0;U<3;U+=1)N.length?B[U]=B[U]+(D.sc.v[U]-B[U])*N[0]:B[U]=B[U]+(D.sc.v[U]-B[U])*N;if(t.fillColorAnim&&t.fc){if(D.fc.propType)for(U=0;U<3;U+=1)N.length?z[U]=z[U]+(D.fc.v[U]-z[U])*N[0]:z[U]=z[U]+(D.fc.v[U]-z[U])*N;D.fh.propType&&(z=N.length?addHueToRGB(z,D.fh.v*N[0]):addHueToRGB(z,D.fh.v*N)),D.fs.propType&&(z=N.length?addSaturationToRGB(z,D.fs.v*N[0]):addSaturationToRGB(z,D.fs.v*N)),D.fb.propType&&(z=N.length?addBrightnessToRGB(z,D.fb.v*N[0]):addBrightnessToRGB(z,D.fb.v*N))}}for(k=0;k<O;k+=1)(D=E[k].a).p.propType&&(N=E[k].s.getMult(P[i].anIndexes[k],S.a[k].s.totalChars),this._hasMaskedPath?N.length?T.translate(0,D.p.v[1]*N[0],-D.p.v[2]*N[1]):T.translate(0,D.p.v[1]*N,-D.p.v[2]*N):N.length?T.translate(D.p.v[0]*N[0],D.p.v[1]*N[1],-D.p.v[2]*N[2]):T.translate(D.p.v[0]*N,D.p.v[1]*N,-D.p.v[2]*N));if(t.strokeWidthAnim&&(q=G<0?0:G),t.strokeColorAnim&&(H="rgb("+Math.round(255*B[0])+","+Math.round(255*B[1])+","+Math.round(255*B[2])+")"),t.fillColorAnim&&t.fc&&(W="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),this._hasMaskedPath){if(T.translate(0,-t.ls),T.translate(0,w[1]*R/100+n,0),S.p.p){b=(l.point[1]-p.point[1])/(l.point[0]-p.point[0]);var lt=180*Math.atan(b)/Math.PI;l.point[0]<p.point[0]&&(lt+=180),T.rotate(-lt*Math.PI/180)}T.translate($,V,0),a-=w[0]*P[i].an/200,P[i+1]&&K!==P[i+1].ind&&(a+=P[i].an/2,a+=t.tr/1e3*t.finalSize)}else{switch(T.translate(r,n,0),t.ps&&T.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:T.translate(P[i].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[P[i].line]),0,0);break;case 2:T.translate(P[i].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[P[i].line])/2,0,0)}T.translate(0,-t.ls),T.translate(L,0,0),T.translate(w[0]*P[i].an/200,w[1]*R/100,0),r+=P[i].l+t.tr/1e3*t.finalSize}"html"===x?tt=T.toCSS():"svg"===x?tt=T.to2dCSS():et=[T.props[0],T.props[1],T.props[2],T.props[3],T.props[4],T.props[5],T.props[6],T.props[7],T.props[8],T.props[9],T.props[10],T.props[11],T.props[12],T.props[13],T.props[14],T.props[15]],Y=j}A<=i?(M=new LetterProps(Y,q,H,W,tt,et),this.renderedLetters.push(M),A+=1,this.lettersChangedFlag=!0):(M=this.renderedLetters[i],this.lettersChangedFlag=M.update(Y,q,H,W,tt,et)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(t,e,r,n,i,s){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,o=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,o=!0),this.sc!==r&&(this.sc=r,this._mdf.sc=!0,o=!0),this.fc!==n&&(this.fc=n,this._mdf.fc=!0,o=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,o=!0),!s.length||this.p[0]===s[0]&&this.p[1]===s[1]&&this.p[4]===s[4]&&this.p[5]===s[5]&&this.p[12]===s[12]&&this.p[13]===s[13]||(this.p=s,this._mdf.p=!0,o=!0),o},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,r=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{this.lock=!0,this._mdf=!1;var n,i=this.effectsSequence.length,s=t||this.data.d.k[this.keysIndex].s;for(n=0;n<i;n+=1)s=r!==this.keysIndex?this.effectsSequence[n](s,s.t):this.effectsSequence[n](this.currentData,s.t);e!==s&&this.setCurrentData(s),this.pv=this.v=this.currentData,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,r=0,n=t.length;r<=n-1&&(t[r].s,!(r===n-1||t[r+1].t>e));)r+=1;return this.keysIndex!==r&&(this.keysIndex=r),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e,r=FontManager.getCombinedCharacterCodes(),n=[],i=0,s=t.length;i<s;)e=t.charCodeAt(i),-1!==r.indexOf(e)?n[n.length-1]+=t.charAt(i):e>=55296&&e<=56319&&(e=t.charCodeAt(i+1))>=56320&&e<=57343?(n.push(t.substr(i,2)),++i):n.push(t.charAt(i)),i+=1;return n},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,r,n,i,s,o,a,l=this.elem.globalData.fontManager,h=this.data,u=[],c=0,f=h.m.g,p=0,d=0,m=0,y=[],v=0,g=0,b=l.getFontByName(t.f),_=0,w=b.fStyle?b.fStyle.split(" "):[],E="normal",S="normal";for(r=w.length,e=0;e<r;e+=1)switch(w[e].toLowerCase()){case"italic":S="italic";break;case"bold":E="700";break;case"black":E="900";break;case"medium":E="500";break;case"regular":case"normal":E="400";break;case"light":case"thin":E="200"}t.fWeight=b.fWeight||E,t.fStyle=S,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),r=t.finalText.length,t.finalLineHeight=t.lh;var T,x=t.tr/1e3*t.finalSize;if(t.sz)for(var A,P,I=!0,C=t.sz[0],D=t.sz[1];I;){A=0,v=0,r=(P=this.buildFinalText(t.t)).length,x=t.tr/1e3*t.finalSize;var k=-1;for(e=0;e<r;e+=1)T=P[e].charCodeAt(0),n=!1," "===P[e]?k=e:13!==T&&3!==T||(v=0,n=!0,A+=t.finalLineHeight||1.2*t.finalSize),l.chars?(a=l.getCharData(P[e],b.fStyle,b.fFamily),_=n?0:a.w*t.finalSize/100):_=l.measureText(P[e],t.f,t.finalSize),v+_>C&&" "!==P[e]?(-1===k?r+=1:e=k,A+=t.finalLineHeight||1.2*t.finalSize,P.splice(e,k===e?1:0,"\r"),k=-1,v=0):(v+=_,v+=x);A+=b.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&D<A?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=P,r=t.finalText.length,I=!1)}v=-x,_=0;var O,M=0;for(e=0;e<r;e+=1)if(n=!1,13===(T=(O=t.finalText[e]).charCodeAt(0))||3===T?(M=0,y.push(v),g=v>g?v:g,v=-2*x,i="",n=!0,m+=1):i=O,l.chars?(a=l.getCharData(O,b.fStyle,l.getFontByName(t.f).fFamily),_=n?0:a.w*t.finalSize/100):_=l.measureText(i,t.f,t.finalSize)," "===O?M+=_+x:(v+=_+x+M,M=0),u.push({l:_,an:_,add:p,n:n,anIndexes:[],val:i,line:m,animatorJustifyOffset:0}),2==f){if(p+=_,""===i||" "===i||e===r-1){for(""!==i&&" "!==i||(p-=_);d<=e;)u[d].an=p,u[d].ind=c,u[d].extra=_,d+=1;c+=1,p=0}}else if(3==f){if(p+=_,""===i||e===r-1){for(""===i&&(p-=_);d<=e;)u[d].an=p,u[d].ind=c,u[d].extra=_,d+=1;p=0,c+=1}}else u[c].ind=c,u[c].extra=0,c+=1;if(t.l=u,g=v>g?v:g,y.push(v),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=g,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=y;var R,F,N=h.a;o=N.length;var L,$,V=[];for(s=0;s<o;s+=1){for((R=N[s]).a.sc&&(t.strokeColorAnim=!0),R.a.sw&&(t.strokeWidthAnim=!0),(R.a.fc||R.a.fh||R.a.fs||R.a.fb)&&(t.fillColorAnim=!0),$=0,L=R.s.b,e=0;e<r;e+=1)(F=u[e]).anIndexes[s]=$,(1==L&&""!==F.val||2==L&&""!==F.val&&" "!==F.val||3==L&&(F.n||" "==F.val||e==r-1)||4==L&&(F.n||e==r-1))&&(1===R.s.rn&&V.push($),$+=1);h.a[s].s.totalChars=$;var j,B=-1;if(1===R.s.rn)for(e=0;e<r;e+=1)B!=(F=u[e]).anIndexes[s]&&(B=F.anIndexes[s],j=V.splice(Math.floor(Math.random()*V.length),1)[0]),F.anIndexes[s]=j}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=b.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var r=this.copyData({},this.data.d.k[e].s);r=this.copyData(r,t),this.data.d.k[e].s=r,this.recalculate(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,r=Math.floor;function n(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,e.s||{k:0},0,0,this),this.e="e"in e?PropertyFactory.getProp(t,e.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(t,e.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,e.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,e.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return n.prototype={getMult:function(n){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var i=0,s=0,o=1,a=1;this.ne.v>0?i=this.ne.v/100:s=-this.ne.v/100,this.xe.v>0?o=1-this.xe.v/100:a=1+this.xe.v/100;var l=BezierFactory.getBezierEasing(i,s,o,a).get,h=0,u=this.finalS,c=this.finalE,f=this.data.sh;if(2===f)h=l(h=c===u?n>=c?1:0:t(0,e(.5/(c-u)+(n-u)/(c-u),1)));else if(3===f)h=l(h=c===u?n>=c?0:1:1-t(0,e(.5/(c-u)+(n-u)/(c-u),1)));else if(4===f)c===u?h=0:(h=t(0,e(.5/(c-u)+(n-u)/(c-u),1)))<.5?h*=2:h=1-2*(h-.5),h=l(h);else if(5===f){if(c===u)h=0;else{var p=c-u,d=-p/2+(n=e(t(0,n+.5-u),c-u)),m=p/2;h=Math.sqrt(1-d*d/(m*m))}h=l(h)}else 6===f?(c===u?h=0:(n=e(t(0,n+.5-u),c-u),h=(1+Math.cos(Math.PI+2*Math.PI*n/(c-u)))/2),h=l(h)):(n>=r(u)&&(h=t(0,e(n-u<0?e(c,1)-(u-n):c-n,1))),h=l(h));return h*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,r=this.o.v/e,n=this.s.v/e+r,i=this.e.v/e+r;if(n>i){var s=n;n=i,i=s}this.finalS=n,this.finalE=i}},extendPrototype([DynamicPropertyContainer],n),{getTextSelectorProp:function(t,e,r){return new n(t,e,r)}}}(),pool_factory=function(t,e,r,n){var i=0,s=t,o=createSizedArray(s);return{newElement:function(){return i?o[i-=1]:e()},release:function(t){i===s&&(o=pooling.double(o),s*=2),r&&r(t),o[i]=t,i+=1}}},pooling={double:function(t){return t.concat(createSizedArray(t.length))}},point_pool=pool_factory(8,(function(){return createTypedArray("float32",2)})),shape_pool=function(){var t=pool_factory(4,(function(){return new ShapePath}),(function(t){var e,r=t._length;for(e=0;e<r;e+=1)point_pool.release(t.v[e]),point_pool.release(t.i[e]),point_pool.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1}));return t.clone=function(e){var r,n=t.newElement(),i=void 0===e._length?e.v.length:e._length;for(n.setLength(i),n.c=e.c,r=0;r<i;r+=1)n.setTripleAt(e.v[r][0],e.v[r][1],e.o[r][0],e.o[r][1],e.i[r][0],e.i[r][1],r);return n},t}(),shapeCollection_pool=function(){var t={newShapeCollection:function(){var t;t=e?n[e-=1]:new ShapeCollection;return t},release:function(t){var i,s=t._length;for(i=0;i<s;i+=1)shape_pool.release(t.shapes[i]);t._length=0,e===r&&(n=pooling.double(n),r*=2);n[e]=t,e+=1}},e=0,r=4,n=createSizedArray(r);return t}(),segments_length_pool=pool_factory(8,(function(){return{lengths:[],totalLength:0}}),(function(t){var e,r=t.lengths.length;for(e=0;e<r;e+=1)bezier_length_pool.release(t.lengths[e]);t.lengths.length=0})),bezier_length_pool=pool_factory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}));function BaseRenderer(){}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var r="";if(e&&e.title){var n=createNS("title"),i=createElementID();n.setAttribute("id",i),n.textContent=e.title,this.svgElement.appendChild(n),r+=i}if(e&&e.description){var s=createNS("desc"),o=createElementID();s.setAttribute("id",o),s.textContent=e.description,this.svgElement.appendChild(s),r+=" "+o}r&&this.svgElement.setAttribute("aria-labelledby",r);var a=createNS("defs");this.svgElement.appendChild(a);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!e||!1!==e.hideOnTransparent,viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"}},this.globalData={_mdf:!1,frameNum:-1,defs:a,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",className:e&&e.className||"",id:e&&e.id||""},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!e||!1!==e.hideOnTransparent,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(t,e,r){this.data=t,this.element=e,this.globalData=r,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var n,i=this.globalData.defs,s=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(s),this.solidPath="";var o,a,l,h,u,c,f,p=this.masksProperties,d=0,m=[],y=createElementID(),v="clipPath",g="clip-path";for(n=0;n<s;n++)if(("a"!==p[n].mode&&"n"!==p[n].mode||p[n].inv||100!==p[n].o.k||p[n].o.x)&&(v="mask",g="mask"),"s"!=p[n].mode&&"i"!=p[n].mode||0!==d?h=null:((h=createNS("rect")).setAttribute("fill","#ffffff"),h.setAttribute("width",this.element.comp.data.w||0),h.setAttribute("height",this.element.comp.data.h||0),m.push(h)),o=createNS("path"),"n"!=p[n].mode){var b;if(d+=1,o.setAttribute("fill","s"===p[n].mode?"#000000":"#ffffff"),o.setAttribute("clip-rule","nonzero"),0!==p[n].x.k?(v="mask",g="mask",f=PropertyFactory.getProp(this.element,p[n].x,0,null,this.element),b=createElementID(),(u=createNS("filter")).setAttribute("id",b),(c=createNS("feMorphology")).setAttribute("operator","erode"),c.setAttribute("in","SourceGraphic"),c.setAttribute("radius","0"),u.appendChild(c),i.appendChild(u),o.setAttribute("stroke","s"===p[n].mode?"#000000":"#ffffff")):(c=null,f=null),this.storedData[n]={elem:o,x:f,expan:c,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"==p[n].mode){l=m.length;var _=createNS("g");for(a=0;a<l;a+=1)_.appendChild(m[a]);var w=createNS("mask");w.setAttribute("mask-type","alpha"),w.setAttribute("id",y+"_"+d),w.appendChild(o),i.appendChild(w),_.setAttribute("mask","url("+locationHref+"#"+y+"_"+d+")"),m.length=0,m.push(_)}else m.push(o);p[n].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[n]={elem:o,lastPath:"",op:PropertyFactory.getProp(this.element,p[n].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[n],3),invRect:h},this.viewData[n].prop.k||this.drawPath(p[n],this.viewData[n].prop.v,this.viewData[n])}else this.viewData[n]={op:PropertyFactory.getProp(this.element,p[n].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[n],3),elem:o,lastPath:""},i.appendChild(o);for(this.maskElement=createNS(v),s=m.length,n=0;n<s;n+=1)this.maskElement.appendChild(m[n]);d>0&&(this.maskElement.setAttribute("id",y),this.element.maskedElement.setAttribute(g,"url("+locationHref+"#"+y+")"),i.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(t,e){this.elem=t,this.pos=e}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(t,e,r){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=r,this.lvl=e,this._isAnimated=!!r.k;for(var n=0,i=t.length;n<i;){if(t[n].mProps.dynamicProperties.length){this._isAnimated=!0;break}n+=1}}function SVGTransformData(t,e,r){this.transform={mProps:t,op:e,container:r},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r}function SVGGradientFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,r)}function SVGGradientStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,r),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(t){var e,r,n=this.layers.length;for(this.completeLayers=!0,e=n-1;e>=0;e--)this.elements[e]||(r=this.layers[e]).ip-r.st<=t-this.layers[e].st&&r.op-r.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t)}return this.createNull(t)},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,r,n=t.length,i=this.layers.length;for(e=0;e<n;e+=1)for(r=0;r<i;){if(this.layers[r].id==t[e].id){this.layers[r]=t[e];break}r+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,r){for(var n=this.elements,i=this.layers,s=0,o=i.length;s<o;)i[s].ind==e&&(n[s]&&!0!==n[s]?(r.push(n[s]),n[s].setAsParent(),void 0!==i[s].parent?this.buildElementParenting(t,i[s].parent,r):t.setHierarchy(r)):(this.buildItem(s),this.addPendingElement(t))),s+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length;for(e=0;e<r;e+=1)if(t[e].xt){var n=this.createComp(t[e]);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRenderer.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRenderer.prototype.createText=function(t){return new SVGTextElement(t,this.globalData,this)},SVGRenderer.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},SVGRenderer.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var r=createNS("clipPath"),n=createNS("rect");n.setAttribute("width",t.w),n.setAttribute("height",t.h),n.setAttribute("x",0),n.setAttribute("y",0);var i=createElementID();r.setAttribute("id",i),r.appendChild(n),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+i+")"),e.appendChild(r),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerText="",this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){e[t]=!0;var r=this.createItem(this.layers[t]);e[t]=r,expressionsPlugin&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(r),r.initExpressions()),this.appendElementInPos(r,t),this.layers[t].tt&&(this.elements[t-1]&&!0!==this.elements[t-1]?r.setMatte(e[t-1].layerId):(this.buildItem(t-1),this.addPendingElement(r)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,r=this.elements.length;e<r;){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}},SVGRenderer.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var e,r=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=r-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<r;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(r){for(var n,i=0;i<e;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(n=this.elements[i].getBaseElement()),i+=1;n?this.layerElement.insertBefore(r,n):this.layerElement.appendChild(r)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRenderer.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRenderer.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(t){if(1!==t[0]||0!==t[1]||0!==t[4]||1!==t[5]||0!==t[12]||0!==t[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(t);var e=this.contextData.cTr.props;this.transformMat.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var r=this.contextData.cTr.props;this.canvasContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13])}else this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRenderer.prototype.ctxOpacity=function(t){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=t<0?0:t,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=t<0?0:t,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(t){if(this.renderConfig.clearCanvas){t&&this.canvasContext.save();var e=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var r,n=this.contextData.saved[this.contextData.cArrPos];for(r=0;r<16;r+=1)n[r]=e[r];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(t){if(this.renderConfig.clearCanvas){t&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var e,r=this.contextData.saved[this.contextData.cArrPos],n=this.contextData.cTr.props;for(e=0;e<16;e+=1)n[e]=r[e];this.canvasContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),r=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=r,this.globalData.currentGlobalAlpha!==r&&(this.canvasContext.globalAlpha=r,this.globalData.currentGlobalAlpha=r)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(t){this.animationItem.wrapper?(this.animationItem.container=createTag("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)):this.canvasContext=this.renderConfig.context,this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var t,e,r,n;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",t*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",e*this.renderConfig.dpr)):(t=this.canvasContext.canvas.width*this.renderConfig.dpr,e=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var i=this.renderConfig.preserveAspectRatio.split(" "),s=i[1]||"meet",o=i[0]||"xMidYMid",a=o.substr(0,4),l=o.substr(4);r=t/e,(n=this.transformCanvas.w/this.transformCanvas.h)>r&&"meet"===s||n<r&&"slice"===s?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===a&&(n<r&&"meet"===s||n>r&&"slice"===s)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===a&&(n<r&&"meet"===s||n>r&&"slice"===s)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===l&&(n>r&&"meet"===s||n<r&&"slice"===s)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===l&&(n>r&&"meet"===s||n<r&&"slice"===s)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){var t;for(this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerText=""),t=(this.layers?this.layers.length:0)-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(t,e){if((this.renderedFrame!==t||!0!==this.renderConfig.clearCanvas||e)&&!this.destroyed&&-1!==t){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var r,n=this.layers.length;for(this.completeLayers||this.checkLayers(t),r=0;r<n;r++)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(t-this.layers[r].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){var r=this.createItem(this.layers[t],this,this.globalData);e[t]=r,r.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){this.pendingElements.pop().checkParenting()}},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){this.pendingElements.pop().checkParenting()}},HybridRenderer.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(r){var n=this.layers[e];if(n.ddd&&this.supports3d)this.addTo3dContainer(r,e);else if(this.threeDElements)this.addTo3dContainer(r,e);else{for(var i,s,o=0;o<e;)this.elements[o]&&!0!==this.elements[o]&&this.elements[o].getBaseElement&&(s=this.elements[o],i=(this.layers[o].ddd?this.getThreeDContainerByPos(o):s.getBaseElement())||i),o+=1;i?n.ddd&&this.supports3d||this.layerElement.insertBefore(r,i):n.ddd&&this.supports3d||this.layerElement.appendChild(r)}}},HybridRenderer.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRenderer.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextElement(t,this.globalData,this)},HybridRenderer.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},HybridRenderer.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(t){for(var e=0,r=this.threeDElements.length;e<r;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}},HybridRenderer.prototype.createThreeDContainer=function(t,e){var r=createTag("div");styleDiv(r);var n=createTag("div");styleDiv(n),"3d"===e&&(r.style.width=this.globalData.compSize.w+"px",r.style.height=this.globalData.compSize.h+"px",r.style.transformOrigin=r.style.mozTransformOrigin=r.style.webkitTransformOrigin="50% 50%",n.style.transform=n.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"),r.appendChild(n);var i={container:n,perspectiveElem:r,startPos:t,endPos:t,type:e};return this.threeDElements.push(i),i},HybridRenderer.prototype.build3dContainers=function(){var t,e,r=this.layers.length,n="";for(t=0;t<r;t+=1)this.layers[t].ddd&&3!==this.layers[t].ty?("3d"!==n&&(n="3d",e=this.createThreeDContainer(t,"3d")),e.endPos=Math.max(e.endPos,t)):("2d"!==n&&(n="2d",e=this.createThreeDContainer(t,"2d")),e.endPos=Math.max(e.endPos,t));for(t=(r=this.threeDElements.length)-1;t>=0;t--)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(t,e){for(var r=0,n=this.threeDElements.length;r<n;){if(e<=this.threeDElements[r].endPos){for(var i,s=this.threeDElements[r].startPos;s<e;)this.elements[s]&&this.elements[s].getBaseElement&&(i=this.elements[s].getBaseElement()),s+=1;i?this.threeDElements[r].container.insertBefore(t,i):this.threeDElements[r].container.appendChild(t);break}r+=1}},HybridRenderer.prototype.configAnimation=function(t){var e=createTag("div"),r=this.animationItem.wrapper;e.style.width=t.w+"px",e.style.height=t.h+"px",this.resizerElem=e,styleDiv(e),e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),r.appendChild(e),e.style.overflow="hidden";var n=createNS("svg");n.setAttribute("width","1"),n.setAttribute("height","1"),styleDiv(n),this.resizerElem.appendChild(n);var i=createNS("defs");n.appendChild(i),this.data=t,this.setupGlobalData(t,n),this.globalData.defs=i,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerText="",this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var t,e,r,n,i=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight,o=i/s;this.globalData.compSize.w/this.globalData.compSize.h>o?(t=i/this.globalData.compSize.w,e=i/this.globalData.compSize.w,r=0,n=(s-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(t=s/this.globalData.compSize.h,e=s/this.globalData.compSize.h,r=(i-this.globalData.compSize.w*(s/this.globalData.compSize.h))/2,n=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+r+","+n+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,r=this.globalData.compSize.h,n=this.threeDElements.length;for(t=0;t<n;t+=1)this.threeDElements[t].perspectiveElem.style.perspective=this.threeDElements[t].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(r,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length,n=createTag("div");for(e=0;e<r;e+=1)if(t[e].xt){var i=this.createComp(t[e],n,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e,r=this.element.finalTransform.mat,n=this.masksProperties.length;for(e=0;e<n;e++)if((this.viewData[e].prop._mdf||t)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||t)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[e].invRect.setAttribute("transform",r.getInverseMatrix().to2dCSS()),this.storedData[e].x&&(this.storedData[e].x._mdf||t))){var i=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[e].filterId+")")),i.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,r){var n,i,s=" M"+e.v[0][0]+","+e.v[0][1];for(i=e._length,n=1;n<i;n+=1)s+=" C"+e.o[n-1][0]+","+e.o[n-1][1]+" "+e.i[n][0]+","+e.i[n][1]+" "+e.v[n][0]+","+e.v[n][1];if(e.c&&i>1&&(s+=" C"+e.o[n-1][0]+","+e.o[n-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),r.lastPath!==s){var o="";r.elem&&(e.c&&(o=t.inv?this.solidPath+s:s),r.elem.setAttribute("d",o)),r.lastPath=s}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var r,n=this.dynamicProperties.length;for(r=0;r<n;r+=1)(e||this._isParent&&"transform"===this.dynamicProperties[r].propType)&&(this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,r=0,n=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;r<n;){if(this.hierarchy[r].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}r+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),r=0;r<n;r+=1)t=this.hierarchy[r].finalTransform.mProp.v.props,e.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var r=!0,n=this.comp;r;)n.finalTransform?(n.data.hasMask&&e.splice(0,0,n.finalTransform),n=n.comp):r=!1;var i,s,o=e.length;for(i=0;i<o;i+=1)s=e[i].mat.applyToPointArray(0,0,0),t=[t[0]-s[0],t[1]-s[1],0];return t},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initTransform(t,e,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(t,e,r){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=r,this.stops=[],this.setGradientData(r.pElem,e),this.setGradientOpacity(e,r),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var r=createElementID(),n=createNS(1===e.t?"linearGradient":"radialGradient");n.setAttribute("id",r),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var i,s,o,a=[];for(o=4*e.g.p,s=0;s<o;s+=4)i=createNS("stop"),n.appendChild(i),a.push(i);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+r+")"),this.gf=n,this.cst=a},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var r,n,i,s=createNS("mask"),o=createNS("path");s.appendChild(o);var a=createElementID(),l=createElementID();s.setAttribute("id",l);var h=createNS(1===t.t?"linearGradient":"radialGradient");h.setAttribute("id",a),h.setAttribute("spreadMethod","pad"),h.setAttribute("gradientUnits","userSpaceOnUse"),i=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var u=this.stops;for(n=4*t.g.p;n<i;n+=2)(r=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),h.appendChild(r),u.push(r);o.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+a+")"),this.of=h,this.ms=s,this.ost=u,this.maskId=l,e.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix;function r(t,e,r){(r||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(r||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function n(r,n,i){var s,o,a,l,h,u,c,f,p,d,m,y=n.styles.length,v=n.lvl;for(u=0;u<y;u+=1){if(l=n.sh._mdf||i,n.styles[u].lvl<v){for(f=e.reset(),d=v-n.styles[u].lvl,m=n.transformers.length-1;!l&&d>0;)l=n.transformers[m].mProps._mdf||l,d--,m--;if(l)for(d=v-n.styles[u].lvl,m=n.transformers.length-1;d>0;)p=n.transformers[m].mProps.v.props,f.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),d--,m--}else f=t;if(o=(c=n.sh.paths)._length,l){for(a="",s=0;s<o;s+=1)(h=c.shapes[s])&&h._length&&(a+=buildShapeString(h,h._length,h.c,f));n.caches[u]=a}else a=n.caches[u];n.styles[u].d+=!0===r.hd?"":a,n.styles[u]._mdf=l||n.styles[u]._mdf}}function i(t,e,r){var n=e.style;(e.c._mdf||r)&&n.pElem.setAttribute("fill","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||r)&&n.pElem.setAttribute("fill-opacity",e.o.v)}function s(t,e,r){o(t,e,r),a(t,e,r)}function o(t,e,r){var n,i,s,o,a,l=e.gf,h=e.g._hasOpacity,u=e.s.v,c=e.e.v;if(e.o._mdf||r){var f="gf"===t.ty?"fill-opacity":"stroke-opacity";e.style.pElem.setAttribute(f,e.o.v)}if(e.s._mdf||r){var p=1===t.t?"x1":"cx",d="x1"===p?"y1":"cy";l.setAttribute(p,u[0]),l.setAttribute(d,u[1]),h&&!e.g._collapsable&&(e.of.setAttribute(p,u[0]),e.of.setAttribute(d,u[1]))}if(e.g._cmdf||r){n=e.cst;var m=e.g.c;for(s=n.length,i=0;i<s;i+=1)(o=n[i]).setAttribute("offset",m[4*i]+"%"),o.setAttribute("stop-color","rgb("+m[4*i+1]+","+m[4*i+2]+","+m[4*i+3]+")")}if(h&&(e.g._omdf||r)){var y=e.g.o;for(s=(n=e.g._collapsable?e.cst:e.ost).length,i=0;i<s;i+=1)o=n[i],e.g._collapsable||o.setAttribute("offset",y[2*i]+"%"),o.setAttribute("stop-opacity",y[2*i+1])}if(1===t.t)(e.e._mdf||r)&&(l.setAttribute("x2",c[0]),l.setAttribute("y2",c[1]),h&&!e.g._collapsable&&(e.of.setAttribute("x2",c[0]),e.of.setAttribute("y2",c[1])));else if((e.s._mdf||e.e._mdf||r)&&(a=Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)),l.setAttribute("r",a),h&&!e.g._collapsable&&e.of.setAttribute("r",a)),e.e._mdf||e.h._mdf||e.a._mdf||r){a||(a=Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)));var v=Math.atan2(c[1]-u[1],c[0]-u[0]),g=a*(e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v),b=Math.cos(v+e.a.v)*g+u[0],_=Math.sin(v+e.a.v)*g+u[1];l.setAttribute("fx",b),l.setAttribute("fy",_),h&&!e.g._collapsable&&(e.of.setAttribute("fx",b),e.of.setAttribute("fy",_))}}function a(t,e,r){var n=e.style,i=e.d;i&&(i._mdf||r)&&i.dashStr&&(n.pElem.setAttribute("stroke-dasharray",i.dashStr),n.pElem.setAttribute("stroke-dashoffset",i.dashoffset[0])),e.c&&(e.c._mdf||r)&&n.pElem.setAttribute("stroke","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||r)&&n.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||r)&&(n.pElem.setAttribute("stroke-width",e.w.v),n.msElem&&n.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:function(t){t.ty;switch(t.ty){case"fl":return i;case"gf":return o;case"gs":return s;case"st":return a;case"sh":case"el":case"rc":case"sr":return n;case"tr":return r}}}}();function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(t,e,r,n){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i=4;"rc"==e.ty?i=5:"el"==e.ty?i=6:"sr"==e.ty&&(i=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,i,t);var s,o,a=r.length;for(s=0;s<a;s+=1)r[s].closed||(o={transforms:n.addTransformSequence(r[s].transforms),trNodes:[]},this.styledShapes.push(o),r[s].elements.push(o))}function BaseElement(){}function NullElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initFrame(),this.initTransform(t,e,r),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,r),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(t,e,r){this.initElement(t,e,r)}function AudioElement(t,e,r){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,r),this._isPlaying=!1,this._canPlay=!1;var n=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(n),this._currentTime=0,this.globalData.audioController.addAudio(this),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGCompElement(t,e,r){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGTextElement(t,e,r){this.textSpans=[],this.renderType="svg",this.initElement(t,e,r)}function SVGShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,r),this.prevViewData=[]}function SVGTintFilter(t,e){this.filterManager=e;var r=createNS("feColorMatrix");if(r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),r.setAttribute("result","f1"),t.appendChild(r),(r=createNS("feColorMatrix")).setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),r.setAttribute("result","f2"),t.appendChild(r),this.matrixFilter=r,100!==e.effectElements[2].p.v||e.effectElements[2].p.k){var n,i=createNS("feMerge");t.appendChild(i),(n=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),i.appendChild(n),(n=createNS("feMergeNode")).setAttribute("in","f2"),i.appendChild(n)}}function SVGFillFilter(t,e){this.filterManager=e;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),t.appendChild(r),this.matrixFilter=r}function SVGGaussianBlurEffect(t,e){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var r=createNS("feGaussianBlur");t.appendChild(r),this.feGaussianBlur=r}function SVGStrokeEffect(t,e){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}function SVGTritoneFilter(t,e){this.filterManager=e;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),r.setAttribute("result","f1"),t.appendChild(r);var n=createNS("feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.matrixFilter=n;var i=createNS("feFuncR");i.setAttribute("type","table"),n.appendChild(i),this.feFuncR=i;var s=createNS("feFuncG");s.setAttribute("type","table"),n.appendChild(s),this.feFuncG=s;var o=createNS("feFuncB");o.setAttribute("type","table"),n.appendChild(o),this.feFuncB=o}function SVGProLevelsFilter(t,e){this.filterManager=e;var r=this.filterManager.effectElements,n=createNS("feComponentTransfer");(r[10].p.k||0!==r[10].p.v||r[11].p.k||1!==r[11].p.v||r[12].p.k||1!==r[12].p.v||r[13].p.k||0!==r[13].p.v||r[14].p.k||1!==r[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(r[17].p.k||0!==r[17].p.v||r[18].p.k||1!==r[18].p.v||r[19].p.k||1!==r[19].p.v||r[20].p.k||0!==r[20].p.v||r[21].p.k||1!==r[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(r[24].p.k||0!==r[24].p.v||r[25].p.k||1!==r[25].p.v||r[26].p.k||1!==r[26].p.v||r[27].p.k||0!==r[27].p.v||r[28].p.k||1!==r[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(r[31].p.k||0!==r[31].p.v||r[32].p.k||1!==r[32].p.v||r[33].p.k||1!==r[33].p.v||r[34].p.k||0!==r[34].p.v||r[35].p.k||1!==r[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),n=createNS("feComponentTransfer")),(r[3].p.k||0!==r[3].p.v||r[4].p.k||1!==r[4].p.v||r[5].p.k||1!==r[5].p.v||r[6].p.k||0!==r[6].p.v||r[7].p.k||1!==r[7].p.v)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}function SVGDropShadowEffect(t,e){var r=e.container.globalData.renderConfig.filterSize;t.setAttribute("x",r.x),t.setAttribute("y",r.y),t.setAttribute("width",r.width),t.setAttribute("height",r.height),this.filterManager=e;var n=createNS("feGaussianBlur");n.setAttribute("in","SourceAlpha"),n.setAttribute("result","drop_shadow_1"),n.setAttribute("stdDeviation","0"),this.feGaussianBlur=n,t.appendChild(n);var i=createNS("feOffset");i.setAttribute("dx","25"),i.setAttribute("dy","0"),i.setAttribute("in","drop_shadow_1"),i.setAttribute("result","drop_shadow_2"),this.feOffset=i,t.appendChild(i);var s=createNS("feFlood");s.setAttribute("flood-color","#00ff00"),s.setAttribute("flood-opacity","1"),s.setAttribute("result","drop_shadow_3"),this.feFlood=s,t.appendChild(s);var o=createNS("feComposite");o.setAttribute("in","drop_shadow_3"),o.setAttribute("in2","drop_shadow_2"),o.setAttribute("operator","in"),o.setAttribute("result","drop_shadow_4"),t.appendChild(o);var a,l=createNS("feMerge");t.appendChild(l),a=createNS("feMergeNode"),l.appendChild(a),(a=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=a,this.feMerge=l,this.originalNodeAdded=!1,l.appendChild(a)}ShapeTransformManager.prototype={addTransformSequence:function(t){var e,r=t.length,n="_";for(e=0;e<r;e+=1)n+=t[e].transform.key+"_";var i=this.sequences[n];return i||(i={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[n]=i,this.sequenceList.push(i)),i},processSequence:function(t,e){for(var r,n=0,i=t.transforms.length,s=e;n<i&&!e;){if(t.transforms[n].transform.mProps._mdf){s=!0;break}n+=1}if(s)for(t.finalTransform.reset(),n=i-1;n>=0;n-=1)r=t.transforms[n].transform.mProps.v.props,t.finalTransform.transform(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]);t._mdf=s},processSequences:function(t){var e,r=this.sequenceList.length;for(e=0;e<r;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return"_"+this.transform_key_count++}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(t,e,r){this.globalData=e,this.comp=r,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t,e,r,n=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var i=createNS("mask");i.setAttribute("id",this.layerId),i.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),i.appendChild(this.layerElement),n=i,this.globalData.defs.appendChild(i),featureSupport.maskType||1!=this.data.td||(i.setAttribute("mask-type","luminance"),t=createElementID(),e=filtersFactory.createFilter(t),this.globalData.defs.appendChild(e),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(r=createNS("g")).appendChild(this.layerElement),n=r,i.appendChild(r),r.setAttribute("filter","url("+locationHref+"#"+t+")"))}else if(2==this.data.td){var s=createNS("mask");s.setAttribute("id",this.layerId),s.setAttribute("mask-type","alpha");var o=createNS("g");s.appendChild(o),t=createElementID(),e=filtersFactory.createFilter(t);var a=createNS("feComponentTransfer");a.setAttribute("in","SourceGraphic"),e.appendChild(a);var l=createNS("feFuncA");l.setAttribute("type","table"),l.setAttribute("tableValues","1.0 0.0"),a.appendChild(l),this.globalData.defs.appendChild(e);var h=createNS("rect");h.setAttribute("width",this.comp.data.w),h.setAttribute("height",this.comp.data.h),h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("fill","#ffffff"),h.setAttribute("opacity","0"),o.setAttribute("filter","url("+locationHref+"#"+t+")"),o.appendChild(h),o.appendChild(this.layerElement),n=o,featureSupport.maskType||(s.setAttribute("mask-type","luminance"),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),r=createNS("g"),o.appendChild(h),r.appendChild(this.layerElement),n=r,o.appendChild(r)),this.globalData.defs.appendChild(s)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),n=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var u=createNS("clipPath"),c=createNS("path");c.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var f=createElementID();if(u.setAttribute("id",f),u.appendChild(c),this.globalData.defs.appendChild(u),this.checkMasks()){var p=createNS("g");p.setAttribute("clip-path","url("+locationHref+"#"+f+")"),p.appendChild(this.layerElement),this.transformedElement=p,n?n.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+f+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+t+")")}},IShapeElement.prototype={addShapeToModifiers:function(t){var e,r=this.shapeModifiers.length;for(e=0;e<r;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;t>=0;t-=1)this.shapeModifiers[t].processShapes(this._isFirstFrame)}},lcEnum:{1:"butt",2:"round",3:"square"},ljEnum:{1:"miter",2:"round",3:"bevel"},searchProcessedElement:function(t){for(var e=this.processedElements,r=0,n=e.length;r<n;){if(e[r].elem===t)return e[r].pos;r+=1}return 0},addProcessedElement:function(t,e){for(var r=this.processedElements,n=r.length;n;)if(r[n-=1].elem===t)return void(r[n].pos=e);r.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}},ITextElement.prototype.initElement=function(t,e,r){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,r),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(t,e){var r,n,i=e.length,s="";for(r=0;r<i;r+=1)n=e[r].ks.k,s+=buildShapeString(n,n.i.length,!0,t);return s},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,r,n,i){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r])/2,0,0)}e.translate(n,i,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initTransform(t,e,r),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var r,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&(this.elements[r].prepareFrame(this.renderedFrame-this.layers[r].st),this.elements[r]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this.audio.volume(t)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextElement),SVGTextElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextElement.prototype.buildTextContents=function(t){for(var e=0,r=t.length,n=[],i="";e<r;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(n.push(i),i=""):i+=t[e],e+=1;return n.push(i),n},SVGTextElement.prototype.buildNewText=function(){var t,e,r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r?r.l.length:0),r.fc?this.layerElement.setAttribute("fill",this.buildColor(r.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),r.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(r.sc)),this.layerElement.setAttribute("stroke-width",r.sw)),this.layerElement.setAttribute("font-size",r.finalSize);var n=this.globalData.fontManager.getFontByName(r.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var i=r.fWeight,s=r.fStyle;this.layerElement.setAttribute("font-style",s),this.layerElement.setAttribute("font-weight",i)}this.layerElement.setAttribute("aria-label",r.t);var o,a=r.l||[],l=!!this.globalData.fontManager.chars;e=a.length;var h,u=this.mHelper,c="",f=this.data.singleShape,p=0,d=0,m=!0,y=r.tr/1e3*r.finalSize;if(!f||l||r.sz){var v,g,b=this.textSpans.length;for(t=0;t<e;t+=1)l&&f&&0!==t||(o=b>t?this.textSpans[t]:createNS(l?"path":"text"),b<=t&&(o.setAttribute("stroke-linecap","butt"),o.setAttribute("stroke-linejoin","round"),o.setAttribute("stroke-miterlimit","4"),this.textSpans[t]=o,this.layerElement.appendChild(o)),o.style.display="inherit"),u.reset(),u.scale(r.finalSize/100,r.finalSize/100),f&&(a[t].n&&(p=-y,d+=r.yOffset,d+=m?1:0,m=!1),this.applyTextPropertiesToMatrix(r,u,a[t].line,p,d),p+=a[t].l||0,p+=y),l?(h=(v=(g=this.globalData.fontManager.getCharData(r.finalText[t],n.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily))&&g.data||{}).shapes?v.shapes[0].it:[],f?c+=this.createPathShape(u,h):o.setAttribute("d",this.createPathShape(u,h))):(f&&o.setAttribute("transform","translate("+u.props[12]+","+u.props[13]+")"),o.textContent=a[t].val,o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));f&&o&&o.setAttribute("d",c)}else{var _=this.textContainer,w="start";switch(r.j){case 1:w="end";break;case 2:w="middle"}_.setAttribute("text-anchor",w),_.setAttribute("letter-spacing",y);var E=this.buildTextContents(r.finalText);for(e=E.length,d=r.ps?r.ps[1]+r.ascent:0,t=0;t<e;t+=1)(o=this.textSpans[t]||createNS("tspan")).textContent=E[t],o.setAttribute("x",0),o.setAttribute("y",d),o.style.display="inherit",_.appendChild(o),this.textSpans[t]=o,d+=r.finalLineHeight;this.layerElement.appendChild(_)}for(;t<this.textSpans.length;)this.textSpans[t].style.display="none",t+=1;this._sizeChanged=!0},SVGTextElement.prototype.sourceRectAtTime=function(t){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var t,e;this._sizeChanged=!0;var r,n,i=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;for(e=s.length,t=0;t<e;t+=1)s[t].n||(r=i[t],n=this.textSpans[t],r._mdf.m&&n.setAttribute("transform",r.m),r._mdf.o&&n.setAttribute("opacity",r.o),r._mdf.sw&&n.setAttribute("stroke-width",r.sw),r._mdf.sc&&n.setAttribute("stroke",r.sc),r._mdf.fc&&n.setAttribute("fill",r.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e,r,n,i=this.shapes.length,s=this.stylesList.length,o=[],a=!1;for(r=0;r<s;r+=1){for(n=this.stylesList[r],a=!1,o.length=0,t=0;t<i;t+=1)-1!==(e=this.shapes[t]).styles.indexOf(n)&&(o.push(e),a=e._isAnimated||a);o.length>1&&a&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var r,n=new SVGStyleData(t,e),i=n.pElem;if("st"===t.ty)r=new SVGStrokeStyleData(this,t,n);else if("fl"===t.ty)r=new SVGFillStyleData(this,t,n);else if("gf"===t.ty||"gs"===t.ty){r=new("gf"===t.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,t,n),this.globalData.defs.appendChild(r.gf),r.maskId&&(this.globalData.defs.appendChild(r.ms),this.globalData.defs.appendChild(r.of),i.setAttribute("mask","url("+locationHref+"#"+r.maskId+")"))}return"st"!==t.ty&&"gs"!==t.ty||(i.setAttribute("stroke-linecap",this.lcEnum[t.lc]||"round"),i.setAttribute("stroke-linejoin",this.ljEnum[t.lj]||"round"),i.setAttribute("fill-opacity","0"),1===t.lj&&i.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&i.setAttribute("fill-rule","evenodd"),t.ln&&i.setAttribute("id",t.ln),t.cl&&i.setAttribute("class",t.cl),t.bm&&(i.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(n),this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var r=TransformPropertyFactory.getTransformProperty(this,t,this),n=new SVGTransformData(r,r.o,e);return this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.createShapeElement=function(t,e,r){var n=4;"rc"===t.ty?n=5:"el"===t.ty?n=6:"sr"===t.ty&&(n=7);var i=new SVGShapeData(e,r,ShapePropertyFactory.getShapeProp(this,t,n,this));return this.shapes.push(i),this.addShapeToModifiers(i),this.addToAnimatedContents(t,i),i},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var r=0,n=this.animatedContents.length;r<n;){if(this.animatedContents[r].element===e)return;r+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e,r=t.styles,n=this.stylesList.length;for(e=0;e<n;e+=1)this.stylesList[e].closed||r.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,r,n,i,s,o){var a,l,h,u,c,f,p=[].concat(s),d=t.length-1,m=[],y=[];for(a=d;a>=0;a-=1){if((f=this.searchProcessedElement(t[a]))?e[a]=r[f-1]:t[a]._render=o,"fl"==t[a].ty||"st"==t[a].ty||"gf"==t[a].ty||"gs"==t[a].ty)f?e[a].style.closed=!1:e[a]=this.createStyleElement(t[a],i),t[a]._render&&n.appendChild(e[a].style.pElem),m.push(e[a].style);else if("gr"==t[a].ty){if(f)for(h=e[a].it.length,l=0;l<h;l+=1)e[a].prevViewData[l]=e[a].it[l];else e[a]=this.createGroupElement(t[a]);this.searchShapes(t[a].it,e[a].it,e[a].prevViewData,e[a].gr,i+1,p,o),t[a]._render&&n.appendChild(e[a].gr)}else"tr"==t[a].ty?(f||(e[a]=this.createTransformElement(t[a],n)),u=e[a].transform,p.push(u)):"sh"==t[a].ty||"rc"==t[a].ty||"el"==t[a].ty||"sr"==t[a].ty?(f||(e[a]=this.createShapeElement(t[a],p,i)),this.setElementStyles(e[a])):"tm"==t[a].ty||"rd"==t[a].ty||"ms"==t[a].ty||"pb"==t[a].ty?(f?(c=e[a]).closed=!1:((c=ShapeModifiers.getModifier(t[a].ty)).init(this,t[a]),e[a]=c,this.shapeModifiers.push(c)),y.push(c)):"rp"==t[a].ty&&(f?(c=e[a]).closed=!0:(c=ShapeModifiers.getModifier(t[a].ty),e[a]=c,c.init(this,t,a,e),this.shapeModifiers.push(c),o=!1),y.push(c));this.addProcessedElement(t[a],a+1)}for(d=m.length,a=0;a<d;a+=1)m[a].closed=!0;for(d=y.length,a=0;a<d;a+=1)y[a].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e,r=this.animatedContents.length;for(t=0;t<r;t+=1)e=this.animatedContents[t],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",r[0]-e[0]+" 0 0 0 "+e[0]+" "+(r[1]-e[1])+" 0 0 0 "+e[1]+" "+(r[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+n+" 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,r=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+r+" 0")}},SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3*this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,n=3==r?0:e,i=2==r?0:e;this.feGaussianBlur.setAttribute("stdDeviation",n+" "+i);var s=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",s)}},SVGStrokeEffect.prototype.initialize=function(){var t,e,r,n,i=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(n=this.elem.maskManager.masksProperties.length,r=0):n=(r=this.filterManager.effectElements[0].p.v-1)+1,(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);r<n;r+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:r});if(3===this.filterManager.effectElements[10].p.v){var s=createNS("mask"),o=createElementID();s.setAttribute("id",o),s.setAttribute("mask-type","alpha"),s.appendChild(e),this.elem.globalData.defs.appendChild(s);var a=createNS("g");for(a.setAttribute("mask","url("+locationHref+"#"+o+")");i[0];)a.appendChild(i[0]);this.elem.layerElement.appendChild(a),this.masker=s,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,r,n,i=this.paths.length;for(e=0;e<i;e+=1)if(-1!==this.paths[e].m&&(r=this.elem.maskManager.viewData[this.paths[e].m],n=this.paths[e].p,(t||this.filterManager._mdf||r.prop._mdf)&&n.setAttribute("d",r.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||r.prop._mdf)){var s;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,a=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,l=n.getTotalLength();s="0 0 0 "+l*o+" ";var h,u=l*(a-o),c=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,f=Math.floor(u/c);for(h=0;h<f;h+=1)s+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";s+="0 "+10*l+" 0 0"}else s="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;n.setAttribute("stroke-dasharray",s)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p._mdf)){var p=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*p[0])+","+bm_floor(255*p[1])+","+bm_floor(255*p[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,i=n[0]+" "+r[0]+" "+e[0],s=n[1]+" "+r[1]+" "+e[1],o=n[2]+" "+r[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",s),this.feFuncB.setAttribute("tableValues",o)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var r=createNS(t);return r.setAttribute("type","table"),e.appendChild(r),r},SVGProLevelsFilter.prototype.getTableValue=function(t,e,r,n,i){for(var s,o,a=0,l=Math.min(t,e),h=Math.max(t,e),u=Array.call(null,{length:256}),c=0,f=i-n,p=e-t;a<=256;)o=(s=a/256)<=l?p<0?i:n:s>=h?p<0?n:i:n+f*Math.pow((s-t)/p,1/r),u[c++]=o,a+=256/255;return u.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,r=this.filterManager.effectElements;this.feFuncRComposed&&(t||r[3].p._mdf||r[4].p._mdf||r[5].p._mdf||r[6].p._mdf||r[7].p._mdf)&&(e=this.getTableValue(r[3].p.v,r[4].p.v,r[5].p.v,r[6].p.v,r[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||r[10].p._mdf||r[11].p._mdf||r[12].p._mdf||r[13].p._mdf||r[14].p._mdf)&&(e=this.getTableValue(r[10].p.v,r[11].p.v,r[12].p.v,r[13].p.v,r[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||r[17].p._mdf||r[18].p._mdf||r[19].p._mdf||r[20].p._mdf||r[21].p._mdf)&&(e=this.getTableValue(r[17].p.v,r[18].p.v,r[19].p.v,r[20].p.v,r[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||r[24].p._mdf||r[25].p._mdf||r[26].p._mdf||r[27].p._mdf||r[28].p._mdf)&&(e=this.getTableValue(r[24].p.v,r[25].p.v,r[26].p.v,r[27].p.v,r[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||r[31].p._mdf||r[32].p._mdf||r[33].p._mdf||r[34].p._mdf||r[35].p._mdf)&&(e=this.getTableValue(r[31].p.v,r[32].p.v,r[33].p.v,r[34].p.v,r[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var r=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=r*Math.cos(n),s=r*Math.sin(n);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",s)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,r){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=r,r.matteElement=createNS("g"),r.matteElement.appendChild(r.layerElement),r.matteElement.appendChild(r.transformedElement),r.baseElement=r.matteElement}function SVGEffects(t){var e,r,n=t.data.ef?t.data.ef.length:0,i=createElementID(),s=filtersFactory.createFilter(i),o=0;for(this.filters=[],e=0;e<n;e+=1)r=null,20===t.data.ef[e].ty?(o+=1,r=new SVGTintFilter(s,t.effectsManager.effectElements[e])):21===t.data.ef[e].ty?(o+=1,r=new SVGFillFilter(s,t.effectsManager.effectElements[e])):22===t.data.ef[e].ty?r=new SVGStrokeEffect(t,t.effectsManager.effectElements[e]):23===t.data.ef[e].ty?(o+=1,r=new SVGTritoneFilter(s,t.effectsManager.effectElements[e])):24===t.data.ef[e].ty?(o+=1,r=new SVGProLevelsFilter(s,t.effectsManager.effectElements[e])):25===t.data.ef[e].ty?(o+=1,r=new SVGDropShadowEffect(s,t.effectsManager.effectElements[e])):28===t.data.ef[e].ty?r=new SVGMatte3Effect(s,t.effectsManager.effectElements[e],t):29===t.data.ef[e].ty&&(o+=1,r=new SVGGaussianBlurEffect(s,t.effectsManager.effectElements[e])),r&&this.filters.push(r);o&&(t.globalData.defs.appendChild(s),t.layerElement.setAttribute("filter","url("+locationHref+"#"+i+")")),this.filters.length&&t.addRenderableComponent(this)}function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var t;for(this.savedOp=createTypedArray("float32",15),t=0;t<15;t+=1)this.saved[t]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getImage(this.assetData),this.initElement(t,e,r)}function CVCompElement(t,e,r){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function CVMaskElement(t,e){this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r,n=this.masksProperties.length,i=!1;for(r=0;r<n;r++)"n"!==this.masksProperties[r].mode&&(i=!0),this.viewData[r]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[r],3);this.hasMasks=i,i&&this.element.addRenderableComponent(this)}function CVShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,r)}function CVSolidElement(t,e,r){this.initElement(t,e,r)}function CVTextElement(t,e,r){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,r)}function CVEffects(){}function HBaseElement(t,e,r){}function HSolidElement(t,e,r){this.initElement(t,e,r)}function HCompElement(t,e,r){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function HShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,r),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,r)}function HImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,r)}function HCameraElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initHierarchy();var n=PropertyFactory.getProp;if(this.pe=n(this,t.pe,0,0,this),t.ks.p.s?(this.px=n(this,t.ks.p.x,1,0,this),this.py=n(this,t.ks.p.y,1,0,this),this.pz=n(this,t.ks.p.z,1,0,this)):this.p=n(this,t.ks.p,1,0,this),t.ks.a&&(this.a=n(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var i,s=t.ks.or.k.length;for(i=0;i<s;i+=1)t.ks.or.k[i].to=null,t.ks.or.k[i].ti=null}this.or=n(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=n(this,t.ks.rx,0,degToRads,this),this.ry=n(this,t.ks.ry,0,degToRads,this),this.rz=n(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,r=_svgMatteSymbols.length;e<r;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var r=t.layerElement.parentNode;if(r){for(var n,i=r.children,s=0,o=i.length;s<o&&i[s]!==t.layerElement;)s+=1;s<=o-2&&(n=i[s+1]);var a=createNS("use");a.setAttribute("href","#"+e),n?r.insertBefore(a,n):r.appendChild(a)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var r=createElementID(),n=createNS("mask");n.setAttribute("id",e.layerId),n.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var i=t.globalData.defs;i.appendChild(n);var s=createNS("symbol");s.setAttribute("id",r),this.replaceInParent(e,r),s.appendChild(e.layerElement),i.appendChild(s);var o=createNS("use");o.setAttribute("href","#"+r),n.appendChild(o),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,r=0,n=e.length;r<n;)e[r]&&e[r].data.ind===t&&this.setElementAsMask(this.elem,e[r]),r+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(t){var e,r=this.filters.length;for(e=0;e<r;e+=1)this.filters[e].renderFrame(t)},CVContextData.prototype.duplicate=function(){var t=2*this._length,e=this.savedOp;this.savedOp=createTypedArray("float32",t),this.savedOp.set(e);var r=0;for(r=this._length;r<t;r+=1)this.saved[r]=createTypedArray("float32",16);this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var t=0===this.data.ty;this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(t),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,r,n=t.getContext("2d"),i=this.img.width,s=this.img.height,o=i/s,a=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;o>a&&"xMidYMid slice"===l||o<a&&"xMidYMid slice"!==l?e=(r=s)*a:r=(e=i)/a,n.drawImage(this.img,(i-e)/2,(s-r)/2,e,r,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(t){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t,e=this.canvasContext;for(e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip(),t=this.layers.length-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t,e,r,n,i=this.element.finalTransform.mat,s=this.element.canvasContext,o=this.masksProperties.length;for(s.beginPath(),t=0;t<o;t++)if("n"!==this.masksProperties[t].mode){this.masksProperties[t].inv&&(s.moveTo(0,0),s.lineTo(this.element.globalData.compSize.w,0),s.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),s.lineTo(0,this.element.globalData.compSize.h),s.lineTo(0,0)),n=this.viewData[t].v,e=i.applyToPointArray(n.v[0][0],n.v[0][1],0),s.moveTo(e[0],e[1]);var a,l=n._length;for(a=1;a<l;a++)r=i.applyToTriplePoints(n.o[a-1],n.i[a],n.v[a]),s.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);r=i.applyToTriplePoints(n.o[a-1],n.i[0],n.v[0]),s.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5])}this.element.globalData.renderer.save(!0),s.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var r={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:!0===t.hd},n={};if("fl"==t.ty||"st"==t.ty?(n.c=PropertyFactory.getProp(this,t.c,1,255,this),n.c.k||(r.co="rgb("+bm_floor(n.c.v[0])+","+bm_floor(n.c.v[1])+","+bm_floor(n.c.v[2])+")")):"gf"!==t.ty&&"gs"!==t.ty||(n.s=PropertyFactory.getProp(this,t.s,1,null,this),n.e=PropertyFactory.getProp(this,t.e,1,null,this),n.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),n.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),n.g=new GradientProperty(this,t.g,this)),n.o=PropertyFactory.getProp(this,t.o,0,.01,this),"st"==t.ty||"gs"==t.ty){if(r.lc=this.lcEnum[t.lc]||"round",r.lj=this.ljEnum[t.lj]||"round",1==t.lj&&(r.ml=t.ml),n.w=PropertyFactory.getProp(this,t.w,0,null,this),n.w.k||(r.wi=n.w.v),t.d){var i=new DashProperty(this,t.d,"canvas",this);n.d=i,n.d.k||(r.da=n.d.dashArray,r.do=n.d.dashoffset[0])}}else r.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(r),n.style=r,n},CVShapeElement.prototype.createGroupElement=function(t){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}}},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,r,n,i){var s,o,a,l,h,u,c=t.length-1,f=[],p=[],d=[].concat(i);for(s=c;s>=0;s-=1){if((l=this.searchProcessedElement(t[s]))?e[s]=r[l-1]:t[s]._shouldRender=n,"fl"==t[s].ty||"st"==t[s].ty||"gf"==t[s].ty||"gs"==t[s].ty)l?e[s].style.closed=!1:e[s]=this.createStyleElement(t[s],d),f.push(e[s].style);else if("gr"==t[s].ty){if(l)for(a=e[s].it.length,o=0;o<a;o+=1)e[s].prevViewData[o]=e[s].it[o];else e[s]=this.createGroupElement(t[s]);this.searchShapes(t[s].it,e[s].it,e[s].prevViewData,n,d)}else"tr"==t[s].ty?(l||(u=this.createTransformElement(t[s]),e[s]=u),d.push(e[s]),this.addTransformToStyleList(e[s])):"sh"==t[s].ty||"rc"==t[s].ty||"el"==t[s].ty||"sr"==t[s].ty?l||(e[s]=this.createShapeElement(t[s])):"tm"==t[s].ty||"rd"==t[s].ty||"pb"==t[s].ty?(l?(h=e[s]).closed=!1:((h=ShapeModifiers.getModifier(t[s].ty)).init(this,t[s]),e[s]=h,this.shapeModifiers.push(h)),p.push(h)):"rp"==t[s].ty&&(l?(h=e[s]).closed=!0:(h=ShapeModifiers.getModifier(t[s].ty),e[s]=h,h.init(this,t,s,e),this.shapeModifiers.push(h),n=!1),p.push(h));this.addProcessedElement(t[s],s+1)}for(this.removeTransformFromStyleList(),this.closeStyles(f),c=p.length,s=0;s<c;s+=1)p[s].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e,r,n,i,s,o,a,l,h=this.stylesList.length,u=this.globalData.renderer,c=this.globalData.canvasContext;for(t=0;t<h;t+=1)if(("st"!==(a=(l=this.stylesList[t]).type)&&"gs"!==a||0!==l.wi)&&l.data._shouldRender&&0!==l.coOp&&0!==this.globalData.currentGlobalAlpha){for(u.save(),s=l.elements,"st"===a||"gs"===a?(c.strokeStyle="st"===a?l.co:l.grd,c.lineWidth=l.wi,c.lineCap=l.lc,c.lineJoin=l.lj,c.miterLimit=l.ml||0):c.fillStyle="fl"===a?l.co:l.grd,u.ctxOpacity(l.coOp),"st"!==a&&"gs"!==a&&c.beginPath(),u.ctxTransform(l.preTransforms.finalTransform.props),r=s.length,e=0;e<r;e+=1){for("st"!==a&&"gs"!==a||(c.beginPath(),l.da&&(c.setLineDash(l.da),c.lineDashOffset=l.do)),i=(o=s[e].trNodes).length,n=0;n<i;n+=1)"m"==o[n].t?c.moveTo(o[n].p[0],o[n].p[1]):"c"==o[n].t?c.bezierCurveTo(o[n].pts[0],o[n].pts[1],o[n].pts[2],o[n].pts[3],o[n].pts[4],o[n].pts[5]):c.closePath();"st"!==a&&"gs"!==a||(c.stroke(),l.da&&c.setLineDash(this.dashResetter))}"st"!==a&&"gs"!==a&&c.fill(l.r),u.restore()}},CVShapeElement.prototype.renderShape=function(t,e,r,n){var i,s;for(s=t,i=e.length-1;i>=0;i-=1)"tr"==e[i].ty?(s=r[i].transform,this.renderShapeTransform(t,s)):"sh"==e[i].ty||"el"==e[i].ty||"rc"==e[i].ty||"sr"==e[i].ty?this.renderPath(e[i],r[i]):"fl"==e[i].ty?this.renderFill(e[i],r[i],s):"st"==e[i].ty?this.renderStroke(e[i],r[i],s):"gf"==e[i].ty||"gs"==e[i].ty?this.renderGradientFill(e[i],r[i],s):"gr"==e[i].ty?this.renderShape(s,e[i].it,r[i].it):e[i].ty;n&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var r,n,i,s=t.trNodes,o=e.paths,a=o._length;s.length=0;var l=t.transforms.finalTransform;for(i=0;i<a;i+=1){var h=o.shapes[i];if(h&&h.v){for(n=h._length,r=1;r<n;r+=1)1===r&&s.push({t:"m",p:l.applyToPointArray(h.v[0][0],h.v[0][1],0)}),s.push({t:"c",pts:l.applyToTriplePoints(h.o[r-1],h.i[r],h.v[r])});1===n&&s.push({t:"m",p:l.applyToPointArray(h.v[0][0],h.v[0][1],0)}),h.c&&n&&(s.push({t:"c",pts:l.applyToTriplePoints(h.o[r-1],h.i[0],h.v[0])}),s.push({t:"z"}))}}t.trNodes=s}},CVShapeElement.prototype.renderPath=function(t,e){if(!0!==t.hd&&t._shouldRender){var r,n=e.styledShapes.length;for(r=0;r<n;r+=1)this.renderStyledShape(e.styledShapes[r],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,r){var n=e.style;(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*r.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,r){var n=e.style;if(!n.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var i=this.globalData.canvasContext,s=e.s.v,o=e.e.v;if(1===t.t)f=i.createLinearGradient(s[0],s[1],o[0],o[1]);else var a=Math.sqrt(Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)),l=Math.atan2(o[1]-s[1],o[0]-s[0]),h=a*(e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v),u=Math.cos(l+e.a.v)*h+s[0],c=Math.sin(l+e.a.v)*h+s[1],f=i.createRadialGradient(u,c,0,s[0],s[1],a);var p,d=t.g.p,m=e.g.c,y=1;for(p=0;p<d;p+=1)e.g._hasOpacity&&e.g._collapsable&&(y=e.g.o[2*p+1]),f.addColorStop(m[4*p]/100,"rgba("+m[4*p+1]+","+m[4*p+2]+","+m[4*p+3]+","+y+")");n.grd=f}n.coOp=e.o.v*r.opacity},CVShapeElement.prototype.renderStroke=function(t,e,r){var n=e.style,i=e.d;i&&(i._mdf||this._isFirstFrame)&&(n.da=i.dashArray,n.do=i.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*r.opacity),(e.w._mdf||this._isFirstFrame)&&(n.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var r=!1;t.sc&&(r=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var n,i,s=this.globalData.fontManager.getFontByName(t.f),o=t.l,a=this.mHelper;this.stroke=r,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,i=t.finalText.length;var l,h,u,c,f,p,d,m,y,v,g=this.data.singleShape,b=t.tr/1e3*t.finalSize,_=0,w=0,E=!0,S=0;for(n=0;n<i;n+=1){for(h=(l=this.globalData.fontManager.getCharData(t.finalText[n],s.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&l.data||{},a.reset(),g&&o[n].n&&(_=-b,w+=t.yOffset,w+=E?1:0,E=!1),d=(f=h.shapes?h.shapes[0].it:[]).length,a.scale(t.finalSize/100,t.finalSize/100),g&&this.applyTextPropertiesToMatrix(t,a,o[n].line,_,w),y=createSizedArray(d),p=0;p<d;p+=1){for(c=f[p].ks.k.i.length,m=f[p].ks.k,v=[],u=1;u<c;u+=1)1==u&&v.push(a.applyToX(m.v[0][0],m.v[0][1],0),a.applyToY(m.v[0][0],m.v[0][1],0)),v.push(a.applyToX(m.o[u-1][0],m.o[u-1][1],0),a.applyToY(m.o[u-1][0],m.o[u-1][1],0),a.applyToX(m.i[u][0],m.i[u][1],0),a.applyToY(m.i[u][0],m.i[u][1],0),a.applyToX(m.v[u][0],m.v[u][1],0),a.applyToY(m.v[u][0],m.v[u][1],0));v.push(a.applyToX(m.o[u-1][0],m.o[u-1][1],0),a.applyToY(m.o[u-1][0],m.o[u-1][1],0),a.applyToX(m.i[0][0],m.i[0][1],0),a.applyToY(m.i[0][0],m.i[0][1],0),a.applyToX(m.v[0][0],m.v[0][1],0),a.applyToY(m.v[0][0],m.v[0][1],0)),y[p]=v}g&&(_+=o[n].l,_+=b),this.textSpans[S]?this.textSpans[S].elem=y:this.textSpans[S]={elem:y},S+=1}},CVTextElement.prototype.renderInnerContent=function(){var t,e,r,n,i,s,o=this.canvasContext;this.finalTransform.mat.props;o.font=this.values.fValue,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var a,l=this.textAnimator.renderedLetters,h=this.textProperty.currentData.l;e=h.length;var u,c,f=null,p=null,d=null;for(t=0;t<e;t+=1)if(!h[t].n){if((a=l[t])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(a.p),this.globalData.renderer.ctxOpacity(a.o)),this.fill){for(a&&a.fc?f!==a.fc&&(f=a.fc,o.fillStyle=a.fc):f!==this.values.fill&&(f=this.values.fill,o.fillStyle=this.values.fill),n=(u=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),r=0;r<n;r+=1)for(s=(c=u[r]).length,this.globalData.canvasContext.moveTo(c[0],c[1]),i=2;i<s;i+=6)this.globalData.canvasContext.bezierCurveTo(c[i],c[i+1],c[i+2],c[i+3],c[i+4],c[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(a&&a.sw?d!==a.sw&&(d=a.sw,o.lineWidth=a.sw):d!==this.values.sWidth&&(d=this.values.sWidth,o.lineWidth=this.values.sWidth),a&&a.sc?p!==a.sc&&(p=a.sc,o.strokeStyle=a.sc):p!==this.values.stroke&&(p=this.values.stroke,o.strokeStyle=this.values.stroke),n=(u=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),r=0;r<n;r+=1)for(s=(c=u[r]).length,this.globalData.canvasContext.moveTo(c[0],c[1]),i=2;i<s;i+=6)this.globalData.canvasContext.bezierCurveTo(c[i],c[i+1],c[i+2],c[i+3],c[i+4],c[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}a&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=this.finalTransform.mat.toCSS()),this.finalTransform._opMdf&&(this.transformedElement.style.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?((t=createNS("rect")).setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((t=createTag("div")).style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var r,n=0;n<e;)this.elements[n]&&this.elements[n].getBaseElement&&(r=this.elements[n].getBaseElement()),n+=1;r?this.layerElement.insertBefore(t,r):this.layerElement.appendChild(t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)e=t[r].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var r,n,i,s,o,a=t.sh.v,l=t.transformers,h=a._length;if(!(h<=1)){for(r=0;r<h-1;r+=1)n=this.getTransformedPoint(l,a.v[r]),i=this.getTransformedPoint(l,a.o[r]),s=this.getTransformedPoint(l,a.i[r+1]),o=this.getTransformedPoint(l,a.v[r+1]),this.checkBounds(n,i,s,o,e);a.c&&(n=this.getTransformedPoint(l,a.v[r]),i=this.getTransformedPoint(l,a.o[r]),s=this.getTransformedPoint(l,a.i[0]),o=this.getTransformedPoint(l,a.v[0]),this.checkBounds(n,i,s,o,e))}},HShapeElement.prototype.checkBounds=function(t,e,r,n,i){this.getBoundsOfCurve(t,e,r,n);var s=this.shapeBoundingBox;i.x=bm_min(s.left,i.x),i.xMax=bm_max(s.right,i.xMax),i.y=bm_min(s.top,i.y),i.yMax=bm_max(s.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,r,n){for(var i,s,o,a,l,h,u,c=[[t[0],n[0]],[t[1],n[1]]],f=0;f<2;++f)if(s=6*t[f]-12*e[f]+6*r[f],i=-3*t[f]+9*e[f]-9*r[f]+3*n[f],o=3*e[f]-3*t[f],s|=0,o|=0,0!==(i|=0))(l=s*s-4*o*i)<0||(0<(h=(-s+bm_sqrt(l))/(2*i))&&h<1&&c[f].push(this.calculateF(h,t,e,r,n,f)),0<(u=(-s-bm_sqrt(l))/(2*i))&&u<1&&c[f].push(this.calculateF(u,t,e,r,n,f)));else{if(0===s)continue;0<(a=-o/s)&&a<1&&c[f].push(this.calculateF(a,t,e,r,n,f))}this.shapeBoundingBox.left=bm_min.apply(null,c[0]),this.shapeBoundingBox.top=bm_min.apply(null,c[1]),this.shapeBoundingBox.right=bm_max.apply(null,c[0]),this.shapeBoundingBox.bottom=bm_max.apply(null,c[1])},HShapeElement.prototype.calculateF=function(t,e,r,n,i,s){return bm_pow(1-t,3)*e[s]+3*bm_pow(1-t,2)*t*r[s]+3*(1-t)*bm_pow(t,2)*n[s]+bm_pow(t,3)*i[s]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)t[r]&&t[r].sh?this.calculateShapeBoundingBox(t[r],e):t[r]&&t[r].it&&this.calculateBoundingBox(t[r].it,e)},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var r=!1;this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),r=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),r=!0),(r||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y)&&(this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style;e.color=e.fill=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)",t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var r,n,i=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",i.fClass)this.innerElem.className=i.fClass;else{e.fontFamily=i.fFamily;var s=t.fWeight,o=t.fStyle;e.fontStyle=o,e.fontWeight=s}var a,l,h,u=t.l;n=u.length;var c,f=this.mHelper,p="",d=0;for(r=0;r<n;r+=1){if(this.globalData.fontManager.chars?(this.textPaths[d]?a=this.textPaths[d]:((a=createNS("path")).setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[d]?h=(l=this.textSpans[d]).children[0]:((l=createTag("div")).style.lineHeight=0,(h=createNS("svg")).appendChild(a),styleDiv(l)))):this.isMasked?a=this.textPaths[d]?this.textPaths[d]:createNS("text"):this.textSpans[d]?(l=this.textSpans[d],a=this.textPaths[d]):(styleDiv(l=createTag("span")),styleDiv(a=createTag("span")),l.appendChild(a)),this.globalData.fontManager.chars){var m,y=this.globalData.fontManager.getCharData(t.finalText[r],i.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(m=y?y.data:null,f.reset(),m&&m.shapes&&(c=m.shapes[0].it,f.scale(t.finalSize/100,t.finalSize/100),p=this.createPathShape(f,c),a.setAttribute("d",p)),this.isMasked)this.innerElem.appendChild(a);else{if(this.innerElem.appendChild(l),m&&m.shapes){document.body.appendChild(h);var v=h.getBBox();h.setAttribute("width",v.width+2),h.setAttribute("height",v.height+2),h.setAttribute("viewBox",v.x-1+" "+(v.y-1)+" "+(v.width+2)+" "+(v.height+2)),h.style.transform=h.style.webkitTransform="translate("+(v.x-1)+"px,"+(v.y-1)+"px)",u[r].yOffset=v.y-1}else h.setAttribute("width",1),h.setAttribute("height",1);l.appendChild(h)}}else a.textContent=u[r].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(a):(this.innerElem.appendChild(l),a.style.transform=a.style.webkitTransform="translate3d(0,"+-t.finalSize/1.2+"px,0)");this.isMasked?this.textSpans[d]=a:this.textSpans[d]=l,this.textSpans[d].style.display="block",this.textPaths[d]=a,d+=1}for(;d<this.textSpans.length;)this.textSpans[d].style.display="none",d+=1},HTextElement.prototype.renderInnerContent=function(){if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform._matMdf&&(this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var t,e,r,n,i,s=0,o=this.textAnimator.renderedLetters,a=this.textProperty.currentData.l;for(e=a.length,t=0;t<e;t+=1)a[t].n?s+=1:(n=this.textSpans[t],i=this.textPaths[t],r=o[s],s+=1,r._mdf.m&&(this.isMasked?n.setAttribute("transform",r.m):n.style.transform=n.style.webkitTransform=r.m),n.style.opacity=r.o,r.sw&&r._mdf.sw&&i.setAttribute("stroke-width",r.sw),r.sc&&r._mdf.sc&&i.setAttribute("stroke",r.sc),r.fc&&r._mdf.fc&&(i.setAttribute("fill",r.fc),i.style.color=r.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var l=this.innerElem.getBBox();this.currentBBox.w!==l.width&&(this.currentBBox.w=l.width,this.svgElement.setAttribute("width",l.width)),this.currentBBox.h!==l.height&&(this.currentBBox.h=l.height,this.svgElement.setAttribute("height",l.height));this.currentBBox.w===l.width+2&&this.currentBBox.h===l.height+2&&this.currentBBox.x===l.x-1&&this.currentBBox.y===l.y-1||(this.currentBBox.w=l.width+2,this.currentBBox.h=l.height+2,this.currentBBox.x=l.x-1,this.currentBBox.y=l.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e,r=this.comp.threeDElements.length;for(t=0;t<r;t+=1)"3d"===(e=this.comp.threeDElements[t]).type&&(e.perspectiveElem.style.perspective=e.perspectiveElem.style.webkitPerspective=this.pe.v+"px",e.container.style.transformOrigin=e.container.style.mozTransformOrigin=e.container.style.webkitTransformOrigin="0px 0px 0px",e.perspectiveElem.style.transform=e.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)")},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,r=this._isFirstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)r=this.hierarchy[t].finalTransform.mProp._mdf||r;if(r||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=e=this.hierarchy.length-1;t>=0;t-=1){var n=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-n.p.v[0],-n.p.v[1],n.p.v[2]),this.mat.rotateX(-n.or.v[0]).rotateY(-n.or.v[1]).rotateZ(n.or.v[2]),this.mat.rotateX(-n.rx.v).rotateY(-n.ry.v).rotateZ(n.rz.v),this.mat.scale(1/n.s.v[0],1/n.s.v[1],1/n.s.v[2]),this.mat.translate(n.a.v[0],n.a.v[1],n.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i;i=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var s=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2)),o=[i[0]/s,i[1]/s,i[2]/s],a=Math.sqrt(o[2]*o[2]+o[0]*o[0]),l=Math.atan2(o[1],a),h=Math.atan2(o[0],-o[2]);this.mat.rotateY(h).rotateX(-l)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var u=!this._prevMat.equals(this.mat);if((u||this.pe._mdf)&&this.comp.threeDElements){var c;for(e=this.comp.threeDElements.length,t=0;t<e;t+=1)"3d"===(c=this.comp.threeDElements[t]).type&&(u&&(c.container.style.transform=c.container.style.webkitTransform=this.mat.toCSS()),this.pe._mdf&&(c.perspectiveElem.style.perspective=c.perspectiveElem.style.webkitPerspective=this.pe.v+"px"));this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};var animationManager=function(){var t={},e=[],r=0,n=0,i=0,s=!0,o=!1;function a(t){for(var r=0,i=t.target;r<n;)e[r].animation===i&&(e.splice(r,1),r-=1,n-=1,i.isPaused||u()),r+=1}function l(t,r){if(!t)return null;for(var i=0;i<n;){if(e[i].elem==t&&null!==e[i].elem)return e[i].animation;i+=1}var s=new AnimationItem;return c(s,t),s.setData(t,r),s}function h(){i+=1,d()}function u(){i-=1}function c(t,r){t.addEventListener("destroy",a),t.addEventListener("_active",h),t.addEventListener("_idle",u),e.push({elem:r,animation:t}),n+=1}function f(t){var a,l=t-r;for(a=0;a<n;a+=1)e[a].animation.advanceTime(l);r=t,i&&!o?window.requestAnimationFrame(f):s=!0}function p(t){r=t,window.requestAnimationFrame(f)}function d(){!o&&i&&s&&(window.requestAnimationFrame(p),s=!1)}return t.registerAnimation=l,t.loadAnimation=function(t){var e=new AnimationItem;return c(e,null),e.setParams(t),e},t.setSpeed=function(t,r){var i;for(i=0;i<n;i+=1)e[i].animation.setSpeed(t,r)},t.setDirection=function(t,r){var i;for(i=0;i<n;i+=1)e[i].animation.setDirection(t,r)},t.play=function(t){var r;for(r=0;r<n;r+=1)e[r].animation.play(t)},t.pause=function(t){var r;for(r=0;r<n;r+=1)e[r].animation.pause(t)},t.stop=function(t){var r;for(r=0;r<n;r+=1)e[r].animation.stop(t)},t.togglePause=function(t){var r;for(r=0;r<n;r+=1)e[r].animation.togglePause(t)},t.searchAnimations=function(t,e,r){var n,i=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),s=i.length;for(n=0;n<s;n+=1)r&&i[n].setAttribute("data-bm-type",r),l(i[n],t);if(e&&0===s){r||(r="svg");var o=document.getElementsByTagName("body")[0];o.innerText="";var a=createTag("div");a.style.width="100%",a.style.height="100%",a.setAttribute("data-bm-type",r),o.appendChild(a),l(a,t)}},t.resize=function(){var t;for(t=0;t<n;t+=1)e[t].animation.resize()},t.goToAndStop=function(t,r,i){var s;for(s=0;s<n;s+=1)e[s].animation.goToAndStop(t,r,i)},t.destroy=function(t){var r;for(r=n-1;r>=0;r-=1)e[r].animation.destroy(t)},t.freeze=function(){o=!0},t.unfreeze=function(){o=!1,d()},t.setVolume=function(t,r){var i;for(i=0;i<n;i+=1)e[i].animation.setVolume(t,r)},t.mute=function(t){var r;for(r=0;r<n;r+=1)e[r].animation.mute(t)},t.unmute=function(t){var r;for(r=0;r<n;r+=1)e[r].animation.unmute(t)},t.getRegisteredAnimations=function(){var t,r=e.length,n=[];for(t=0;t<r;t+=1)n.push(e[t].animation);return n},t}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e=t.animType?t.animType:t.renderer?t.renderer:"svg";switch(e){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,t.rendererSettings);break;default:this.renderer=new HybridRenderer(this,t.rendererSettings)}this.imagePreloader.setCacheType(e),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||void 0===t.loop||!0===t.loop?this.loop=!0:!1===t.loop?this.loop=!1:this.loop=parseInt(t.loop),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!t.hasOwnProperty("autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.configAnimation(t.animationData):t.path&&(-1!==t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(t.path,this.configAnimation.bind(this),function(){this.trigger("data_failed")}.bind(this)))},AnimationItem.prototype.setData=function(t,e){var r={wrapper:t,animationData:e?"object"==typeof e?e:JSON.parse(e):null},n=t.attributes;r.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",r.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:"canvas";var i=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";""===i||(r.loop="false"!==i&&("true"===i||parseInt(i)));var s=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:!n.getNamedItem("bm-autoplay")||n.getNamedItem("bm-autoplay").value;r.autoplay="false"!==s,r.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"","false"===(n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"")&&(r.prerender=!1),this.setParams(r)},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e,r,n=this.animationData.layers,i=n.length,s=t.layers,o=s.length;for(r=0;r<o;r+=1)for(e=0;e<i;){if(n[e].id==s[r].id){n[e]=s[r];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(i=t.assets.length,e=0;e<i;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(t.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(r,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){this.isLoaded||!this.renderer.globalData.fontManager.isLoaded||!this.imagePreloader.loaded()&&"canvas"===this.renderer.rendererType||(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!=t||!0===this.isPaused&&(this.isPaused=!1,this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!=t||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!=t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!=t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.goToAndStop=function(t,e,r){r&&this.name!=r||(e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(t,e,r){this.goToAndStop(t,e,r),this.play()},AnimationItem.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,r=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(r=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(r=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),r&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.timeCompleted=this.totalFrames=t[0]-t[1],this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.timeCompleted=this.totalFrames=t[1]-t[0],this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?r=t:this.currentRawFrame+this.firstFrame>e&&(r=e-t)),this.firstFrame=t,this.timeCompleted=this.totalFrames=e-t,-1!==r&&this.goToAndStop(r,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"==typeof t[0]){var r,n=t.length;for(r=0;r<n;r+=1)this.segments.push(t[r])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!=t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null,this.renderer=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var r=t.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]),e=this.assetsPath+r}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,r=this.assets.length;e<r;){if(t==this.assets[e].id)return this.assets[e];e+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var Expressions=function(){var t={};return t.initExpressions=function(t){var e=0,r=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0===(e-=1)&&function(){var t,e=r.length;for(t=0;t<e;t+=1)r[t].release();r.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===r.indexOf(t)&&r.push(t)}},t}();expressionsPlugin=Expressions;var ExpressionManager=function(){var ob={},Math=BMMath,easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loopOut,smooth,toWorld,fromWorld,fromComp,toComp,anchorPoint,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,__expression_functions=[],scoped_bm_rt;if(data.xf){var i,len=data.xf.length;for(i=0;i<len;i+=1)__expression_functions[i]=eval("(function(){ return "+data.xf[i]+"}())")}var expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(t,e){var r,n,i=this.pv.length?this.pv.length:1,s=createTypedArray("float32",i);var o=Math.floor(5*time);for(r=0,n=0;r<o;){for(n=0;n<i;n+=1)s[n]+=-e+2*e*BMMath.random();r+=1}var a=5*time,l=a-Math.floor(a),h=createTypedArray("float32",i);if(i>1){for(n=0;n<i;n+=1)h[n]=this.pv[n]+s[n]+(-e+2*e*BMMath.random())*l;return h}return this.pv+s[0]+(-e+2*e*BMMath.random())*l}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty)),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty)),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function seedRandom(t){BMMath.seedrandom(randSeed+t)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null),transform||(transform=elem.layerInterface("ADBE Transform Group"))&&(anchorPoint=transform.anchorPoint),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt.propType,scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers={searchExpressions:function(t,e,r){e.x&&(r.k=!0,r.x=!0,r.initiateExpression=ExpressionManager.initiateExpression,r.effectsSequence.push(r.initiateExpression(t,e,r).bind(r)))},getSpeedAtTime:function(t){var e=this.getValueAtTime(t),r=this.getValueAtTime(t+-.01),n=0;if(e.length){var i;for(i=0;i<e.length;i+=1)n+=Math.pow(r[i]-e[i],2);n=100*Math.sqrt(n)}else n=0;return n},getVelocityAtTime:function(t){if(void 0!==this.vel)return this.vel;var e,r,n=this.getValueAtTime(t),i=this.getValueAtTime(t+-.001);if(n.length)for(e=createTypedArray("float32",n.length),r=0;r<n.length;r+=1)e[r]=(i[r]-n[r])/-.001;else e=(i-n)/-.001;return e},getValueAtTime:function(t){return t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}};!function(){function t(t,e,r){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var n,i,s,o,a,l=this.comp.renderedFrame,h=this.keyframes,u=h[h.length-1].t;if(l<=u)return this.pv;if(r?i=u-(n=e?Math.abs(u-elem.comp.globalData.frameRate*e):Math.max(0,u-this.elem.data.ip)):((!e||e>h.length-1)&&(e=h.length-1),n=u-(i=h[h.length-1-e].t)),"pingpong"===t){if(Math.floor((l-i)/n)%2!=0)return this.getValueAtTime((n-(l-i)%n+i)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var c=this.getValueAtTime(i/this.comp.globalData.frameRate,0),f=this.getValueAtTime(u/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((l-i)%n+i)/this.comp.globalData.frameRate,0),d=Math.floor((l-i)/n);if(this.pv.length){for(o=(a=new Array(c.length)).length,s=0;s<o;s+=1)a[s]=(f[s]-c[s])*d+p[s];return a}return(f-c)*d+p}if("continue"===t){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),y=this.getValueAtTime((u-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(o=(a=new Array(m.length)).length,s=0;s<o;s+=1)a[s]=m[s]+(m[s]-y[s])*((l-u)/this.comp.globalData.frameRate)/5e-4;return a}return m+(l-u)/.001*(m-y)}}return this.getValueAtTime(((l-i)%n+i)/this.comp.globalData.frameRate,0)}function e(t,e,r){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var n,i,s,o,a,l=this.comp.renderedFrame,h=this.keyframes,u=h[0].t;if(l>=u)return this.pv;if(r?i=u+(n=e?Math.abs(elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-u)):((!e||e>h.length-1)&&(e=h.length-1),n=(i=h[e].t)-u),"pingpong"===t){if(Math.floor((u-l)/n)%2==0)return this.getValueAtTime(((u-l)%n+u)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var c=this.getValueAtTime(u/this.comp.globalData.frameRate,0),f=this.getValueAtTime(i/this.comp.globalData.frameRate,0),p=this.getValueAtTime((n-(u-l)%n+u)/this.comp.globalData.frameRate,0),d=Math.floor((u-l)/n)+1;if(this.pv.length){for(o=(a=new Array(c.length)).length,s=0;s<o;s+=1)a[s]=p[s]-(f[s]-c[s])*d;return a}return p-(f-c)*d}if("continue"===t){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),y=this.getValueAtTime((u+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(o=(a=new Array(m.length)).length,s=0;s<o;s+=1)a[s]=m[s]+(m[s]-y[s])*(u-l)/.001;return a}return m+(m-y)*(u-l)/.001}}return this.getValueAtTime((n-(u-l)%n+u)/this.comp.globalData.frameRate,0)}function r(t,e){if(!this.k)return this.pv;if(t=.5*(t||.4),(e=Math.floor(e||5))<=1)return this.pv;var r,n,i=this.comp.renderedFrame/this.comp.globalData.frameRate,s=i-t,o=e>1?(i+t-s)/(e-1):1,a=0,l=0;for(r=this.pv.length?createTypedArray("float32",this.pv.length):0;a<e;){if(n=this.getValueAtTime(s+a*o),this.pv.length)for(l=0;l<this.pv.length;l+=1)r[l]+=n[l];else r+=n;a+=1}if(this.pv.length)for(l=0;l<this.pv.length;l+=1)r[l]/=e;else r/=e;return r}function n(t){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var e=this._transformCachingAtTime.v;if(e.cloneFromProps(this.pre.props),this.appliedTransformations<1){var r=this.a.getValueAtTime(t);e.translate(-r[0],-r[1],r[2])}if(this.appliedTransformations<2){var n=this.s.getValueAtTime(t);e.scale(n[0],n[1],n[2])}if(this.sk&&this.appliedTransformations<3){var i=this.sk.getValueAtTime(t),s=this.sa.getValueAtTime(t);e.skewFromAxis(-i,s)}if(this.r&&this.appliedTransformations<4){var o=this.r.getValueAtTime(t);e.rotate(-o)}else if(!this.r&&this.appliedTransformations<4){var a=this.rz.getValueAtTime(t),l=this.ry.getValueAtTime(t),h=this.rx.getValueAtTime(t),u=this.or.getValueAtTime(t);e.rotateZ(-a.v).rotateY(l.v).rotateX(h.v).rotateZ(-u[2]).rotateY(u[1]).rotateX(u[0])}if(this.data.p&&this.data.p.s){var c=this.px.getValueAtTime(t),f=this.py.getValueAtTime(t);if(this.data.p.z){var p=this.pz.getValueAtTime(t);e.translate(c,f,-p)}else e.translate(c,f,0)}else{var d=this.p.getValueAtTime(t);e.translate(d[0],d[1],-d[2])}return e}function i(t){}var s=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,e,r){var o=s(t,e,r);return o.dynamicProperties.length?o.getValueAtTime=n.bind(o):o.getValueAtTime=i.bind(o),o.setGroupProperty=expressionHelpers.setGroupProperty,o};var o=PropertyFactory.getProp;PropertyFactory.getProp=function(n,i,s,a,l){var h=o(n,i,s,a,l);h.kf?h.getValueAtTime=expressionHelpers.getValueAtTime.bind(h):h.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(h),h.setGroupProperty=expressionHelpers.setGroupProperty,h.loopOut=t,h.loopIn=e,h.smooth=r,h.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(h),h.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(h),h.numKeys=1===i.a?i.k.length:0,h.propertyIndex=i.ix;var u=0;return 0!==s&&(u=createTypedArray("float32",1===i.a?i.k[0].s.length:i.k.length)),h._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:u},expressionHelpers.searchExpressions(n,i,h),h.k&&l.addDynamicProperty(h),h};var a=ShapePropertyFactory.getConstructorFunction(),l=ShapePropertyFactory.getKeyframedConstructorFunction();function h(){}h.prototype={vertices:function(t,e){this.k&&this.getValue();var r=this.v;void 0!==e&&(r=this.getValueAtTime(e,0));var n,i=r._length,s=r[t],o=r.v,a=createSizedArray(i);for(n=0;n<i;n+=1)a[n]="i"===t||"o"===t?[s[n][0]-o[n][0],s[n][1]-o[n][1]]:[s[n][0],s[n][1]];return a},points:function(t){return this.vertices("v",t)},inTangents:function(t){return this.vertices("i",t)},outTangents:function(t){return this.vertices("o",t)},isClosed:function(){return this.v.c},pointOnPath:function(t,e){var r=this.v;void 0!==e&&(r=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(r));for(var n,i=this._segmentsLength,s=i.lengths,o=i.totalLength*t,a=0,l=s.length,h=0;a<l;){if(h+s[a].addedLength>o){var u=a,c=r.c&&a===l-1?0:a+1,f=(o-h)/s[a].addedLength;n=bez.getPointInSegment(r.v[u],r.v[c],r.o[u],r.i[c],f,s[a]);break}h+=s[a].addedLength,a+=1}return n||(n=r.c?[r.v[0][0],r.v[0][1]]:[r.v[r._length-1][0],r.v[r._length-1][1]]),n},vectorOnPath:function(t,e,r){t=1==t?this.v.c?0:.999:t;var n=this.pointOnPath(t,e),i=this.pointOnPath(t+.001,e),s=i[0]-n[0],o=i[1]-n[1],a=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));return 0===a?[0,0]:"tangent"===r?[s/a,o/a]:[-o/a,s/a]},tangentOnPath:function(t,e){return this.vectorOnPath(t,e,"tangent")},normalOnPath:function(t,e){return this.vectorOnPath(t,e,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([h],a),extendPrototype([h],l),l.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shape_pool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},l.prototype.initiateExpression=ExpressionManager.initiateExpression;var u=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,r,n,i){var s=u(t,e,r,n,i);return s.propertyIndex=e.ix,s.lock=!1,3===r?expressionHelpers.searchExpressions(t,e.pt,s):4===r&&expressionHelpers.searchExpressions(t,e.ks,s),s.k&&t.addDynamicProperty(s),s}}(),TextProperty.prototype.getExpressionValue=function(t,e){var r=this.calculateExpression(e);if(t.t!==r){var n={};return this.copyData(n,t),n.t=r.toString(),n.__complete=!1,n}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){if(this.data.d.x)return this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0};var ShapePathInterface=function(t,e,r){var n=e.sh;function i(t){if("Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t)return i.path}var s=propertyGroupFactory(i,r);return n.setGroupProperty(PropertyInterface("Path",s)),Object.defineProperties(i,{path:{get:function(){return n.k&&n.getValue(),n}},shape:{get:function(){return n.k&&n.getValue(),n}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:r}}),i},propertyGroupFactory=function(t,e){return function(r){return(r=void 0===r?1:r)<=0?t:e(r-1)}},PropertyInterface=function(t,e){var r={_name:t};return function(t){return(t=void 0===t?1:t)<=0?r:e(--t)}},ShapeExpressionInterface=function(){function t(t,s,c){var f,p=[],d=t?t.length:0;for(f=0;f<d;f+=1)"gr"==t[f].ty?p.push(e(t[f],s[f],c)):"fl"==t[f].ty?p.push(r(t[f],s[f],c)):"st"==t[f].ty?p.push(n(t[f],s[f],c)):"tm"==t[f].ty?p.push(i(t[f],s[f],c)):"tr"==t[f].ty||("el"==t[f].ty?p.push(o(t[f],s[f],c)):"sr"==t[f].ty?p.push(a(t[f],s[f],c)):"sh"==t[f].ty?p.push(ShapePathInterface(t[f],s[f],c)):"rc"==t[f].ty?p.push(l(t[f],s[f],c)):"rd"==t[f].ty?p.push(h(t[f],s[f],c)):"rp"==t[f].ty&&p.push(u(t[f],s[f],c)));return p}function e(e,r,n){var i=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return i.content;default:return i.transform}};i.propertyGroup=propertyGroupFactory(i,n);var o=function(e,r,n){var i,o=function(t){for(var e=0,r=i.length;e<r;){if(i[e]._name===t||i[e].mn===t||i[e].propertyIndex===t||i[e].ix===t||i[e].ind===t)return i[e];e+=1}if("number"==typeof t)return i[t-1]};o.propertyGroup=propertyGroupFactory(o,n),i=t(e.it,r.it,o.propertyGroup),o.numProperties=i.length;var a=s(e.it[e.it.length-1],r.it[r.it.length-1],o.propertyGroup);return o.transform=a,o.propertyIndex=e.cix,o._name=e.nm,o}(e,r,i.propertyGroup),a=s(e.it[e.it.length-1],r.it[r.it.length-1],i.propertyGroup);return i.content=o,i.transform=a,Object.defineProperty(i,"_name",{get:function(){return e.nm}}),i.numProperties=e.np,i.propertyIndex=e.ix,i.nm=e.nm,i.mn=e.mn,i}function r(t,e,r){function n(t){return"Color"===t||"color"===t?n.color:"Opacity"===t||"opacity"===t?n.opacity:void 0}return Object.defineProperties(n,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",r)),e.o.setGroupProperty(PropertyInterface("Opacity",r)),n}function n(t,e,r){var n=propertyGroupFactory(h,r),i=propertyGroupFactory(l,n);function s(r){Object.defineProperty(l,t.d[r].nm,{get:ExpressionPropertyInterface(e.d.dataProps[r].p)})}var o,a=t.d?t.d.length:0,l={};for(o=0;o<a;o+=1)s(o),e.d.dataProps[o].p.setGroupProperty(i);function h(t){return"Color"===t||"color"===t?h.color:"Opacity"===t||"opacity"===t?h.opacity:"Stroke Width"===t||"stroke width"===t?h.strokeWidth:void 0}return Object.defineProperties(h,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},strokeWidth:{get:ExpressionPropertyInterface(e.w)},dash:{get:function(){return l}},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",n)),e.o.setGroupProperty(PropertyInterface("Opacity",n)),e.w.setGroupProperty(PropertyInterface("Stroke Width",n)),h}function i(t,e,r){function n(e){return e===t.e.ix||"End"===e||"end"===e?n.end:e===t.s.ix?n.start:e===t.o.ix?n.offset:void 0}var i=propertyGroupFactory(n,r);return n.propertyIndex=t.ix,e.s.setGroupProperty(PropertyInterface("Start",i)),e.e.setGroupProperty(PropertyInterface("End",i)),e.o.setGroupProperty(PropertyInterface("Offset",i)),n.propertyIndex=t.ix,n.propertyGroup=r,Object.defineProperties(n,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),n.mn=t.mn,n}function s(t,e,r){function n(e){return t.a.ix===e||"Anchor Point"===e?n.anchorPoint:t.o.ix===e||"Opacity"===e?n.opacity:t.p.ix===e||"Position"===e?n.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?n.rotation:t.s.ix===e||"Scale"===e?n.scale:t.sk&&t.sk.ix===e||"Skew"===e?n.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?n.skewAxis:void 0}var i=propertyGroupFactory(n,r);return e.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",i)),e.transform.mProps.p.setGroupProperty(PropertyInterface("Position",i)),e.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",i)),e.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",i)),e.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",i)),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",i)),e.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",i))),e.transform.op.setGroupProperty(PropertyInterface("Opacity",i)),Object.defineProperties(n,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),n.ty="tr",n.mn=t.mn,n.propertyGroup=r,n}function o(t,e,r){function n(e){return t.p.ix===e?n.position:t.s.ix===e?n.size:void 0}var i=propertyGroupFactory(n,r);n.propertyIndex=t.ix;var s="tm"===e.sh.ty?e.sh.prop:e.sh;return s.s.setGroupProperty(PropertyInterface("Size",i)),s.p.setGroupProperty(PropertyInterface("Position",i)),Object.defineProperties(n,{size:{get:ExpressionPropertyInterface(s.s)},position:{get:ExpressionPropertyInterface(s.p)},_name:{value:t.nm}}),n.mn=t.mn,n}function a(t,e,r){function n(e){return t.p.ix===e?n.position:t.r.ix===e?n.rotation:t.pt.ix===e?n.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?n.outerRadius:t.os.ix===e?n.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?n.innerRoundness:void 0:n.innerRadius}var i=propertyGroupFactory(n,r),s="tm"===e.sh.ty?e.sh.prop:e.sh;return n.propertyIndex=t.ix,s.or.setGroupProperty(PropertyInterface("Outer Radius",i)),s.os.setGroupProperty(PropertyInterface("Outer Roundness",i)),s.pt.setGroupProperty(PropertyInterface("Points",i)),s.p.setGroupProperty(PropertyInterface("Position",i)),s.r.setGroupProperty(PropertyInterface("Rotation",i)),t.ir&&(s.ir.setGroupProperty(PropertyInterface("Inner Radius",i)),s.is.setGroupProperty(PropertyInterface("Inner Roundness",i))),Object.defineProperties(n,{position:{get:ExpressionPropertyInterface(s.p)},rotation:{get:ExpressionPropertyInterface(s.r)},points:{get:ExpressionPropertyInterface(s.pt)},outerRadius:{get:ExpressionPropertyInterface(s.or)},outerRoundness:{get:ExpressionPropertyInterface(s.os)},innerRadius:{get:ExpressionPropertyInterface(s.ir)},innerRoundness:{get:ExpressionPropertyInterface(s.is)},_name:{value:t.nm}}),n.mn=t.mn,n}function l(t,e,r){function n(e){return t.p.ix===e?n.position:t.r.ix===e?n.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?n.size:void 0}var i=propertyGroupFactory(n,r),s="tm"===e.sh.ty?e.sh.prop:e.sh;return n.propertyIndex=t.ix,s.p.setGroupProperty(PropertyInterface("Position",i)),s.s.setGroupProperty(PropertyInterface("Size",i)),s.r.setGroupProperty(PropertyInterface("Rotation",i)),Object.defineProperties(n,{position:{get:ExpressionPropertyInterface(s.p)},roundness:{get:ExpressionPropertyInterface(s.r)},size:{get:ExpressionPropertyInterface(s.s)},_name:{value:t.nm}}),n.mn=t.mn,n}function h(t,e,r){function n(e){if(t.r.ix===e||"Round Corners 1"===e)return n.radius}var i=propertyGroupFactory(n,r),s=e;return n.propertyIndex=t.ix,s.rd.setGroupProperty(PropertyInterface("Radius",i)),Object.defineProperties(n,{radius:{get:ExpressionPropertyInterface(s.rd)},_name:{value:t.nm}}),n.mn=t.mn,n}function u(t,e,r){function n(e){return t.c.ix===e||"Copies"===e?n.copies:t.o.ix===e||"Offset"===e?n.offset:void 0}var i=propertyGroupFactory(n,r),s=e;return n.propertyIndex=t.ix,s.c.setGroupProperty(PropertyInterface("Copies",i)),s.o.setGroupProperty(PropertyInterface("Offset",i)),Object.defineProperties(n,{copies:{get:ExpressionPropertyInterface(s.c)},offset:{get:ExpressionPropertyInterface(s.o)},_name:{value:t.nm}}),n.mn=t.mn,n}return function(e,r,n){var i;function s(t){if("number"==typeof t)return 0===(t=void 0===t?1:t)?n:i[t-1];for(var e=0,r=i.length;e<r;){if(i[e]._name===t)return i[e];e+=1}}return s.propertyGroup=n,i=t(e,r,s),s.numProperties=i.length,s}}(),TextExpressionInterface=function(t){var e;function r(t){switch(t){case"ADBE Text Document":return r.sourceText}}return Object.defineProperty(r,"sourceText",{get:function(){t.textProperty.getValue();var r=t.textProperty.currentData.t;return void 0!==r&&(t.textProperty.currentData.t=void 0,(e=new String(r)).value=r||new String(r)),e}}),r},LayerExpressionInterface=function(){function t(t,e){var r=new Matrix;if(r.reset(),void 0!==e?r=this._elem.finalTransform.mProp.getValueAtTime(e):this._elem.finalTransform.mProp.applyToMatrix(r),this._elem.hierarchy&&this._elem.hierarchy.length){var n,i=this._elem.hierarchy.length;for(n=0;n<i;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(r);return r.applyToPointArray(t[0],t[1],t[2]||0)}return r.applyToPointArray(t[0],t[1],t[2]||0)}function e(t,e){var r=new Matrix;if(r.reset(),void 0!==e?r=this._elem.finalTransform.mProp.getValueAtTime(e):this._elem.finalTransform.mProp.applyToMatrix(r),this._elem.hierarchy&&this._elem.hierarchy.length){var n,i=this._elem.hierarchy.length;for(n=0;n<i;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(r);return r.inversePoint(t)}return r.inversePoint(t)}function r(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var r,n=this._elem.hierarchy.length;for(r=0;r<n;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function n(){return[1,1,1,1]}return function(i){var s;function o(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return o.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return s;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return o.effect;case"ADBE Text Properties":return o.textInterface}}o.toWorld=t,o.fromWorld=e,o.toComp=t,o.fromComp=r,o.sampleImage=n,o.sourceRectAtTime=i.sourceRectAtTime.bind(i),o._elem=i;var a=getDescriptor(s=TransformExpressionInterface(i.finalTransform.mProp),"anchorPoint");return Object.defineProperties(o,{hasParent:{get:function(){return i.hierarchy.length}},parent:{get:function(){return i.hierarchy[0].layerInterface}},rotation:getDescriptor(s,"rotation"),scale:getDescriptor(s,"scale"),position:getDescriptor(s,"position"),opacity:getDescriptor(s,"opacity"),anchorPoint:a,anchor_point:a,transform:{get:function(){return s}},active:{get:function(){return i.isInRange}}}),o.startTime=i.data.st,o.index=i.data.ind,o.source=i.data.refId,o.height=0===i.data.ty?i.data.h:100,o.width=0===i.data.ty?i.data.w:100,o.inPoint=i.data.ip/i.comp.globalData.frameRate,o.outPoint=i.data.op/i.comp.globalData.frameRate,o._name=i.data.nm,o.registerMaskInterface=function(t){o.mask=new MaskManagerInterface(t,i)},o.registerEffectsInterface=function(t){o.effect=t},o}}(),CompExpressionInterface=function(t){function e(e){for(var r=0,n=t.layers.length;r<n;){if(t.layers[r].nm===e||t.layers[r].ind===e)return t.elements[r].layerInterface;r+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e},TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity}}if(Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p)var r=ExpressionPropertyInterface(t.p);else{var n,i=ExpressionPropertyInterface(t.px),s=ExpressionPropertyInterface(t.py);t.pz&&(n=ExpressionPropertyInterface(t.pz))}return Object.defineProperty(e,"position",{get:function(){return t.p?r():[i(),s(),n?n():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,r=this.compositions.length;e<r;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),EffectsExpressionInterface=function(){function t(r,n,i,s){function o(t){for(var e=r.ef,n=0,i=e.length;n<i;){if(t===e[n].nm||t===e[n].mn||t===e[n].ix)return 5===e[n].ty?h[n]:h[n]();n+=1}throw new Error}var a,l=propertyGroupFactory(o,i),h=[],u=r.ef.length;for(a=0;a<u;a+=1)5===r.ef[a].ty?h.push(t(r.ef[a],n.effectElements[a],n.effectElements[a].propertyGroup,s)):h.push(e(n.effectElements[a],r.ef[a].ty,s,l));return"ADBE Color Control"===r.mn&&Object.defineProperty(o,"color",{get:function(){return h[0]()}}),Object.defineProperties(o,{numProperties:{get:function(){return r.np}},_name:{value:r.nm},propertyGroup:{value:l}}),o.active=o.enabled=0!==r.en,o}function e(t,e,r,n){var i=ExpressionPropertyInterface(t.p);return t.p.setGroupProperty&&t.p.setGroupProperty(PropertyInterface("",n)),function(){return 10===e?r.comp.compInterface(t.p.v):i()}}return{createEffectsInterface:function(e,r){if(e.effectsManager){var n,i=[],s=e.data.ef,o=e.effectsManager.effectElements.length;for(n=0;n<o;n+=1)i.push(t(s[n],e.effectsManager.effectElements[n],r,e));var a=e.data.ef||[],l=function(t){for(n=0,o=a.length;n<o;){if(t===a[n].nm||t===a[n].mn||t===a[n].ix)return i[n];n+=1}};return Object.defineProperty(l,"numProperties",{get:function(){return a.length}}),l}}}}(),MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}});return function(e,r){var n,i=createSizedArray(e.viewData.length),s=e.viewData.length;for(n=0;n<s;n+=1)i[n]=new t(e.viewData[n],e.masksProperties[n]);return function(t){for(n=0;n<s;){if(e.masksProperties[n].nm===t)return i[n];n+=1}}}}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function r(t,e,r){Object.defineProperty(t,"velocity",{get:function(){return e.getVelocityAtTime(e.comp.currentFrame)}}),t.numKeys=e.keyframes?e.keyframes.length:0,t.key=function(n){if(t.numKeys){var i="";i="s"in e.keyframes[n-1]?e.keyframes[n-1].s:"e"in e.keyframes[n-2]?e.keyframes[n-2].e:e.keyframes[n-2].s;var s="unidimensional"===r?new Number(i):Object.assign({},i);return s.time=e.keyframes[n-1].t/e.elem.comp.globalData.frameRate,s.value="unidimensional"===r?i[0]:i,s}return 0},t.valueAtTime=e.getValueAtTime,t.speedAtTime=e.getSpeedAtTime,t.velocityAtTime=e.getVelocityAtTime,t.propertyGroup=e.propertyGroup}function n(){return t}return function(i){return i?"unidimensional"===i.propType?function(e){e&&"pv"in e||(e=t);var n=1/e.mult,i=e.pv*n,s=new Number(i);return s.value=i,r(s,e,"unidimensional"),function(){return e.k&&e.getValue(),i=e.v*n,s.value!==i&&((s=new Number(i)).value=i,r(s,e,"unidimensional")),s}}(i):function(t){t&&"pv"in t||(t=e);var n=1/t.mult,i=t.pv.length,s=createTypedArray("float32",i),o=createTypedArray("float32",i);return s.value=o,r(s,t,"multidimensional"),function(){t.k&&t.getValue();for(var e=0;e<i;e+=1)s[e]=o[e]=t.v[e]*n;return s}}(i):n}}(),TextExpressionSelectorProp,propertyGetTextProp;function SliderEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function AngleEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function ColorEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function PointEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function LayerIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function MaskIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function CheckboxEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(){}function EffectsManager(t,e){var r=t.ef||[];this.effectElements=[];var n,i,s=r.length;for(n=0;n<s;n++)i=new GroupEffect(r[n],e),this.effectElements.push(i)}function GroupEffect(t,e){this.init(t,e)}TextExpressionSelectorProp=function(){function t(t,e){return this.textIndex=t+1,this.textTotal=e,this.v=this.getValue()*this.mult,this.v}return function(e,r){this.pv=1,this.comp=e.comp,this.elem=e,this.mult=.01,this.propType="textSelector",this.textTotal=r.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(e,r,this),this.getMult=t,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.kf?this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this):this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty}}(),propertyGetTextProp=TextSelectorProp.getTextSelectorProp,TextSelectorProp.getTextSelectorProp=function(t,e,r){return 1===e.t?new TextExpressionSelectorProp(t,e,r):propertyGetTextProp(t,e,r)},extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var r,n,i=this.data.ef.length,s=this.data.ef;for(r=0;r<i;r+=1){switch(n=null,s[r].ty){case 0:n=new SliderEffect(s[r],e,this);break;case 1:n=new AngleEffect(s[r],e,this);break;case 2:n=new ColorEffect(s[r],e,this);break;case 3:n=new PointEffect(s[r],e,this);break;case 4:case 7:n=new CheckboxEffect(s[r],e,this);break;case 10:n=new LayerIndexEffect(s[r],e,this);break;case 11:n=new MaskIndexEffect(s[r],e,this);break;case 5:n=new EffectsManager(s[r],e,this);break;default:n=new NoValueEffect(s[r],e,this)}n&&this.effectElements.push(n)}};var lottie={};function setLocationHref(t){locationHref=t}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(t){subframeEnabled=t}function loadAnimation(t){return animationManager.loadAnimation(t)}function setQuality(t){if("string"==typeof t)switch(t){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(t)&&t>1&&(defaultCurveSegments=t)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(t,e){"expressions"===t&&(expressionsPlugin=e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),r=0;r<e.length;r++){var n=e[r].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.__getFactory=getFactory,lottie.version="5.7.3";var renderer="",scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer");var readyStateCheckInterval=setInterval(checkReady,100);return lottie}))}));class AnimationFactory{constructor(t){this.ctx=t}create(t){var e=_objectSpread2({type:void 0,index:void 0,data:void 0},t),r=_objectSpread2({__caller:this.ctx.constructor,__container:"null"===t.type||"meta"===t.type?null:this.createAndReturnNewContainerDom(t),__framesBeforeCurrent:this.ctx.getTotalFramesBeforeIndex(t.index||0),uid:Math.round(performance.now()).toString(),domContent:null,offset:0,disabled:!1,object:{},respectDevicePixelRatio:!0,totalFrames:null,bezier:[0,0,1,1],height:{maximum:null,minimum:null},width:{maximum:null,minimum:null},onFrame:()=>{},onVisible:()=>{},onHidden:()=>{},onRedraw:()=>{}},t.items);return _objectSpread2(_objectSpread2({},e),{},{items:r})}createAndReturnNewContainerDom(t){var e=$$1(document.createElement("div"));return e.addClass([CoreAnimator.PREFIX,"container",Math.round(performance.now()).toString()]),!0===t.items.invert&&e.addClass("invert"),this.ctx.activate(e),this.ctx.animatorContainersWrapper.appendChild(e),this.ctx.animatorContainers.push(e),e}}class LottieFactory{constructor(t){this.ctx=t}create(t){var e=this;return _asyncToGenerator((function*(){var r=t.items.uid,n=lottie.loadAnimation({container:t.items.__container,renderer:"canvas",loop:!0,autoplay:!0,animationData:t.data,rendererSettings:{dpr:!1===t.items.respectDevicePixelRatio?1:e.ctx.dpr*e.ctx.resolutionMultiplier,preserveAspectRatio:"xMidYMid slice",className:"".concat(CoreAnimator.PREFIX," ").concat(r," hidden")}});n||(yield new Promise(t=>$$1(n).on("DOMLoaded",()=>t)));var i=$$1(".".concat(r)),s=t.items.totalFrames||n.getDuration(!0),o={animation:n,totalFrames:s,domContent:i,onFrame:(t,e)=>{t.items.object.lottie.animation.goToAndStop(e,!0)}};return o.animation.goToAndStop(-1,!0),e.onLottieObjectCreated(o),o}))()}onLottieObjectCreated(t){var e=t.domContent;e.css({width:"",height:"",position:"absolute"}),e.width=1,e.height=1}}class SolidFactory{constructor(t){this.ctx=t}create(t){var e=this;return _asyncToGenerator((function*(){var{uid:r,__container:n}=t.items,i=r,s=e.createAndReturnDomContent(i);return n.appendChild(s),{domContent:s}}))()}createAndReturnDomContent(t){var e=$$1(document.createElement("div"));return e.css({width:"100vw",height:"100vh",background:"white",position:"absolute"}),e.addClass([CoreAnimator.PREFIX,"solid",t,"hidden"]),e}}class CoreAnimator{constructor(){this.mWindowUtility=new WindowUtility,this.uid=Math.round(performance.now()).toString(),this.currentFrame=0,this.totalFrames=0,this.animations=[],this.metaAnimations=[],this.animatorContainers=[],this.__animatorContainersWrapper=null,this.visibleAnimations=[],this.dpr=Math.max(window.devicePixelRatio/2,1),this.resolutionMultiplier=1,this.rafId=null,this.maxAttributeCache={},this.minAttributeCache={},$$1(window).on("load resize",()=>window.requestAnimationFrame(()=>{this.onWindowResize.call(this),null!==this.visibleAnimations&&this.visibleAnimations.forEach(t=>{t.items.onRedraw.call(this,t)})}))}get animatorContainersWrapper(){return this.__animatorContainersWrapper||(this.__animatorContainersWrapper=$$1(document.createElement("div")),this.__animatorContainersWrapper.addClass([CoreAnimator.PREFIX,"containersWrapper",this.uid,"height"]),this.activate(this.__animatorContainersWrapper),$$1(".painting").appendChild(this.__animatorContainersWrapper)),this.__animatorContainersWrapper}add(t){var e=this;return _asyncToGenerator((function*(){var r=new AnimationFactory(e).create(t),{type:n,index:i,items:s}=r,o=null,a=null;switch(n){case"null":case"meta":break;case"solid":a=yield new SolidFactory(e).create(r),r.items=_objectSpread2(_objectSpread2({},s),{},{domContent:a.domContent});break;case"lottie":o=yield new LottieFactory(e).create(r),r.items=_objectSpread2(_objectSpread2({},s),{},{totalFrames:o.totalFrames,domContent:o.domContent,onFrame:(t,e)=>{o.onFrame(t,e),s.onFrame(t,e)},onRedraw:t=>{e.onRedraw(t),s.onRedraw(t)},object:{lottie:o}})}switch(!0){case"meta"===n:e.metaAnimations.push(r);break;case null===i:e.animations.push([r]);break;case void 0===e.animations[i]:e.animations[i]=[r];break;case e.animations[i].constructor===Array:e.animations[i].push(r)}return e.totalFrames=e.getMaxAttributeFromAnimationsItems("totalFrames",e.animations).reduce((t,e)=>e+t,0),e.onAdd(r),r}))()}onAdd(t){this.onNewAnimation(t)}getRelativeFrame(t){return t*this.totalFrames}rawAnimate(t,e){var r=this;return _asyncToGenerator((function*(){var{from:n,to:i,options:{fps:s=120,speed:o=1}={}}=t,a=i<n,l=a?i:n,h=a?n:i;return void 0===t.options?r.rawAnimate({from:l,to:h,options:{}},e):l===h?(e(h),new Promise(t=>t())):(null!==r.rafId&&cancelAnimationFrame(r.rafId),new Promise(t=>{var n=l,i=()=>{e(a?h-n:n),n>=h?t():(n+=1*o*(s/60),r.rafId=window.requestAnimationFrame(i))};r.rafId=window.requestAnimationFrame(i)}))}))()}onNewAnimation(t){var{onRedraw:e,domContent:r}=t.items;null!==r&&this.hide(r),e(t),this.onWindowResize(),this.visibleAnimations=null,this.onFrame(this.currentFrame)}onWindowResize(){if(!(this.animatorContainers.length<1)){WindowUtility.viewport.height===WindowUtility.inner.height?this.animatorContainersWrapper.removeClass("innerCenter"):this.animatorContainersWrapper.addClass("innerCenter"),this.animatorContainers.fastEach((e,r)=>{this.animations&&this.animations[r]&&this.animations.fastEach(e=>{e.fastEach(e=>{var{__container:r,width:n,height:i}=e.items;if(r){var s,o;s=t({minimum:n.minimum,maximum:n.maximum,value:WindowUtility.inner.width}),o=t({minimum:i.minimum,maximum:i.maximum,value:WindowUtility.inner.height}),r.css("width",null==s?"":s),r.css("height",null===o?"":o)}})})});try{lottie.resize()}catch(t){}}function t(t){var{minimum:e,maximum:r,value:n}=t;if(null===e||null===r)return null;var i=null;return r&&(i=Math.min(n,r)),e&&(i=Math.max(n,e)),i}}onRedraw(t){var{respectDevicePixelRatio:e,object:r,domContent:n}=t.items;if(r.lottie){var i=n;if(!1!==e){var s=this.animatorContainersWrapper.clientWidth,o=this.animatorContainersWrapper.clientHeight,a=-(parseFloat(i.css("width",{computed:!0}))/this.resolutionMultiplier-s)/2,l=-(parseFloat(i.css("height",{computed:!0}))/this.resolutionMultiplier-o)/2;i.css({transform:"translate(".concat(a,"px, ").concat(l,"px) scale(").concat(1/this.resolutionMultiplier,")")})}}}onFrame(t){if(this.animations.length>0){var e=null,r=null,n=[],i=[];if(t<=0)e=-1,r=0,n=this.animations[-1];else{var s=this.getMaxAttributeFromAnimationsItems("totalFrames",this.animations);s.reduce((n,i,o)=>{var a=i+n;return a>t||o===s.length-1?(null===e&&(e=o,r=i+n),0):a},0),n=this.animations[e]}if(n){var o=Math.max(...this.getMaxAttributeFromAnimationsItems("offset",[n])),a=Math.min(...this.getMinAttributeFromAnimationsItems("offset",[n]));n.fastEach(s=>{var{__caller:l,__framesBeforeCurrent:h,uid:u,totalFrames:c,onFrame:f,offset:p,bezier:d}=s.items;i[i.length]=u;var m=new BezierUtility(d[0],d[1],d[2],d[3]),y=t,v=m.getValue(Math.max(Math.min((y-h+p)/(r-h-(o||Math.abs(a))+(o&&p)),1),0))*c;v=Number.isNaN(v)?c:v,!0===window.DEBUG&&"FrameAnimator"!==l.name&&(console.log("frame",t),console.log("__caller",l.name),console.log("workingAnimation",s),console.log("globalFrame",y),console.log("animationIndex",e),console.log("localFrame",v),console.log("currentAnimationsTotalFrames",r),console.log("this.visibleAnimations",this.visibleAnimations),console.log("this.animations",this.animations),console.log("this.totalFrames",this.totalFrames),console.log("")),this.currentFrame=t,this.onVisibleAnimationsChange(n),f(s,v)}),this.metaAnimations.fastEach(n=>{var{onFrame:s}=n.items,o=this.getTotalFramesBeforeIndex(e);s(new AnimationFactory(this).create({type:"meta",index:e,items:{uid:i.join(" "),totalFrames:r-o}}),t-o)})}}}getMaxAttributeFromAnimationsItems(t,e){return this.maxAttributeCache[t]?this.maxAttributeCache[t]:e.map(e=>Math.max(...e.map(e=>e.items[t])))}getMinAttributeFromAnimationsItems(t,e){return this.minAttributeCache[t]?this.minAttributeCache[t]:e.map(e=>Math.min(...e.map(e=>e.items[t])))}getTotalFramesBeforeIndex(t){var e=this.getMaxAttributeFromAnimationsItems("totalFrames",this.animations),r=null;return e.reduce((e,n,i)=>i>=t?(null===r&&(r=e),0):(i+1===t&&(r=n+e),n+e),0),r}onVisibleAnimationsChange(t){this.visibleAnimations!==t&&(t.forEach(t=>{var{onVisible:e,onRedraw:r,domContent:n}=t.items;e(t),r(t),null!==n&&this.unhide(n)}),null!==this.visibleAnimations?this.visibleAnimations!==t&&(this.visibleAnimations.forEach(t=>{var{onHidden:e,domContent:r}=t.items;e(t),null!==r&&this.hide(r)}),this.visibleAnimations=t):this.visibleAnimations=t)}seekToUid(t){var e=(e,r)=>{e.fastEach(e=>{var{uid:n}=e.items;if(n===t){var i=this.getTotalFramesBeforeIndex(r+1);this.onSeek(Math.max(i-1,0))}})};this.animations[-1]&&e(this.animations[-1],-1),this.animations.fastEach(e)}seekTo(t){this.onSeek(t),this.onFrame(t)}onSeek(t){this.onFrame(t)}hide(t){return $$1(t).addClass("hidden")}unhide(t){return $$1(t).removeClass("hidden")}activate(t){return $$1(t).addClass("active")}deactivate(t){return $$1(t).removeClass("active")}}CoreAnimator.PREFIX="__animate";class FrameAnimator extends CoreAnimator{animate(t,e){var r=arguments,n=()=>super.onFrame,i=this;return _asyncToGenerator((function*(){var s=r.length>2&&void 0!==r[2]?r[2]:{};return i.rawAnimate({from:t,to:e,options:s},t=>{n().call(i,t)})}))()}repeat(t,e){var r=arguments,n=this;return _asyncToGenerator((function*(){for(var i=r.length>2&&void 0!==r[2]?r[2]:{};;)yield n.animate(t,e,i)}))()}cancelNextFrame(){cancelAnimationFrame(this.rafId)}}class ScrollAnimator extends CoreAnimator{constructor(){super(),this.nextOnScrollCancelled=!1,this.responsibleForLastResize=!1,$$1(window).on("scroll",()=>window.requestAnimationFrame(()=>this.onScroll.call(this)))}add(t){var e=()=>super.add,r=this;return _asyncToGenerator((function*(){var n=yield e().call(r,t);return r.onWindowResize(),r.onScroll(),n}))()}onWindowResize(){super.onWindowResize();var t=WindowUtility.viewport.height*(this.animations.length+1);t>(Number.parseInt($$1(document.body).css("height"),10)||0)||this.responsibleForLastResize?(this.responsibleForLastResize=!0,$$1(document.body).css({height:t})):this.responsibleForLastResize=!1}onSeek(t){var e=Math.max(Math.ceil(t/this.totalFrames*(document.body.offsetHeight-WindowUtility.viewport.height))+7,0);this.scrollTo({left:0,top:e,behavior:"smooth"},()=>{this.onFrame(t)})}seekTo(t){this.scrollTo({left:0,top:t,behavior:"smooth"},()=>{this.onFrame(t)})}scrollTo(t,e){var{top:r=0,left:n=0,behavior:i}=t,s=()=>{if(Math.floor(window.pageYOffset)===Math.floor(r)&&Math.floor(window.pageXOffset)===Math.floor(n)){if(this.nextOnScrollCancelled=!0,window.removeEventListener("scroll",s),!e)return;e()}};window.addEventListener("scroll",s),s(),window.scrollTo({top:r,behavior:i})}onScroll(){if(this.nextOnScrollCancelled)this.nextOnScrollCancelled=!1;else{var{scrollY:t}=window,e=this.getRelativeFrame(t/(Math.min(document.body.scrollHeight,WindowUtility.viewport.height*(this.animations.length+1))-WindowUtility.viewport.height));this.onFrame(e)}}}class TV{constructor(){this.swiper=null,this.screenDomSelector=".screen",this.screenDom=$$1(this.screenDomSelector),this.clickFrameAnimator=new FrameAnimator,this.currentOnClickDom=null,this.mouseCatcherDom=$$1(".mouseCatcher"),this.mWindowUtility=new WindowUtility,this.cachedMousePosition=null,this.mouseCatcherScaleResetTimeoutId=null,this.mouseCatcherOverrideScale=!1,this.splashDoms=[]}create(t){var e=this;return _asyncToGenerator((function*(){$$1(window).on("resize",()=>e.onWindowResize.call(e)),e.onWindowResize(),"loading"===document.readyState&&(yield new Promise(t=>$$1(window).on("load",t))),e.clickFrameAnimator.add({index:0,type:"null",items:{totalFrames:30,onFrame:(t,r)=>{var n=e.currentOnClickDom,{totalFrames:i}=t.items;n.css({opacity:Math.ceil((i-r)/3)%4?0:1})}}}),$$1(".swiper-button-next").on("click",t=>{e.swiper.slideNext(),e.onClick.call(e,t)}),$$1(".swiper-button-prev").on("click",t=>{e.swiper.slidePrev(),e.onClick.call(e,t)}),yield e.createChannels(t),e.swiper=e.createSwiper(t.length),e.createTitleClicks(),WindowUtility.isMobile||(e.createMouseChaser(),e.createSplashParallax(),$$1(document).on("mousemove",t=>e.onMouseMove.call(e,t)))}))()}createChannels(t){var e=this;return _asyncToGenerator((function*(){0!==t.length?yield t.forAwait(function(){var t=_asyncToGenerator((function*(t,r){var{title:n,subtitle:i,splash:s,markdown:o}=t.data(),a=$$1(".swiper-wrapper"),l=$$1(document.createElement("div"));l.addClass(["swiper-slide","channel","container"]),l.setAttribute("data-swiper-slide-index",r.toString()),l.setAttribute("data-hash",n.replace(/\s/g,"_")),l.setAttribute("data-markdown-url",o);var h=$$1(document.createElement("img"));h.addClass(["channel","splash"]),h.src=s;var u=$$1(document.createElement("h1"));u.addClass(["channel","title","white"]),u.textContent=n;var c=$$1(document.createElement("p"));c.addClass(["channel","subtitle","white"]),c.textContent=i,a.appendChild(l),l.appendChild(h),l.appendChild(u),l.appendChild(c),setTimeout(()=>e.screenDom.addClass("active"),100),h.complete?$$1(".pace > .pace-activity").addClass("deactivated"):h.on("load",()=>$$1(".pace > .pace-activity").addClass("deactivated"))}));return function(e,r){return t.apply(this,arguments)}}()):$$1(".pace > .pace-activity").addClass("deactivated")}))()}createTitleClicks(){var t=this;$$(".channel.title").fastEach(e=>{e.on("click",function(){var r=_asyncToGenerator((function*(r){var n=e.parentElement.getAttribute("data-markdown-url");yield t.onClick.call(t,r),t.redirectToMarkdownViewer(n)}));return function(t){return r.apply(this,arguments)}}())})}createSplashParallax(){this.splashDoms=$$(".channel.container > .splash")}createSwiper(t){return new Swiper(this.screenDomSelector,{pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!0,autoplay:!(window.location.href.includes("#")||t<=1)&&{delay:5e3},speed:500,hashNavigation:{watchState:!0}})}createMouseChaser(){this.mouseCatcherDom.removeClass("hidden"),$$("*").fastEach(t=>t.on("mouseenter",t=>{if("pointer"===$$1(t.target).css("cursor",{computed:!0})){this.mouseCatcherOverrideScale=!0,clearTimeout(this.mouseCatcherScaleResetTimeoutId);this.mouseCatcherDom.css({margin:"".concat(-128,"px 0px 0px ").concat(-128,"px"),height:256,width:256})}else this.mouseCatcherOverrideScale=!1}))}redirectToMarkdownViewer(t){var e=t;e=(e=(e=e.includes("_")?e.replace(/_/g,"__"):e).includes("/")?e.replace(/\//g,"_"):e).includes(".md")?e.substr(0,e.indexOf(".md")):e,window.location.href="/portfolio#".concat(encodeURIComponent(e))}onWindowResize(){WindowUtility.viewport.height===WindowUtility.inner.height?this.screenDom.removeClass("innerCenter"):this.screenDom.addClass("innerCenter")}onMouseMove(t){var{clientX:e,clientY:r}=t;null===this.cachedMousePosition&&(this.cachedMousePosition={clientX:e,clientY:r});var{clientX:n,clientY:i}=this.cachedMousePosition,s=Math.abs(e-n),o=Math.abs(r-i),a=Math.max(Math.min(30*Math.max(s,o),384),64);this.mouseCatcherDom.css({left:e,top:r,margin:!this.mouseCatcherOverrideScale&&"".concat(-a/2,"px 0px 0px ").concat(-a/2,"px"),height:!this.mouseCatcherOverrideScale&&a,width:!this.mouseCatcherOverrideScale&&a}),this.cachedMousePosition={clientX:e,clientY:r},clearTimeout(this.mouseCatcherScaleResetTimeoutId),this.mouseCatcherScaleResetTimeoutId=!this.mouseCatcherOverrideScale&&setTimeout(()=>{this.mouseCatcherDom.css({margin:"".concat(-32,"px 0px 0px ").concat(-32,"px"),height:64,width:64})},500),this.splashDoms.fastEach(t=>{t.css({transform:"translate(".concat((e-WindowUtility.vw(50))/10,"px, ").concat((r-WindowUtility.vh(50))/10,"px)")})})}onClick(t){var e=this;return _asyncToGenerator((function*(){var{currentTarget:r}=t;e.currentOnClickDom=$$1(r),yield e.clickFrameAnimator.animate(0,30)}))()}}class Hamburger{constructor(t){this.mWindowUtility=new WindowUtility,this.lottieAnimation=null,this.lottiePlayDirection=-1,this.hamburgerIconDom=$$1(".header.containersWrapper > .hamburger"),this.hamburgerMenuContainersWrapperDom=$$1(".__hamburgerMenu.containersWrapper"),this.skinDom=$$1(".skin"),this.organsDom=$$1(".organs"),this.titles=[],this.clickFrameAnimator=new FrameAnimator,this.currentOnClickDom=null,this.currentOnMouseDom=null,this.cachedAnimationsLength=null,this.ctx=t,$$1(window).on("resize",()=>window.requestAnimationFrame(()=>this.onWindowResize.call(this)))}create(t){this.lottieAnimationData=t,this.clickFrameAnimator.add({index:0,type:"null",items:{totalFrames:30,onFrame:(t,e)=>{var r=this.currentOnClickDom,{totalFrames:n}=t.items;r.css({opacity:Math.ceil((n-e)/3)%4?0:1})}}}),this.hamburgerIconDom.on("click",t=>{this.hamburgerMenuContainersWrapperDom.removeClass("hidden"),this.onClick.call(this,t)}),this.hamburgerMenuContainersWrapperDom.addClass("hidden");var e=this.ctx.onAdd;this.ctx.onAdd=t=>{e.call(this.ctx,t),this.createHamburgerMenuItems()},this.createHamburgerMenuItems(),this.createHamburgerToppings(),this.addLottie()}createHamburgerToppings(){$$1(".header.containersWrapper > .logo").on("click",t=>{if(this.ctx.seekTo(0),!this.isOpen)return this.currentOnClickDom=$$1(t.currentTarget),void this.clickFrameAnimator.animate(0,30);this.onClick(t)})}addLottie(){this.lottieAnimation=lottie.loadAnimation({container:this.hamburgerIconDom,renderer:"svg",autoplay:!1,loop:!1,animationData:this.lottieAnimationData,rendererSettings:{preserveAspectRatio:"xMidYMin meet",className:"hamburger"}})}get isOpen(){return 1===this.lottiePlayDirection}getLottieData(){return _asyncToGenerator((function*(){return $$1().getJSON("/assets/js/raw/lottie/hamburger.json")}))()}onClick(t,e){if(e){var{newState:r}=e;if(!("closed"===r&&!this.isOpen||"opened"===r&&this.isOpen)){var n=$$(".".concat(Hamburger.PREFIX,".title"));this.isOpen?(this.animateCloseHamburger(),n.fastEach(t=>{t.css("pointer-events","none"),this.animateTitleReveal(t,"hide")})):(this.currentOnMouseDom&&this.animateTitleHover(this.currentOnMouseDom,"out"),this.animateOpenHamburger(),n.fastEach(t=>{t.css("pointer-events","auto"),this.animateTitleReveal(t,"reveal")})),this.lottiePlayDirection*=-1,this.lottieAnimation.setDirection(this.lottiePlayDirection),this.lottieAnimation.play(),this.currentOnClickDom=$$1(t.currentTarget),this.clickFrameAnimator.animate(0,30)}}else this.onClick(t,{})}onTitleMouseOver(t){this.currentOnMouseDom=$$1(t.currentTarget),this.currentOnMouseChildDom=$$1(t.target),this.animateTitleHover($$1(t.currentTarget),"over")}onTitleMouseOut(t){this.currentOnMouseDom=$$1(t.currentTarget),this.currentOnMouseChildDom=$$1(t.target),this.animateTitleHover($$1(t.currentTarget),"out")}animateOpenHamburger(){var t=(Math.min(WindowUtility.viewport.height,WindowUtility.inner.height)-1)/2,e=(Math.min(WindowUtility.viewport.width,WindowUtility.inner.width)-0)/2;this.skinDom.css({height:1,width:0,top:t,left:e}),this.organsDom.css({height:1+t,width:0+e,top:-t,left:-e}),$$1(document.body).css({overflow:"hidden"})}animateCloseHamburger(){this.skinDom.css({height:"",width:"",top:0,left:0}),this.organsDom.css({height:"",width:"",top:0,left:0}),$$1(document.body).css({overflow:""})}createHamburgerMenuItems(){if(this.cachedAnimationsLength!==this.ctx.animations.length){this.cachedAnimationsLength=Number(this.ctx.animations.length),this.hamburgerMenuContainersWrapperDom.innerHTML="",this.hamburgerMenuContainersWrapperDom.css({"grid-template-rows":"auto repeat(".concat(this.ctx.animations.length+Number(!!this.ctx.animations[-1]),", min-content) auto")});var t=(t,e)=>{var{uid:r}=t[0].items,n=$$1(document.createElement("div"));n.addClass([Hamburger.PREFIX,"container",r]);var i=$$1(document.createElement("h1"));i.addClass([Hamburger.PREFIX,"title",r]),this.hamburgerMenuContainersWrapperDom.appendChild(n);var s=e;this.ctx.animations[-1]&&(s+=1),n.css({"grid-row":"".concat(s+2," / ").concat(s+3),"grid-column":"2 / 3"});var o=new FrameAnimator,a=new FrameAnimator;this.titles.push({domContent:i,revealFrameAnimator:o,hoverFrameAnimator:a});var l=r,{className:h}=i;i.textContent="";var u=document.createElement("span");u.className=h.replace("title","prefix"),u.textContent="ââÂ Â ",i.appendChild(u),l.split("").fastEach(t=>{var e=document.createElement("span");e.className="".concat(h.replace("title","char")),e.textContent=t,i.appendChild(e)});var c=document.createElement("span");c.className=h.replace("title","suffix"),c.textContent="",i.appendChild(c);o.add({index:-1,type:"null"}),a.add({index:-1,type:"null"}),o.add({index:0,type:"null",items:{totalFrames:120,offset:-(e+1)/(this.ctx.animations.length+1)*120/4,bezier:[.25,1,.5,1],onHidden:()=>{$$1(i.parentElement).css({opacity:0})},onFrame:(t,e)=>{var{totalFrames:r}=t.items,n=$$1(i.parentElement);e>0?n.css({width:"".concat(e/r*100,"%"),opacity:1}):n.css({width:"".concat(e/r*100,"%"),opacity:0})}}}),i.childNodes.forEach((t,e)=>{o.add({index:0,type:"null",items:{totalFrames:120,offset:-(i.textContent.length-e)/i.textContent.length*120/4,bezier:[.165,.84,.44,1],onHidden:()=>{$$1(t).css({opacity:0})},onFrame:(e,r)=>{var{totalFrames:n}=e.items;$$1(t).css({transform:"translateX(-".concat(2*(n-r),"px)"),opacity:1})}}}),t.classList.contains("prefix")||a.add({index:0,type:"null",items:{totalFrames:120,offset:-e/i.textContent.length*120,bezier:[.25,1,.5,1],onHidden:()=>{$$1(t).css({transform:"translateY(0px)"})},onFrame:(r,n)=>{var i=$$1(t),{totalFrames:s}=r.items;switch(!0){case!this.currentOnMouseChildDom.classList.contains("prefix"):case n<=s/2:i.removeClass("forced");break;case n>s/2:if(!this.currentOnMouseChildDom.classList.contains("prefix"))break;i.addClass("forced")}i.css({transform:"translateY(".concat(e%2==0?"":"-").concat(n/14,"px)")})}}}),n.appendChild(i)}),i.on("click",t=>{this.ctx.seekToUid(r),this.onClick(t,{newState:"closed"})}),i.on("mouseover",t=>{this.onTitleMouseOver(t)}),i.on("mouseout mouseleave",t=>{this.onTitleMouseOut(t)})};this.ctx.animations[-1]&&t(this.ctx.animations[-1],-1),this.ctx.animations.fastEach(t)}}animateTitleHover(t,e){var r=this.titles.length,n=null;this.titles.forEach((e,i)=>{var{totalFrames:s}=e.hoverFrameAnimator.animations[0][0].items;e.domContent===t&&(r=i,n=s)});var i=null;switch(e){case"over":i=n;break;case"out":i=0;break;default:return}var{hoverFrameAnimator:s}=this.titles[r],o={fps:240};s.currentFrame!==i||0!==i?s.animate(s.currentFrame,i,o):s.animate(i,i+1,o)}animateTitleReveal(t,e){var r=this.titles.length,n=null;this.titles.forEach((e,i)=>{var{totalFrames:s}=e.hoverFrameAnimator.animations[0][0].items;e.domContent===t&&(r=i,n=s)});var i=null,s=null;switch(e){case"reveal":i=n,s=1;break;case"hide":i=0,s=2;break;default:return}var{revealFrameAnimator:o}=this.titles[r];o.currentFrame!==i?o.animate(o.currentFrame,i,{speed:s}):o.animate(i,i+1)}onWindowResize(){this.isOpen?this.animateOpenHamburger():this.animateCloseHamburger()}}Hamburger.PREFIX="__hamburgerMenu";class Placeholderer{constructor(){this.placeholders={},this.descriptionDomCache=[]}create(){var t=this;return _asyncToGenerator((function*(){"loading"===document.readyState&&(yield new Promise(t=>$$1(window).on("domcontentloaded",t))),t.cacheDescriptionPlaceholders(),t.updateDescriptionPlaceholders()}))()}cacheDescriptionPlaceholders(){$$(".replaceable").fastEach(t=>{t.childNodes.forEach(t=>{var{textContent:e}=t;if(""!==e){var r=e.indexOf("{{")+2,n=e.indexOf("}}")+2;1!==r&&1!==n&&this.descriptionDomCache.push({domContent:$$1(t),textContent:e})}})})}updateDescriptionPlaceholders(){this.descriptionDomCache.fastEach(t=>{var{domContent:e,textContent:r}=t,n=r.indexOf("{{")+2,i=r.indexOf("}}")+2;if(-1!==n){var s=r.substr(n,i-2-n),o=null;Object.keys(this.placeholders).fastEach(t=>{if(t===s){var e=this.placeholders[t];o=e&&e.constructor===Function?e():e}}),e.textContent="".concat(r.substr(0,n-2)).concat(o).concat(r.substr(i))}})}}class Sign{constructor(){this.mPlaceholderer=new Placeholderer,this.mWindowUtility=new WindowUtility,this.totalFrames=240}create(){var t=this;return _asyncToGenerator((function*(){"loading"===document.readyState&&(yield new Promise(t=>$$1(window).on("domcontentloaded",t))),t.createAnimations(),t.mPlaceholderer.placeholders={pixels:()=>Math.floor(document.body.clientHeight-WindowUtility.viewport.height-window.scrollY)},t.mPlaceholderer.create(),$$1(window).on("scroll",()=>t.mPlaceholderer.updateDescriptionPlaceholders())}))()}createAnimations(){window.matchMedia("(prefers-reduced-motion: reduce)").matches||(this.createDescriptions(),this.createWhoAmITitle(),this.createWhoAmIOutline(),this.createWhoAmISocial(),this.createWhatNowTitle(),this.createWhatNowOutline())}createWhoAmITitle(){var t=$$(".sign > .whoAmI > .title.container > .title:not(.outline)"),e=new ScrollAnimator,{totalFrames:r}=this;e.add({index:-1,type:"null",items:{totalFrames:r}}),t.fastEach(t=>{this.separateTextContentIntoSpans(t,"letter"),t.childNodes.forEach((n,i)=>{e.add({index:0,type:"null",items:{totalFrames:r,offset:-r*(1-i/(t.childNodes.length-1))/4,bezier:[.75,0,.25,1],onHidden:()=>{$$1(n).css({opacity:0})},onFrame:(t,e)=>{var{totalFrames:r}=t.items;$$1(n).css({transform:"translateY(".concat((i%2?1:-1)*(r-e)*4/window.devicePixelRatio,"px)"),opacity:Number(e>10)})}}})})})}createDescriptions(){var t=$$(".sign > * > .description.container > .description"),e=new ScrollAnimator,{totalFrames:r}=this;e.add({index:-1,type:"null",items:{totalFrames:r}}),t.fastEach((t,n)=>{this.separateTextContentIntoSpans(t,"block");var i=Array.from(t.childNodes).getAll(t=>"br"!==t.nodeName.toLowerCase());i.fastEach((t,s)=>{e.add({index:n,type:"null",items:{totalFrames:r,offset:-r*(1-s/(i.length-1))/4,bezier:[.75,0,.25,1],onFrame:(e,r)=>{var{totalFrames:n}=e.items;$$1(t).css({transform:"translateY(-".concat(n-r,"px)")})}}})})})}createWhoAmIOutline(){var t=$$1(".sign > .whoAmI > .title.container > .outline"),e=new ScrollAnimator;this.separateTextContentIntoSpans(t,"letter");var{totalFrames:r}=this;e.add({index:0,type:"null",items:{totalFrames:r}}),t.childNodes.forEach((n,i)=>{e.add({index:1,type:"null",items:{totalFrames:r,offset:-r*(i/(t.childNodes.length-1))/2,bezier:[.75,0,.25,1],onFrame:(t,e)=>{$$1(n).css({transform:"translateX(-".concat(2*e,"px)"),opacity:Number(e<239)})}}})})}createWhoAmISocial(){var t=$$1(".sign > .whoAmI > .description.container > .socials.container"),e=new ScrollAnimator,{totalFrames:r}=this;e.add({index:0,type:"null",items:{totalFrames:r}}),Array.from(t.children).fastEach((n,i)=>{e.add({index:1,type:"null",items:{totalFrames:r,offset:-r*(1-i/t.children.length)+60,bezier:[.75,0,.25,1],onHidden:()=>{$$1(n).css({transform:"translateY(0px)"})},onFrame:(t,e)=>{$$1(n).css({transform:"translateY(".concat(e/4*(i%2?1:-1),"px)"),opacity:Number(e<180)})}}})})}createWhatNowOutline(){var t=$$1(".sign > .whatNow > .title.container > .outline"),e=new ScrollAnimator;this.separateTextContentIntoSpans(t,"letter");var{totalFrames:r}=this;t.childNodes.forEach((n,i)=>{e.add({index:0,type:"null",items:{onVisible:()=>{$$1(n).css({opacity:0})},totalFrames:r}});var s=-r*(1-i/(t.childNodes.length-1))/2;e.add({index:1,type:"null",items:{totalFrames:r,offset:s,bezier:[.75,0,.25,1],onFrame:(t,e)=>{var{totalFrames:r}=t.items;$$1(n).css({transform:"translateY(-".concat(2*(r-e),"px)"),opacity:Number(e>60-s)})}}})})}createWhatNowTitle(){$$(".sign > .whatNow > .title.container > .title:not(.outline)").fastEach(t=>{var e=new ScrollAnimator;this.separateTextContentIntoSpans(t,"letter");var{totalFrames:r}=this;e.add({index:0,type:"null",items:{totalFrames:r}}),t.childNodes.forEach((n,i)=>{e.add({index:1,type:"null",items:{totalFrames:r,offset:-r*(1-i/(t.childNodes.length-1))/2,bezier:[.75,0,.25,1],onHidden:()=>{$$1(n).css({opacity:0})},onFrame:(t,e)=>{var{totalFrames:r}=t.items;$$1(n).css({transform:"translate".concat(i%2?"Y":"X","(-").concat(2*(r-e)/window.devicePixelRatio,"px)"),opacity:Number(e>10)})}}})})})}separateTextContentIntoSpans(t,e){var{textContent:r,className:n}=t;t.textContent="";var i=null;switch(e){case"letter":i=r.trim().replace(/[\t\v ]/g,"").replace(/\n\n/g,"\n").split("");break;case"block":i=r.trim().replace(/\n/g,"__split__\n").split("__split__");break;default:return}i.fastEach(e=>{if("\n"!==e.replace(/[\t\v ]/g,"")){var r=document.createElement("span");r.className="".concat(n," char"),r.textContent=e,t.appendChild(r)}else{var i=document.createElement("br");t.appendChild(i)}})}}Sign.PREFIX="__sign";class LottieButton{constructor(){this.mWindowUtility=new WindowUtility}create(t){var{domContent:e,dpr:r,intent:n,resolutionMultiplier:i}=t,s=r*i,o=!1;e.on("mousemove touchmove",t=>{var{clientX:n,clientY:i}=t;if(n&&i){var a=e,l=a.getContext("2d"),h=e.parentElement.parentElement.classList.contains("innerCenter")?24:0,u=(n*s-a.width/2)/r+a.width/2,c=(i*s-a.height/2)/r+a.height/2+h;if(l.getImageData(u-10,c-10,20,20).data.some(t=>t>0))return o=!0,void(WindowUtility.isMobile||e.css({filter:"brightness(0.5)",cursor:"pointer"}));o=!1,e.css({filter:"brightness(1)",cursor:""})}},{passive:!0}),e.on("click",()=>o&&("string"!=typeof n?n():window.open(null!=n?n:"mailto:_@jiashe.ng")))}}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function __rest(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function __decorate(t,e,r,n){var i,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function __param(t,e){return function(r,n){e(r,n,t)}}function __metadata(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function __awaiter(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))}function __generator(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function __createBinding(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function __exportStar(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function __values(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function __spread(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t}function __spreadArrays(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){s.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{!function(t){t.value instanceof __await?Promise.resolve(t.value.v).then(l,h):u(s[0][2],t)}(i[t](e))}catch(t){u(s[0][3],t)}}function l(t){a("next",t)}function h(t){a("throw",t)}function u(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function __asyncDelegator(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:__await(t[n](e)),done:"return"===n}:i?i(e):e}:i}}function __asyncValues(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}function __makeTemplateObject(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function __importStar(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function __importDefault(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function __classPrivateFieldSet(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var tslib_es6=Object.freeze({__proto__:null,__extends:__extends,get __assign(){return __assign},__rest:__rest,__decorate:__decorate,__param:__param,__metadata:__metadata,__awaiter:__awaiter,__generator:__generator,__createBinding:__createBinding,__exportStar:__exportStar,__values:__values,__read:__read,__spread:__spread,__spreadArrays:__spreadArrays,__await:__await,__asyncGenerator:__asyncGenerator,__asyncDelegator:__asyncDelegator,__asyncValues:__asyncValues,__makeTemplateObject:__makeTemplateObject,__importStar:__importStar,__importDefault:__importDefault,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldSet:__classPrivateFieldSet}),extendStatics$1=function(t,e){return(extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function __extends$1(t,e){function r(){this.constructor=t}extendStatics$1(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var __assign$1=function(){return(__assign$1=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function __rest$1(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function __decorate$1(t,e,r,n){var i,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function __param$1(t,e){return function(r,n){e(r,n,t)}}function __metadata$1(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function __awaiter$1(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))}function __generator$1(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function __createBinding$1(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function __exportStar$1(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function __values$1(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function __spread$1(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read$1(arguments[e]));return t}function __spreadArrays$1(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function __await$1(t){return this instanceof __await$1?(this.v=t,this):new __await$1(t)}function __asyncGenerator$1(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){s.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{!function(t){t.value instanceof __await$1?Promise.resolve(t.value.v).then(l,h):u(s[0][2],t)}(i[t](e))}catch(t){u(s[0][3],t)}}function l(t){a("next",t)}function h(t){a("throw",t)}function u(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function __asyncDelegator$1(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:__await$1(t[n](e)),done:"return"===n}:i?i(e):e}:i}}function __asyncValues$1(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values$1?__values$1(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}function __makeTemplateObject$1(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function __importStar$1(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function __importDefault$1(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet$1(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function __classPrivateFieldSet$1(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var tslib_es6$1=Object.freeze({__proto__:null,__extends:__extends$1,get __assign(){return __assign$1},__rest:__rest$1,__decorate:__decorate$1,__param:__param$1,__metadata:__metadata$1,__awaiter:__awaiter$1,__generator:__generator$1,__createBinding:__createBinding$1,__exportStar:__exportStar$1,__values:__values$1,__read:__read$1,__spread:__spread$1,__spreadArrays:__spreadArrays$1,__await:__await$1,__asyncGenerator:__asyncGenerator$1,__asyncDelegator:__asyncDelegator$1,__asyncValues:__asyncValues$1,__makeTemplateObject:__makeTemplateObject$1,__importStar:__importStar$1,__importDefault:__importDefault$1,__classPrivateFieldGet:__classPrivateFieldGet$1,__classPrivateFieldSet:__classPrivateFieldSet$1}),index_cjs=createCommonjsModule((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},n=function(t,e){if(!t)throw i(e)},i=function(t){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],r=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=63&i|128):55296==(64512&i)&&n+1<t.length&&56320==(64512&t.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++n)),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=63&i|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=63&i|128)}return e},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,h=l?t[i+2]:0,u=s>>2,c=(3&s)<<4|a>>4,f=(15&a)<<2|h>>6,p=63&h;l||(p=64,o||(f=64)),n.push(r[u],r[c],r[f],r[p])}return n.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],r=0,n=0;r<t.length;){var i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[r++];e[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[r++]))<<12|(63&(a=t[r++]))<<6|63&t[r++])-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(1023&o))}else{s=t[r++];var a=t[r++];e[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[],i=0;i<t.length;){var s=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0,a=++i<t.length?r[t.charAt(i)]:64,l=++i<t.length?r[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==l)throw Error();var h=s<<2|o>>4;if(n.push(h),64!==a){var u=o<<4&240|a>>2;if(n.push(u),64!==l){var c=a<<6&192|l;n.push(c)}}}return n},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},a=function(t){try{return o.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=l(t[r],e[r]));return t}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,r){t.resolve=e,t.reject=r}))}return t.prototype.wrapCallback=function(t){var e=this;return function(r,n){r?e.reject(r):e.resolve(n),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(r):t(r,n))}},t}();
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){try{return"[object process]"===Object.prototype.toString.call(commonjsGlobal.process)}catch(t){return!1}}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var f=function(t){function e(r,n){var i=t.call(this,n)||this;return i.code=r,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,p.prototype.create),i}return tslib_es6$1.__extends(e,t),e}(Error),p=function(){function t(t,e,r){this.service=t,this.serviceName=e,this.errors=r}return t.prototype.create=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?d(s,n):"Error",a=this.serviceName+": "+o+" ("+i+").",l=new f(i,a),h=0,u=Object.keys(n);h<u.length;h++){var c=u[h];"_"!==c.slice(-1)&&(c in l&&console.warn('Overwriting FirebaseError base field "'+c+'" can cause unexpected behavior.'),l[c]=n[c])}return l},t}();function d(t,e){return t.replace(m,(function(t,r){var n=e[r];return null!=n?String(n):"<"+r+"?>"}))}var m=/\{\$([^}]+)}/g;
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function y(t){return JSON.parse(t)}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var v=function(t){var e={},r={},n={},i="";try{var s=t.split(".");e=y(a(s[0])||""),r=y(a(s[1])||""),i=s[2],n=r.d||{},delete r.d}catch(t){}return{header:e,claims:r,data:n,signature:i}};
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var g=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var r=this.W_;if("string"==typeof t)for(var n=0;n<16;n++)r[n]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(n=0;n<16;n++)r[n]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(n=16;n<80;n++){var i=r[n-3]^r[n-8]^r[n-14]^r[n-16];r[n]=4294967295&(i<<1|i>>>31)}var s,o,a=this.chain_[0],l=this.chain_[1],h=this.chain_[2],u=this.chain_[3],c=this.chain_[4];for(n=0;n<80;n++){n<40?n<20?(s=u^l&(h^u),o=1518500249):(s=l^h^u,o=1859775393):n<60?(s=l&h|u&(l|h),o=2400959708):(s=l^h^u,o=3395469782);i=(a<<5|a>>>27)+s+c+o+r[n]&4294967295;c=u,u=h,h=4294967295&(l<<30|l>>>2),l=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var r=e-this.blockSize,n=0,i=this.buf_,s=this.inbuf_;n<e;){if(0===s)for(;n<=r;)this.compress_(t,n),n+=this.blockSize;if("string"==typeof t){for(;n<e;)if(i[s]=t.charCodeAt(n),++n,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;n<e;)if(i[s]=t[n],++n,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(r=0;r<5;r++)for(var i=24;i>=0;i-=8)t[n]=this.chain_[r]>>i&255,++n;return t},t}();var b=function(){function t(t,e){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(r)})).catch((function(t){r.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,r){var n,i=this;if(void 0===t&&void 0===e&&void 0===r)throw new Error("Missing Observer.");void 0===(n=function(t,e){if("object"!=typeof t||null===t)return!1;for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:r}).next&&(n.next=_),void 0===n.error&&(n.error=_),void 0===n.complete&&(n.complete=_);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?n.error(i.finalError):n.complete()}catch(t){}})),this.observers.push(n),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var r=this;this.task.then((function(){if(void 0!==r.observers&&void 0!==r.observers[t])try{e(r.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function _(){}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function w(t,e,r){var n="";switch(e){case 1:n=r?"first":"First";break;case 2:n=r?"second":"Second";break;case 3:n=r?"third":"Third";break;case 4:n=r?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=n+" argument "}e.CONSTANTS=r,e.Deferred=h,e.ErrorFactory=p,e.FirebaseError=f,e.Sha1=g,e.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},e.assert=n,e.assertionError=i,e.async=function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];Promise.resolve(!0).then((function(){t.apply(void 0,r)})).catch((function(t){e&&e(t)}))}},e.base64=o,e.base64Decode=a,e.base64Encode=function(t){var e=s(t);return o.encodeByteArray(e,!0)},e.contains=
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var r=new b(t,e);return r.subscribe.bind(r)},e.decode=v,e.deepCopy=
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=w,e.getUA=u,e.isAdmin=function(t){var e=v(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return u().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=u();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!==indexedDB},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())},e.isNode=c,e.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!c()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return u().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=v(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=v(t).claims,r=Math.floor((new Date).getTime()/1e3),n=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?n=e.nbf:e.hasOwnProperty("iat")&&(n=e.iat),i=e.hasOwnProperty("exp")?e.exp:n+86400),!!r&&!!n&&!!i&&r>=n&&r<=i},e.issuedAtTime=function(t){var e=v(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=y,e.map=function(t,e,r){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e.call(r,t[i],i,t));return n}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */,e.querystring=function(t){for(var e=[],r=function(t,r){Array.isArray(r)?r.forEach((function(r){e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))},n=0,i=Object.entries(t);n<i.length;n++){var s=i[n];r(s[0],s[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var r=t.split("=");e[r[0]]=r[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,r++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],r=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);if(s>=55296&&s<=56319){var o=s-55296;i++,n(i<t.length,"Surrogate pair missing trail surrogate."),s=65536+(o<<10)+(t.charCodeAt(i)-56320)}s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=63&s|128):s<65536?(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=63&s|128):(e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=63&s|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,r,n){var i;if(n<e?i="at least "+e:n>r&&(i=0===r?"none":"no more than "+r),i)throw new Error(t+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,r,n){if((!n||r)&&"function"!=typeof r)throw new Error(w(t,e,n)+"must be a valid function.")},e.validateContextObject=function(t,e,r,n){if((!n||r)&&("object"!=typeof r||null===r))throw new Error(w(t,e,n)+"must be a valid context object.")}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */,e.validateIndexedDBOpenable=function(){return new Promise((function(t,e){try{var r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(n);i.onsuccess=function(){i.result.close(),r||window.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=function(){r=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))},e.validateNamespace=function(t,e,r,n){if((!n||r)&&"string"!=typeof r)throw new Error(w(t,e,n)+"must be a valid firebase namespace.")}}));unwrapExports(index_cjs);var index_cjs_1=index_cjs.CONSTANTS,index_cjs_2=index_cjs.Deferred,index_cjs_3=index_cjs.ErrorFactory,index_cjs_4=index_cjs.FirebaseError,index_cjs_5=index_cjs.Sha1,index_cjs_6=index_cjs.areCookiesEnabled,index_cjs_7=index_cjs.assert,index_cjs_8=index_cjs.assertionError,index_cjs_9=index_cjs.async,index_cjs_10=index_cjs.base64,index_cjs_11=index_cjs.base64Decode,index_cjs_12=index_cjs.base64Encode,index_cjs_13=index_cjs.contains,index_cjs_14=index_cjs.createSubscribe,index_cjs_15=index_cjs.decode,index_cjs_16=index_cjs.deepCopy,index_cjs_17=index_cjs.deepExtend,index_cjs_18=index_cjs.errorPrefix,index_cjs_19=index_cjs.getUA,index_cjs_20=index_cjs.isAdmin,index_cjs_21=index_cjs.isBrowser,index_cjs_22=index_cjs.isBrowserExtension,index_cjs_23=index_cjs.isElectron,index_cjs_24=index_cjs.isEmpty,index_cjs_25=index_cjs.isIE,index_cjs_26=index_cjs.isIndexedDBAvailable,index_cjs_27=index_cjs.isMobileCordova,index_cjs_28=index_cjs.isNode,index_cjs_29=index_cjs.isNodeSdk,index_cjs_30=index_cjs.isReactNative,index_cjs_31=index_cjs.isSafari,index_cjs_32=index_cjs.isUWP,index_cjs_33=index_cjs.isValidFormat,index_cjs_34=index_cjs.isValidTimestamp,index_cjs_35=index_cjs.issuedAtTime,index_cjs_36=index_cjs.jsonEval,index_cjs_37=index_cjs.map,index_cjs_38=index_cjs.querystring,index_cjs_39=index_cjs.querystringDecode,index_cjs_40=index_cjs.safeGet,index_cjs_41=index_cjs.stringLength,index_cjs_42=index_cjs.stringToByteArray,index_cjs_43=index_cjs.stringify,index_cjs_44=index_cjs.validateArgCount,index_cjs_45=index_cjs.validateCallback,index_cjs_46=index_cjs.validateContextObject,index_cjs_47=index_cjs.validateIndexedDBOpenable,index_cjs_48=index_cjs.validateNamespace,extendStatics$2=function(t,e){return(extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends$2(t,e){function r(){this.constructor=t}extendStatics$2(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var __assign$2=function(){return(__assign$2=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function __rest$2(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function __decorate$2(t,e,r,n){var i,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function __param$2(t,e){return function(r,n){e(r,n,t)}}function __metadata$2(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function __awaiter$2(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))}function __generator$2(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function __createBinding$2(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function __exportStar$2(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function __values$2(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$2(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function __spread$2(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read$2(arguments[e]));return t}function __spreadArrays$2(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function __await$2(t){return this instanceof __await$2?(this.v=t,this):new __await$2(t)}function __asyncGenerator$2(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){s.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{!function(t){t.value instanceof __await$2?Promise.resolve(t.value.v).then(l,h):u(s[0][2],t)}(i[t](e))}catch(t){u(s[0][3],t)}}function l(t){a("next",t)}function h(t){a("throw",t)}function u(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function __asyncDelegator$2(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:__await$2(t[n](e)),done:"return"===n}:i?i(e):e}:i}}function __asyncValues$2(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values$2?__values$2(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}function __makeTemplateObject$2(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function __importStar$2(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function __importDefault$2(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet$2(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function __classPrivateFieldSet$2(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var tslib_es6$2=Object.freeze({__proto__:null,__extends:__extends$2,get __assign(){return __assign$2},__rest:__rest$2,__decorate:__decorate$2,__param:__param$2,__metadata:__metadata$2,__awaiter:__awaiter$2,__generator:__generator$2,__createBinding:__createBinding$2,__exportStar:__exportStar$2,__values:__values$2,__read:__read$2,__spread:__spread$2,__spreadArrays:__spreadArrays$2,__await:__await$2,__asyncGenerator:__asyncGenerator$2,__asyncDelegator:__asyncDelegator$2,__asyncValues:__asyncValues$2,__makeTemplateObject:__makeTemplateObject$2,__importStar:__importStar$2,__importDefault:__importDefault$2,__classPrivateFieldGet:__classPrivateFieldGet$2,__classPrivateFieldSet:__classPrivateFieldSet$2}),index_cjs$1=createCommonjsModule((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),n=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var r=new index_cjs.Deferred;this.instancesDeferred.set(e,r);try{var n=this.getOrInitializeService(e);n&&r.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=tslib_es6$2.__assign({identifier:"[DEFAULT]",optional:!1},t),r=e.identifier,n=e.optional,i=this.normalizeInstanceIdentifier(r);try{var s=this.getOrInitializeService(i);if(!s){if(n)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(n)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var n=tslib_es6$2.__values(this.instancesDeferred.entries()),i=n.next();!i.done;i=n.next()){var s=tslib_es6$2.__read(i.value,2),o=s[0],a=s[1],l=this.normalizeInstanceIdentifier(o);try{var h=this.getOrInitializeService(l);a.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return tslib_es6$2.__awaiter(this,void 0,void 0,(function(){var t;return tslib_es6$2.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var i=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new n(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=r,e.ComponentContainer=i,e.Provider=n}));unwrapExports(index_cjs$1);var index_cjs_1$1=index_cjs$1.Component,index_cjs_2$1=index_cjs$1.ComponentContainer,index_cjs_3$1=index_cjs$1.Provider,_a;
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
function __spreadArrays$3(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var instances=[],LogLevel;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(LogLevel||(LogLevel={}));var levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod=(_a={},_a[LogLevel.DEBUG]="log",_a[LogLevel.VERBOSE]="log",_a[LogLevel.INFO]="info",_a[LogLevel.WARN]="warn",_a[LogLevel.ERROR]="error",_a),defaultLogHandler=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!(e<t.logLevel)){var i=(new Date).toISOString(),s=ConsoleMethod[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,__spreadArrays$3(["["+i+"]  "+t.name+":"],r))}},Logger=function(){function t(t){this.name=t,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null,instances.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in LogLevel))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?levelStringToEnum[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays$3([this,LogLevel.DEBUG],t)),this._logHandler.apply(this,__spreadArrays$3([this,LogLevel.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays$3([this,LogLevel.VERBOSE],t)),this._logHandler.apply(this,__spreadArrays$3([this,LogLevel.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays$3([this,LogLevel.INFO],t)),this._logHandler.apply(this,__spreadArrays$3([this,LogLevel.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays$3([this,LogLevel.WARN],t)),this._logHandler.apply(this,__spreadArrays$3([this,LogLevel.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays$3([this,LogLevel.ERROR],t)),this._logHandler.apply(this,__spreadArrays$3([this,LogLevel.ERROR],t))},t}();function setLogLevel(t){instances.forEach((function(e){e.setLogLevel(t)}))}function setUserLogHandler(t,e){for(var r=function(r){var n=null;e&&e.level&&(n=levelStringToEnum[e.level]),r.userLogHandler=null===t?null:function(e,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var o=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");r>=(null!=n?n:e.logLevel)&&t({level:LogLevel[r].toLowerCase(),message:o,args:i,type:e.name})}},n=0,i=instances;n<i.length;n++){r(i[n])}}var index_esm=Object.freeze({__proto__:null,get LogLevel(){return LogLevel},Logger:Logger,setLogLevel:setLogLevel,setUserLogHandler:setUserLogHandler}),index_cjs$2=createCommonjsModule((function(t,e){
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var r;Object.defineProperty(e,"__esModule",{value:!0});var n,i=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),s=new index_cjs.ErrorFactory("app","Firebase",i),o=((n={})["@firebase/app"]="fire-core",n["@firebase/analytics"]="fire-analytics",n["@firebase/auth"]="fire-auth",n["@firebase/database"]="fire-rtdb",n["@firebase/functions"]="fire-fn",n["@firebase/installations"]="fire-iid",n["@firebase/messaging"]="fire-fcm",n["@firebase/performance"]="fire-perf",n["@firebase/remote-config"]="fire-rc",n["@firebase/storage"]="fire-gcs",n["@firebase/firestore"]="fire-fst",n["fire-js"]="fire-js",n["firebase-wrapper"]="fire-js-all",n),a=new index_esm.Logger("@firebase/app"),l=function(){function t(t,e,r){var n,i,s=this;this.firebase_=r,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=index_cjs.deepCopy(t),this.container=new index_cjs$1.ComponentContainer(e.name),this._addComponent(new index_cjs$1.Component("app",(function(){return s}),"PUBLIC"));try{for(var o=tslib_es6.__values(this.firebase_.INTERNAL.components.values()),a=o.next();!a.done;a=o.next()){var l=a.value;this._addComponent(l)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){a.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw s.create("app-deleted",{appName:this.name_})},t}();l.prototype.name&&l.prototype.options||l.prototype.delete||console.log("dc");var h=
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function t(){var e=
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function(t){var e={},r=new Map,n={__esModule:!0,initializeApp:function(r,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw s.create("bad-app-name",{appName:String(a)});if(index_cjs.contains(e,a))throw s.create("duplicate-app",{appName:a});var l=new t(r,o,n);return e[a]=l,l},app:i,registerVersion:function(t,e,r){var n,i=null!==(n=o[t])&&void 0!==n?n:t;r&&(i+="-"+r);var s=i.match(/\s|\//),h=e.match(/\s|\//);if(s||h){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&h&&u.push("and"),h&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void a.warn(u.join(" "))}l(new index_cjs$1.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:index_esm.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw s.create("invalid-log-argument",{appName:name});index_esm.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.18.0",INTERNAL:{registerComponent:l,removeApp:function(t){delete e[t]},components:r,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!index_cjs.contains(e,t))throw s.create("no-app",{appName:t});return e[t]}function l(o){var l,h,u=o.name;if(r.has(u))return a.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?n[u]:null;if(r.set(u,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw s.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&index_cjs.deepExtend(c,o.serviceProps),n[u]=c,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this._getService.bind(this,u);return r.apply(this,o.multipleInstances?t:[])}}try{for(var f=tslib_es6.__values(Object.keys(e)),p=f.next();!p.done;p=f.next()){var d=p.value;e[d]._addComponent(o)}}catch(t){l={error:t}}finally{try{p&&!p.done&&(h=f.return)&&h.call(f)}finally{if(l)throw l.error}}return"PUBLIC"===o.type?n[u]:null}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,n}(l);return e.INTERNAL=tslib_es6.__assign(tslib_es6.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){index_cjs.deepExtend(e,t)},createSubscribe:index_cjs.createSubscribe,ErrorFactory:index_cjs.ErrorFactory,deepExtend:index_cjs.deepExtend}),e}(),u=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
if(index_cjs.isBrowser()&&void 0!==self.firebase){a.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var c=self.firebase.SDK_VERSION;c&&c.indexOf("LITE")>=0&&a.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var f=h.initializeApp;h.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return index_cjs.isNode()&&a.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),f.apply(void 0,t)};var p=h;!function(t,e){t.INTERNAL.registerComponent(new index_cjs$1.Component("platform-logger",(function(t){return new u(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.10",e),t.registerVersion("fire-js","")}(p),e.default=p,e.firebase=p})),firebase=unwrapExports(index_cjs$2),index_cjs_1$2=index_cjs$2.firebase;function _interopDefault$1(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var firebase$1=_interopDefault$1(index_cjs$2),name$1="firebase",version$1="7.19.0";
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
firebase$1.registerVersion(name$1,version$1,"app");var index_cjs$3=firebase$1,firebase$2=Object.freeze(Object.assign(Object.create(null),index_cjs$3,{default:index_cjs$3,__moduleExports:index_cjs$3})),__assign$3=function(){return(__assign$3=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function __awaiter$3(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))}function __generator$3(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var __assign$4=function(){return(__assign$4=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function __awaiter$4(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))}function __generator$4(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function __values$3(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$3(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function __spread$3(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read$3(arguments[e]));return t}var idb=createCommonjsModule((function(t,e){!function(t){function e(t){return Array.prototype.slice.call(t)}function r(t){return new Promise((function(e,r){t.onsuccess=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function n(t,e,n){var i,s=new Promise((function(s,o){r(i=t[e].apply(t,n)).then(s,o)}));return s.request=i,s}function i(t,e,r){var i=n(t,e,r);return i.then((function(t){if(t)return new u(t,i.request)}))}function s(t,e,r){r.forEach((function(r){Object.defineProperty(t.prototype,r,{get:function(){return this[e][r]},set:function(t){this[e][r]=t}})}))}function o(t,e,r,i){i.forEach((function(i){i in r.prototype&&(t.prototype[i]=function(){return n(this[e],i,arguments)})}))}function a(t,e,r,n){n.forEach((function(n){n in r.prototype&&(t.prototype[n]=function(){return this[e][n].apply(this[e],arguments)})}))}function l(t,e,r,n){n.forEach((function(n){n in r.prototype&&(t.prototype[n]=function(){return i(this[e],n,arguments)})}))}function h(t){this._index=t}function u(t,e){this._cursor=t,this._request=e}function c(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,r){t.oncomplete=function(){e()},t.onerror=function(){r(t.error)},t.onabort=function(){r(t.error)}}))}function p(t,e,r){this._db=t,this.oldVersion=e,this.transaction=new f(r)}function d(t){this._db=t}s(h,"_index",["name","keyPath","multiEntry","unique"]),o(h,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),l(h,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(u,"_cursor",["direction","key","primaryKey","value"]),o(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(u.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),r(e._request).then((function(t){if(t)return new u(t,e._request)}))}))})})),c.prototype.createIndex=function(){return new h(this._store.createIndex.apply(this._store,arguments))},c.prototype.index=function(){return new h(this._store.index.apply(this._store,arguments))},s(c,"_store",["name","keyPath","indexNames","autoIncrement"]),o(c,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),l(c,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(c,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new c(this._tx.objectStore.apply(this._tx,arguments))},s(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new c(this._db.createObjectStore.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},s(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[c,h].forEach((function(r){t in r.prototype&&(r.prototype[t.replace("open","iterate")]=function(){var r=e(arguments),n=r[r.length-1],i=this._store||this._index,s=i[t].apply(i,r.slice(0,-1));s.onsuccess=function(){n(s.result)}})}))})),[h,c].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var r=this,n=[];return new Promise((function(i){r.iterateCursor(t,(function(t){t?(n.push(t.value),void 0===e||n.length!=e?t.continue():i(n)):i(n)}))}))})})),t.openDb=function(t,e,r){var i=n(indexedDB,"open",[t,e]),s=i.request;return s&&(s.onupgradeneeded=function(t){r&&r(new p(s.result,t.oldVersion,s.transaction))}),i.then((function(t){return new d(t)}))},t.deleteDb=function(t){return n(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)})),idb$1=unwrapExports(idb),name$2="@firebase/installations",version$2="0.4.16",PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION="w:"+version$2,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=36e5,SERVICE="installations",SERVICE_NAME="Installations",_a$1,ERROR_DESCRIPTION_MAP=(_a$1={},_a$1["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',_a$1["not-registered"]="Firebase Installation is not registered.",_a$1["installation-not-found"]="Firebase Installation not found.",_a$1["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',_a$1["app-offline"]="Could not process request. Application offline.",_a$1["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",_a$1),ERROR_FACTORY=new index_cjs_3(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(t){return t instanceof index_cjs_4&&t.code.includes("request-failed")}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function getInstallationsEndpoint(t){var e=t.projectId;return INSTALLATIONS_API_URL+"/projects/"+e+"/installations"}function extractAuthTokenInfoFromResponse(t){return{token:t.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(t.expiresIn),creationTime:Date.now()}}function getErrorFromResponse(t,e){return __awaiter$4(this,void 0,void 0,(function(){var r,n;return __generator$4(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return r=i.sent(),n=r.error,[2,ERROR_FACTORY.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}}))}))}function getHeaders(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function getHeadersWithAuth(t,e){var r=e.refreshToken,n=getHeaders(t);return n.append("Authorization",getAuthorizationHeader(r)),n}function retryIfServerError(t){return __awaiter$4(this,void 0,void 0,(function(){var e;return __generator$4(this,(function(r){switch(r.label){case 0:return[4,t()];case 1:return(e=r.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function getExpiresInFromResponseExpiresIn(t){return Number(t.replace("s","000"))}function getAuthorizationHeader(t){return INTERNAL_AUTH_VERSION+" "+t}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function createInstallationRequest(t,e){var r=e.fid;return __awaiter$4(this,void 0,void 0,(function(){var e,n,i,s,o,a;return __generator$4(this,(function(l){switch(l.label){case 0:return e=getInstallationsEndpoint(t),n=getHeaders(t),i={fid:r,authVersion:INTERNAL_AUTH_VERSION,appId:t.appId,sdkVersion:PACKAGE_VERSION},s={method:"POST",headers:n,body:JSON.stringify(i)},[4,retryIfServerError((function(){return fetch(e,s)}))];case 1:return(o=l.sent()).ok?[4,o.json()]:[3,3];case 2:return a=l.sent(),[2,{fid:a.fid||r,registrationStatus:2,refreshToken:a.refreshToken,authToken:extractAuthTokenInfoFromResponse(a.authToken)}];case 3:return[4,getErrorFromResponse("Create Installation",o)];case 4:throw l.sent()}}))}))}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function sleep(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function bufferToBase64UrlSafe(t){return btoa(String.fromCharCode.apply(String,__spread$3(t))).replace(/\+/g,"-").replace(/\//g,"_")}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=encode(t);return VALID_FID_PATTERN.test(e)?e:INVALID_FID}catch(t){return INVALID_FID}}function encode(t){return bufferToBase64UrlSafe(t).substr(0,22)}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function getKey(t){return t.appName+"!"+t.appId}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var fidChangeCallbacks=new Map;function fidChanged(t,e){var r=getKey(t);callFidChangeCallbacks(r,e),broadcastFidChange(r,e)}function addCallback(t,e){getBroadcastChannel();var r=getKey(t),n=fidChangeCallbacks.get(r);n||(n=new Set,fidChangeCallbacks.set(r,n)),n.add(e)}function removeCallback(t,e){var r=getKey(t),n=fidChangeCallbacks.get(r);n&&(n.delete(e),0===n.size&&fidChangeCallbacks.delete(r),closeBroadcastChannel())}function callFidChangeCallbacks(t,e){var r,n,i=fidChangeCallbacks.get(t);if(i)try{for(var s=__values$3(i),o=s.next();!o.done;o=s.next()){(0,o.value)(e)}}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}function broadcastFidChange(t,e){var r=getBroadcastChannel();r&&r.postMessage({key:t,fid:e}),closeBroadcastChannel()}var broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&((broadcastChannel=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){callFidChangeCallbacks(t.data.key,t.data.fid)}),broadcastChannel}function closeBroadcastChannel(){0===fidChangeCallbacks.size&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var DATABASE_NAME="firebase-installations-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-installations-store",dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=idb$1.openDb(DATABASE_NAME,DATABASE_VERSION,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(OBJECT_STORE_NAME)}}))),dbPromise}function set$3(t,e){return __awaiter$4(this,void 0,void 0,(function(){var r,n,i,s,o;return __generator$4(this,(function(a){switch(a.label){case 0:return r=getKey(t),[4,getDbPromise()];case 1:return n=a.sent(),i=n.transaction(OBJECT_STORE_NAME,"readwrite"),[4,(s=i.objectStore(OBJECT_STORE_NAME)).get(r)];case 2:return o=a.sent(),[4,s.put(e,r)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),o&&o.fid===e.fid||fidChanged(t,e.fid),[2,e]}}))}))}function remove$1(t){return __awaiter$4(this,void 0,void 0,(function(){var e,r,n;return __generator$4(this,(function(i){switch(i.label){case 0:return e=getKey(t),[4,getDbPromise()];case 1:return r=i.sent(),[4,(n=r.transaction(OBJECT_STORE_NAME,"readwrite")).objectStore(OBJECT_STORE_NAME).delete(e)];case 2:return i.sent(),[4,n.complete];case 3:return i.sent(),[2]}}))}))}function update$1(t,e){return __awaiter$4(this,void 0,void 0,(function(){var r,n,i,s,o,a;return __generator$4(this,(function(l){switch(l.label){case 0:return r=getKey(t),[4,getDbPromise()];case 1:return n=l.sent(),i=n.transaction(OBJECT_STORE_NAME,"readwrite"),[4,(s=i.objectStore(OBJECT_STORE_NAME)).get(r)];case 2:return o=l.sent(),void 0!==(a=e(o))?[3,4]:[4,s.delete(r)];case 3:return l.sent(),[3,6];case 4:return[4,s.put(a,r)];case 5:l.sent(),l.label=6;case 6:return[4,i.complete];case 7:return l.sent(),!a||o&&o.fid===a.fid||fidChanged(t,a.fid),[2,a]}}))}))}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function getInstallationEntry(t){return __awaiter$4(this,void 0,void 0,(function(){var e,r,n;return __generator$4(this,(function(i){switch(i.label){case 0:return[4,update$1(t,(function(r){var n=updateOrCreateInstallationEntry(r),i=triggerRegistrationIfNecessary(t,n);return e=i.registrationPromise,i.installationEntry}))];case 1:return(r=i.sent()).fid!==INVALID_FID?[3,3]:(n={},[4,e]);case 2:return[2,(n.installationEntry=i.sent(),n)];case 3:return[2,{installationEntry:r,registrationPromise:e}]}}))}))}function updateOrCreateInstallationEntry(t){return clearTimedOutRequest(t||{fid:generateFid(),registrationStatus:0})}function triggerRegistrationIfNecessary(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ERROR_FACTORY.create("app-offline"))};var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:r,registrationPromise:registerInstallation(t,r)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:waitUntilFidRegistration(t)}:{installationEntry:e}}function registerInstallation(t,e){return __awaiter$4(this,void 0,void 0,(function(){var r,n;return __generator$4(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,createInstallationRequest(t,e)];case 1:return r=i.sent(),[2,set$3(t,r)];case 2:return isServerError(n=i.sent())&&409===n.serverCode?[4,remove$1(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,set$3(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw n;case 7:return[2]}}))}))}function waitUntilFidRegistration(t){return __awaiter$4(this,void 0,void 0,(function(){var e,r,n,i;return __generator$4(this,(function(s){switch(s.label){case 0:return[4,updateInstallationRequest(t)];case 1:e=s.sent(),s.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,sleep(100)];case 3:return s.sent(),[4,updateInstallationRequest(t)];case 4:return e=s.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,getInstallationEntry(t)];case 6:return r=s.sent(),n=r.installationEntry,(i=r.registrationPromise)?[2,i]:[2,n];case 7:return[2,e]}}))}))}function updateInstallationRequest(t){return update$1(t,(function(t){if(!t)throw ERROR_FACTORY.create("installation-not-found");return clearTimedOutRequest(t)}))}function clearTimedOutRequest(t){return hasInstallationRequestTimedOut(t)?{fid:t.fid,registrationStatus:0}:t}function hasInstallationRequestTimedOut(t){return 1===t.registrationStatus&&t.registrationTime+PENDING_TIMEOUT_MS<Date.now()}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function generateAuthTokenRequest(t,e){var r=t.appConfig,n=t.platformLoggerProvider;return __awaiter$4(this,void 0,void 0,(function(){var t,i,s,o,a,l,h;return __generator$4(this,(function(u){switch(u.label){case 0:return t=getGenerateAuthTokenEndpoint(r,e),i=getHeadersWithAuth(r,e),(s=n.getImmediate({optional:!0}))&&i.append("x-firebase-client",s.getPlatformInfoString()),o={installation:{sdkVersion:PACKAGE_VERSION}},a={method:"POST",headers:i,body:JSON.stringify(o)},[4,retryIfServerError((function(){return fetch(t,a)}))];case 1:return(l=u.sent()).ok?[4,l.json()]:[3,3];case 2:return h=u.sent(),[2,extractAuthTokenInfoFromResponse(h)];case 3:return[4,getErrorFromResponse("Generate Auth Token",l)];case 4:throw u.sent()}}))}))}function getGenerateAuthTokenEndpoint(t,e){var r=e.fid;return getInstallationsEndpoint(t)+"/"+r+"/authTokens:generate"}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function refreshAuthToken(t,e){return void 0===e&&(e=!1),__awaiter$4(this,void 0,void 0,(function(){var r,n,i;return __generator$4(this,(function(s){switch(s.label){case 0:return[4,update$1(t.appConfig,(function(n){if(!isEntryRegistered(n))throw ERROR_FACTORY.create("not-registered");var i=n.authToken;if(!e&&isAuthTokenValid(i))return n;if(1===i.requestStatus)return r=waitUntilAuthTokenRequest(t,e),n;if(!navigator.onLine)throw ERROR_FACTORY.create("app-offline");var s=makeAuthTokenRequestInProgressEntry(n);return r=fetchAuthTokenFromServer(t,s),s}))];case 1:return n=s.sent(),r?[4,r]:[3,3];case 2:return i=s.sent(),[3,4];case 3:i=n.authToken,s.label=4;case 4:return[2,i]}}))}))}function waitUntilAuthTokenRequest(t,e){return __awaiter$4(this,void 0,void 0,(function(){var r,n;return __generator$4(this,(function(i){switch(i.label){case 0:return[4,updateAuthTokenRequest(t.appConfig)];case 1:r=i.sent(),i.label=2;case 2:return 1!==r.authToken.requestStatus?[3,5]:[4,sleep(100)];case 3:return i.sent(),[4,updateAuthTokenRequest(t.appConfig)];case 4:return r=i.sent(),[3,2];case 5:return 0===(n=r.authToken).requestStatus?[2,refreshAuthToken(t,e)]:[2,n]}}))}))}function updateAuthTokenRequest(t){return update$1(t,(function(t){if(!isEntryRegistered(t))throw ERROR_FACTORY.create("not-registered");return hasAuthTokenRequestTimedOut(t.authToken)?__assign$4(__assign$4({},t),{authToken:{requestStatus:0}}):t}))}function fetchAuthTokenFromServer(t,e){return __awaiter$4(this,void 0,void 0,(function(){var r,n,i;return __generator$4(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,8]),[4,generateAuthTokenRequest(t,e)];case 1:return r=s.sent(),i=__assign$4(__assign$4({},e),{authToken:r}),[4,set$3(t.appConfig,i)];case 2:return s.sent(),[2,r];case 3:return!isServerError(n=s.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,remove$1(t.appConfig)];case 4:return s.sent(),[3,7];case 5:return i=__assign$4(__assign$4({},e),{authToken:{requestStatus:0}}),[4,set$3(t.appConfig,i)];case 6:s.sent(),s.label=7;case 7:throw n;case 8:return[2]}}))}))}function isEntryRegistered(t){return void 0!==t&&2===t.registrationStatus}function isAuthTokenValid(t){return 2===t.requestStatus&&!isAuthTokenExpired(t)}function isAuthTokenExpired(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(t){var e={requestStatus:1,requestTime:Date.now()};return __assign$4(__assign$4({},t),{authToken:e})}function hasAuthTokenRequestTimedOut(t){return 1===t.requestStatus&&t.requestTime+PENDING_TIMEOUT_MS<Date.now()}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function getId(t){return __awaiter$4(this,void 0,void 0,(function(){var e,r,n;return __generator$4(this,(function(i){switch(i.label){case 0:return[4,getInstallationEntry(t.appConfig)];case 1:return e=i.sent(),r=e.installationEntry,(n=e.registrationPromise)?n.catch(console.error):refreshAuthToken(t).catch(console.error),[2,r.fid]}}))}))}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function getToken(t,e){return void 0===e&&(e=!1),__awaiter$4(this,void 0,void 0,(function(){return __generator$4(this,(function(r){switch(r.label){case 0:return[4,completeInstallationRegistration(t.appConfig)];case 1:return r.sent(),[4,refreshAuthToken(t,e)];case 2:return[2,r.sent().token]}}))}))}function completeInstallationRegistration(t){return __awaiter$4(this,void 0,void 0,(function(){var e;return __generator$4(this,(function(r){switch(r.label){case 0:return[4,getInstallationEntry(t)];case 1:return(e=r.sent().registrationPromise)?[4,e]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function deleteInstallationRequest(t,e){return __awaiter$4(this,void 0,void 0,(function(){var r,n,i,s;return __generator$4(this,(function(o){switch(o.label){case 0:return r=getDeleteEndpoint(t,e),n=getHeadersWithAuth(t,e),i={method:"DELETE",headers:n},[4,retryIfServerError((function(){return fetch(r,i)}))];case 1:return(s=o.sent()).ok?[3,3]:[4,getErrorFromResponse("Delete Installation",s)];case 2:throw o.sent();case 3:return[2]}}))}))}function getDeleteEndpoint(t,e){var r=e.fid;return getInstallationsEndpoint(t)+"/"+r}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function deleteInstallation(t){return __awaiter$4(this,void 0,void 0,(function(){var e,r;return __generator$4(this,(function(n){switch(n.label){case 0:return[4,update$1(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(r=n.sent()))return[3,6];if(1!==r.registrationStatus)return[3,2];throw ERROR_FACTORY.create("delete-pending-registration");case 2:if(2!==r.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw ERROR_FACTORY.create("app-offline");case 3:return[4,deleteInstallationRequest(e,r)];case 4:return n.sent(),[4,remove$1(e)];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function onIdChange(t,e){var r=t.appConfig;return addCallback(r,e),function(){removeCallback(r,e)}}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function extractAppConfig(t){var e,r;if(!t||!t.options)throw getMissingValueError("App Configuration");if(!t.name)throw getMissingValueError("App Name");try{for(var n=__values$3(["projectId","apiKey","appId"]),i=n.next();!i.done;i=n.next()){var s=i.value;if(!t.options[s])throw getMissingValueError(s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function getMissingValueError(t){return ERROR_FACTORY.create("missing-app-config-values",{valueName:t})}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function registerInstallations(t){t.INTERNAL.registerComponent(new index_cjs_1$1("installations",(function(t){var e=t.getProvider("app").getImmediate(),r={appConfig:extractAppConfig(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return getId(r)},getToken:function(t){return getToken(r,t)},delete:function(){return deleteInstallation(r)},onIdChange:function(t){return onIdChange(r,t)}}}),"PUBLIC")),t.registerVersion(name$2,version$2)}registerInstallations(firebase);
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var ANALYTICS_ID_FIELD="measurementId",GA_FID_KEY="firebase_id",ORIGIN_KEY="origin",GTAG_URL="https://www.googletagmanager.com/gtag/js",GtagCommand,EventName;
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function logEvent(t,e,r,n,i){var s=n||{};i&&i.global||(s=__assign$3(__assign$3({},n),{send_to:e})),t(GtagCommand.EVENT,r,s||{})}function setCurrentScreen(t,e,r,n){n&&n.global?t(GtagCommand.SET,{screen_name:r}):t(GtagCommand.CONFIG,e,{update:!0,screen_name:r})}function setUserId(t,e,r,n){n&&n.global?t(GtagCommand.SET,{user_id:r}):t(GtagCommand.CONFIG,e,{update:!0,user_id:r})}function setUserProperties(t,e,r,n){if(n&&n.global){for(var i={},s=0,o=Object.keys(r);s<o.length;s++){var a=o[s];i["user_properties."+a]=r[a]}t(GtagCommand.SET,i)}else t(GtagCommand.CONFIG,e,{update:!0,user_properties:r})}function setAnalyticsCollectionEnabled(t,e){window["ga-disable-"+t]=!e}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(GtagCommand||(GtagCommand={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(EventName||(EventName={}));var logger=new Logger("@firebase/analytics"),_a$2;
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function initializeGAId(t,e,r){return __awaiter$3(this,void 0,void 0,(function(){var n,i;return __generator$3(this,(function(s){switch(s.label){case 0:return[4,e.getId()];case 1:return n=s.sent(),r("js",new Date),r(GtagCommand.CONFIG,t.options[ANALYTICS_ID_FIELD],((i={})[GA_FID_KEY]=n,i[ORIGIN_KEY]="firebase",i.update=!0,i)),[2]}}))}))}function insertScriptTag(t){var e=document.createElement("script");e.src=GTAG_URL+"?l="+t,e.async=!0,document.head.appendChild(e)}function getOrCreateDataLayer(t){var e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function wrapGtag(t,e){return function(r,n,i){if(r===GtagCommand.EVENT){var s=[];if(i&&i.send_to){var o=i.send_to;Array.isArray(o)||(o=[o]);for(var a=0,l=o;a<l.length;a++){var h=l[a],u=e[h];if(!u){s=[];break}s.push(u)}}if(0===s.length)for(var c=0,f=Object.values(e);c<f.length;c++){var p=f[c];s.push(p)}Promise.all(s).then((function(){return t(GtagCommand.EVENT,n,i||{})})).catch((function(t){return logger.error(t)}))}else if(r===GtagCommand.CONFIG){(e[n]||Promise.resolve()).then((function(){t(GtagCommand.CONFIG,n,i)})).catch((function(t){return logger.error(t)}))}else t(GtagCommand.SET,n)}}function wrapOrCreateGtag(t,e,r){var n=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];window[e].push(arguments)};return window[r]&&"function"==typeof window[r]&&(n=window[r]),window[r]=wrapGtag(n,t),{gtagCore:n,wrappedGtag:window[r]}}function findGtagScriptOnPage(){for(var t=window.document.getElementsByTagName("script"),e=0,r=Object.values(t);e<r.length;e++){var n=r[e];if(n.src&&n.src.includes(GTAG_URL))return n}return null}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var ERRORS=(_a$2={},_a$2["no-ga-id"]='"'+ANALYTICS_ID_FIELD+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',_a$2["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",_a$2["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",_a$2["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",_a$2["indexedDB-unsupported"]="IndexedDB is not supported by current browswer",_a$2["invalid-indexedDB-context"]="Environment doesn't support IndexedDB: {$errorInfo}. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments",_a$2["cookies-not-enabled"]="Cookies are not enabled in this browser environment. Analytics requires cookies to be enabled.",_a$2["invalid-analytics-context"]="Firebase Analytics is not supported in browser extensions.",_a$2),ERROR_FACTORY$1=new index_cjs_3("analytics","Analytics",ERRORS),initializedIdPromisesMap={},dataLayerName="dataLayer",gtagName="gtag",gtagCoreFunction,wrappedGtagFunction,globalInitDone=!1;function settings(t){if(globalInitDone)throw ERROR_FACTORY$1.create("already-initialized");t.dataLayerName&&(dataLayerName=t.dataLayerName),t.gtagName&&(gtagName=t.gtagName)}function factory(t,e){if(index_cjs_22())throw ERROR_FACTORY$1.create("invalid-analytics-context");if(!index_cjs_6())throw ERROR_FACTORY$1.create("cookies-not-enabled");if(!index_cjs_26())throw ERROR_FACTORY$1.create("indexedDB-unsupported");index_cjs_47().catch((function(t){throw ERROR_FACTORY$1.create("invalid-indexedDB-context",{errorInfo:t})}));var r=t.options[ANALYTICS_ID_FIELD];if(!r)throw ERROR_FACTORY$1.create("no-ga-id");if(null!=initializedIdPromisesMap[r])throw ERROR_FACTORY$1.create("already-exists",{id:r});if(!globalInitDone){findGtagScriptOnPage()||insertScriptTag(dataLayerName),getOrCreateDataLayer(dataLayerName);var n=wrapOrCreateGtag(initializedIdPromisesMap,dataLayerName,gtagName),i=n.wrappedGtag,s=n.gtagCore;wrappedGtagFunction=i,gtagCoreFunction=s,globalInitDone=!0}return initializedIdPromisesMap[r]=initializeGAId(t,e,gtagCoreFunction),{app:t,logEvent:function(t,e,n){return logEvent(wrappedGtagFunction,r,t,e,n)},setCurrentScreen:function(t,e){return setCurrentScreen(wrappedGtagFunction,r,t,e)},setUserId:function(t,e){return setUserId(wrappedGtagFunction,r,t,e)},setUserProperties:function(t,e){return setUserProperties(wrappedGtagFunction,r,t,e)},setAnalyticsCollectionEnabled:function(t){return setAnalyticsCollectionEnabled(r,t)}}}var name$3="@firebase/analytics",version$3="0.4.2",ANALYTICS_TYPE="analytics";function registerAnalytics(t){t.INTERNAL.registerComponent(new index_cjs_1$1(ANALYTICS_TYPE,(function(t){return factory(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:settings,EventName:EventName,isSupported:isSupported})),t.INTERNAL.registerComponent(new index_cjs_1$1("analytics-internal",(function(t){try{return{logEvent:t.getProvider(ANALYTICS_TYPE).getImmediate().logEvent}}catch(t){throw ERROR_FACTORY$1.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion(name$3,version$3)}function isSupported(){return __awaiter$3(this,void 0,void 0,(function(){return __generator$3(this,(function(t){switch(t.label){case 0:if(index_cjs_22())return[2,!1];if(!index_cjs_6())return[2,!1];if(!index_cjs_26())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,index_cjs_47()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */registerAnalytics(firebase);var extendStatics$3=function(t,e){return(extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends$3(t,e){function r(){this.constructor=t}extendStatics$3(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var __assign$5=function(){return(__assign$5=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function __rest$3(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function __decorate$3(t,e,r,n){var i,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function __param$3(t,e){return function(r,n){e(r,n,t)}}function __metadata$3(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function __awaiter$5(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))}function __generator$5(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function __createBinding$3(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function __exportStar$3(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function __values$4(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$4(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function __spread$4(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read$4(arguments[e]));return t}function __spreadArrays$4(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function __await$3(t){return this instanceof __await$3?(this.v=t,this):new __await$3(t)}function __asyncGenerator$3(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){s.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{!function(t){t.value instanceof __await$3?Promise.resolve(t.value.v).then(l,h):u(s[0][2],t)}(i[t](e))}catch(t){u(s[0][3],t)}}function l(t){a("next",t)}function h(t){a("throw",t)}function u(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function __asyncDelegator$3(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:__await$3(t[n](e)),done:"return"===n}:i?i(e):e}:i}}function __asyncValues$3(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values$4?__values$4(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}function __makeTemplateObject$3(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function __importStar$3(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function __importDefault$3(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet$3(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function __classPrivateFieldSet$3(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var tslib_es6$3=Object.freeze({__proto__:null,__extends:__extends$3,get __assign(){return __assign$5},__rest:__rest$3,__decorate:__decorate$3,__param:__param$3,__metadata:__metadata$3,__awaiter:__awaiter$5,__generator:__generator$5,__createBinding:__createBinding$3,__exportStar:__exportStar$3,__values:__values$4,__read:__read$4,__spread:__spread$4,__spreadArrays:__spreadArrays$4,__await:__await$3,__asyncGenerator:__asyncGenerator$3,__asyncDelegator:__asyncDelegator$3,__asyncValues:__asyncValues$3,__makeTemplateObject:__makeTemplateObject$3,__importStar:__importStar$3,__importDefault:__importDefault$3,__classPrivateFieldGet:__classPrivateFieldGet$3,__classPrivateFieldSet:__classPrivateFieldSet$3}),extendStatics$4=function(t,e){return(extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function __extends$4(t,e){function r(){this.constructor=t}extendStatics$4(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function __values$5(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var commonjsGlobal$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},g,goog=goog||{},k=commonjsGlobal$1||self;function aa(){}function ba(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function ca(t){var e=ba(t);return"array"==e||"object"==e&&"number"==typeof t.length}function n(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function da(t){return Object.prototype.hasOwnProperty.call(t,ea)&&t[ea]||(t[ea]=++fa)}var ea="closure_uid_"+(1e9*Math.random()>>>0),fa=0;function ha(t,e,r){return t.call.apply(t.bind,arguments)}function ja(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function p(t,e,r){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ja).apply(null,arguments)}function ka(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var e=r.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var q=Date.now;function r(t,e){function r(){}r.prototype=e.prototype,t.S=e.prototype,t.prototype=new r,t.prototype.constructor=t}function u(){this.j=this.j,this.i=this.i}var la=0;u.prototype.j=!1,u.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0!=la))da(this)},u.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var na=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},oa=Array.prototype.forEach?function(t,e,r){Array.prototype.forEach.call(t,e,r)}:function(t,e,r){for(var n=t.length,i="string"==typeof t?t.split(""):t,s=0;s<n;s++)s in i&&e.call(r,i[s],s,t)};function pa(t){t:{for(var e=qa,r=t.length,n="string"==typeof t?t.split(""):t,i=0;i<r;i++)if(i in n&&e.call(void 0,n[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}function ra(t){return Array.prototype.concat.apply([],arguments)}function sa(t){var e=t.length;if(0<e){for(var r=Array(e),n=0;n<e;n++)r[n]=t[n];return r}return[]}function ta(t){return/^[\s\xa0]*$/.test(t)}var ua=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},w;function v(t,e){return-1!=t.indexOf(e)}function xa(t,e){return t<e?-1:t>e?1:0}t:{var ya=k.navigator;if(ya){var za=ya.userAgent;if(za){w=za;break t}}w=""}function Aa(t,e,r){for(var n in t)e.call(r,t[n],n,t)}function Ba(t){var e={};for(var r in t)e[r]=t[r];return e}var Ca="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Da(t,e){for(var r,n,i=1;i<arguments.length;i++){for(r in n=arguments[i])t[r]=n[r];for(var s=0;s<Ca.length;s++)r=Ca[s],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function Ea(t){return Ea[" "](t),t}function Fa(t,e){var r=Ga;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=e(t)}Ea[" "]=aa;var Ha=v(w,"Opera"),x=v(w,"Trident")||v(w,"MSIE"),Ia=v(w,"Edge"),Ja=Ia||x,Ka=v(w,"Gecko")&&!(v(w.toLowerCase(),"webkit")&&!v(w,"Edge"))&&!(v(w,"Trident")||v(w,"MSIE"))&&!v(w,"Edge"),La=v(w.toLowerCase(),"webkit")&&!v(w,"Edge"),Na,a;function Ma(){var t=k.document;return t?t.documentMode:void 0}t:{var Oa="",Pa=(a=w,Ka?/rv:([^\);]+)(\)|;)/.exec(a):Ia?/Edge\/([\d\.]+)/.exec(a):x?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):La?/WebKit\/(\S+)/.exec(a):Ha?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Pa&&(Oa=Pa?Pa[1]:""),x){var Qa=Ma();if(null!=Qa&&Qa>parseFloat(Oa)){Na=String(Qa);break t}}Na=Oa}var Ga={},Sa;function Ra(t){return Fa(t,(function(){for(var e=0,r=ua(String(Na)).split("."),n=ua(String(t)).split("."),i=Math.max(r.length,n.length),s=0;0==e&&s<i;s++){var o=r[s]||"",a=n[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=xa(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||xa(0==o[2].length,0==a[2].length)||xa(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(k.document&&x){var Ta=Ma();Sa=Ta||(parseInt(Na,10)||void 0)}else Sa=void 0;var Ua=Sa,Va=!x||9<=Number(Ua),Wa=x&&!Ra("9"),Xa=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{k.addEventListener("test",aa,e),k.removeEventListener("test",aa,e)}catch(t){}return t}();function y(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function A(t,e){if(y.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ka){t:{try{Ea(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==r?e=t.fromElement:"mouseout"==r&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ya[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}y.prototype.b=function(){this.defaultPrevented=!0},r(A,y);var Ya={2:"touch",3:"pen",4:"mouse"};A.prototype.b=function(){A.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Wa)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var C="closure_listenable_"+(1e6*Math.random()|0),Za=0;function $a(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.ca=i,this.key=++Za,this.Y=this.Z=!1}function ab(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function bb(t){this.src=t,this.a={},this.b=0}function db(t,e){var r=e.type;if(r in t.a){var n,i=t.a[r],s=na(i,e);(n=0<=s)&&Array.prototype.splice.call(i,s,1),n&&(ab(e),0==t.a[r].length&&(delete t.a[r],t.b--))}}function cb(t,e,r,n){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!r&&s.ca==n)return i}return-1}bb.prototype.add=function(t,e,r,n,i){var s=t.toString();(t=this.a[s])||(t=this.a[s]=[],this.b++);var o=cb(t,e,n,i);return-1<o?(e=t[o],r||(e.Z=!1)):((e=new $a(e,this.src,s,!!n,i)).Z=r,t.push(e)),e};var eb="closure_lm_"+(1e6*Math.random()|0),fb={};function hb(t,e,r,i,s){if(i&&i.once)return ib(t,e,r,i,s);if(Array.isArray(e)){for(var o=0;o<e.length;o++)hb(t,e[o],r,i,s);return null}return r=jb(r),t&&t[C]?t.va(e,r,n(i)?!!i.capture:!!i,s):kb(t,e,r,!1,i,s)}function kb(t,e,r,i,s,o){if(!e)throw Error("Invalid event type");var a=n(s)?!!s.capture:!!s;if(a&&!Va)return null;var l=lb(t);if(l||(t[eb]=l=new bb(t)),(r=l.add(e,r,i,a,o)).proxy)return r;if(i=mb(),r.proxy=i,i.src=t,i.listener=r,t.addEventListener)Xa||(s=a),void 0===s&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(nb(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return r}function mb(){var t=ob,e=Va?function(r){return t.call(e.src,e.listener,r)}:function(r){if(!(r=t.call(e.src,e.listener,r)))return r};return e}function ib(t,e,r,i,s){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ib(t,e[o],r,i,s);return null}return r=jb(r),t&&t[C]?t.wa(e,r,n(i)?!!i.capture:!!i,s):kb(t,e,r,!0,i,s)}function pb(t,e,r,i,s){if(Array.isArray(e))for(var o=0;o<e.length;o++)pb(t,e[o],r,i,s);else i=n(i)?!!i.capture:!!i,r=jb(r),t&&t[C]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(r=cb(o=t.a[e],r,i,s))&&(ab(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=lb(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cb(e,r,i,s)),(r=-1<t?e[t]:null)&&rb(r))}function rb(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[C])db(e.c,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(nb(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=lb(e))?(db(r,t),0==r.b&&(r.src=null,e[eb]=null)):ab(t)}}}function nb(t){return t in fb?fb[t]:fb[t]="on"+t}function sb(t,e){var r=t.listener,n=t.ca||t.src;return t.Z&&rb(t),r.call(n,e)}function ob(t,e){if(t.Y)return!0;if(!Va){if(!e)t:{e=["window","event"];for(var r=k,n=0;n<e.length;n++)if(null==(r=r[e[n]])){e=null;break t}e=r}return sb(t,e=new A(e,this))}return sb(t,new A(e,this))}function lb(t){return(t=t[eb])instanceof bb?t:null}var tb="__closure_events_fn_"+(1e9*Math.random()>>>0);function jb(t){return"function"==ba(t)?t:(t[tb]||(t[tb]=function(e){return t.handleEvent(e)}),t[tb])}function D(){u.call(this),this.c=new bb(this),this.J=this,this.C=null}function ub(t,e,r,n){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==r){var a=o.listener,l=o.ca||o.src;o.Z&&db(t.c,o),i=!1!==a.call(l,n)&&i}}return i&&!n.defaultPrevented}r(D,u),D.prototype[C]=!0,g=D.prototype,g.addEventListener=function(t,e,r,n){hb(this,t,e,r,n)},g.removeEventListener=function(t,e,r,n){pb(this,t,e,r,n)},g.dispatchEvent=function(t){var e,r=this.C;if(r)for(e=[];r;r=r.C)e.push(r);r=this.J;var n=t.type||t;if("string"==typeof t)t=new y(t,r);else if(t instanceof y)t.target=t.target||r;else{var i=t;Da(t=new y(n,r),i)}if(i=!0,e)for(var s=e.length-1;0<=s;s--){var o=t.a=e[s];i=ub(o,n,!0,t)&&i}if(i=ub(o=t.a=r,n,!0,t)&&i,i=ub(o,n,!1,t)&&i,e)for(s=0;s<e.length;s++)i=ub(o=t.a=e[s],n,!1,t)&&i;return i},g.G=function(){if(D.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var r=e.a[t],n=0;n<r.length;n++)ab(r[n]);delete e.a[t],e.b--}}this.C=null},g.va=function(t,e,r,n){return this.c.add(String(t),e,!1,r,n)},g.wa=function(t,e,r,n){return this.c.add(String(t),e,!0,r,n)};var vb=k.JSON.stringify;function wb(){this.b=this.a=null}var yb=new(function(){function t(t,e,r){this.f=r,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new xb}),(function(t){t.reset()}),100),Db;function zb(){var t=Ab,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function xb(){this.next=this.b=this.a=null}function Bb(t){k.setTimeout((function(){throw t}),0)}function Cb(t,e){Db||Eb(),Fb||(Db(),Fb=!0),Ab.add(t,e)}function Eb(){var t=k.Promise.resolve(void 0);Db=function(){t.then(Gb)}}wb.prototype.add=function(t,e){var r=yb.get();r.set(t,e),this.b?this.b.next=r:this.a=r,this.b=r},xb.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},xb.prototype.reset=function(){this.next=this.b=this.a=null};var Fb=!1,Ab=new wb;function Gb(){for(var t;t=zb();){try{t.a.call(t.b)}catch(t){Bb(t)}var e=yb;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Fb=!1}function Hb(t,e){D.call(this),this.b=t||1,this.a=e||k,this.f=p(this.Ya,this),this.g=q()}function Ib(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Jb(t,e,r){if("function"==ba(t))r&&(t=p(t,r));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=p(t.handleEvent,t)}return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function Kb(t){t.a=Jb((function(){t.a=null,t.c&&(t.c=!1,Kb(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}r(Hb,D),g=Hb.prototype,g.aa=!1,g.M=null,g.Ya=function(){if(this.aa){var t=q()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Ib(this),this.start()))}},g.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=q())},g.G=function(){Hb.S.G.call(this),Ib(this),delete this.a};var Lb=function(t){function e(e,r,n){var i=t.call(this)||this;return i.g=null!=n?e.bind(n):e,i.h=r,i.b=null,i.c=!1,i.a=null,i}return __extends$4(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Kb(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(k.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(u);function E(t){u.call(this),this.b=t,this.a={}}r(E,u);var Mb=[];function Nb(t,e,r,n){Array.isArray(r)||(r&&(Mb[0]=r.toString()),r=Mb);for(var i=0;i<r.length;i++){var s=hb(e,r[i],n||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Ob(t){Aa(t.a,(function(t,e){this.a.hasOwnProperty(e)&&rb(t)}),t),t.a={}}function Pb(){this.a=!0}function Qb(t,e,r,n,i,s){t.info((function(){if(t.a)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var u=h[0];h=h[1];var c=u.split("_");o=2<=c.length&&"type"==c[1]?o+(u+"=")+h+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+"\n"+r+"\n"+o}))}function Rb(t,e,r,n,i,s,o){t.info((function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+"\n"+r+"\n"+s+" "+o}))}function F(t,e,r,n){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+Sb(t,r)+(n?" "+n:"")}))}function Tb(t,e){t.info((function(){return"TIMEOUT: "+e}))}function Sb(t,e){if(!t.a)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return vb(r)}catch(t){return e}}E.prototype.G=function(){E.S.G.call(this),Ob(this)},E.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pb.prototype.info=function(){};var Ub=null;function Vb(){return Ub=Ub||new D}function Wb(t){y.call(this,"serverreachability",t)}function G(t){var e=Vb();e.dispatchEvent(new Wb(e,t))}function Xb(t){y.call(this,"statevent",t)}function H(t){var e=Vb();e.dispatchEvent(new Xb(e,t))}function Yb(t){y.call(this,"timingevent",t)}function I(t,e){if("function"!=ba(t))throw Error("Fn must not be null and must be a function");return k.setTimeout((function(){t()}),e)}r(Wb,y),r(Xb,y),r(Yb,y);var Zb={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},$b={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function ac(){}function bc(t){var e;return(e=t.a)||(e=t.a={}),e}function cc(){}ac.prototype.a=null;var J={OPEN:"a",$a:"b",Ea:"c",jb:"d"},fc;function dc(){y.call(this,"d")}function ec(){y.call(this,"c")}function gc(){}function K(t,e,r,n){this.g=t,this.c=e,this.f=r,this.T=n||1,this.J=new E(this),this.P=hc,t=Ja?125:void 0,this.R=new Hb(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}r(dc,y),r(ec,y),r(gc,ac),fc=new gc;var hc=45e3,ic={},jc={};function kc(t,e,r){t.H=1,t.i=lc(L(e)),t.j=r,t.I=!0,mc(t,null)}function mc(t,e){t.u=q(),M(t),t.l=L(t.i);var r=t.l,n=t.T;Array.isArray(n)||(n=[String(n)]),nc(r.b,"t",n),t.D=0,t.a=oc(t.g,t.g.C?e:null),0<t.O&&(t.F=new Lb(p(t.Ca,t,t.a),t.O)),Nb(t.J,t.a,"readystatechange",t.Wa),e=t.B?Ba(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),G(1),Qb(t.c,t.m,t.l,t.f,t.T,t.j)}function tc(t,e,r){for(var n=!0;!t.A&&t.D<r.length;){var i=vc(t,r);if(i==jc){4==e&&(t.h=4,H(14),n=!1),F(t.c,t.f,null,"[Incomplete Response]");break}if(i==ic){t.h=4,H(15),F(t.c,t.f,r,"[Invalid Chunk]"),n=!1;break}F(t.c,t.f,i,null),qc(t,i)}4==e&&0==r.length&&(t.h=1,H(16),n=!1),t.b=t.b&&n,n?0<r.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+r.length),xc(e),e.F=!0)):(F(t.c,t.f,r,"[Invalid Chunked Response]"),O(t),rc(t))}function vc(t,e){var r=t.D,n=e.indexOf("\n",r);return-1==n?jc:(r=Number(e.substring(r,n)),isNaN(r)?ic:(n+=1)+r>e.length?jc:(e=e.substr(n,r),t.D=n+r,e))}function M(t){t.U=q()+t.P,yc(t,t.P)}function yc(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=I(p(t.Ua,t),e)}function pc(t){t.o&&(k.clearTimeout(t.o),t.o=null)}function rc(t){0==t.g.v||t.A||uc(t.g,t)}function O(t){pc(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ib(t.R),Ob(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function qc(t,e){try{var r=t.g;if(0!=r.v&&(r.a==t||zc(r.b,t)))if(r.I=t.N,!t.C&&zc(r.b,t)&&3==r.v){try{var n=r.ka.a.parse(e)}catch(t){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0]){t:if(!r.j){if(r.a){if(!(r.a.u+3e3<t.u))break t;Ac(r),Bc(r)}Cc(r),H(18)}}else r.oa=i[1],0<r.oa-r.P&&37500>i[2]&&r.H&&0==r.o&&!r.m&&(r.m=I(p(r.Ra,r),6e3));if(1>=Dc(r.b)&&r.ea){try{r.ea()}catch(t){}r.ea=void 0}}else P(r,11)}else if((t.C||r.a==t)&&Ac(r),!ta(e))for(e=n=r.ka.a.parse(e),n=0;n<e.length;n++)if(i=e[n],r.P=i[0],i=i[1],2==r.v)if("c"==i[0]){r.J=i[1],r.ga=i[2];var s=i[3];null!=s&&(r.ha=s,r.c.info("VER="+r.ha));var o=i[4];null!=o&&(r.pa=o,r.c.info("SVER="+r.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var l=1.5*a;r.D=l,r.c.info("backChannelRequestTimeoutMs_="+l)}l=r;var h=t.a;if(h){var u=h.a?h.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var c=l.b;!c.a&&(v(u,"spdy")||v(u,"quic")||v(u,"h2"))&&(c.f=c.g,c.a=new Set,c.b&&(Ec(c,c.b),c.b=null))}if(l.A){var f=h.a?h.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(l.na=f,Q(l.B,l.A,f))}}r.v=3,r.f&&r.f.ta(),r.V&&(r.N=q()-t.u,r.c.info("Handshake RTT: "+r.N+"ms"));var d=t;if((l=r).la=Fc(l,l.C?l.ga:null,l.fa),d.C){Gc(l.b,d);var m=d,y=l.D;y&&m.setTimeout(y),m.o&&(pc(m),M(m)),l.a=d}else Hc(l);0<r.g.length&&Ic(r)}else"stop"!=i[0]&&"close"!=i[0]||P(r,7);else 3==r.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?P(r,7):Jc(r):"noop"!=i[0]&&r.f&&r.f.sa(i),r.o=0);G(4)}catch(t){}}function Kc(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ca(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}for(n in e=[],r=0,t)e[r++]=t[n];return e}function Lc(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ca(t)||"string"==typeof t)oa(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var r=t.L();else if(t.K&&"function"==typeof t.K)r=void 0;else if(ca(t)||"string"==typeof t){r=[];for(var n=t.length,i=0;i<n;i++)r.push(i)}else for(i in r=[],n=0,t)r[n++]=i;i=(n=Kc(t)).length;for(var s=0;s<i;s++)e.call(void 0,n[s],r&&r[s],t)}}function R(t,e){this.b={},this.a=[],this.c=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var n=0;n<r;n+=2)this.set(arguments[n],arguments[n+1])}else if(t)if(t instanceof R)for(r=t.L(),n=0;n<r.length;n++)this.set(r[n],t.get(r[n]));else for(n in t)this.set(n,t[n])}function Mc(t){if(t.c!=t.a.length){for(var e=0,r=0;e<t.a.length;){var n=t.a[e];S(t.b,n)&&(t.a[r++]=n),e++}t.a.length=r}if(t.c!=t.a.length){var i={};for(r=e=0;e<t.a.length;)S(i,n=t.a[e])||(t.a[r++]=n,i[n]=1),e++;t.a.length=r}}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}g=K.prototype,g.setTimeout=function(t){this.P=t},g.Wa=function(t){t=t.target;var e=this.F;e&&3==N(t)?e.f():this.Ca(t)},g.Ca=function(t){try{if(t==this.a)t:{var e=N(this.a),r=this.a.ua(),n=this.a.X();if(!(3>e||3==e&&!Ja&&!this.a.$())){this.A||4!=e||7==r||G(8==r||0>=n?3:2),pc(this);var i=this.a.X();this.N=i;var s=this.a.$();if(this.b=200==i,Rb(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ta(o)){var l=o;break e}}l=null}if(!l){this.b=!1,this.h=3,H(12),O(this),rc(this);break t}F(this.c,this.f,l,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,qc(this,l)}this.I?(tc(this,e,s),Ja&&this.b&&3==e&&(Nb(this.J,this.R,"tick",this.Va),this.R.start())):(F(this.c,this.f,s,null),qc(this,s)),4==e&&O(this),this.b&&!this.A&&(4==e?uc(this.g,this):(this.b=!1,M(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.h=3,H(12)):(this.h=0,H(13)),O(this),rc(this)}}}catch(t){}},g.Va=function(){if(this.a){var t=N(this.a),e=this.a.$();this.D<e.length&&(pc(this),tc(this,t,e),this.b&&4!=t&&M(this))}},g.cancel=function(){this.A=!0,O(this)},g.Ua=function(){this.o=null;var t=q();0<=t-this.U?(Tb(this.c,this.l),2!=this.H&&(G(3),H(17)),O(this),this.h=2,rc(this)):yc(this,this.U-t)},g=R.prototype,g.K=function(){Mc(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},g.L=function(){return Mc(this),this.a.concat()},g.get=function(t,e){return S(this.b,t)?this.b[t]:e},g.set=function(t,e){S(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},g.forEach=function(t,e){for(var r=this.L(),n=0;n<r.length;n++){var i=r[n],s=this.get(i);t.call(e,s,i,this)}};var Nc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Oc(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var s=t[r].substring(0,n);i=t[r].substring(n+1)}else s=t[r];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function T(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof T){this.a=void 0!==e?e:t.a,Pc(this,t.f),this.j=t.j,Qc(this,t.c),Rc(this,t.h),this.g=t.g,e=t.b;var r=new U;r.c=e.c,e.a&&(r.a=new R(e.a),r.b=e.b),Sc(this,r),this.i=t.i}else t&&(r=String(t).match(Nc))?(this.a=!!e,Pc(this,r[1]||"",!0),this.j=Tc(r[2]||""),Qc(this,r[3]||"",!0),Rc(this,r[4]),this.g=Tc(r[5]||"",!0),Sc(this,r[6]||"",!0),this.i=Tc(r[7]||"")):(this.a=!!e,this.b=new U(null,this.a))}function L(t){return new T(t)}function Pc(t,e,r){t.f=r?Tc(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Qc(t,e,r){t.c=r?Tc(e,!0):e}function Rc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Sc(t,e,r){e instanceof U?(t.b=e,Zc(t.b,t.a)):(r||(e=Uc(e,$c)),t.b=new U(e,t.a))}function Q(t,e,r){t.b.set(e,r)}function lc(t){return Q(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^q()).toString(36)),t}function ad(t){return t instanceof T?L(t):new T(t,void 0)}function bd(t,e,r,n){var i=new T(null,void 0);return t&&Pc(i,t),e&&Qc(i,e),r&&Rc(i,r),n&&(i.g=n),i}function Tc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Uc(t,e,r){return"string"==typeof t?(t=encodeURI(t).replace(e,cd),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function cd(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}T.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Uc(e,Vc,!0),":");var r=this.c;return(r||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Uc(e,Vc,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.h)&&t.push(":",String(r))),(r=this.g)&&(this.c&&"/"!=r.charAt(0)&&t.push("/"),t.push(Uc(r,"/"==r.charAt(0)?Wc:Xc,!0))),(r=this.b.toString())&&t.push("?",r),(r=this.i)&&t.push("#",Uc(r,Yc)),t.join("")};var Vc=/[#\/\?@]/g,Xc=/[#\?:]/g,Wc=/[#\?]/g,$c=/[#\?@]/g,Yc=/#/g;function U(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function V(t){t.a||(t.a=new R,t.b=0,t.c&&Oc(t.c,(function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)})))}function dd(t,e){V(t),e=W(t,e),S(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,S((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Mc(t)))}function ed(t,e){return V(t),e=W(t,e),S(t.a.b,e)}function nc(t,e,r){dd(t,e),0<r.length&&(t.c=null,t.a.set(W(t,e),sa(r)),t.b+=r.length)}function W(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Zc(t,e){e&&!t.f&&(V(t),t.c=null,t.a.forEach((function(t,e){var r=e.toLowerCase();e!=r&&(dd(this,e),nc(this,r,t))}),t)),t.f=e}function fd(t,e){this.b=t,this.a=e}function gd(t){this.g=t||hd,k.PerformanceNavigationTiming?t=0<(t=k.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(k.ia&&k.ia.ya&&k.ia.ya()&&k.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}g=U.prototype,g.add=function(t,e){V(this),this.c=null,t=W(this,t);var r=this.a.get(t);return r||this.a.set(t,r=[]),r.push(e),this.b+=1,this},g.forEach=function(t,e){V(this),this.a.forEach((function(r,n){oa(r,(function(r){t.call(e,r,n,this)}),this)}),this)},g.L=function(){V(this);for(var t=this.a.K(),e=this.a.L(),r=[],n=0;n<e.length;n++)for(var i=t[n],s=0;s<i.length;s++)r.push(e[n]);return r},g.K=function(t){V(this);var e=[];if("string"==typeof t)ed(this,t)&&(e=ra(e,this.a.get(W(this,t))));else{t=this.a.K();for(var r=0;r<t.length;r++)e=ra(e,t[r])}return e},g.set=function(t,e){return V(this),this.c=null,ed(this,t=W(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},g.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),r=0;r<e.length;r++){var n=e[r],i=encodeURIComponent(String(n));n=this.K(n);for(var s=0;s<n.length;s++){var o=i;""!==n[s]&&(o+="="+encodeURIComponent(String(n[s]))),t.push(o)}}return this.c=t.join("&")};var hd=10;function id$1(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Dc(t){return t.b?1:t.a?t.a.size:0}function zc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ec(t,e){t.a?t.a.add(e):t.b=e}function Gc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function jd(t){var e,r;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var n=t.c;try{for(var i=__values$5(t.a.values()),s=i.next();!s.done;s=i.next()){var o=s.value;n=n.concat(o.s)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}return sa(t.c)}function kd(){}function ld(){this.a=new kd}function md(t,e,r){var i=r||"";try{Lc(t,(function(t,r){var s=t;n(t)&&(s=vb(t)),e.push(i+r+"="+encodeURIComponent(s))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function nd(t,e){var r=new Pb;if(k.Image){var n=new Image;n.onload=ka(od,r,n,"TestLoadImage: loaded",!0,e),n.onerror=ka(od,r,n,"TestLoadImage: error",!1,e),n.onabort=ka(od,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=ka(od,r,n,"TestLoadImage: timeout",!1,e),k.setTimeout((function(){n.ontimeout&&n.ontimeout()}),1e4),n.src=t}else e(!1)}function od(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch(t){}}gd.prototype.cancel=function(){var t,e;if(this.c=jd(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var r=__values$5(this.a.values()),n=r.next();!n.done;n=r.next()){n.value.cancel()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.a.clear()}},kd.prototype.stringify=function(t){return k.JSON.stringify(t,void 0)},kd.prototype.parse=function(t){return k.JSON.parse(t,void 0)};var pd=k.JSON.parse;function X(t){D.call(this),this.headers=new R,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=qd,this.D=this.F=!1}r(X,D);var qd="",rd=/^https?$/i,sd=["POST","PUT"];function vd(t){return x&&Ra(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function qa(t){return"content-type"==t.toLowerCase()}function td(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,wd(t),xd(t)}function wd(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function yd(t){if(t.b&&void 0!==goog&&(!t.s[1]||4!=N(t)||2!=t.X()))if(t.l&&4==N(t))Jb(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==N(t)){t.b=!1;try{var e,r=t.X();t:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}if(!(e=n)){var i;if(i=0===r){var s=String(t.B).match(Nc)[1]||null;if(!s&&k.self&&k.self.location){var o=k.self.location.protocol;s=o.substr(0,o.length-1)}i=!rd.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<N(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.X()+"]",wd(t)}}finally{xd(t)}}}function xd(t,e){if(t.a){ud(t);var r=t.a,n=t.s[0]?aa:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{r.onreadystatechange=n}catch(t){}}}function ud(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(k.clearTimeout(t.m),t.m=null)}function N(t){return t.a?t.a.readyState:0}function zd(t){var e="";return Aa(t,(function(t,r){e+=r,e+=":",e+=t,e+="\r\n"})),e}function Ad(t,e,r){t:{for(n in r){var n=!1;break t}n=!0}n||(r=zd(r),"string"==typeof t?null!=r&&encodeURIComponent(String(r)):Q(t,e,r))}function Bd(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function Cd(t){this.pa=0,this.g=[],this.c=new Pb,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Bd("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Bd("baseRetryDelayMs",5e3,t),this.Ma=Bd("retryDelaySeedMs",1e4,t),this.Ja=Bd("forwardChannelMaxRetries",2,t),this.ma=Bd("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new gd(t&&t.concurrentRequestLimit),this.ka=new ld,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Jc(t){if(Dd(t),3==t.v){var e=t.R++,r=L(t.B);Q(r,"SID",t.J),Q(r,"RID",e),Q(r,"TYPE","terminate"),Ed(t,r),(e=new K(t,t.c,e,void 0)).H=2,e.i=lc(L(r)),r=!1,k.navigator&&k.navigator.sendBeacon&&(r=k.navigator.sendBeacon(e.i.toString(),"")),!r&&k.Image&&((new Image).src=e.i,r=!0),r||(e.a=oc(e.g,null),e.a.ba(e.i)),e.u=q(),M(e)}Fd(t)}function Bc(t){t.a&&(xc(t),t.a.cancel(),t.a=null)}function Dd(t){Bc(t),t.j&&(k.clearTimeout(t.j),t.j=null),Ac(t),t.b.cancel(),t.h&&("number"==typeof t.h&&k.clearTimeout(t.h),t.h=null)}function Gd(t,e){t.g.push(new fd(t.La++,e)),3==t.v&&Ic(t)}function Ic(t){id$1(t.b)||t.h||(t.h=!0,Cb(t.Ba,t),t.u=0)}function Hd(t,e){return!(Dc(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja))&&(t.h=I(p(t.Ba,t,e),Id(t,t.u)),t.u++,!0))}function Kd(t,e){var r;r=e?e.f:t.R++;var n=L(t.B);Q(n,"SID",t.J),Q(n,"RID",r),Q(n,"AID",t.P),Ed(t,n),t.i&&t.l&&Ad(n,t.i,t.l),r=new K(t,t.c,r,t.u+1),null===t.i&&(r.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Jd(t,r,1e3),r.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ec(t.b,r),kc(r,n,e)}function Ed(t,e){t.f&&Lc({},(function(t,r){Q(e,r,t)}))}function Jd(t,e,r){r=Math.min(t.g.length,r);var n=t.f?p(t.f.Ha,t.f,t):null;t:for(var i=t.g,s=-1;;){var o=["count="+r];-1==s?0<r?(s=i[0].b,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,l=0;l<r;l++){var h=i[l].b,u=i[l].a;if(0>(h-=s))s=Math.max(0,i[l].b-100),a=!1;else try{md(u,o,"req"+h+"_")}catch(t){n&&n(u)}}if(a){n=o.join("&");break t}}return t=t.g.splice(0,r),e.s=t,n}function Hc(t){t.a||t.j||(t.U=1,Cb(t.Aa,t),t.o=0)}function Cc(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=I(p(t.Aa,t),Id(t,t.o)),t.o++,!0)}function xc(t){null!=t.s&&(k.clearTimeout(t.s),t.s=null)}function Ld(t){t.a=new K(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=L(t.la);Q(e,"RID","rpc"),Q(e,"SID",t.J),Q(e,"CI",t.H?"0":"1"),Q(e,"AID",t.P),Ed(t,e),Q(e,"TYPE","xmlhttp"),t.i&&t.l&&Ad(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var r=t.a;t=t.ga,r.H=1,r.i=lc(L(e)),r.j=null,r.I=!0,mc(r,t)}function Ac(t){null!=t.m&&(k.clearTimeout(t.m),t.m=null)}function uc(t,e){var r=null;if(t.a==e){Ac(t),xc(t),t.a=null;var n=2}else{if(!zc(t.b,e))return;r=e.s,Gc(t.b,e),n=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==n){r=e.j?e.j.length:0,e=q()-e.u;var i=t.u;(n=Vb()).dispatchEvent(new Yb(n,r,e,i)),Ic(t)}else Hc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==n&&Hd(t,e)||2==n&&Cc(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),i){case 1:P(t,5);break;case 4:P(t,10);break;case 3:P(t,6);break;default:P(t,2)}}function Id(t,e){var r=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(r*=2),r*e}function P(t,e){if(t.c.info("Error code "+e),2==e){var r=null;t.f&&(r=null);var n=p(t.Xa,t);r||(r=new T("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||Pc(r,"https"),lc(r)),nd(r.toString(),n)}else H(2);t.v=0,t.f&&t.f.ra(e),Fd(t),Dd(t)}function Fd(t){t.v=0,t.I=-1,t.f&&(0==jd(t.b).length&&0==t.g.length||(t.b.c.length=0,sa(t.g),t.g.length=0),t.f.qa())}function Fc(t,e,r){var n=ad(r);if(""!=n.c)e&&Qc(n,e+"."+n.c),Rc(n,n.h);else{var i=k.location;n=bd(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,r)}return t.W&&Aa(t.W,(function(t,e){Q(n,e,t)})),e=t.A,r=t.na,e&&r&&Q(n,e,r),Q(n,"VER",t.ha),Ed(t,n),n}function oc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new X(t.Ka)).F=t.C,e}function Md(){}function Nd(){if(x&&!(10<=Number(Ua)))throw Error("Environmental error: no available transport.")}function Y(t,e){D.call(this),this.a=new Cd(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!ta(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ta(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Z(this)}function Od(t){dc.call(this);var e=t.__sm__;if(e){t:{for(var r in e){t=r;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Pd(){ec.call(this),this.status=1}function Z(t){this.a=t}g=X.prototype,g.ba=function(t,e,r,n){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?bc(this.H):bc(fc),this.a.onreadystatechange=p(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void td(this,t)}t=r||"";var i=new R(this.headers);n&&Lc(n,(function(t,e){i.set(e,t)})),n=pa(i.L()),r=k.FormData&&t instanceof k.FormData,!(0<=na(sd,e))||n||r||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ud(this),0<this.o&&((this.D=vd(this.a))?(this.a.timeout=this.o,this.a.ontimeout=p(this.xa,this)):this.m=Jb(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){td(this,t)}},g.xa=function(){void 0!==goog&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xd(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),xd(this,!0)),X.S.G.call(this)},g.za=function(){this.j||(this.A||this.l||this.g?yd(this):this.Ta())},g.Ta=function(){yd(this)},g.X=function(){try{return 2<N(this)?this.a.status:-1}catch(t){return-1}},g.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},g.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),pd(e)}},g.ua=function(){return this.h},g.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},g=Cd.prototype,g.ha=8,g.v=1,g.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,r=new K(this,this.c,t,void 0),n=this.l;if(this.O&&(n?Da(n=Ba(n),this.O):n=this.O),null===this.i&&(r.B=n),this.da)t:{for(var i=e=0;i<this.g.length;i++){var s=this.g[i];if(void 0===(s="__data__"in s.a&&"string"==typeof(s=s.a.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Jd(this,r,e),Q(i=L(this.B),"RID",t),Q(i,"CVER",22),this.A&&Q(i,"X-HTTP-Session-Id",this.A),Ed(this,i),this.i&&n&&Ad(i,this.i,n),Ec(this.b,r),this.Ga&&Q(i,"TYPE","init"),this.da?(Q(i,"$req",e),Q(i,"SID","null"),r.V=!0,kc(r,i,null)):kc(r,i,e),this.v=2}}else 3==this.v&&(t?Kd(this,t):0==this.g.length||id$1(this.b)||Kd(this))},g.Aa=function(){if(this.j=null,Ld(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=I(p(this.Sa,this),t)}},g.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Bc(this),Ld(this))},g.Ra=function(){null!=this.m&&(this.m=null,Bc(this),Cc(this),H(19))},g.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),H(2)):(this.c.info("Failed to ping google.com"),H(1))},g=Md.prototype,g.ta=function(){},g.sa=function(){},g.ra=function(){},g.qa=function(){},g.Ha=function(){},Nd.prototype.a=function(t,e){return new Y(t,e)},r(Y,D),g=Y.prototype,g.addEventListener=function(t,e,r,n){Y.S.addEventListener.call(this,t,e,r,n)},g.removeEventListener=function(t,e,r,n){Y.S.removeEventListener.call(this,t,e,r,n)},g.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,r=this.b||void 0;H(0),t.fa=e,t.W=r||{},t.H=t.T,t.B=Fc(t,null,t.fa),Ic(t)},g.close=function(){Jc(this.a)},g.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Gd(this.a,e)}else this.g?((e={}).__data__=vb(t),Gd(this.a,e)):Gd(this.a,t)},g.G=function(){this.a.f=null,delete this.f,Jc(this.a),delete this.a,Y.S.G.call(this)},r(Od,dc),r(Pd,ec),r(Z,Md),Z.prototype.ta=function(){this.a.dispatchEvent("a")},Z.prototype.sa=function(t){this.a.dispatchEvent(new Od(t))},Z.prototype.ra=function(t){this.a.dispatchEvent(new Pd(t))},Z.prototype.qa=function(){this.a.dispatchEvent("b")},Nd.prototype.createWebChannel=Nd.prototype.a,Y.prototype.send=Y.prototype.Pa,Y.prototype.open=Y.prototype.Oa,Y.prototype.close=Y.prototype.close,Zb.NO_ERROR=0,Zb.TIMEOUT=8,Zb.HTTP_ERROR=6,$b.COMPLETE="complete",cc.EventType=J,J.OPEN="a",J.CLOSE="b",J.ERROR="c",J.MESSAGE="d",D.prototype.listen=D.prototype.va,X.prototype.listenOnce=X.prototype.wa,X.prototype.getLastError=X.prototype.Qa,X.prototype.getLastErrorCode=X.prototype.ua,X.prototype.getStatus=X.prototype.X,X.prototype.getResponseJson=X.prototype.Na,X.prototype.getResponseText=X.prototype.$,X.prototype.send=X.prototype.ba;var esm={createWebChannelTransport:function(){return new Nd},ErrorCode:Zb,EventType:$b,WebChannel:cc,XhrIo:X},index_cjs$4=createCommonjsModule((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,n=tslib_es6$3,i=(r=index_cjs$2)&&"object"==typeof r&&"default"in r?r.default:r,s=index_esm,o=index_cjs,a=esm,l=index_cjs$1,h=new s.Logger("@firebase/firestore");function u(){return h.logLevel}function c(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(h.logLevel<=s.LogLevel.DEBUG){var i=e.map(d);h.debug.apply(h,n.__spreadArrays(["Firestore (7.19.0): "+t],i))}}function f(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(h.logLevel<=s.LogLevel.ERROR){var i=e.map(d);h.error.apply(h,n.__spreadArrays(["Firestore (7.19.0): "+t],i))}}function p(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(h.logLevel<=s.LogLevel.WARN){var i=e.map(d);h.warn.apply(h,n.__spreadArrays(["Firestore (7.19.0): "+t],i))}}function d(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var e}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function m(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.19.0) INTERNAL ASSERTION FAILED: "+t;throw f(e),new Error(e)}function y(t,e){t||m()}function v(t,e){return t}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function g(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(var n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var b=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var n=g(40),i=0;i<n.length;++i)r.length<20&&n[i]<e&&(r+=t.charAt(n[i]%t.length));return r},t}();function _(t,e){return t<e?-1:t>e?1:0}function w(t,e,r){return t.length===e.length&&t.every((function(t,n){return r(t,e[n])}))}function E(t){return t+"\0"}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var S=function(t,e,r,n,i){this.s=t,this.persistenceKey=e,this.host=r,this.ssl=n,this.forceLongPolling=i},T=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return _(this.projectId,t.projectId)||_(this.database,t.database)},t}();
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function x(t){var e=0;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function A(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function P(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var I=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),r=this.l[e];if(void 0!==r)for(var n=0,i=r;n<i.length;n++){var s=i[n],o=s[0],a=s[1];if(this.u(o,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var r=this.h(t),n=this.l[r];if(void 0!==n){for(var i=0;i<n.length;i++)if(this.u(n[i][0],t))return void(n[i]=[t,e]);n.push([t,e])}else this.l[r]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),r=this.l[e];if(void 0===r)return!1;for(var n=0;n<r.length;n++)if(this.u(r[n][0],t))return 1===r.length?delete this.l[e]:r.splice(n,1),!0;return!1},t.prototype.forEach=function(t){A(this.l,(function(e,r){for(var n=0,i=r;n<i.length;n++){var s=i[n],o=s[0],a=s[1];t(o,a)}}))},t.prototype._=function(){return P(this.l)},t}(),C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=function(t){function e(e,r){var n=this;return(n=t.call(this,r)||this).code=e,n.message=r,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}return n.__extends(e,t),e}(Error),k=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new D(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new D(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new D(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new D(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var r=Math.floor(e/1e3);return new t(r,1e6*(e-1e3*r))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?_(this.nanoseconds,t.nanoseconds):_(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),O=function(){function t(t){this.timestamp=t}return t.m=function(e){return new t(e)},t.min=function(){return new t(new k(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.I=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.A=function(){return this.timestamp},t}(),M=function(){function t(t,e,r){void 0===e?e=0:e>t.length&&m(),void 0===r?r=t.length-e:r>t.length-e&&m(),this.segments=t,this.offset=e,this.R=r}return Object.defineProperty(t.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var r=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){r.push(t)})):r.push(e),this.g(r)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.V=function(t){return t=void 0===t?1:t,this.g(this.segments,this.offset+t,this.length-t)},t.prototype.p=function(){return this.g(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])},t.prototype.N=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++){var i=t.get(n),s=e.get(n);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.g=function(t,r,n){return new e(t,r,n)},e.prototype.F=function(){return this.N().join("/")},e.prototype.toString=function(){return this.F()},e.k=function(t){if(t.indexOf("//")>=0)throw new D(C.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.$=function(){return new e([])},e}(M),F=/^[_a-zA-Z][_a-zA-Z0-9]*$/,N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.g=function(t,r,n){return new e(t,r,n)},e.O=function(t){return F.test(t)},e.prototype.F=function(){return this.N().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.O(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.F()},e.prototype.M=function(){return 1===this.length&&"__name__"===this.get(0)},e.L=function(){return new e(["__name__"])},e.q=function(t){for(var r=[],n="",i=0,s=function(){if(0===n.length)throw new D(C.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(n),n=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new D(C.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var l=t[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new D(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(n+=a,i++):(s(),i++)}if(s(),o)throw new D(C.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(r)},e.$=function(){return new e([])},e}(M),L=function(){function t(t){this.path=t}return t.B=function(e){return new t(R.k(e))},t.U=function(e){return new t(R.k(e).V(5))},t.prototype.W=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===R.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return R.P(t.path,e.path)},t.j=function(t){return t.length%2==0},t.K=function(e){return new t(new R(e.slice()))},t}();
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function $(t){return null==t}function V(t){return-0===t&&1/t==-1/0}function j(t){return"number"==typeof t&&Number.isInteger(t)&&!V(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var B=function(t,e,r,n,i,s,o){void 0===e&&(e=null),void 0===r&&(r=[]),void 0===n&&(n=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=o,this.G=null};function G(t,e,r,n,i,s,o){return void 0===e&&(e=null),void 0===r&&(r=[]),void 0===n&&(n=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new B(t,e,r,n,i,s,o)}function z(t){var e=v(t);if(null===e.G){var r=e.path.F();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((function(t){return function(t){return t.field.F()+t.op.toString()+Rt(t.value)}(t)})).join(","),r+="|ob:",r+=e.orderBy.map((function(t){return(e=t).field.F()+e.dir;var e})).join(","),$(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=Dr(e.startAt)),e.endAt&&(r+="|ub:",r+=Dr(e.endAt)),e.G=r}return e.G}function U(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var r=0;r<t.orderBy.length;r++)if(!Fr(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var n=0;n<t.filters.length;n++)if(i=t.filters[n],s=e.filters[n],i.op!==s.op||!i.field.isEqual(s.field)||!Dt(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Or(t.startAt,e.startAt)&&Or(t.endAt,e.endAt)}function q(t){return L.j(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var H=function(){function t(t){this.H=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",r=0;r<t.length;++r)e+=String.fromCharCode(t[r]);return e}(e))},t.prototype.toBase64=function(){return t=this.H,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.H)},t.prototype.Y=function(){return 2*this.H.length},t.prototype.o=function(t){return _(this.H,t.H)},t.prototype.isEqual=function(t){return this.H===t.H},t}();H.J=new H("");var W,Y,K=function(){function t(t,e,r,n,i,s,o){void 0===i&&(i=O.min()),void 0===s&&(s=O.min()),void 0===o&&(o=H.J),this.target=t,this.targetId=e,this.X=r,this.sequenceNumber=n,this.Z=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.tt=function(e){return new t(this.target,this.targetId,this.X,e,this.Z,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.et=function(e,r){return new t(this.target,this.targetId,this.X,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)},t.prototype.nt=function(e){return new t(this.target,this.targetId,this.X,this.sequenceNumber,this.Z,e,this.resumeToken)},t}(),X=function(t){this.count=t};
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Q(t){switch(t){case C.OK:return m();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0;default:return m()}}function J(t){if(void 0===t)return f("GRPC error has no .code"),C.UNKNOWN;switch(t){case W.OK:return C.OK;case W.CANCELLED:return C.CANCELLED;case W.UNKNOWN:return C.UNKNOWN;case W.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case W.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case W.INTERNAL:return C.INTERNAL;case W.UNAVAILABLE:return C.UNAVAILABLE;case W.UNAUTHENTICATED:return C.UNAUTHENTICATED;case W.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case W.NOT_FOUND:return C.NOT_FOUND;case W.ALREADY_EXISTS:return C.ALREADY_EXISTS;case W.PERMISSION_DENIED:return C.PERMISSION_DENIED;case W.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case W.ABORTED:return C.ABORTED;case W.OUT_OF_RANGE:return C.OUT_OF_RANGE;case W.UNIMPLEMENTED:return C.UNIMPLEMENTED;case W.DATA_LOSS:return C.DATA_LOSS;default:return m()}}(Y=W||(W={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var Z=function(){function t(t,e){this.P=t,this.root=e||et.EMPTY}return t.prototype.st=function(e,r){return new t(this.P,this.root.st(e,r,this.P).copy(null,null,et.it,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).copy(null,null,et.it,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var r=this.P(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,r=this.root;!r._();){var n=this.P(t,r.key);if(0===n)return e+r.left.size;n<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(){return this.root.ot()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,r){return t(e,r),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,r){return t.push(e+":"+r),!1})),"{"+t.join(", ")+"}"},t.prototype.at=function(t){return this.root.at(t)},t.prototype.ct=function(){return new tt(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new tt(this.root,t,this.P,!1)},t.prototype.lt=function(){return new tt(this.root,null,this.P,!0)},t.prototype._t=function(t){return new tt(this.root,t,this.P,!0)},t}(),tt=function(){function t(t,e,r,n){this.ft=n,this.dt=[];for(var i=1;!t._();)if(i=e?r(t.key,e):1,n&&(i*=-1),i<0)t=this.ft?t.left:t.right;else{if(0===i){this.dt.push(t);break}this.dt.push(t),t=this.ft?t.right:t.left}}return t.prototype.wt=function(){var t=this.dt.pop(),e={key:t.key,value:t.value};if(this.ft)for(t=t.left;!t._();)this.dt.push(t),t=t.right;else for(t=t.right;!t._();)this.dt.push(t),t=t.left;return e},t.prototype.Tt=function(){return this.dt.length>0},t.prototype.Et=function(){if(0===this.dt.length)return null;var t=this.dt[this.dt.length-1];return{key:t.key,value:t.value}},t}(),et=function(){function t(e,r,n,i,s){this.key=e,this.value=r,this.color=null!=n?n:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,r,n,i,s){return new t(null!=e?e:this.key,null!=r?r:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype._=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.at=function(t){return this.right.at(t)||t(this.key,this.value)||this.left.at(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.rt=function(){return this.min().key},t.prototype.ot=function(){return this.right._()?this.key:this.right.ot()},t.prototype.st=function(t,e,r){var n=this,i=r(t,n.key);return(n=i<0?n.copy(null,null,null,n.left.st(t,e,r),null):0===i?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.st(t,e,r))).It()},t.prototype.At=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.Rt()||e.left.left.Rt()||(e=e.Pt()),(e=e.copy(null,null,null,e.left.At(),null)).It()},t.prototype.remove=function(e,r){var n,i=this;if(r(e,i.key)<0)i.left._()||i.left.Rt()||i.left.left.Rt()||(i=i.Pt()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.Rt()&&(i=i.gt()),i.right._()||i.right.Rt()||i.right.left.Rt()||(i=i.Vt()),0===r(e,i.key)){if(i.right._())return t.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.At())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.It()},t.prototype.Rt=function(){return this.color},t.prototype.It=function(){var t=this;return t.right.Rt()&&!t.left.Rt()&&(t=t.yt()),t.left.Rt()&&t.left.left.Rt()&&(t=t.gt()),t.left.Rt()&&t.right.Rt()&&(t=t.pt()),t},t.prototype.Pt=function(){var t=this.pt();return t.right.left.Rt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.gt())).yt()).pt()),t},t.prototype.Vt=function(){var t=this.pt();return t.left.left.Rt()&&(t=(t=t.gt()).pt()),t},t.prototype.yt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.gt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.pt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.bt=function(){var t=this.vt();return Math.pow(2,t)<=this.size+1},t.prototype.vt=function(){if(this.Rt()&&this.left.Rt())throw m();if(this.right.Rt())throw m();var t=this.left.vt();if(t!==this.right.vt())throw m();return t+(this.Rt()?0:1)},t}();et.EMPTY=null,et.RED=!0,et.it=!1,et.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw m()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,r,n,i){return this},t.prototype.st=function(t,e,r){return new et(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.at=function(t){return!1},t.prototype.rt=function(){return null},t.prototype.ot=function(){return null},t.prototype.Rt=function(){return!1},t.prototype.bt=function(){return!0},t.prototype.vt=function(){return 0},t}());
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var rt=function(){function t(t){this.P=t,this.data=new Z(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.rt()},t.prototype.last=function(){return this.data.ot()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,r){return t(e),!1}))},t.prototype.St=function(t,e){for(var r=this.data.ut(t[0]);r.Tt();){var n=r.wt();if(this.P(n.key,t[1])>=0)return;e(n.key)}},t.prototype.Dt=function(t,e){var r;for(r=void 0!==e?this.data.ut(e):this.data.ct();r.Tt();)if(!t(r.wt().key))return},t.prototype.Ct=function(t){var e=this.data.ut(t);return e.Tt()?e.wt().key:null},t.prototype.ct=function(){return new nt(this.data.ct())},t.prototype.ut=function(t){return new nt(this.data.ut(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).st(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Nt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var r=this.data.ct(),n=e.data.ct();r.Tt();){var i=r.wt().key,s=n.wt().key;if(0!==this.P(i,s))return!1}return!0},t.prototype.N=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var r=new t(this.P);return r.data=e,r},t}(),nt=function(){function t(t){this.Ft=t}return t.prototype.wt=function(){return this.Ft.wt().key},t.prototype.Tt=function(){return this.Ft.Tt()},t}(),it=new Z(L.P);function st(){return it}function ot(){return st()}var at=new Z(L.P);function lt(){return at}var ht=new Z(L.P),ut=new rt(L.P);function ct(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=ut,n=0,i=t;n<i.length;n++){var s=i[n];r=r.add(s)}return r}var ft=new rt(_);function pt(){return ft}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var dt=function(){function t(t){this.P=t?function(e,r){return t(e,r)||L.P(e.key,r.key)}:function(t,e){return L.P(t.key,e.key)},this.kt=lt(),this.$t=new Z(this.P)}return t.xt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.kt.get(t)},t.prototype.get=function(t){return this.kt.get(t)},t.prototype.first=function(){return this.$t.rt()},t.prototype.last=function(){return this.$t.ot()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.kt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ht((function(e,r){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.st(t.key,t),e.$t.st(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var r=this.$t.ct(),n=e.$t.ct();r.Tt();){var i=r.wt().key,s=n.wt().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,r){var n=new t;return n.P=this.P,n.kt=e,n.$t=r,n},t}(),mt=function(){function t(){this.Ot=new Z(L.P)}return t.prototype.track=function(t){var e=t.doc.key,r=this.Ot.get(e);r?0!==t.type&&3===r.type?this.Ot=this.Ot.st(e,t):3===t.type&&1!==r.type?this.Ot=this.Ot.st(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.Ot=this.Ot.st(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.Ot=this.Ot.st(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.Ot=this.Ot.remove(e):1===t.type&&2===r.type?this.Ot=this.Ot.st(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.Ot=this.Ot.st(e,{type:2,doc:t.doc}):m():this.Ot=this.Ot.st(e,t)},t.prototype.Mt=function(){var t=[];return this.Ot.ht((function(e,r){t.push(r)})),t},t}(),yt=function(){function t(t,e,r,n,i,s,o,a){this.query=t,this.docs=e,this.Lt=r,this.docChanges=n,this.qt=i,this.fromCache=s,this.Bt=o,this.Ut=a}return t.Qt=function(e,r,n,i){var s=[];return r.forEach((function(t){s.push({type:0,doc:t})})),new t(e,r,dt.xt(r),s,n,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.qt._()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.qt.isEqual(t.qt)&&mr(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Lt.isEqual(t.Lt)))return!1;var e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++)if(e[n].type!==r[n].type||!e[n].doc.isEqual(r[n].doc))return!1;return!0},t}(),vt=function(){function t(t,e,r,n,i){this.Z=t,this.Wt=e,this.jt=r,this.Kt=n,this.Gt=i}return t.zt=function(e,r){var n=new Map;return n.set(e,gt.Ht(e,r)),new t(O.min(),n,pt(),st(),ct())},t}(),gt=function(){function t(t,e,r,n,i){this.resumeToken=t,this.Yt=e,this.Jt=r,this.Xt=n,this.Zt=i}return t.Ht=function(e,r){return new t(H.J,r,ct(),ct(),ct())},t}(),bt=function(t,e,r,n){this.te=t,this.removedTargetIds=e,this.key=r,this.ee=n},_t=function(t,e){this.targetId=t,this.ne=e},wt=function(t,e,r,n){void 0===r&&(r=H.J),void 0===n&&(n=null),this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=n},Et=function(){function t(){this.se=0,this.ie=xt(),this.re=H.J,this.oe=!1,this.he=!0}return Object.defineProperty(t.prototype,"Yt",{get:function(){return this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return 0!==this.se},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ce",{get:function(){return this.he},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){t.Y()>0&&(this.he=!0,this.re=t)},t.prototype.le=function(){var t=ct(),e=ct(),r=ct();return this.ie.forEach((function(n,i){switch(i){case 0:t=t.add(n);break;case 2:e=e.add(n);break;case 1:r=r.add(n);break;default:m()}})),new gt(this.re,this.oe,t,e,r)},t.prototype._e=function(){this.he=!1,this.ie=xt()},t.prototype.fe=function(t,e){this.he=!0,this.ie=this.ie.st(t,e)},t.prototype.de=function(t){this.he=!0,this.ie=this.ie.remove(t)},t.prototype.we=function(){this.se+=1},t.prototype.Te=function(){this.se-=1},t.prototype.Ee=function(){this.he=!0,this.oe=!0},t}(),St=function(){function t(t){this.me=t,this.Ie=new Map,this.Ae=st(),this.Re=Tt(),this.Pe=new rt(_)}return t.prototype.ge=function(t){for(var e=0,r=t.te;e<r.length;e++){var n=r[e];t.ee instanceof rr?this.Ve(n,t.ee):t.ee instanceof nr&&this.ye(n,t.key,t.ee)}for(var i=0,s=t.removedTargetIds;i<s.length;i++){var o=s[i];this.ye(o,t.key,t.ee)}},t.prototype.pe=function(t){var e=this;this.be(t,(function(r){var n=e.ve(r);switch(t.state){case 0:e.Se(r)&&n.ue(t.resumeToken);break;case 1:n.Te(),n.ae||n._e(),n.ue(t.resumeToken);break;case 2:n.Te(),n.ae||e.removeTarget(r);break;case 3:e.Se(r)&&(n.Ee(),n.ue(t.resumeToken));break;case 4:e.Se(r)&&(e.De(r),n.ue(t.resumeToken));break;default:m()}}))},t.prototype.be=function(t,e){var r=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,n){r.Se(n)&&e(n)}))},t.prototype.Ce=function(t){var e=t.targetId,r=t.ne.count,n=this.Ne(e);if(n){var i=n.target;if(q(i))if(0===r){var s=new L(i.path);this.ye(e,s,new nr(s,O.min()))}else y(1===r);else this.Fe(e)!==r&&(this.De(e),this.Pe=this.Pe.add(e))}},t.prototype.ke=function(t){var e=this,r=new Map;this.Ie.forEach((function(n,i){var s=e.Ne(i);if(s){if(n.Yt&&q(s.target)){var o=new L(s.target.path);null!==e.Ae.get(o)||e.$e(i,o)||e.ye(i,o,new nr(o,t))}n.ce&&(r.set(i,n.le()),n._e())}}));var n=ct();this.Re.forEach((function(t,r){var i=!0;r.Dt((function(t){var r=e.Ne(t);return!r||2===r.X||(i=!1,!1)})),i&&(n=n.add(t))}));var i=new vt(t,r,this.Pe,this.Ae,n);return this.Ae=st(),this.Re=Tt(),this.Pe=new rt(_),i},t.prototype.Ve=function(t,e){if(this.Se(t)){var r=this.$e(t,e.key)?2:0;this.ve(t).fe(e.key,r),this.Ae=this.Ae.st(e.key,e),this.Re=this.Re.st(e.key,this.xe(e.key).add(t))}},t.prototype.ye=function(t,e,r){if(this.Se(t)){var n=this.ve(t);this.$e(t,e)?n.fe(e,1):n.de(e),this.Re=this.Re.st(e,this.xe(e).delete(t)),r&&(this.Ae=this.Ae.st(e,r))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.ve(t).le();return this.me.Oe(t).size+e.Jt.size-e.Zt.size},t.prototype.we=function(t){this.ve(t).we()},t.prototype.ve=function(t){var e=this.Ie.get(t);return e||(e=new Et,this.Ie.set(t,e)),e},t.prototype.xe=function(t){var e=this.Re.get(t);return e||(e=new rt(_),this.Re=this.Re.st(t,e)),e},t.prototype.Se=function(t){var e=null!==this.Ne(t);return e||c("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ne=function(t){var e=this.Ie.get(t);return e&&e.ae?null:this.me.Me(t)},t.prototype.De=function(t){var e=this;this.Ie.set(t,new Et),this.me.Oe(t).forEach((function(r){e.ye(t,r,null)}))},t.prototype.$e=function(t,e){return this.me.Oe(t).has(e)},t}();
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Tt(){return new Z(L.P)}function xt(){return new Z(L.P)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function At(t){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Pt(t){var e=Ft(t.mapValue.fields.__local_write_time__.timestampValue);return new k(e.seconds,e.nanos)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var It=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ct(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?At(t)?4:10:m()}function Dt(t,e){var r=Ct(t);if(r!==Ct(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pt(t).isEqual(Pt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var r=Ft(t.timestampValue),n=Ft(e.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Lt(t.bytesValue).isEqual(Lt(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Nt(t.geoPointValue.latitude)===Nt(e.geoPointValue.latitude)&&Nt(t.geoPointValue.longitude)===Nt(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Nt(t.integerValue)===Nt(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var r=Nt(t.doubleValue),n=Nt(e.doubleValue);return r===n?V(r)===V(n):isNaN(r)&&isNaN(n)}return!1}(t,e);case 9:return w(t.arrayValue.values||[],e.arrayValue.values||[],Dt);case 10:return function(t,e){var r=t.mapValue.fields||{},n=e.mapValue.fields||{};if(x(r)!==x(n))return!1;for(var i in r)if(r.hasOwnProperty(i)&&(void 0===n[i]||!Dt(r[i],n[i])))return!1;return!0}(t,e);default:return m()}}function kt(t,e){return void 0!==(t.values||[]).find((function(t){return Dt(t,e)}))}function Ot(t,e){var r=Ct(t),n=Ct(e);if(r!==n)return _(r,n);switch(r){case 0:return 0;case 1:return _(t.booleanValue,e.booleanValue);case 2:return function(t,e){var r=Nt(t.integerValue||t.doubleValue),n=Nt(e.integerValue||e.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}(t,e);case 3:return Mt(t.timestampValue,e.timestampValue);case 4:return Mt(Pt(t),Pt(e));case 5:return _(t.stringValue,e.stringValue);case 6:return function(t,e){var r=Lt(t),n=Lt(e);return r.o(n)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var r=t.split("/"),n=e.split("/"),i=0;i<r.length&&i<n.length;i++){var s=_(r[i],n[i]);if(0!==s)return s}return _(r.length,n.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var r=_(Nt(t.latitude),Nt(e.latitude));return 0!==r?r:_(Nt(t.longitude),Nt(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var r=t.values||[],n=e.values||[],i=0;i<r.length&&i<n.length;++i){var s=Ot(r[i],n[i]);if(s)return s}return _(r.length,n.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var r=t.fields||{},n=Object.keys(r),i=e.fields||{},s=Object.keys(i);n.sort(),s.sort();for(var o=0;o<n.length&&o<s.length;++o){var a=_(n[o],s[o]);if(0!==a)return a;var l=Ot(r[n[o]],i[s[o]]);if(0!==l)return l}return _(n.length,s.length)}(t.mapValue,e.mapValue);default:throw m()}}function Mt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _(t,e);var r=Ft(t),n=Ft(e),i=_(r.seconds,n.seconds);return 0!==i?i:_(r.nanos,n.nanos)}function Rt(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Ft(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Lt(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,L.U(n).toString()):"geoPointValue"in e?"geo("+(r=e.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in e?function(e){for(var r="[",n=!0,i=0,s=e.values||[];i<s.length;i++){var o=s[i];n?n=!1:r+=",",r+=t(o)}return r+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var r="{",n=!0,i=0,s=Object.keys(e.fields||{}).sort();i<s.length;i++){var o=s[i];n?n=!1:r+=",",r+=o+":"+t(e.fields[o])}return r+"}"}(e.mapValue):m();var r,n}(t)}function Ft(t){if(y(!!t),"string"==typeof t){var e=0,r=It.exec(t);if(y(!!r),r[1]){var n=r[1];n=(n+"000000000").substr(0,9),e=Number(n)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Lt(t){return"string"==typeof t?H.fromBase64String(t):H.fromUint8Array(t)}function $t(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.F()}}function Vt(t){return!!t&&"integerValue"in t}function jt(t){return!!t&&"arrayValue"in t}function Bt(t){return!!t&&"nullValue"in t}function Gt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zt(t){return!!t&&"mapValue"in t}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var Ut={asc:"ASCENDING",desc:"DESCENDING"},qt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ht=function(t,e){this.s=t,this.Le=e};function Wt(t){return{integerValue:""+t}}function Yt(t,e){if(t.Le){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:V(e)?"-0":e}}function Kt(t,e){return j(e)?Wt(e):Yt(t,e)}function Xt(t,e){return t.Le?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qt(t,e){return t.Le?e.toBase64():e.toUint8Array()}function Jt(t,e){return Xt(t,e.A())}function Zt(t){return y(!!t),O.m(function(t){var e=Ft(t);return new k(e.seconds,e.nanos)}(t))}function te(t,e){return function(t){return new R(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).F()}function ee(t){var e=R.k(t);return y(_e(e)),e}function re(t,e){return te(t.s,e.path)}function ne(t,e){var r=ee(e);return y(r.get(1)===t.s.projectId),y(!r.get(3)&&!t.s.database||r.get(3)===t.s.database),new L(ae(r))}function ie(t,e){return te(t.s,e)}function se(t){var e=ee(t);return 4===e.length?R.$():ae(e)}function oe(t){return new R(["projects",t.s.projectId,"databases",t.s.database]).F()}function ae(t){return y(t.length>4&&"documents"===t.get(4)),t.V(5)}function le(t,e,r){return{name:re(t,e),fields:r.proto.mapValue.fields}}function he(t,e){var r;if(e instanceof Ue)r={update:le(t,e.key,e.value)};else if(e instanceof Xe)r={delete:re(t,e.key)};else if(e instanceof qe)r={update:le(t,e.key,e.data),updateMask:be(e.qe)};else if(e instanceof We)r={transform:{document:re(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var r=e.transform;if(r instanceof xe)return{fieldPath:e.field.F(),setToServerValue:"REQUEST_TIME"};if(r instanceof Ae)return{fieldPath:e.field.F(),appendMissingElements:{values:r.elements}};if(r instanceof Ie)return{fieldPath:e.field.F(),removeAllFromArray:{values:r.elements}};if(r instanceof De)return{fieldPath:e.field.F(),increment:r.Be};throw m()}(0,t)}))}};else{if(!(e instanceof Qe))return m();r={verify:re(t,e.key)}}return e.Qe.Ue||(r.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Jt(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:m()}(t,e.Qe)),r}function ue(t,e){var r=e.currentDocument?function(t){return void 0!==t.updateTime?Ne.updateTime(Zt(t.updateTime)):void 0!==t.exists?Ne.exists(t.exists):Ne.We()}(e.currentDocument):Ne.We();if(e.update){e.update.name;var n=ne(t,e.update.name),i=new Je({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Me(e.map((function(t){return N.q(t)})))}(e.updateMask);return new qe(n,i,s,r)}return new Ue(n,i,r)}if(e.delete){var o=ne(t,e.delete);return new Xe(o,r)}if(e.transform){var a=ne(t,e.transform.document),l=e.transform.fieldTransforms.map((function(e){return function(t,e){var r=null;if("setToServerValue"in e)y("REQUEST_TIME"===e.setToServerValue),r=new xe;else if("appendMissingElements"in e){var n=e.appendMissingElements.values||[];r=new Ae(n)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];r=new Ie(i)}else"increment"in e?r=new De(t,e.increment):m();var s=N.q(e.fieldPath);return new Re(s,r)}(t,e)}));return y(!0===r.exists),new We(a,l)}if(e.verify){var h=ne(t,e.verify);return new Qe(h,r)}return m()}function ce(t,e){return{documents:[ie(t,e.path)]}}function fe(t,e){var r={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(r.parent=ie(t,n),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=ie(t,n.p()),r.structuredQuery.from=[{collectionId:n.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Gt(t.value))return{unaryFilter:{field:me(t.field),op:"IS_NAN"}};if(Bt(t.value))return{unaryFilter:{field:me(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Gt(t.value))return{unaryFilter:{field:me(t.field),op:"IS_NOT_NAN"}};if(Bt(t.value))return{unaryFilter:{field:me(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:me(t.field),op:(e=t.op,qt[e]),value:t.value}};var e}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(r.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map((function(t){return{field:me((e=t).field),direction:(r=e.dir,Ut[r])};var e,r}))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);var o=function(t,e){return t.Le||$(e)?e:{value:e}}(t,e.limit);return null!==o&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=pe(e.startAt)),e.endAt&&(r.structuredQuery.endAt=pe(e.endAt)),r}function pe(t){return{before:t.before,values:t.position}}function de(t){var e=!!t.before,r=t.values||[];return new Cr(r,e)}function me(t){return{fieldPath:t.F()}}function ye(t){return N.q(t.fieldPath)}function ve(t){return _r.create(ye(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return m()}}(t.fieldFilter.op),t.fieldFilter.value)}function ge(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ye(t.unaryFilter.field);return _r.create(e,"==",{doubleValue:NaN});case"IS_NULL":var r=ye(t.unaryFilter.field);return _r.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=ye(t.unaryFilter.field);return _r.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ye(t.unaryFilter.field);return _r.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return m()}}function be(t){var e=[];return t.fields.forEach((function(t){return e.push(t.F())})),{fieldPaths:e}}function _e(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var we=function(){this.je=void 0};function Ee(t,e,r){return t instanceof xe?function(t,e){var r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(r.fields.__previous_value__=e),{mapValue:r}}(r,e):t instanceof Ae?Pe(t,e):t instanceof Ie?Ce(t,e):function(t,e){var r=Te(t,e),n=ke(r)+ke(t.Be);return Vt(r)&&Vt(t.Be)?Wt(n):Yt(t.serializer,n)}(t,e)}function Se(t,e,r){return t instanceof Ae?Pe(t,e):t instanceof Ie?Ce(t,e):r}function Te(t,e){return t instanceof De?Vt(r=e)||function(t){return!!t&&"doubleValue"in t}(r)?e:{integerValue:0}:null;var r}var xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e}(we),Ae=function(t){function e(e){var r=this;return(r=t.call(this)||this).elements=e,r}return n.__extends(e,t),e}(we);function Pe(t,e){for(var r=Oe(e),n=function(t){r.some((function(e){return Dt(e,t)}))||r.push(t)},i=0,s=t.elements;i<s.length;i++)n(s[i]);return{arrayValue:{values:r}}}var Ie=function(t){function e(e){var r=this;return(r=t.call(this)||this).elements=e,r}return n.__extends(e,t),e}(we);function Ce(t,e){for(var r=Oe(e),n=function(t){r=r.filter((function(e){return!Dt(e,t)}))},i=0,s=t.elements;i<s.length;i++)n(s[i]);return{arrayValue:{values:r}}}var De=function(t){function e(e,r){var n=this;return(n=t.call(this)||this).serializer=e,n.Be=r,n}return n.__extends(e,t),e}(we);function ke(t){return Nt(t.integerValue||t.doubleValue)}function Oe(t){return jt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var Me=function(){function t(t){this.fields=t,t.sort(N.P)}return t.prototype.Ke=function(t){for(var e=0,r=this.fields;e<r.length;e++)if(r[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return w(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Re=function(t,e){this.field=t,this.transform=e},Fe=function(t,e){this.version=t,this.transformResults=e},Ne=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.We=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ue",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Le(t,e){return void 0!==t.updateTime?e instanceof rr&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof rr}var $e=function(){};function Ve(t,e,r){return t instanceof Ue?function(t,e,r){return new rr(t.key,r.version,t.value,{hasCommittedMutations:!0})}(t,0,r):t instanceof qe?function(t,e,r){if(!Le(t.Qe,e))return new ir(t.key,r.version);var n=He(t,e);return new rr(t.key,r.version,n,{hasCommittedMutations:!0})}(t,e,r):t instanceof We?function(t,e,r){if(y(null!=r.transformResults),!Le(t.Qe,e))return new ir(t.key,r.version);var n=Ye(t,e),i=function(t,e,r){var n=[];y(t.length===r.length);for(var i=0;i<r.length;i++){var s=t[i],o=s.transform,a=null;e instanceof rr&&(a=e.field(s.field)),n.push(Se(o,a,r[i]))}return n}(t.fieldTransforms,e,r.transformResults),s=r.version,o=Ke(t,n.data(),i);return new rr(t.key,s,o,{hasCommittedMutations:!0})}(t,e,r):function(t,e,r){return new nr(t.key,r.version,{hasCommittedMutations:!0})}(t,0,r)}function je(t,e,r,n){return t instanceof Ue?function(t,e){if(!Le(t.Qe,e))return e;var r=ze(e);return new rr(t.key,r,t.value,{Ge:!0})}(t,e):t instanceof qe?function(t,e){if(!Le(t.Qe,e))return e;var r=ze(e),n=He(t,e);return new rr(t.key,r,n,{Ge:!0})}(t,e):t instanceof We?function(t,e,r,n){if(!Le(t.Qe,e))return e;var i=Ye(t,e),s=function(t,e,r,n){for(var i=[],s=0,o=t;s<o.length;s++){var a=o[s],l=a.transform,h=null;r instanceof rr&&(h=r.field(a.field)),null===h&&n instanceof rr&&(h=n.field(a.field)),i.push(Ee(l,h,e))}return i}(t.fieldTransforms,r,e,n),o=Ke(t,i.data(),s);return new rr(t.key,i.version,o,{Ge:!0})}(t,e,n,r):function(t,e){return Le(t.Qe,e)?new nr(t.key,O.min()):e}(t,e)}function Be(t,e){return t instanceof We?function(t,e){for(var r=null,n=0,i=t.fieldTransforms;n<i.length;n++){var s=i[n],o=e instanceof rr?e.field(s.field):void 0,a=Te(s.transform,o||null);null!=a&&(r=null==r?(new Ze).set(s.field,a):r.set(s.field,a))}return r?r.ze():null}(t,e):null}function Ge(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Qe.isEqual(e.Qe)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.qe.isEqual(e.qe):2!==t.type||w(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ae&&e instanceof Ae||t instanceof Ie&&e instanceof Ie?w(t.elements,e.elements,Dt):t instanceof De&&e instanceof De?Dt(t.Be,e.Be):t instanceof xe&&e instanceof xe}(t.transform,e.transform)}(t,e)})))}function ze(t){return t instanceof rr?t.version:O.min()}var Ue=function(t){function e(e,r,n){var i=this;return(i=t.call(this)||this).key=e,i.value=r,i.Qe=n,i.type=0,i}return n.__extends(e,t),e}($e),qe=function(t){function e(e,r,n,i){var s=this;return(s=t.call(this)||this).key=e,s.data=r,s.qe=n,s.Qe=i,s.type=1,s}return n.__extends(e,t),e}($e);function He(t,e){return function(t,e){var r=new Ze(e);return t.qe.fields.forEach((function(e){if(!e._()){var n=t.data.field(e);null!==n?r.set(e,n):r.delete(e)}})),r.ze()}(t,e instanceof rr?e.data():Je.empty())}var We=function(t){function e(e,r){var n=this;return(n=t.call(this)||this).key=e,n.fieldTransforms=r,n.type=2,n.Qe=Ne.exists(!0),n}return n.__extends(e,t),e}($e);function Ye(t,e){return e}function Ke(t,e,r){for(var n=new Ze(e),i=0;i<t.fieldTransforms.length;i++){var s=t.fieldTransforms[i];n.set(s.field,r[i])}return n.ze()}var Xe=function(t){function e(e,r){var n=this;return(n=t.call(this)||this).key=e,n.Qe=r,n.type=3,n}return n.__extends(e,t),e}($e),Qe=function(t){function e(e,r){var n=this;return(n=t.call(this)||this).key=e,n.Qe=r,n.type=4,n}return n.__extends(e,t),e}($e),Je=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,r=0;r<t.length-1;++r){if(!e.mapValue.fields)return null;if(!zt(e=e.mapValue.fields[t.get(r)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return Dt(this.proto,t.proto)},t}(),Ze=function(){function t(t){void 0===t&&(t=Je.empty()),this.He=t,this.Ye=new Map}return t.prototype.set=function(t,e){return this.Je(t,e),this},t.prototype.delete=function(t){return this.Je(t,null),this},t.prototype.Je=function(t,e){for(var r=this.Ye,n=0;n<t.length-1;++n){var i=t.get(n),s=r.get(i);s instanceof Map?r=s:s&&10===Ct(s)?(s=new Map(Object.entries(s.mapValue.fields||{})),r.set(i,s),r=s):(s=new Map,r.set(i,s),r=s)}r.set(t.S(),e)},t.prototype.ze=function(){var t=this.Xe(N.$(),this.Ye);return null!=t?new Je(t):this.He},t.prototype.Xe=function(t,e){var r=this,n=!1,i=this.He.field(t),s=zt(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var o=r.Xe(t.child(i),e);null!=o&&(s[i]=o,n=!0)}else null!==e?(s[i]=e,n=!0):s.hasOwnProperty(i)&&(delete s[i],n=!0)})),n?{mapValue:{fields:s}}:null},t}();function tr(t){var e=[];return A(t.fields||{},(function(t,r){var n=new N([t]);if(zt(r)){var i=tr(r.mapValue).fields;if(0===i.length)e.push(n);else for(var s=0,o=i;s<o.length;s++){var a=o[s];e.push(n.child(a))}}else e.push(n)})),new Me(e)
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */}var er=function(t,e){this.key=t,this.version=e},rr=function(t){function e(e,r,n,i){var s=this;return(s=t.call(this,e,r)||this).Ze=n,s.Ge=!!i.Ge,s.hasCommittedMutations=!!i.hasCommittedMutations,s}return n.__extends(e,t),e.prototype.field=function(t){return this.Ze.field(t)},e.prototype.data=function(){return this.Ze},e.prototype.tn=function(){return this.Ze.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(er),nr=function(t){function e(e,r,n){var i=this;return(i=t.call(this,e,r)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),i}return n.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(er),ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(er);
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function sr(t,e){if(!(t instanceof e))throw e.name===t.constructor.name?new D(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass '"+e.name+"' from a different Firestore SDK?"):new D(C.INVALID_ARGUMENT,"Expected type '"+e.name+"', but was '"+t.constructor.name+"'");return t}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var or=function(){function t(t,e,r,n,i,s,o,a){void 0===e&&(e=null),void 0===r&&(r=[]),void 0===n&&(n=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.en=r,this.filters=n,this.limit=i,this.nn=s,this.startAt=o,this.endAt=a,this.sn=null,this.rn=null,this.startAt,this.endAt}return t.prototype.on=function(e){return new t(e,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype.hn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.M())},t.prototype.an=function(){return!$(this.limit)&&"F"===this.nn},t.prototype.cn=function(){return!$(this.limit)&&"L"===this.nn},t.prototype.un=function(){return this.en.length>0?this.en[0].field:null},t.prototype.ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var r=e[t];if(r._n())return r.field}return null},t.prototype.fn=function(t){for(var e=0,r=this.filters;e<r.length;e++){var n=r[e];if(t.indexOf(n.op)>=0)return n.op}return null},t}();function ar(t,e,r,n,i,s,o,a){return new or(t,e,r,n,i,s,o,a)}function lr(t){return new or(t)}function hr(t){return null!==t.collectionGroup}function ur(t){var e=sr(t,or);if(null===e.sn){e.sn=[];var r=e.ln(),n=e.un();if(null!==r&&null===n)r.M()||e.sn.push(new Mr(r)),e.sn.push(new Mr(N.L(),"asc"));else{for(var i=!1,s=0,o=e.en;s<o.length;s++){var a=o[s];e.sn.push(a),a.field.M()&&(i=!0)}if(!i){var l=e.en.length>0?e.en[e.en.length-1].dir:"asc";e.sn.push(new Mr(N.L(),l))}}}return e.sn}function cr(t){var e=sr(t,or);if(!e.rn)if("F"===e.nn)e.rn=G(e.path,e.collectionGroup,ur(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var r=[],n=0,i=ur(e);n<i.length;n++){var s=i[n],o="desc"===s.dir?"asc":"desc";r.push(new Mr(s.field,o))}var a=e.endAt?new Cr(e.endAt.position,!e.endAt.before):null,l=e.startAt?new Cr(e.startAt.position,!e.startAt.before):null;e.rn=G(e.path,e.collectionGroup,r,e.filters,e.limit,a,l)}return e.rn}function fr(t,e,r){return new or(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function pr(t,e){return new or(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),t.limit,t.nn,e,t.endAt)}function dr(t,e){return new or(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),t.limit,t.nn,t.startAt,e)}function mr(t,e){return U(cr(t),cr(e))&&t.nn===e.nn}function yr(t){return z(cr(t))+"|lt:"+t.nn}function vr(t){return"Query(target="+function(t){var e=t.path.F();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.F()+" "+e.op+" "+Rt(e.value);var e})).join(", ")+"]"),$(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.F()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Dr(t.startAt)),t.endAt&&(e+=", endAt: "+Dr(t.endAt)),"Target("+e+")"}(cr(t))+"; limitType="+t.nn+")"}function gr(t,e){return function(t,e){var r=e.key.path;return null!==t.collectionGroup?e.key.W(t.collectionGroup)&&t.path.D(r):L.j(t.path)?t.path.isEqual(r):t.path.C(r)}(t,e)&&function(t,e){for(var r=0,n=t.en;r<n.length;r++){var i=n[r];if(!i.field.M()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var r=0,n=t.filters;r<n.length;r++)if(!n[r].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!kr(t.startAt,ur(t),e)||t.endAt&&kr(t.endAt,ur(t),e))}(t,e)}function br(t){return function(e,r){for(var n=!1,i=0,s=ur(t);i<s.length;i++){var o=s[i],a=Rr(o,e,r);if(0!==a)return a;n=n||o.field.M()}return 0}}var _r=function(t){function e(e,r,n){var i=this;return(i=t.call(this)||this).field=e,i.op=r,i.value=n,i}return n.__extends(e,t),e.create=function(t,r,n){if(t.M())return"in"===r||"not-in"===r?this.dn(t,r,n):new wr(t,r,n);if(Bt(n)){if("=="!==r&&"!="!==r)throw new D(C.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,r,n)}if(Gt(n)){if("=="!==r&&"!="!==r)throw new D(C.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,r,n)}return"array-contains"===r?new xr(t,n):"in"===r?new Ar(t,n):"not-in"===r?new Pr(t,n):"array-contains-any"===r?new Ir(t,n):new e(t,r,n)},e.dn=function(t,e,r){return"in"===e?new Er(t,r):new Sr(t,r)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.wn(Ot(e,this.value)):null!==e&&Ct(this.value)===Ct(e)&&this.wn(Ot(e,this.value))},e.prototype.wn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return m()}},e.prototype._n=function(){return["<","<=",">",">=","!="].indexOf(this.op)>=0},e}((function(){})),wr=function(t){function e(e,r,n){var i=this;return(i=t.call(this,e,r,n)||this).key=L.U(n.referenceValue),i}return n.__extends(e,t),e.prototype.matches=function(t){var e=L.P(t.key,this.key);return this.wn(e)},e}(_r),Er=function(t){function e(e,r){var n=this;return(n=t.call(this,e,"in",r)||this).keys=Tr("in",r),n}return n.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(_r),Sr=function(t){function e(e,r){var n=this;return(n=t.call(this,e,"not-in",r)||this).keys=Tr("not-in",r),n}return n.__extends(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(_r);function Tr(t,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map((function(t){return L.U(t.referenceValue)}))}var xr=function(t){function e(e,r){return t.call(this,e,"array-contains",r)||this}return n.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return jt(e)&&kt(e.arrayValue,this.value)},e}(_r),Ar=function(t){function e(e,r){return t.call(this,e,"in",r)||this}return n.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&kt(this.value.arrayValue,e)},e}(_r),Pr=function(t){function e(e,r){return t.call(this,e,"not-in",r)||this}return n.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&!kt(this.value.arrayValue,e)},e}(_r),Ir=function(t){function e(e,r){return t.call(this,e,"array-contains-any",r)||this}return n.__extends(e,t),e.prototype.matches=function(t){var e=this,r=t.field(this.field);return!(!jt(r)||!r.arrayValue.values)&&r.arrayValue.values.some((function(t){return kt(e.value.arrayValue,t)}))},e}(_r),Cr=function(t,e){this.position=t,this.before=e};function Dr(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Rt(t)})).join(",")}function kr(t,e,r){for(var n=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(n=s.field.M()?L.P(L.U(o.referenceValue),r.key):Ot(o,r.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return t.before?n<=0:n<0}function Or(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var r=0;r<t.position.length;r++)if(!Dt(t.position[r],e.position[r]))return!1;return!0}var Mr=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Rr(t,e,r){var n=t.field.M()?L.P(e.key,r.key):function(t,e,r){var n=e.field(t),i=r.field(t);return null!==n&&null!==i?Ot(n,i):m()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return m()}}function Fr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var Nr=function(){function t(t,e,r,n){this.batchId=t,this.Tn=e,this.baseMutations=r,this.mutations=n}return t.prototype.En=function(t,e,r){for(var n=r.mn,i=0;i<this.mutations.length;i++){var s=this.mutations[i];s.key.isEqual(t)&&(e=Ve(s,e,n[i]))}return e},t.prototype.In=function(t,e){for(var r=0,n=this.baseMutations;r<n.length;r++){var i=n[r];i.key.isEqual(t)&&(e=je(i,e,e,this.Tn))}for(var s=e,o=0,a=this.mutations;o<a.length;o++){var l=a[o];l.key.isEqual(t)&&(e=je(l,e,s,this.Tn))}return e},t.prototype.An=function(t){var e=this,r=t;return this.mutations.forEach((function(n){var i=e.In(n.key,t.get(n.key));i&&(r=r.st(n.key,i))})),r},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ct())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&w(this.mutations,t.mutations,(function(t,e){return Ge(t,e)}))&&w(this.baseMutations,t.baseMutations,(function(t,e){return Ge(t,e)}))},t}(),Lr=function(){function t(t,e,r,n){this.batch=t,this.Rn=e,this.mn=r,this.Pn=n}return t.from=function(e,r,n){y(e.mutations.length===n.length);for(var i=ht,s=e.mutations,o=0;o<s.length;o++)i=i.st(s[o].key,n[o].version);return new t(e,r,n,i)},t}(),$r=function(){function t(t){var e=this;this.gn=null,this.Vn=null,this.result=void 0,this.error=void 0,this.yn=!1,this.pn=!1,t((function(t){e.yn=!0,e.result=t,e.gn&&e.gn(t)}),(function(t){e.yn=!0,e.error=t,e.Vn&&e.Vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,r){var n=this;return this.pn&&m(),this.pn=!0,this.yn?this.error?this.bn(r,this.error):this.vn(e,this.result):new t((function(t,i){n.gn=function(r){n.vn(e,r).next(t,i)},n.Vn=function(e){n.bn(r,e).next(t,i)}}))},t.prototype.Sn=function(){var t=this;return new Promise((function(e,r){t.next(e,r)}))},t.prototype.Dn=function(e){try{var r=e();return r instanceof t?r:t.resolve(r)}catch(e){return t.reject(e)}},t.prototype.vn=function(e,r){return e?this.Dn((function(){return e(r)})):t.resolve(r)},t.prototype.bn=function(e,r){return e?this.Dn((function(){return e(r)})):t.reject(r)},t.resolve=function(e){return new t((function(t,r){t(e)}))},t.reject=function(e){return new t((function(t,r){r(e)}))},t.Cn=function(e){return new t((function(t,r){var n=0,i=0,s=!1;e.forEach((function(e){++n,e.next((function(){++i,s&&i===n&&t()}),(function(t){return r(t)}))})),s=!0,i===n&&t()}))},t.Nn=function(e){for(var r=t.resolve(!1),n=function(e){r=r.next((function(r){return r?t.resolve(r):e()}))},i=0,s=e;i<s.length;i++)n(s[i]);return r},t.forEach=function(t,e){var r=this,n=[];return t.forEach((function(t,i){n.push(e.call(r,t,i))})),this.Cn(n)},t}(),Vr=function(){function t(){this.Fn=new I((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.kn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.$n},set:function(t){this.$n=t},enumerable:!1,configurable:!0}),t.prototype.xn=function(t,e){this.On(),this.readTime=e,this.Fn.set(t.key,t)},t.prototype.Mn=function(t,e){this.On(),e&&(this.readTime=e),this.Fn.set(t,null)},t.prototype.Ln=function(t,e){this.On();var r=this.Fn.get(e);return void 0!==r?$r.resolve(r):this.qn(t,e)},t.prototype.getEntries=function(t,e){return this.Bn(t,e)},t.prototype.apply=function(t){return this.On(),this.kn=!0,this.Un(t)},t.prototype.On=function(){},t}(),jr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Br=function(){function t(){this.Qn=[]}return t.prototype.Wn=function(t){this.Qn.push(t)},t.prototype.jn=function(){this.Qn.forEach((function(t){return t()}))},t}(),Gr=function(){function t(t,e,r){this.Kn=t,this.Gn=e,this.zn=r}return t.prototype.Hn=function(t,e){var r=this;return this.Gn.Yn(t,e).next((function(n){return r.Jn(t,e,n)}))},t.prototype.Jn=function(t,e,r){return this.Kn.Ln(t,e).next((function(t){for(var n=0,i=r;n<i.length;n++)t=i[n].In(e,t);return t}))},t.prototype.Xn=function(t,e,r){var n=ot();return e.forEach((function(t,e){for(var i=0,s=r;i<s.length;i++)e=s[i].In(t,e);n=n.st(t,e)})),n},t.prototype.Zn=function(t,e){var r=this;return this.Kn.getEntries(t,e).next((function(e){return r.ts(t,e)}))},t.prototype.ts=function(t,e){var r=this;return this.Gn.es(t,e).next((function(n){var i=r.Xn(t,e,n),s=st();return i.forEach((function(t,e){e||(e=new nr(t,O.min())),s=s.st(t,e)})),s}))},t.prototype.ns=function(t,e,r){return function(t){return L.j(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ss(t,e.path):hr(e)?this.rs(t,e,r):this.os(t,e,r)},t.prototype.ss=function(t,e){return this.Hn(t,new L(e)).next((function(t){var e=lt();return t instanceof rr&&(e=e.st(t.key,t)),e}))},t.prototype.rs=function(t,e,r){var n=this,i=e.collectionGroup,s=lt();return this.zn.hs(t,i).next((function(o){return $r.forEach(o,(function(o){var a=e.on(o.child(i));return n.os(t,a,r).next((function(t){t.forEach((function(t,e){s=s.st(t,e)}))}))})).next((function(){return s}))}))},t.prototype.os=function(t,e,r){var n,i,s=this;return this.Kn.ns(t,e,r).next((function(r){return n=r,s.Gn.as(t,e)})).next((function(e){return i=e,s.cs(t,i,n).next((function(t){n=t;for(var e=0,r=i;e<r.length;e++)for(var s=r[e],o=0,a=s.mutations;o<a.length;o++){var l=a[o],h=l.key,u=n.get(h),c=je(l,u,u,s.Tn);n=c instanceof rr?n.st(h,c):n.remove(h)}}))})).next((function(){return n.forEach((function(t,r){gr(e,r)||(n=n.remove(t))})),n}))},t.prototype.cs=function(t,e,r){for(var n=ct(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var l=a[o];l instanceof qe&&null===r.get(l.key)&&(n=n.add(l.key))}var h=r;return this.Kn.getEntries(t,n).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof rr&&(h=h.st(t,e))})),h}))},t}(),zr=function(){function t(t,e,r,n){this.targetId=t,this.fromCache=e,this.us=r,this.ls=n}return t._s=function(e,r){for(var n=ct(),i=ct(),s=0,o=r.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,r.fromCache,n,i)},t}(),Ur=function(){function t(t,e){var r=this;this.previousValue=t,e&&(e.fs=function(t){return r.ds(t)},this.ws=function(t){return e.Ts(t)})}return t.prototype.ds=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ws&&this.ws(t),t},t}();Ur.Es=-1;
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var qr=function(){var t=this;this.promise=new Promise((function(e,r){t.resolve=e,t.reject=r}))},Hr=function(){function t(t,e,r,n,i){void 0===r&&(r=1e3),void 0===n&&(n=1.5),void 0===i&&(i=6e4),this.ms=t,this.Is=e,this.As=r,this.Rs=n,this.Ps=i,this.gs=0,this.Vs=null,this.ys=Date.now(),this.reset()}return t.prototype.reset=function(){this.gs=0},t.prototype.ps=function(){this.gs=this.Ps},t.prototype.bs=function(t){var e=this;this.cancel();var r=Math.floor(this.gs+this.vs()),n=Math.max(0,Date.now()-this.ys),i=Math.max(0,r-n);i>0&&c("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.gs+" ms, delay with jitter: "+r+" ms, last attempt: "+n+" ms ago)"),this.Vs=this.ms.Ss(this.Is,i,(function(){return e.ys=Date.now(),t()})),this.gs*=this.Rs,this.gs<this.As&&(this.gs=this.As),this.gs>this.Ps&&(this.gs=this.Ps)},t.prototype.Ds=function(){null!==this.Vs&&(this.Vs.Cs(),this.Vs=null)},t.prototype.cancel=function(){null!==this.Vs&&(this.Vs.cancel(),this.Vs=null)},t.prototype.vs=function(){return(Math.random()-.5)*this.gs},t}(),Wr=function(){function t(e,r,n){this.name=e,this.version=r,this.Ns=n,12.2===t.Fs(o.getUA())&&f("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return c("SimpleDb","Removing database:",t),Zr(window.indexedDB.deleteDatabase(t)).Sn()},t.ks=function(){if("undefined"==typeof indexedDB)return!1;if(t.$s())return!0;var e=o.getUA(),r=t.Fs(e),n=0<r&&r<10,i=t.xs(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)},t.$s=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Os)},t.Ms=function(t,e){return t.store(e)},t.Fs=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)},t.xs=function(t){var e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)},t.prototype.Ls=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e=this;return n.__generator(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(c("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var n=indexedDB.open(e.name,e.version);n.onsuccess=function(e){var r=e.target.result;t(r)},n.onblocked=function(){r(new Kr("Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new D(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Kr(e))},n.onupgradeneeded=function(t){c("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',t.oldVersion);var r=t.target.result;e.Ns.createOrUpgrade(r,n.transaction,t.oldVersion,e.version).next((function(){c("SimpleDb","Database upgrade to version "+e.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.qs&&(this.db.onversionchange=function(t){return e.qs(t)}),this.db)]}}))}))},t.prototype.Bs=function(t){this.qs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,r){return n.__awaiter(this,void 0,void 0,(function(){var i,s,o,a,l;return n.__generator(this,(function(h){switch(h.label){case 0:i="readonly"===t,s=0,o=function(){var t,o,l,h,u;return n.__generator(this,(function(n){switch(n.label){case 0:++s,n.label=1;case 1:return n.trys.push([1,4,,5]),[4,a.Ls()];case 2:return a.db=n.sent(),t=Qr.open(a.db,i?"readonly":"readwrite",e),o=r(t).catch((function(e){return t.abort(e),$r.reject(e)})).Sn(),l={},o.catch((function(){})),[4,t.Us];case 3:return[2,(l.value=(n.sent(),o),l)];case 4:return h=n.sent(),u="FirebaseError"!==h.name&&s<3,c("SimpleDb","Transaction failed with error: %s. Retrying: %s.",h.message,u),a.close(),u?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},a=this,h.label=1;case 1:return[5,o()];case 2:if("object"==typeof(l=h.sent()))return[2,l.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Yr=function(){function t(t){this.Qs=t,this.Ws=!1,this.js=null}return Object.defineProperty(t.prototype,"yn",{get:function(){return this.Ws},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ks",{get:function(){return this.js},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Qs=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Ws=!0},t.prototype.Gs=function(t){this.js=t},t.prototype.delete=function(){return Zr(this.Qs.delete())},t}(),Kr=function(t){function e(e){var r=this;return(r=t.call(this,C.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",r}return n.__extends(e,t),e}(D);
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Xr(t){return"IndexedDbTransactionError"===t.name}var Qr=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.zs=new qr,this.transaction.oncomplete=function(){e.zs.resolve()},this.transaction.onabort=function(){t.error?e.zs.reject(new Kr(t.error)):e.zs.resolve()},this.transaction.onerror=function(t){var r=en(t.target.error);e.zs.reject(new Kr(r))}}return t.open=function(e,r,n){try{return new t(e.transaction(n,r))}catch(e){throw new Kr(e)}},Object.defineProperty(t.prototype,"Us",{get:function(){return this.zs.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.zs.reject(t),this.aborted||(c("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Jr(e)},t}(),Jr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var r;return void 0!==e?(c("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(c("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Zr(r)},t.prototype.add=function(t){return c("SimpleDb","ADD",this.store.name,t,t),Zr(this.store.add(t))},t.prototype.get=function(t){var e=this;return Zr(this.store.get(t)).next((function(r){return void 0===r&&(r=null),c("SimpleDb","GET",e.store.name,t,r),r}))},t.prototype.delete=function(t){return c("SimpleDb","DELETE",this.store.name,t),Zr(this.store.delete(t))},t.prototype.count=function(){return c("SimpleDb","COUNT",this.store.name),Zr(this.store.count())},t.prototype.Hs=function(t,e){var r=this.cursor(this.options(t,e)),n=[];return this.Ys(r,(function(t,e){n.push(e)})).next((function(){return n}))},t.prototype.Js=function(t,e){c("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,e);r.Xs=!1;var n=this.cursor(r);return this.Ys(n,(function(t,e,r){return r.delete()}))},t.prototype.Zs=function(t,e){var r;e?r=t:(r={},e=t);var n=this.cursor(r);return this.Ys(n,e)},t.prototype.ti=function(t){var e=this.cursor({});return new $r((function(r,n){e.onerror=function(t){var e=en(t.target.error);n(e)},e.onsuccess=function(e){var n=e.target.result;n?t(n.primaryKey,n.value).next((function(t){t?n.continue():r()})):r()}}))},t.prototype.Ys=function(t,e){var r=[];return new $r((function(n,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new Yr(i),o=e(i.primaryKey,i.value,s);if(o instanceof $r){var a=o.catch((function(t){return s.done(),$r.reject(t)}));r.push(a)}s.yn?n():null===s.Ks?i.continue():i.continue(s.Ks)}else n()}})).next((function(){return $r.Cn(r)}))},t.prototype.options=function(t,e){var r=void 0;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var r=this.store.index(t.index);return t.Xs?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Zr(t){return new $r((function(e,r){t.onsuccess=function(t){var r=t.target.result;e(r)},t.onerror=function(t){var e=en(t.target.error);r(e)}}))}var tn=!1;function en(t){var e=Wr.Fs(o.getUA());if(e>=12.2&&e<13){var r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){var n=new D("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+r+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return tn||(tn=!0,setTimeout((function(){throw n}),0)),n}}return t}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function rn(){return"undefined"!=typeof window?window:null}function nn(){return"undefined"!=typeof document?document:null}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var sn=function(){function t(t,e,r,n,i){this.ei=t,this.Is=e,this.ni=r,this.op=n,this.si=i,this.ii=new qr,this.then=this.ii.promise.then.bind(this.ii.promise),this.ii.promise.catch((function(t){}))}return t.ri=function(e,r,n,i,s){var o=new t(e,r,Date.now()+n,i,s);return o.start(n),o},t.prototype.start=function(t){var e=this;this.oi=setTimeout((function(){return e.hi()}),t)},t.prototype.Cs=function(){return this.hi()},t.prototype.cancel=function(t){null!==this.oi&&(this.clearTimeout(),this.ii.reject(new D(C.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.hi=function(){var t=this;this.ei.ai((function(){return null!==t.oi?(t.clearTimeout(),t.op().then((function(e){return t.ii.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.oi&&(this.si(this),clearTimeout(this.oi),this.oi=null)},t}(),on=function(){function t(){var t=this;this.ci=Promise.resolve(),this.ui=[],this.li=!1,this._i=[],this.fi=null,this.di=!1,this.wi=[],this.Ti=new Hr(this,"async_queue_retry"),this.Ei=function(){var e=nn();e&&c("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.Ti.Ds()};var e=nn();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ei)}return Object.defineProperty(t.prototype,"mi",{get:function(){return this.li},enumerable:!1,configurable:!0}),t.prototype.ai=function(t){this.enqueue(t)},t.prototype.Ii=function(t){this.Ai(),this.Ri(t)},t.prototype.Pi=function(){if(!this.li){this.li=!0;var t=nn();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ei)}},t.prototype.enqueue=function(t){return this.Ai(),this.li?new Promise((function(t){})):this.Ri(t)},t.prototype.gi=function(t){var e=this;this.ui.push(t),this.ai((function(){return e.Vi()}))},t.prototype.Vi=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e=this;return n.__generator(this,(function(r){switch(r.label){case 0:if(0===this.ui.length)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.ui[0]()];case 2:return r.sent(),this.ui.shift(),this.Ti.reset(),[3,4];case 3:if(!Xr(t=r.sent()))throw t;return c("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.ui.length>0&&this.Ti.bs((function(){return e.Vi()})),r.label=5;case 5:return[2]}}))}))},t.prototype.Ri=function(t){var e=this,r=this.ci.then((function(){return e.di=!0,t().catch((function(t){throw e.fi=t,e.di=!1,f("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.di=!1,t}))}));return this.ci=r,r},t.prototype.Ss=function(t,e,r){var n=this;this.Ai(),this.wi.indexOf(t)>-1&&(e=0);var i=sn.ri(this,t,e,r,(function(t){return n.yi(t)}));return this._i.push(i),i},t.prototype.Ai=function(){this.fi&&m()},t.prototype.pi=function(){},t.prototype.bi=function(){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.ci];case 1:e.sent(),e.label=2;case 2:if(t!==this.ci)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.vi=function(t){for(var e=0,r=this._i;e<r.length;e++)if(r[e].Is===t)return!0;return!1},t.prototype.Si=function(t){var e=this;return this.bi().then((function(){e._i.sort((function(t,e){return t.ni-e.ni}));for(var r=0,n=e._i;r<n.length;r++){var i=n[r];if(i.Cs(),"all"!==t&&i.Is===t)break}return e.bi()}))},t.prototype.Di=function(t){this.wi.push(t)},t.prototype.yi=function(t){var e=this._i.indexOf(t);this._i.splice(e,1)},t}();function an(t,e){if(f("AsyncQueue",e+": "+t),Xr(t))return new D(C.UNAVAILABLE,e+": "+t);throw t}function ln(t,e){var r=t[0],n=t[1],i=e[0],s=e[1],o=_(r,i);return 0===o?_(n,s):o}var hn=function(){function t(t){this.Ci=t,this.buffer=new rt(ln),this.Ni=0}return t.prototype.Fi=function(){return++this.Ni},t.prototype.ki=function(t){var e=[t,this.Fi()];if(this.buffer.size<this.Ci)this.buffer=this.buffer.add(e);else{var r=this.buffer.last();ln(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),un={$i:!1,xi:0,Oi:0,Mi:0},cn=function(){function t(t,e,r){this.Li=t,this.qi=e,this.Bi=r}return t.Ui=function(e){return new t(e,t.Qi,t.Wi)},t}();cn.ji=-1,cn.Ki=1048576,cn.Gi=41943040,cn.Qi=10,cn.Wi=1e3,cn.zi=new cn(cn.Gi,cn.Qi,cn.Wi),cn.Hi=new cn(cn.ji,0,0);var fn=function(){function t(t,e){this.Yi=t,this.ei=e,this.Ji=!1,this.Xi=null}return t.prototype.start=function(t){this.Yi.params.Li!==cn.ji&&this.Zi(t)},t.prototype.stop=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},Object.defineProperty(t.prototype,"tr",{get:function(){return null!==this.Xi},enumerable:!1,configurable:!0}),t.prototype.Zi=function(t){var e=this,r=this.Ji?3e5:6e4;c("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.Xi=this.ei.Ss("lru_garbage_collection",r,(function(){return n.__awaiter(e,void 0,void 0,(function(){var e;return n.__generator(this,(function(r){switch(r.label){case 0:this.Xi=null,this.Ji=!0,r.label=1;case 1:return r.trys.push([1,3,,7]),[4,t.er(this.Yi)];case 2:return r.sent(),[3,7];case 3:return Xr(e=r.sent())?(c("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Ii(e)];case 5:r.sent(),r.label=6;case 6:return[3,7];case 7:return[4,this.Zi(t)];case 8:return r.sent(),[2]}}))}))}))},t}(),pn=function(){function t(t,e){this.nr=t,this.params=e}return t.prototype.sr=function(t,e){return this.nr.ir(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.rr=function(t,e){var r=this;if(0===e)return $r.resolve(Ur.Es);var n=new hn(e);return this.nr.be(t,(function(t){return n.ki(t.sequenceNumber)})).next((function(){return r.nr.or(t,(function(t){return n.ki(t)}))})).next((function(){return n.maxValue}))},t.prototype.hr=function(t,e,r){return this.nr.hr(t,e,r)},t.prototype.ar=function(t,e){return this.nr.ar(t,e)},t.prototype.cr=function(t,e){var r=this;return this.params.Li===cn.ji?(c("LruGarbageCollector","Garbage collection skipped; disabled"),$r.resolve(un)):this.ur(t).next((function(n){return n<r.params.Li?(c("LruGarbageCollector","Garbage collection skipped; Cache size "+n+" is lower than threshold "+r.params.Li),un):r.lr(t,e)}))},t.prototype.ur=function(t){return this.nr.ur(t)},t.prototype.lr=function(t,e){var r,n,i,o,a,l,h,f=this,p=Date.now();return this.sr(t,this.params.qi).next((function(e){return e>f.params.Bi?(c("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.Bi+" from "+e),n=f.params.Bi):n=e,o=Date.now(),f.rr(t,n)})).next((function(n){return r=n,a=Date.now(),f.hr(t,r,e)})).next((function(e){return i=e,l=Date.now(),f.ar(t,r)})).next((function(t){return h=Date.now(),u()<=s.LogLevel.DEBUG&&c("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-p)+"ms\n\tDetermined least recently used "+n+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(l-a)+"ms\n\tRemoved "+t+" documents in "+(h-l)+"ms\nTotal Duration: "+(h-p)+"ms"),$r.resolve({$i:!0,xi:n,Oi:i,Mi:t})}))},t}();
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function dn(t){for(var e="",r=0;r<t.length;r++)e.length>0&&(e=yn(e)),e=mn(t.get(r),e);return yn(e)}function mn(t,e){for(var r=e,n=t.length,i=0;i<n;i++){var s=t.charAt(i);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function yn(t){return t+""}function vn(t){var e=t.length;if(y(e>=2),2===e)return y(""===t.charAt(0)&&""===t.charAt(1)),R.$();for(var r=e-2,n=[],i="",s=0;s<e;){var o=t.indexOf("",s);switch((o<0||o>r)&&m(),t.charAt(o+1)){case"":var a=t.substring(s,o),l=void 0;0===i.length?l=a:(l=i+=a,i=""),n.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:m()}s=o+2}return new R(n)}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var gn=function(t){this._r=t};function bn(t,e){if(e.document)return function(t,e,r){var n=ne(t,e.name),i=Zt(e.updateTime),s=new Je({mapValue:{fields:e.fields}});return new rr(n,i,s,{hasCommittedMutations:!!r})}(t._r,e.document,!!e.hasCommittedMutations);if(e.noDocument){var r=L.K(e.noDocument.path),n=Tn(e.noDocument.readTime);return new nr(r,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=L.K(e.unknownDocument.path),s=Tn(e.unknownDocument.version);return new ir(i,s)}return m()}function _n(t,e,r){var n=wn(r),i=e.key.path.p().N();if(e instanceof rr){var s=function(t,e){return{name:re(t,e.key),fields:e.tn().mapValue.fields,updateTime:Xt(t,e.version.A())}}(t._r,e),o=e.hasCommittedMutations;return new Kn(null,null,s,o,n,i)}if(e instanceof nr){var a=e.key.path.N(),l=Sn(e.version),h=e.hasCommittedMutations;return new Kn(null,new Wn(a,l),null,h,n,i)}if(e instanceof ir){var u=e.key.path.N(),c=Sn(e.version);return new Kn(new Yn(u,c),null,null,!0,n,i)}return m()}function wn(t){var e=t.A();return[e.seconds,e.nanoseconds]}function En(t){var e=new k(t[0],t[1]);return O.m(e)}function Sn(t){var e=t.A();return new Gn(e.seconds,e.nanoseconds)}function Tn(t){var e=new k(t.seconds,t.nanoseconds);return O.m(e)}function xn(t,e){var r=(e.baseMutations||[]).map((function(e){return ue(t._r,e)})),n=e.mutations.map((function(e){return ue(t._r,e)})),i=k.fromMillis(e.localWriteTimeMs);return new Nr(e.batchId,i,r,n)}function An(t){var e,r,n=Tn(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Tn(t.lastLimboFreeSnapshotVersion):O.min();return void 0!==t.query.documents?(y(1===(r=t.query).documents.length),e=cr(lr(se(r.documents[0])))):e=function(t){var e=se(t.parent),r=t.structuredQuery,n=r.from?r.from.length:0,i=null;if(n>0){y(1===n);var s=r.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];r.where&&(o=function t(e){return e?void 0!==e.unaryFilter?[ge(e)]:void 0!==e.fieldFilter?[ve(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):m():[]}(r.where));var a=[];r.orderBy&&(a=r.orderBy.map((function(t){return new Mr(ye((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var l=null;r.limit&&(l=function(t){var e;return $(e="object"==typeof t?t.value:t)?null:e}(r.limit));var h=null;r.startAt&&(h=de(r.startAt));var u=null;return r.endAt&&(u=de(r.endAt)),cr(ar(e,i,a,o,l,"F",h,u))}(t.query),new K(e,t.targetId,0,t.lastListenSequenceNumber,n,i,H.fromBase64String(t.resumeToken))}function Pn(t,e){var r,n=Sn(e.Z),i=Sn(e.lastLimboFreeSnapshotVersion);r=q(e.target)?ce(t._r,e.target):fe(t._r,e.target);var s=e.resumeToken.toBase64();return new Qn(e.targetId,z(e.target),n,s,e.sequenceNumber,i,r)}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var In=function(){function t(t,e,r,n){this.userId=t,this.serializer=e,this.zn=r,this.dr=n,this.wr={}}return t.Tr=function(e,r,n,i){return y(""!==e.uid),new t(e.Er()?e.uid:"",r,n,i)},t.prototype.mr=function(t){var e=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kn(t).Zs({index:qn.userMutationsIndex,range:r},(function(t,r,n){e=!1,n.done()})).next((function(){return e}))},t.prototype.Ir=function(t,e,r,n){var i=this,s=On(t),o=kn(t);return o.add({}).next((function(a){y("number"==typeof a);for(var l=new Nr(a,e,r,n),h=function(t,e,r){var n=r.baseMutations.map((function(e){return he(t._r,e)})),i=r.mutations.map((function(e){return he(t._r,e)}));return new qn(e,r.batchId,r.Tn.toMillis(),n,i)}(i.serializer,i.userId,l),u=[],c=new rt((function(t,e){return _(t.F(),e.F())})),f=0,p=n;f<p.length;f++){var d=p[f],m=Hn.key(i.userId,d.key.path,a);c=c.add(d.key.path.p()),u.push(o.put(h)),u.push(s.put(m,Hn.PLACEHOLDER))}return c.forEach((function(e){u.push(i.zn.Ar(t,e))})),t.Wn((function(){i.wr[a]=l.keys()})),$r.Cn(u).next((function(){return l}))}))},t.prototype.Rr=function(t,e){var r=this;return kn(t).get(e).next((function(t){return t?(y(t.userId===r.userId),xn(r.serializer,t)):null}))},t.prototype.Pr=function(t,e){var r=this;return this.wr[e]?$r.resolve(this.wr[e]):this.Rr(t,e).next((function(t){if(t){var n=t.keys();return r.wr[e]=n,n}return null}))},t.prototype.gr=function(t,e){var r=this,n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]),s=null;return kn(t).Zs({index:qn.userMutationsIndex,range:i},(function(t,e,i){e.userId===r.userId&&(y(e.batchId>=n),s=xn(r.serializer,e)),i.done()})).next((function(){return s}))},t.prototype.Vr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return kn(t).Zs({index:qn.userMutationsIndex,range:e,reverse:!0},(function(t,e,n){r=e.batchId,n.done()})).next((function(){return r}))},t.prototype.yr=function(t){var e=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kn(t).Hs(qn.userMutationsIndex,r).next((function(t){return t.map((function(t){return xn(e.serializer,t)}))}))},t.prototype.Yn=function(t,e){var r=this,n=Hn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(n),s=[];return On(t).Zs({range:i},(function(n,i,o){var a=n[0],l=n[1],h=n[2],u=vn(l);if(a===r.userId&&e.path.isEqual(u))return kn(t).get(h).next((function(t){if(!t)throw m();y(t.userId===r.userId),s.push(xn(r.serializer,t))}));o.done()})).next((function(){return s}))},t.prototype.es=function(t,e){var r=this,n=new rt(_),i=[];return e.forEach((function(e){var s=Hn.prefixForPath(r.userId,e.path),o=IDBKeyRange.lowerBound(s),a=On(t).Zs({range:o},(function(t,i,s){var o=t[0],a=t[1],l=t[2],h=vn(a);o===r.userId&&e.path.isEqual(h)?n=n.add(l):s.done()}));i.push(a)})),$r.Cn(i).next((function(){return r.pr(t,n)}))},t.prototype.as=function(t,e){var r=this,n=e.path,i=n.length+1,s=Hn.prefixForPath(this.userId,n),o=IDBKeyRange.lowerBound(s),a=new rt(_);return On(t).Zs({range:o},(function(t,e,s){var o=t[0],l=t[1],h=t[2],u=vn(l);o===r.userId&&n.D(u)?u.length===i&&(a=a.add(h)):s.done()})).next((function(){return r.pr(t,a)}))},t.prototype.pr=function(t,e){var r=this,n=[],i=[];return e.forEach((function(e){i.push(kn(t).get(e).next((function(t){if(null===t)throw m();y(t.userId===r.userId),n.push(xn(r.serializer,t))})))})),$r.Cn(i).next((function(){return n}))},t.prototype.br=function(t,e){var r=this;return Dn(t.vr,this.userId,e).next((function(n){return t.Wn((function(){r.Sr(e.batchId)})),$r.forEach(n,(function(e){return r.dr.Dr(t,e)}))}))},t.prototype.Sr=function(t){delete this.wr[t]},t.prototype.Cr=function(t){var e=this;return this.mr(t).next((function(r){if(!r)return $r.resolve();var n=IDBKeyRange.lowerBound(Hn.prefixForUser(e.userId)),i=[];return On(t).Zs({range:n},(function(t,r,n){if(t[0]===e.userId){var s=vn(t[1]);i.push(s)}else n.done()})).next((function(){y(0===i.length)}))}))},t.prototype.Nr=function(t,e){return Cn(t,this.userId,e)},t.prototype.Fr=function(t){var e=this;return Mn(t).get(this.userId).next((function(t){return t||new Un(e.userId,-1,"")}))},t}();function Cn(t,e,r){var n=Hn.prefixForPath(e,r.path),i=n[1],s=IDBKeyRange.lowerBound(n),o=!1;return On(t).Zs({range:s,Xs:!0},(function(t,r,n){var s=t[0],a=t[1];t[2],s===e&&a===i&&(o=!0),n.done()})).next((function(){return o}))}function Dn(t,e,r){var n=t.store(qn.store),i=t.store(Hn.store),s=[],o=IDBKeyRange.only(r.batchId),a=0,l=n.Zs({range:o},(function(t,e,r){return a++,r.delete()}));s.push(l.next((function(){y(1===a)})));for(var h=[],u=0,c=r.mutations;u<c.length;u++){var f=c[u],p=Hn.key(e,f.key.path,r.batchId);s.push(i.delete(p)),h.push(f.key)}return $r.Cn(s).next((function(){return h}))}function kn(t){return pi.Ms(t,qn.store)}function On(t){return pi.Ms(t,Hn.store)}function Mn(t){return pi.Ms(t,Un.store)}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var Rn=function(){function t(t,e){this.serializer=t,this.zn=e}return t.prototype.xn=function(t,e,r){return Nn(t).put(Ln(e),r)},t.prototype.Mn=function(t,e){var r=Nn(t),n=Ln(e);return r.delete(n)},t.prototype.updateMetadata=function(t,e){var r=this;return this.getMetadata(t).next((function(n){return n.byteSize+=e,r.kr(t,n)}))},t.prototype.Ln=function(t,e){var r=this;return Nn(t).get(Ln(e)).next((function(t){return r.$r(t)}))},t.prototype.xr=function(t,e){var r=this;return Nn(t).get(Ln(e)).next((function(t){var e=r.$r(t);return e?{Or:e,size:$n(t)}:null}))},t.prototype.getEntries=function(t,e){var r=this,n=ot();return this.Mr(t,e,(function(t,e){var i=r.$r(e);n=n.st(t,i)})).next((function(){return n}))},t.prototype.Lr=function(t,e){var r=this,n=ot(),i=new Z(L.P);return this.Mr(t,e,(function(t,e){var s=r.$r(e);s?(n=n.st(t,s),i=i.st(t,$n(e))):(n=n.st(t,null),i=i.st(t,0))})).next((function(){return{qr:n,Br:i}}))},t.prototype.Mr=function(t,e,r){if(e._())return $r.resolve();var n=IDBKeyRange.bound(e.first().path.N(),e.last().path.N()),i=e.ct(),s=i.wt();return Nn(t).Zs({range:n},(function(t,e,n){for(var o=L.K(t);s&&L.P(s,o)<0;)r(s,null),s=i.wt();s&&s.isEqual(o)&&(r(s,e),s=i.Tt()?i.wt():null),s?n.Gs(s.path.N()):n.done()})).next((function(){for(;s;)r(s,null),s=i.Tt()?i.wt():null}))},t.prototype.ns=function(t,e,r){var n=this,i=lt(),s=e.path.length+1,o={};if(r.isEqual(O.min())){var a=e.path.N();o.range=IDBKeyRange.lowerBound(a)}else{var l=e.path.N(),h=wn(r);o.range=IDBKeyRange.lowerBound([l,h],!0),o.index=Kn.collectionReadTimeIndex}return Nn(t).Zs(o,(function(t,r,o){if(t.length===s){var a=bn(n.serializer,r);e.path.D(a.key.path)?a instanceof rr&&gr(e,a)&&(i=i.st(a.key,a)):o.done()}})).next((function(){return i}))},t.prototype.Ur=function(t,e){var r=this,n=st(),i=wn(e),s=Nn(t),o=IDBKeyRange.lowerBound(i,!0);return s.Zs({index:Kn.readTimeIndex,range:o},(function(t,e){var s=bn(r.serializer,e);n=n.st(s.key,s),i=e.readTime})).next((function(){return{Qr:n,readTime:En(i)}}))},t.prototype.Wr=function(t){var e=Nn(t),r=O.min();return e.Zs({index:Kn.readTimeIndex,reverse:!0},(function(t,e,n){e.readTime&&(r=En(e.readTime)),n.done()})).next((function(){return r}))},t.prototype.jr=function(e){return new t.Kr(this,!!e&&e.Gr)},t.prototype.zr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Fn(t).get(Xn.key).next((function(t){return y(!!t),t}))},t.prototype.kr=function(t,e){return Fn(t).put(Xn.key,e)},t.prototype.$r=function(t){if(t){var e=bn(this.serializer,t);return e instanceof nr&&e.version.isEqual(O.min())?null:e}return null},t}();function Fn(t){return pi.Ms(t,Xn.store)}function Nn(t){return pi.Ms(t,Kn.store)}function Ln(t){return t.path.N()}function $n(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw m();e=t.noDocument}return JSON.stringify(e).length}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */Rn.Kr=function(t){function e(e,r){var n=this;return(n=t.call(this)||this).Hr=e,n.Gr=r,n.Yr=new I((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),n}return n.__extends(e,t),e.prototype.Un=function(t){var e=this,r=[],n=0,i=new rt((function(t,e){return _(t.F(),e.F())}));return this.Fn.forEach((function(s,o){var a=e.Yr.get(s);if(o){var l=_n(e.Hr.serializer,o,e.readTime);i=i.add(s.path.p());var h=$n(l);n+=h-a,r.push(e.Hr.xn(t,s,l))}else if(n-=a,e.Gr){var u=_n(e.Hr.serializer,new nr(s,O.min()),e.readTime);r.push(e.Hr.xn(t,s,u))}else r.push(e.Hr.Mn(t,s))})),i.forEach((function(n){r.push(e.Hr.zn.Ar(t,n))})),r.push(this.Hr.updateMetadata(t,n)),$r.Cn(r)},e.prototype.qn=function(t,e){var r=this;return this.Hr.xr(t,e).next((function(t){return null===t?(r.Yr.set(e,0),null):(r.Yr.set(e,t.size),t.Or)}))},e.prototype.Bn=function(t,e){var r=this;return this.Hr.Lr(t,e).next((function(t){var e=t.qr;return t.Br.forEach((function(t,e){r.Yr.set(t,e)})),e}))},e}(Vr);var Vn=function(){function t(){this.Jr=new jn}return t.prototype.Ar=function(t,e){return this.Jr.add(e),$r.resolve()},t.prototype.hs=function(t,e){return $r.resolve(this.Jr.getEntries(e))},t}(),jn=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),r=t.p(),n=this.index[e]||new rt(R.P),i=!n.has(r);return this.index[e]=n.add(r),i},t.prototype.has=function(t){var e=t.S(),r=t.p(),n=this.index[e];return n&&n.has(r)},t.prototype.getEntries=function(t){return(this.index[t]||new rt(R.P)).N()},t}(),Bn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,r,n){var i=this;y(r<n&&r>=0&&n<=10);var s=new Qr(e);r<1&&n>=1&&(function(t){t.createObjectStore(zn.store)}(t),function(t){t.createObjectStore(Un.store,{keyPath:Un.keyPath}),t.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Hn.store)}(t),ei(t),function(t){t.createObjectStore(Kn.store)}(t));var o=$r.resolve();return r<3&&n>=3&&(0!==r&&(function(t){t.deleteObjectStore(Jn.store),t.deleteObjectStore(Qn.store),t.deleteObjectStore(Zn.store)}(t),ei(t)),o=o.next((function(){return function(t){var e=t.store(Zn.store),r=new Zn(0,0,O.min().A(),0);return e.put(Zn.key,r)}(s)}))),r<4&&n>=4&&(0!==r&&(o=o.next((function(){return function(t,e){return e.store(qn.store).Hs().next((function(r){t.deleteObjectStore(qn.store),t.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0});var n=e.store(qn.store),i=r.map((function(t){return n.put(t)}));return $r.Cn(i)}))}(t,s)}))),o=o.next((function(){!function(t){t.createObjectStore(ri.store,{keyPath:ri.keyPath})}(t)}))),r<5&&n>=5&&(o=o.next((function(){return i.removeAcknowledgedMutations(s)}))),r<6&&n>=6&&(o=o.next((function(){return function(t){t.createObjectStore(Xn.store)}(t),i.addDocumentGlobal(s)}))),r<7&&n>=7&&(o=o.next((function(){return i.ensureSequenceNumbers(s)}))),r<8&&n>=8&&(o=o.next((function(){return i.createCollectionParentIndex(t,s)}))),r<9&&n>=9&&(o=o.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Kn.store);e.createIndex(Kn.readTimeIndex,Kn.readTimeIndexPath,{unique:!1}),e.createIndex(Kn.collectionReadTimeIndex,Kn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),r<10&&n>=10&&(o=o.next((function(){return i.rewriteCanonicalIds(s)}))),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Kn.store).Zs((function(t,r){e+=$n(r)})).next((function(){var r=new Xn(e);return t.store(Xn.store).put(Xn.key,r)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,r=t.store(Un.store),n=t.store(qn.store);return r.Hs().next((function(r){return $r.forEach(r,(function(r){var i=IDBKeyRange.bound([r.userId,-1],[r.userId,r.lastAcknowledgedBatchId]);return n.Hs(qn.userMutationsIndex,i).next((function(n){return $r.forEach(n,(function(n){y(n.userId===r.userId);var i=xn(e.serializer,n);return Dn(t,r.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Jn.store),r=t.store(Kn.store);return t.store(Zn.store).get(Zn.key).next((function(t){var n=[];return r.Zs((function(r,i){var s=new R(r),o=function(t){return[0,dn(t)]}(s);n.push(e.get(o).next((function(r){return r?$r.resolve():function(r){return e.put(new Jn(0,dn(r),t.highestListenSequenceNumber))}(s)})))})).next((function(){return $r.Cn(n)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(ti.store,{keyPath:ti.keyPath});var r=e.store(ti.store),n=new jn,i=function(t){if(n.add(t)){var e=t.S(),i=t.p();return r.put({collectionId:e,parent:dn(i)})}};return e.store(Kn.store).Zs({Xs:!0},(function(t,e){var r=new R(t);return i(r.p())})).next((function(){return e.store(Hn.store).Zs({Xs:!0},(function(t,e){t[0];var r=t[1],n=(t[2],vn(r));return i(n.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,r=t.store(Qn.store);return r.Zs((function(t,n){var i=An(n),s=Pn(e.serializer,i);return r.put(s)}))},t}(),Gn=function(t,e){this.seconds=t,this.nanoseconds=e},zn=function(t,e,r){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=r};zn.store="owner",zn.key="owner";var Un=function(t,e,r){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=r};Un.store="mutationQueues",Un.keyPath="userId";var qn=function(t,e,r,n,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=r,this.baseMutations=n,this.mutations=i};qn.store="mutations",qn.keyPath="batchId",qn.userMutationsIndex="userMutationsIndex",qn.userMutationsKeyPath=["userId","batchId"];var Hn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,dn(e)]},t.key=function(t,e,r){return[t,dn(e),r]},t}();Hn.store="documentMutations",Hn.PLACEHOLDER=new Hn;var Wn=function(t,e){this.path=t,this.readTime=e},Yn=function(t,e){this.path=t,this.version=e},Kn=function(t,e,r,n,i,s){this.unknownDocument=t,this.noDocument=e,this.document=r,this.hasCommittedMutations=n,this.readTime=i,this.parentPath=s};Kn.store="remoteDocuments",Kn.readTimeIndex="readTimeIndex",Kn.readTimeIndexPath="readTime",Kn.collectionReadTimeIndex="collectionReadTimeIndex",Kn.collectionReadTimeIndexPath=["parentPath","readTime"];var Xn=function(t){this.byteSize=t};Xn.store="remoteDocumentGlobal",Xn.key="remoteDocumentGlobalKey";var Qn=function(t,e,r,n,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=r,this.resumeToken=n,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};Qn.store="targets",Qn.keyPath="targetId",Qn.queryTargetsIndexName="queryTargetsIndex",Qn.queryTargetsKeyPath=["canonicalId","targetId"];var Jn=function(t,e,r){this.targetId=t,this.path=e,this.sequenceNumber=r};Jn.store="targetDocuments",Jn.keyPath=["targetId","path"],Jn.documentTargetsIndex="documentTargetsIndex",Jn.documentTargetsKeyPath=["path","targetId"];var Zn=function(t,e,r,n){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=r,this.targetCount=n};Zn.key="targetGlobalKey",Zn.store="targetGlobal";var ti=function(t,e){this.collectionId=t,this.parent=e};function ei(t){t.createObjectStore(Jn.store,{keyPath:Jn.keyPath}).createIndex(Jn.documentTargetsIndex,Jn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Qn.store,{keyPath:Qn.keyPath}).createIndex(Qn.queryTargetsIndexName,Qn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Zn.store)}ti.store="collectionParents",ti.keyPath=["collectionId","parent"];var ri=function(t,e,r,n){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=r,this.inForeground=n};ri.store="clientMetadata",ri.keyPath="clientId";var ni=n.__spreadArrays(n.__spreadArrays(n.__spreadArrays([Un.store,qn.store,Hn.store,Kn.store,Qn.store,zn.store,Zn.store,Jn.store],[ri.store]),[Xn.store]),[ti.store]),ii=function(){function t(){this.Xr=new jn}return t.prototype.Ar=function(t,e){var r=this;if(!this.Xr.has(e)){var n=e.S(),i=e.p();t.Wn((function(){r.Xr.add(e)}));var s={collectionId:n,parent:dn(i)};return si(t).put(s)}return $r.resolve()},t.prototype.hs=function(t,e){var r=[],n=IDBKeyRange.bound([e,""],[E(e),""],!1,!0);return si(t).Hs(n).next((function(t){for(var n=0,i=t;n<i.length;n++){var s=i[n];if(s.collectionId!==e)break;r.push(vn(s.parent))}return r}))},t}();
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function si(t){return pi.Ms(t,ti.store)}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var oi=function(){function t(t){this.Zr=t}return t.prototype.next=function(){return this.Zr+=2,this.Zr},t.to=function(){return new t(0)},t.eo=function(){return new t(-1)},t}(),ai=function(){function t(t,e){this.dr=t,this.serializer=e}return t.prototype.no=function(t){var e=this;return this.so(t).next((function(r){var n=new oi(r.highestTargetId);return r.highestTargetId=n.next(),e.io(t,r).next((function(){return r.highestTargetId}))}))},t.prototype.ro=function(t){return this.so(t).next((function(t){return O.m(new k(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.oo=function(t){return this.so(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.ho=function(t,e,r){var n=this;return this.so(t).next((function(i){return i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),n.io(t,i)}))},t.prototype.ao=function(t,e){var r=this;return this.co(t,e).next((function(){return r.so(t).next((function(n){return n.targetCount+=1,r.uo(e,n),r.io(t,n)}))}))},t.prototype.lo=function(t,e){return this.co(t,e)},t.prototype._o=function(t,e){var r=this;return this.fo(t,e.targetId).next((function(){return li(t).delete(e.targetId)})).next((function(){return r.so(t)})).next((function(e){return y(e.targetCount>0),e.targetCount-=1,r.io(t,e)}))},t.prototype.hr=function(t,e,r){var n=this,i=0,s=[];return li(t).Zs((function(o,a){var l=An(a);l.sequenceNumber<=e&&null===r.get(l.targetId)&&(i++,s.push(n._o(t,l)))})).next((function(){return $r.Cn(s)})).next((function(){return i}))},t.prototype.be=function(t,e){return li(t).Zs((function(t,r){var n=An(r);e(n)}))},t.prototype.so=function(t){return hi(t).get(Zn.key).next((function(t){return y(null!==t),t}))},t.prototype.io=function(t,e){return hi(t).put(Zn.key,e)},t.prototype.co=function(t,e){return li(t).put(Pn(this.serializer,e))},t.prototype.uo=function(t,e){var r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},t.prototype.do=function(t){return this.so(t).next((function(t){return t.targetCount}))},t.prototype.wo=function(t,e){var r=z(e),n=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),i=null;return li(t).Zs({range:n,index:Qn.queryTargetsIndexName},(function(t,r,n){var s=An(r);U(e,s.target)&&(i=s,n.done())})).next((function(){return i}))},t.prototype.To=function(t,e,r){var n=this,i=[],s=ui(t);return e.forEach((function(e){var o=dn(e.path);i.push(s.put(new Jn(r,o))),i.push(n.dr.Eo(t,r,e))})),$r.Cn(i)},t.prototype.mo=function(t,e,r){var n=this,i=ui(t);return $r.forEach(e,(function(e){var s=dn(e.path);return $r.Cn([i.delete([r,s]),n.dr.Io(t,r,e)])}))},t.prototype.fo=function(t,e){var r=ui(t),n=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(n)},t.prototype.Ao=function(t,e){var r=IDBKeyRange.bound([e],[e+1],!1,!0),n=ui(t),i=ct();return n.Zs({range:r,Xs:!0},(function(t,e,r){var n=vn(t[1]),s=new L(n);i=i.add(s)})).next((function(){return i}))},t.prototype.Nr=function(t,e){var r=dn(e.path),n=IDBKeyRange.bound([r],[E(r)],!1,!0),i=0;return ui(t).Zs({index:Jn.documentTargetsIndex,Xs:!0,range:n},(function(t,e,r){var n=t[0];t[1],0!==n&&(i++,r.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return li(t).get(e).next((function(t){return t?An(t):null}))},t}();
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function li(t){return pi.Ms(t,Qn.store)}function hi(t){return pi.Ms(t,Zn.store)}function ui(t){return pi.Ms(t,Jn.store)}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var ci="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fi=function(t){function e(e,r){var n=this;return(n=t.call(this)||this).vr=e,n.Ro=r,n}return n.__extends(e,t),e}(Br),pi=function(){function t(e,r,n,i,s,o,a,l,h,u){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ms=s,this.window=o,this.document=a,this.Po=h,this.Vo=u,this.yo=null,this.po=!1,this.isPrimary=!1,this.networkEnabled=!0,this.bo=null,this.inForeground=!1,this.vo=null,this.So=null,this.Do=Number.NEGATIVE_INFINITY,this.Co=function(t){return Promise.resolve()},!t.ks())throw new D(C.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.dr=new yi(this,i),this.No=r+"main",this.serializer=new gn(l),this.Fo=new Wr(this.No,10,new Bn(this.serializer)),this.ko=new ai(this.dr,this.serializer),this.zn=new ii,this.Kn=new Rn(this.serializer,this.zn),this.window&&this.window.localStorage?this.$o=this.window.localStorage:(this.$o=null,!1===u&&f("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ms=function(t,e){if(t instanceof fi)return Wr.Ms(t.vr,e);throw m()},t.prototype.start=function(){var t=this;return this.xo().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new D(C.FAILED_PRECONDITION,ci);return t.Oo(),t.Mo(),t.Lo(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ko.oo(e)}))})).then((function(e){t.yo=new Ur(e,t.Po)})).then((function(){t.po=!0})).catch((function(e){return t.Fo&&t.Fo.close(),Promise.reject(e)}))},t.prototype.qo=function(t){var e=this;return this.Co=function(r){return n.__awaiter(e,void 0,void 0,(function(){return n.__generator(this,(function(e){return this.tr?[2,t(r)]:[2]}))}))},t(this.isPrimary)},t.prototype.Bo=function(t){var e=this;this.Fo.Bs((function(r){return n.__awaiter(e,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return null===r.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Uo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ms.ai((function(){return n.__awaiter(e,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.tr?[4,this.xo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.xo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return mi(e).put(new ri(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Qo(e).next((function(e){e||(t.isPrimary=!1,t.ms.gi((function(){return t.Co(!1)})))}))})).next((function(){return t.Wo(e)})).next((function(r){return t.isPrimary&&!r?t.jo(e).next((function(){return!1})):!!r&&t.Ko(e).next((function(){return!0}))}))})).catch((function(e){if(Xr(e))return c("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return c("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.ms.gi((function(){return t.Co(e)})),t.isPrimary=e}))},t.prototype.Qo=function(t){var e=this;return di(t).get(zn.key).next((function(t){return $r.resolve(e.Go(t))}))},t.prototype.zo=function(t){return mi(t).delete(this.clientId)},t.prototype.Ho=function(){return n.__awaiter(this,void 0,void 0,(function(){var e,r,i,s,o=this;return n.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.Yo(this.Do,18e5)?[3,2]:(this.Do=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var r=t.Ms(e,ri.store);return r.Hs().next((function(t){var e=o.Jo(t,18e5),n=t.filter((function(t){return-1===e.indexOf(t)}));return $r.forEach(n,(function(t){return r.delete(t.clientId)})).next((function(){return n}))}))})).catch((function(){return[]}))]);case 1:if(e=n.sent(),this.$o)for(r=0,i=e;r<i.length;r++)s=i[r],this.$o.removeItem(this.Xo(s.clientId));n.label=2;case 2:return[2]}}))}))},t.prototype.Lo=function(){var t=this;this.So=this.ms.Ss("client_metadata_refresh",4e3,(function(){return t.xo().then((function(){return t.Ho()})).then((function(){return t.Lo()}))}))},t.prototype.Go=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Wo=function(t){var e=this;return this.Vo?$r.resolve(!0):di(t).get(zn.key).next((function(r){if(null!==r&&e.Yo(r.leaseTimestampMs,5e3)&&!e.Zo(r.ownerId)){if(e.Go(r)&&e.networkEnabled)return!0;if(!e.Go(r)){if(!r.allowTabSynchronization)throw new D(C.FAILED_PRECONDITION,ci);return!1}}return!(!e.networkEnabled||!e.inForeground)||mi(t).Hs().next((function(t){return void 0===e.Jo(t,5e3).find((function(t){if(e.clientId!==t.clientId){var r=!e.networkEnabled&&t.networkEnabled,n=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(r||n&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&c("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.th=function(){return n.__awaiter(this,void 0,void 0,(function(){var t=this;return n.__generator(this,(function(e){switch(e.label){case 0:return this.po=!1,this.eh(),this.So&&(this.So.cancel(),this.So=null),this.nh(),this.sh(),[4,this.Fo.runTransaction("readwrite",[zn.store,ri.store],(function(e){var r=new fi(e,Ur.Es);return t.jo(r).next((function(){return t.zo(r)}))}))];case 1:return e.sent(),this.Fo.close(),this.ih(),[2]}}))}))},t.prototype.Jo=function(t,e){var r=this;return t.filter((function(t){return r.Yo(t.updateTimeMs,e)&&!r.Zo(t.clientId)}))},t.prototype.rh=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return mi(e).Hs().next((function(e){return t.Jo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),t.prototype.oh=function(t){return In.Tr(t,this.serializer,this.zn,this.dr)},t.prototype.hh=function(){return this.ko},t.prototype.ah=function(){return this.Kn},t.prototype.uh=function(){return this.zn},t.prototype.runTransaction=function(t,e,r){var n=this;c("IndexedDbPersistence","Starting transaction:",t);var i,s="readonly"===e?"readonly":"readwrite";return this.Fo.runTransaction(s,ni,(function(s){return i=new fi(s,n.yo?n.yo.next():Ur.Es),"readwrite-primary"===e?n.Qo(i).next((function(t){return!!t||n.Wo(i)})).next((function(e){if(!e)throw f("Failed to obtain primary lease for action '"+t+"'."),n.isPrimary=!1,n.ms.gi((function(){return n.Co(!1)})),new D(C.FAILED_PRECONDITION,jr);return r(i)})).next((function(t){return n.Ko(i).next((function(){return t}))})):n.lh(i).next((function(){return r(i)}))})).then((function(t){return i.jn(),t}))},t.prototype.lh=function(t){var e=this;return di(t).get(zn.key).next((function(t){if(null!==t&&e.Yo(t.leaseTimestampMs,5e3)&&!e.Zo(t.ownerId)&&!e.Go(t)&&!(e.Vo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new D(C.FAILED_PRECONDITION,ci)}))},t.prototype.Ko=function(t){var e=new zn(this.clientId,this.allowTabSynchronization,Date.now());return di(t).put(zn.key,e)},t.ks=function(){return Wr.ks()},t.prototype.jo=function(t){var e=this,r=di(t);return r.get(zn.key).next((function(t){return e.Go(t)?(c("IndexedDbPersistence","Releasing primary lease."),r.delete(zn.key)):$r.resolve()}))},t.prototype.Yo=function(t,e){var r=Date.now();return!(t<r-e||t>r&&(f("Detected an update time that is in the future: "+t+" > "+r),1))},t.prototype.Oo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.vo=function(){t.ms.ai((function(){return t.inForeground="visible"===t.document.visibilityState,t.xo()}))},this.document.addEventListener("visibilitychange",this.vo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.nh=function(){this.vo&&(this.document.removeEventListener("visibilitychange",this.vo),this.vo=null)},t.prototype.Mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.bo=function(){e.eh(),e.ms.ai((function(){return e.th()}))},this.window.addEventListener("unload",this.bo))},t.prototype.sh=function(){this.bo&&(this.window.removeEventListener("unload",this.bo),this.bo=null)},t.prototype.Zo=function(t){var e;try{var r=null!==(null===(e=this.$o)||void 0===e?void 0:e.getItem(this.Xo(t)));return c("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(t){return f("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.eh=function(){if(this.$o)try{this.$o.setItem(this.Xo(this.clientId),String(Date.now()))}catch(t){f("Failed to set zombie client id.",t)}},t.prototype.ih=function(){if(this.$o)try{this.$o.removeItem(this.Xo(this.clientId))}catch(t){}},t.prototype.Xo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function di(t){return pi.Ms(t,zn.store)}function mi(t){return pi.Ms(t,ri.store)}var yi=function(){function t(t,e){this.db=t,this.Yi=new pn(this,e)}return t.prototype.ir=function(t){var e=this._h(t);return this.db.hh().do(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype._h=function(t){var e=0;return this.or(t,(function(t){e++})).next((function(){return e}))},t.prototype.be=function(t,e){return this.db.hh().be(t,e)},t.prototype.or=function(t,e){return this.fh(t,(function(t,r){return e(r)}))},t.prototype.Eo=function(t,e,r){return vi(t,r)},t.prototype.Io=function(t,e,r){return vi(t,r)},t.prototype.hr=function(t,e,r){return this.db.hh().hr(t,e,r)},t.prototype.Dr=function(t,e){return vi(t,e)},t.prototype.dh=function(t,e){return function(t,e){var r=!1;return Mn(t).ti((function(n){return Cn(t,n,e).next((function(t){return t&&(r=!0),$r.resolve(!t)}))})).next((function(){return r}))}(t,e)},t.prototype.ar=function(t,e){var r=this,n=this.db.ah().jr(),i=[],s=0;return this.fh(t,(function(o,a){if(a<=e){var l=r.dh(t,o).next((function(e){if(!e)return s++,n.Ln(t,o).next((function(){return n.Mn(o),ui(t).delete([0,dn(o.path)])}))}));i.push(l)}})).next((function(){return $r.Cn(i)})).next((function(){return n.apply(t)})).next((function(){return s}))},t.prototype.removeTarget=function(t,e){var r=e.tt(t.Ro);return this.db.hh().lo(t,r)},t.prototype.wh=function(t,e){return vi(t,e)},t.prototype.fh=function(t,e){var r,n=ui(t),i=Ur.Es;return n.Zs({index:Jn.documentTargetsIndex},(function(t,n){var s=t[0],o=(t[1],n.path),a=n.sequenceNumber;0===s?(i!==Ur.Es&&e(new L(vn(r)),i),i=a,r=o):i=Ur.Es})).next((function(){i!==Ur.Es&&e(new L(vn(r)),i)}))},t.prototype.ur=function(t){return this.db.ah().zr(t)},t}();function vi(t,e){return ui(t).put(function(t,e){return new Jn(0,dn(t.path),e)}(e,t.Ro))}function gi(t,e){var r=t.projectId;return t.i||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}var bi=function(){function t(t,e,r){this.persistence=t,this.Th=e,this.Eh=new Z(_),this.mh=new I((function(t){return z(t)}),U),this.Ih=O.min(),this.Gn=t.oh(r),this.Ah=t.ah(),this.ko=t.hh(),this.Rh=new Gr(this.Ah,this.Gn,this.persistence.uh()),this.Th.Ph(this.Rh)}return t.prototype.er=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(r){return t.cr(r,e.Eh)}))},t}();function _i(t,e){var r=v(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var n=e.batch.keys(),i=r.Ah.jr({Gr:!0});return function(t,e,r,n){var i=r.batch,s=i.keys(),o=$r.resolve();return s.forEach((function(t){o=o.next((function(){return n.Ln(e,t)})).next((function(e){var s=e,o=r.Pn.get(t);y(null!==o),(!s||s.version.o(o)<0)&&(s=i.En(t,s,r))&&n.xn(s,r.Rn)}))})),o.next((function(){return t.Gn.br(e,i)}))}(r,t,e,i).next((function(){return i.apply(t)})).next((function(){return r.Gn.Cr(t)})).next((function(){return r.Rh.Zn(t,n)}))}))}function wi(t){var e=v(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ko.ro(t)}))}function Ei(t,e){var r=v(t),n=e.Z,i=r.Eh;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var s=r.Ah.jr({Gr:!0});i=r.Eh;var o=[];e.Wt.forEach((function(e,s){var a=i.get(s);if(a){o.push(r.ko.mo(t,e.Zt,s).next((function(){return r.ko.To(t,e.Jt,s)})));var l=e.resumeToken;if(l.Y()>0){var h=a.et(l,n).tt(t.Ro);i=i.st(s,h),function(t,e,r){return y(e.resumeToken.Y()>0),0===t.resumeToken.Y()||e.Z.I()-t.Z.I()>=3e8||r.Jt.size+r.Xt.size+r.Zt.size>0}(a,h,e)&&o.push(r.ko.lo(t,h))}}}));var a=st(),l=ct();if(e.Kt.forEach((function(t,e){l=l.add(t)})),o.push(s.getEntries(t,l).next((function(i){e.Kt.forEach((function(l,h){var u=i.get(l);h instanceof nr&&h.version.isEqual(O.min())?(s.Mn(l,n),a=a.st(l,h)):null==u||h.version.o(u.version)>0||0===h.version.o(u.version)&&u.hasPendingWrites?(s.xn(h,n),a=a.st(l,h)):c("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",h.version),e.Gt.has(l)&&o.push(r.persistence.dr.wh(t,l))}))}))),!n.isEqual(O.min())){var h=r.ko.ro(t).next((function(e){return r.ko.ho(t,t.Ro,n)}));o.push(h)}return $r.Cn(o).next((function(){return s.apply(t)})).next((function(){return r.Rh.ts(t,a)}))})).then((function(t){return r.Eh=i,t}))}function Si(t,e){var r=v(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),r.Gn.gr(t,e)}))}function Ti(t,e){var r=v(t);return r.persistence.runTransaction("Allocate target","readwrite",(function(t){var n;return r.ko.wo(t,e).next((function(i){return i?(n=i,$r.resolve(n)):r.ko.no(t).next((function(i){return n=new K(e,i,0,t.Ro),r.ko.ao(t,n).next((function(){return n}))}))}))})).then((function(t){var n=r.Eh.get(t.targetId);return(null===n||t.Z.o(n.Z)>0)&&(r.Eh=r.Eh.st(t.targetId,t),r.mh.set(e,t.targetId)),t}))}function xi(t,e,r){return n.__awaiter(this,void 0,void 0,(function(){var i,s,o,a;return n.__generator(this,(function(n){switch(n.label){case 0:i=v(t),s=i.Eh.get(e),o=r?"readwrite":"readwrite-primary",n.label=1;case 1:return n.trys.push([1,4,,5]),r?[3,3]:[4,i.persistence.runTransaction("Release target",o,(function(t){return i.persistence.dr.removeTarget(t,s)}))];case 2:n.sent(),n.label=3;case 3:return[3,5];case 4:if(!Xr(a=n.sent()))throw a;return c("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return i.Eh=i.Eh.remove(e),i.mh.delete(s.target),[2]}}))}))}function Ai(t,e,r){var n=v(t),i=O.min(),s=ct();return n.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,r){var n=v(t),i=n.mh.get(r);return void 0!==i?$r.resolve(n.Eh.get(i)):n.ko.wo(e,r)}(n,t,cr(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,n.ko.Ao(t,e.targetId).next((function(t){s=t}))})).next((function(){return n.Th.ns(t,e,r?i:O.min(),r?s:ct())})).next((function(t){return{documents:t,gh:s}}))}))}function Pi(t,e){var r=v(t),n=v(r.ko),i=r.Eh.get(e);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",(function(t){return n.Me(t,e).next((function(t){return t?t.target:null}))}))}function Ii(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){if(t.code!==C.FAILED_PRECONDITION||t.message!==jr)throw t;return c("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var Ci=function(){function t(){this.Vh=new rt(Di.yh),this.ph=new rt(Di.bh)}return t.prototype._=function(){return this.Vh._()},t.prototype.Eo=function(t,e){var r=new Di(t,e);this.Vh=this.Vh.add(r),this.ph=this.ph.add(r)},t.prototype.vh=function(t,e){var r=this;t.forEach((function(t){return r.Eo(t,e)}))},t.prototype.Io=function(t,e){this.Sh(new Di(t,e))},t.prototype.Dh=function(t,e){var r=this;t.forEach((function(t){return r.Io(t,e)}))},t.prototype.Ch=function(t){var e=this,r=new L(new R([])),n=new Di(r,t),i=new Di(r,t+1),s=[];return this.ph.St([n,i],(function(t){e.Sh(t),s.push(t.key)})),s},t.prototype.Nh=function(){var t=this;this.Vh.forEach((function(e){return t.Sh(e)}))},t.prototype.Sh=function(t){this.Vh=this.Vh.delete(t),this.ph=this.ph.delete(t)},t.prototype.Fh=function(t){var e=new L(new R([])),r=new Di(e,t),n=new Di(e,t+1),i=ct();return this.ph.St([r,n],(function(t){i=i.add(t.key)})),i},t.prototype.Nr=function(t){var e=new Di(t,0),r=this.Vh.Ct(e);return null!==r&&t.isEqual(r.key)},t}(),Di=function(){function t(t,e){this.key=t,this.kh=e}return t.yh=function(t,e){return L.P(t.key,e.key)||_(t.kh,e.kh)},t.bh=function(t,e){return _(t.kh,e.kh)||L.P(t.key,e.key)},t}(),ki=function(){function t(t){this.uid=t}return t.prototype.Er=function(){return null!=this.uid},t.prototype.$h=function(){return this.Er()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();ki.UNAUTHENTICATED=new ki(null),ki.xh=new ki("google-credentials-uid"),ki.Oh=new ki("first-party-uid");
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var Oi=function(t,e){this.user=e,this.type="OAuth",this.Mh={},this.Mh.Authorization="Bearer "+t},Mi=function(){function t(){this.Lh=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.qh=function(){},t.prototype.Bh=function(t){this.Lh=t,t(ki.UNAUTHENTICATED)},t.prototype.Uh=function(){this.Lh=null},t}(),Ri=function(){function t(t){var e=this;this.Qh=null,this.currentUser=ki.UNAUTHENTICATED,this.Wh=!1,this.jh=0,this.Lh=null,this.forceRefresh=!1,this.Qh=function(){e.jh++,e.currentUser=e.Kh(),e.Wh=!0,e.Lh&&e.Lh(e.currentUser)},this.jh=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Qh):(this.Qh(null),t.get().then((function(t){e.auth=t,e.Qh&&e.auth.addAuthTokenListener(e.Qh)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.jh,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((function(r){return t.jh!==e?(c("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):r?(y("string"==typeof r.accessToken),new Oi(r.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.qh=function(){this.forceRefresh=!0},t.prototype.Bh=function(t){this.Lh=t,this.Wh&&t(this.currentUser)},t.prototype.Uh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Qh),this.Qh=null,this.Lh=null},t.prototype.Kh=function(){var t=this.auth&&this.auth.getUid();return y(null===t||"string"==typeof t),new ki(t)},t}(),Fi=function(){function t(t,e){this.Gh=t,this.zh=e,this.type="FirstParty",this.user=ki.Oh}return Object.defineProperty(t.prototype,"Mh",{get:function(){var t={"X-Goog-AuthUser":this.zh},e=this.Gh.auth.Hh([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Ni=function(){function t(t,e){this.Gh=t,this.zh=e}return t.prototype.getToken=function(){return Promise.resolve(new Fi(this.Gh,this.zh))},t.prototype.Bh=function(t){t(ki.Oh)},t.prototype.Uh=function(){},t.prototype.qh=function(){},t}(),Li=function(){function t(t,e,r,n,i,s){this.ms=t,this.Yh=r,this.Jh=n,this.Xh=i,this.listener=s,this.state=0,this.Zh=0,this.ta=null,this.stream=null,this.Ti=new Hr(t,e)}return t.prototype.ea=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.na=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.sa()},t.prototype.stop=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.ea()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ia=function(){this.state=0,this.Ti.reset()},t.prototype.ra=function(){var t=this;this.na()&&null===this.ta&&(this.ta=this.ms.Ss(this.Yh,6e4,(function(){return t.oa()})))},t.prototype.ha=function(t){this.aa(),this.stream.send(t)},t.prototype.oa=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return this.na()?[2,this.close(0)]:[2]}))}))},t.prototype.aa=function(){this.ta&&(this.ta.cancel(),this.ta=null)},t.prototype.close=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(r){switch(r.label){case 0:return this.aa(),this.Ti.cancel(),this.Zh++,3!==t?this.Ti.reset():e&&e.code===C.RESOURCE_EXHAUSTED?(f(e.toString()),f("Using maximum backoff delay to prevent overloading the backend."),this.Ti.ps()):e&&e.code===C.UNAUTHENTICATED&&this.Xh.qh(),null!==this.stream&&(this.ca(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.ua(e)];case 1:return r.sent(),[2]}}))}))},t.prototype.ca=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.la(this.Zh),r=this.Zh;this.Xh.getToken().then((function(e){t.Zh===r&&t._a(e)}),(function(r){e((function(){var e=new D(C.UNKNOWN,"Fetching auth token failed: "+r.message);return t.fa(e)}))}))},t.prototype._a=function(t){var e=this,r=this.la(this.Zh);this.stream=this.da(t),this.stream.wa((function(){r((function(){return e.state=2,e.listener.wa()}))})),this.stream.ua((function(t){r((function(){return e.fa(t)}))})),this.stream.onMessage((function(t){r((function(){return e.onMessage(t)}))}))},t.prototype.sa=function(){var t=this;this.state=4,this.Ti.bs((function(){return n.__awaiter(t,void 0,void 0,(function(){return n.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.fa=function(t){return c("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.la=function(t){var e=this;return function(r){e.ms.ai((function(){return e.Zh===t?r():(c("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),$i=function(t){function e(e,r,n,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",r,n,s)||this).serializer=i,o}return n.__extends(e,t),e.prototype.da=function(t){return this.Jh.Ta("Listen",t)},e.prototype.onMessage=function(t){this.Ti.reset();var e=function(t,e){var r;if("targetChange"in e){e.targetChange;var n=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:m()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.Le?(y(void 0===e||"string"==typeof e),H.fromBase64String(e||"")):(y(void 0===e||e instanceof Uint8Array),H.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){var e=void 0===t.code?C.UNKNOWN:J(t.code);return new D(e,t.message||"")}(o);r=new wt(n,i,s,a||null)}else if("documentChange"in e){e.documentChange;var l=e.documentChange;l.document,l.document.name,l.document.updateTime;var h=ne(t,l.document.name),u=Zt(l.document.updateTime),c=new Je({mapValue:{fields:l.document.fields}}),f=new rr(h,u,c,{}),p=l.targetIds||[],d=l.removedTargetIds||[];r=new bt(p,d,f.key,f)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var g=ne(t,v.document),b=v.readTime?Zt(v.readTime):O.min(),_=new nr(g,b),w=v.removedTargetIds||[];r=new bt([],w,_.key,_)}else if("documentRemove"in e){e.documentRemove;var E=e.documentRemove;E.document;var S=ne(t,E.document),T=E.removedTargetIds||[];r=new bt([],T,S,null)}else{if(!("filter"in e))return m();e.filter;var x=e.filter;x.targetId;var A=x.count||0,P=new X(A),I=x.targetId;r=new _t(I,P)}return r}(this.serializer,t),r=function(t){if(!("targetChange"in t))return O.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?O.min():e.readTime?Zt(e.readTime):O.min()}(t);return this.listener.Ea(e,r)},e.prototype.ma=function(t){var e={};e.database=oe(this.serializer),e.addTarget=function(t,e){var r,n=e.target;return(r=q(n)?{documents:ce(t,n)}:{query:fe(t,n)}).targetId=e.targetId,e.resumeToken.Y()>0&&(r.resumeToken=Qt(t,e.resumeToken)),r}(this.serializer,t);var r=function(t,e){var r=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return m()}}(0,e.X);return null==r?null:{"goog-listen-tags":r}}(this.serializer,t);r&&(e.labels=r),this.ha(e)},e.prototype.Ia=function(t){var e={};e.database=oe(this.serializer),e.removeTarget=t,this.ha(e)},e}(Li),Vi=function(t){function e(e,r,n,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",r,n,s)||this).serializer=i,o.Aa=!1,o}return n.__extends(e,t),Object.defineProperty(e.prototype,"Ra",{get:function(){return this.Aa},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Aa=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ca=function(){this.Aa&&this.Pa([])},e.prototype.da=function(t){return this.Jh.Ta("Write",t)},e.prototype.onMessage=function(t){if(y(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Aa){this.Ti.reset();var e=function(t,e){return t&&t.length>0?(y(void 0!==e),t.map((function(t){return function(t,e){var r=t.updateTime?Zt(t.updateTime):Zt(e);r.isEqual(O.min())&&(r=Zt(e));var n=null;return t.transformResults&&t.transformResults.length>0&&(n=t.transformResults),new Fe(r,n)}(t,e)}))):[]}(t.writeResults,t.commitTime),r=Zt(t.commitTime);return this.listener.ga(r,e)}return y(!t.writeResults||0===t.writeResults.length),this.Aa=!0,this.listener.Va()},e.prototype.ya=function(){var t={};t.database=oe(this.serializer),this.ha(t)},e.prototype.Pa=function(t){var e=this,r={streamToken:this.lastStreamToken,writes:t.map((function(t){return he(e.serializer,t)}))};this.ha(r)},e}(Li),ji=function(t){function e(e,r,n){var i=this;return(i=t.call(this)||this).credentials=e,i.Jh=r,i.serializer=n,i.pa=!1,i}return n.__extends(e,t),e.prototype.ba=function(){if(this.pa)throw new D(C.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.va=function(t,e,r){var n=this;return this.ba(),this.credentials.getToken().then((function(i){return n.Jh.va(t,e,r,i)})).catch((function(t){throw t.code===C.UNAUTHENTICATED&&n.credentials.qh(),t}))},e.prototype.Sa=function(t,e,r){var n=this;return this.ba(),this.credentials.getToken().then((function(i){return n.Jh.Sa(t,e,r,i)})).catch((function(t){throw t.code===C.UNAUTHENTICATED&&n.credentials.qh(),t}))},e.prototype.terminate=function(){this.pa=!1},e}((function(){})),Bi=function(){function t(t,e){this.ei=t,this.Da=e,this.state="Unknown",this.Ca=0,this.Na=null,this.Fa=!0}return t.prototype.ka=function(){var t=this;0===this.Ca&&(this.$a("Unknown"),this.Na=this.ei.Ss("online_state_timeout",1e4,(function(){return t.Na=null,t.xa("Backend didn't respond within 10 seconds."),t.$a("Offline"),Promise.resolve()})))},t.prototype.Oa=function(t){"Online"===this.state?this.$a("Unknown"):(this.Ca++,this.Ca>=1&&(this.Ma(),this.xa("Connection failed 1 times. Most recent error: "+t.toString()),this.$a("Offline")))},t.prototype.set=function(t){this.Ma(),this.Ca=0,"Online"===t&&(this.Fa=!1),this.$a(t)},t.prototype.$a=function(t){t!==this.state&&(this.state=t,this.Da(t))},t.prototype.xa=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fa?(f(e),this.Fa=!1):c("OnlineStateTracker",e)},t.prototype.Ma=function(){null!==this.Na&&(this.Na.cancel(),this.Na=null)},t}(),Gi=function(){function t(t,e,r,i,s){var o=this;this.La=t,this.qa=e,this.ei=r,this.Ba=[],this.Ua=new Map,this.Qa=null,this.Wa=new Set,this.ja=s,this.ja.Ka((function(t){r.ai((function(){return n.__awaiter(o,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.Ga()?(c("RemoteStore","Restarting streams for network reachability change."),[4,this.za()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Ha=new Bi(r,i),this.Ya=function(t,e,r){var n=v(t);return n.ba(),new $i(e,n.Jh,n.credentials,n.serializer,r)}(this.qa,r,{wa:this.Ja.bind(this),ua:this.Xa.bind(this),Ea:this.Za.bind(this)}),this.tc=function(t,e,r){var n=v(t);return n.ba(),new Vi(e,n.Jh,n.credentials,n.serializer,r)}(this.qa,r,{wa:this.ec.bind(this),ua:this.nc.bind(this),Va:this.sc.bind(this),ga:this.ga.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.Wa.delete(0),this.ic()},t.prototype.ic=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.Ga()?(this.rc()?this.oc():this.Ha.set("Unknown"),[4,this.hc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.Wa.add(0),[4,this.ac()];case 1:return t.sent(),this.Ha.set("Offline"),[2]}}))}))},t.prototype.ac=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,this.tc.stop()];case 1:return t.sent(),[4,this.Ya.stop()];case 2:return t.sent(),this.Ba.length>0&&(c("RemoteStore","Stopping write stream with "+this.Ba.length+" pending writes"),this.Ba=[]),this.cc(),[2]}}))}))},t.prototype.th=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return c("RemoteStore","RemoteStore shutting down."),this.Wa.add(5),[4,this.ac()];case 1:return t.sent(),this.ja.th(),this.Ha.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Ua.has(t.targetId)||(this.Ua.set(t.targetId,t),this.rc()?this.oc():this.Ya.na()&&this.uc(t))},t.prototype.lc=function(t){this.Ua.delete(t),this.Ya.na()&&this._c(t),0===this.Ua.size&&(this.Ya.na()?this.Ya.ra():this.Ga()&&this.Ha.set("Unknown"))},t.prototype.Me=function(t){return this.Ua.get(t)||null},t.prototype.Oe=function(t){return this.fc.Oe(t)},t.prototype.uc=function(t){this.Qa.we(t.targetId),this.Ya.ma(t)},t.prototype._c=function(t){this.Qa.we(t),this.Ya.Ia(t)},t.prototype.oc=function(){this.Qa=new St(this),this.Ya.start(),this.Ha.ka()},t.prototype.rc=function(){return this.Ga()&&!this.Ya.ea()&&this.Ua.size>0},t.prototype.Ga=function(){return 0===this.Wa.size},t.prototype.cc=function(){this.Qa=null},t.prototype.Ja=function(){return n.__awaiter(this,void 0,void 0,(function(){var t=this;return n.__generator(this,(function(e){return this.Ua.forEach((function(e,r){t.uc(e)})),[2]}))}))},t.prototype.Xa=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){return this.cc(),this.rc()?(this.Ha.Oa(t),this.oc()):this.Ha.set("Unknown"),[2]}))}))},t.prototype.Za=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s;return n.__generator(this,(function(n){switch(n.label){case 0:if(this.Ha.set("Online"),!(t instanceof wt&&2===t.state&&t.cause))return[3,6];n.label=1;case 1:return n.trys.push([1,3,,5]),[4,this.dc(t)];case 2:return n.sent(),[3,5];case 3:return r=n.sent(),c("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,this.wc(r)];case 4:return n.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof bt?this.Qa.ge(t):t instanceof _t?this.Qa.Ce(t):this.Qa.pe(t),e.isEqual(O.min()))return[3,13];n.label=7;case 7:return n.trys.push([7,11,,13]),[4,wi(this.La)];case 8:return i=n.sent(),e.o(i)>=0?[4,this.Tc(e)]:[3,10];case 9:n.sent(),n.label=10;case 10:return[3,13];case 11:return c("RemoteStore","Failed to raise snapshot:",s=n.sent()),[4,this.wc(s)];case 12:return n.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.wc=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r=this;return n.__generator(this,(function(i){switch(i.label){case 0:if(!Xr(t))throw t;return this.Wa.add(1),[4,this.ac()];case 1:return i.sent(),this.Ha.set("Offline"),e||(e=function(){return wi(r.La)}),this.ei.gi((function(){return n.__awaiter(r,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return c("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.Wa.delete(1),[4,this.ic()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.Ec=function(t){var e=this;return t().catch((function(r){return e.wc(r,t)}))},t.prototype.Tc=function(t){var e=this,r=this.Qa.ke(t);return r.Wt.forEach((function(r,n){if(r.resumeToken.Y()>0){var i=e.Ua.get(n);i&&e.Ua.set(n,i.et(r.resumeToken,t))}})),r.jt.forEach((function(t){var r=e.Ua.get(t);if(r){e.Ua.set(t,r.et(H.J,r.Z)),e._c(t);var n=new K(r.target,t,1,r.sequenceNumber);e.uc(n)}})),this.fc.mc(r)},t.prototype.dc=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r,i,s;return n.__generator(this,(function(n){switch(n.label){case 0:e=t.cause,r=0,i=t.targetIds,n.label=1;case 1:return r<i.length?(s=i[r],this.Ua.has(s)?[4,this.fc.Ic(s,e)]:[3,3]):[3,5];case 2:n.sent(),this.Ua.delete(s),this.Qa.removeTarget(s),n.label=3;case 3:n.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))},t.prototype.hc=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e,r;return n.__generator(this,(function(n){switch(n.label){case 0:t=this.Ba.length>0?this.Ba[this.Ba.length-1].batchId:-1,n.label=1;case 1:if(!this.Ac())return[3,7];n.label=2;case 2:return n.trys.push([2,4,,6]),[4,Si(this.La,t)];case 3:return null===(e=n.sent())?(0===this.Ba.length&&this.tc.ra(),[3,7]):(t=e.batchId,this.Rc(e),[3,6]);case 4:return r=n.sent(),[4,this.wc(r)];case 5:return n.sent(),[3,6];case 6:return[3,1];case 7:return this.Pc()&&this.gc(),[2]}}))}))},t.prototype.Ac=function(){return this.Ga()&&this.Ba.length<10},t.prototype.Vc=function(){return this.Ba.length},t.prototype.Rc=function(t){this.Ba.push(t),this.tc.na()&&this.tc.Ra&&this.tc.Pa(t.mutations)},t.prototype.Pc=function(){return this.Ga()&&!this.tc.ea()&&this.Ba.length>0},t.prototype.gc=function(){this.tc.start()},t.prototype.ec=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return this.tc.ya(),[2]}))}))},t.prototype.sc=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e,r;return n.__generator(this,(function(n){for(t=0,e=this.Ba;t<e.length;t++)r=e[t],this.tc.Pa(r.mutations);return[2]}))}))},t.prototype.ga=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s=this;return n.__generator(this,(function(n){switch(n.label){case 0:return r=this.Ba.shift(),i=Lr.from(r,t,e),[4,this.Ec((function(){return s.fc.yc(i)}))];case 1:return n.sent(),[4,this.hc()];case 2:return n.sent(),[2]}}))}))},t.prototype.nc=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return t&&this.tc.Ra?[4,this.pc(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Pc()&&this.gc(),[2]}}))}))},t.prototype.pc=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r,i=this;return n.__generator(this,(function(n){switch(n.label){case 0:return Q(r=t.code)&&r!==C.ABORTED?(e=this.Ba.shift(),this.tc.ia(),[4,this.Ec((function(){return i.fc.bc(e.batchId,t)}))]):[3,3];case 1:return n.sent(),[4,this.hc()];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.za=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.Wa.add(4),[4,this.ac()];case 1:return t.sent(),this.Ha.set("Unknown"),this.tc.ia(),this.Ya.ia(),this.Wa.delete(4),[4,this.ic()];case 2:return t.sent(),[2]}}))}))},t.prototype.vc=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return this.ei.pi(),c("RemoteStore","RemoteStore received new credentials"),this.Wa.add(3),[4,this.ac()];case 1:return e.sent(),this.Ha.set("Unknown"),[4,this.fc.vc(t)];case 2:return e.sent(),this.Wa.delete(3),[4,this.ic()];case 3:return e.sent(),[2]}}))}))},t.prototype.Sc=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return t?(this.Wa.delete(2),[4,this.ic()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.Wa.add(2),[4,this.ac()]);case 3:e.sent(),this.Ha.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function zi(t,e){return"firestore_clients_"+t+"_"+e}function Ui(t,e,r){var n="firestore_mutations_"+t+"_"+r;return e.Er()&&(n+="_"+e.uid),n}function qi(t,e){return"firestore_targets_"+t+"_"+e}var Hi=function(){function t(t,e,r,n){this.user=t,this.batchId=e,this.state=r,this.error=n}return t.Dc=function(e,r,n){var i=JSON.parse(n),s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),o=void 0;return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(o=new D(i.error.code,i.error.message)),s?new t(e,r,i.state,o):(f("SharedClientState","Failed to parse mutation state for ID '"+r+"': "+n),null)},t.prototype.Cc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wi=function(){function t(t,e,r){this.targetId=t,this.state=e,this.error=r}return t.Dc=function(e,r){var n=JSON.parse(r),i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),s=void 0;return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(s=new D(n.error.code,n.error.message)),i?new t(e,n.state,s):(f("SharedClientState","Failed to parse target state for ID '"+e+"': "+r),null)},t.prototype.Cc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Dc=function(e,r){for(var n=JSON.parse(r),i="object"==typeof n&&n.activeTargetIds instanceof Array,s=pt(),o=0;i&&o<n.activeTargetIds.length;++o)i=j(n.activeTargetIds[o]),s=s.add(n.activeTargetIds[o]);return i?new t(e,s):(f("SharedClientState","Failed to parse client data for instance '"+e+"': "+r),null)},t}(),Ki=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Dc=function(e){var r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new t(r.clientId,r.onlineState):(f("SharedClientState","Failed to parse online state: "+e),null)},t}(),Xi=function(){function t(){this.activeTargetIds=pt()}return t.prototype.Nc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Fc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Cc=function(){var t={activeTargetIds:this.activeTargetIds.N(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Qi=function(){function t(t,e,r,n,i){this.window=t,this.ms=e,this.persistenceKey=r,this.kc=n,this.fc=null,this.Da=null,this.fs=null,this.$c=this.xc.bind(this),this.Oc=new Z(_),this.tr=!1,this.Mc=[];var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Lc=zi(this.persistenceKey,this.kc),this.qc=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Oc=this.Oc.st(this.kc,new Xi),this.Bc=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Uc=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.Qc=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Wc=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.$c)}return t.ks=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e,r,i,s,o,a,l,h,u,c,f=this;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,this.fc.rh()];case 1:for(t=n.sent(),e=0,r=t;e<r.length;e++)(i=r[e])!==this.kc&&(s=this.getItem(zi(this.persistenceKey,i)))&&(o=Yi.Dc(i,s))&&(this.Oc=this.Oc.st(o.clientId,o));for(this.jc(),(a=this.storage.getItem(this.Wc))&&(l=this.Kc(a))&&this.Gc(l),h=0,u=this.Mc;h<u.length;h++)c=u[h],this.xc(c);return this.Mc=[],this.window.addEventListener("unload",(function(){return f.th()})),this.tr=!0,[2]}}))}))},t.prototype.Ts=function(t){this.setItem(this.qc,JSON.stringify(t))},t.prototype.zc=function(){return this.Hc(this.Oc)},t.prototype.Yc=function(t){var e=!1;return this.Oc.forEach((function(r,n){n.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Jc=function(t){this.Xc(t,"pending")},t.prototype.Zc=function(t,e,r){this.Xc(t,e,r),this.tu(t)},t.prototype.eu=function(t){var e="not-current";if(this.Yc(t)){var r=this.storage.getItem(qi(this.persistenceKey,t));if(r){var n=Wi.Dc(t,r);n&&(e=n.state)}}return this.nu.Nc(t),this.jc(),e},t.prototype.su=function(t){this.nu.Fc(t),this.jc()},t.prototype.iu=function(t){return this.nu.activeTargetIds.has(t)},t.prototype.ru=function(t){this.removeItem(qi(this.persistenceKey,t))},t.prototype.ou=function(t,e,r){this.hu(t,e,r)},t.prototype.au=function(t,e,r){var n=this;e.forEach((function(t){n.tu(t)})),this.currentUser=t,r.forEach((function(t){n.Jc(t)}))},t.prototype.cu=function(t){this.uu(t)},t.prototype.th=function(){this.tr&&(this.window.removeEventListener("storage",this.$c),this.removeItem(this.Lc),this.tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return c("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){c("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){c("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.xc=function(t){var e=this,r=t;if(r.storageArea===this.storage){if(c("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Lc)return void f("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ms.gi((function(){return n.__awaiter(e,void 0,void 0,(function(){var t,e,i,s,o,a;return n.__generator(this,(function(n){if(this.tr){if(null!==r.key)if(this.Bc.test(r.key)){if(null==r.newValue)return t=this.lu(r.key),[2,this._u(t,null)];if(e=this.fu(r.key,r.newValue))return[2,this._u(e.clientId,e)]}else if(this.Uc.test(r.key)){if(null!==r.newValue&&(i=this.du(r.key,r.newValue)))return[2,this.wu(i)]}else if(this.Qc.test(r.key)){if(null!==r.newValue&&(s=this.Tu(r.key,r.newValue)))return[2,this.Eu(s)]}else if(r.key===this.Wc){if(null!==r.newValue&&(o=this.Kc(r.newValue)))return[2,this.Gc(o)]}else r.key===this.qc&&(a=function(t){var e=Ur.Es;if(null!=t)try{var r=JSON.parse(t);y("number"==typeof r),e=r}catch(t){f("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(r.newValue))!==Ur.Es&&this.fs(a)}else this.Mc.push(r);return[2]}))}))}))}},Object.defineProperty(t.prototype,"nu",{get:function(){return this.Oc.get(this.kc)},enumerable:!1,configurable:!0}),t.prototype.jc=function(){this.setItem(this.Lc,this.nu.Cc())},t.prototype.Xc=function(t,e,r){var n=new Hi(this.currentUser,t,e,r),i=Ui(this.persistenceKey,this.currentUser,t);this.setItem(i,n.Cc())},t.prototype.tu=function(t){var e=Ui(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.uu=function(t){var e={clientId:this.kc,onlineState:t};this.storage.setItem(this.Wc,JSON.stringify(e))},t.prototype.hu=function(t,e,r){var n=qi(this.persistenceKey,t),i=new Wi(t,e,r);this.setItem(n,i.Cc())},t.prototype.lu=function(t){var e=this.Bc.exec(t);return e?e[1]:null},t.prototype.fu=function(t,e){var r=this.lu(t);return Yi.Dc(r,e)},t.prototype.du=function(t,e){var r=this.Uc.exec(t),n=Number(r[1]),i=void 0!==r[2]?r[2]:null;return Hi.Dc(new ki(i),n,e)},t.prototype.Tu=function(t,e){var r=this.Qc.exec(t),n=Number(r[1]);return Wi.Dc(n,e)},t.prototype.Kc=function(t){return Ki.Dc(t)},t.prototype.wu=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fc.mu(t.batchId,t.state,t.error)]:(c("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Eu=function(t){return this.fc.Iu(t.targetId,t.state,t.error)},t.prototype._u=function(t,e){var r=this,n=e?this.Oc.st(t,e):this.Oc.remove(t),i=this.Hc(this.Oc),s=this.Hc(n),o=[],a=[];return s.forEach((function(t){i.has(t)||o.push(t)})),i.forEach((function(t){s.has(t)||a.push(t)})),this.fc.Au(o,a).then((function(){r.Oc=n}))},t.prototype.Gc=function(t){this.Oc.get(t.clientId)&&this.Da(t.onlineState)},t.prototype.Hc=function(t){var e=pt();return t.forEach((function(t,r){e=e.Nt(r.activeTargetIds)})),e},t}(),Ji=function(){function t(){this.Ru=new Xi,this.Pu={},this.Da=null,this.fs=null}return t.prototype.Jc=function(t){},t.prototype.Zc=function(t,e,r){},t.prototype.eu=function(t){return this.Ru.Nc(t),this.Pu[t]||"not-current"},t.prototype.ou=function(t,e,r){this.Pu[t]=e},t.prototype.su=function(t){this.Ru.Fc(t)},t.prototype.iu=function(t){return this.Ru.activeTargetIds.has(t)},t.prototype.ru=function(t){delete this.Pu[t]},t.prototype.zc=function(){return this.Ru.activeTargetIds},t.prototype.Yc=function(t){return this.Ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.Ru=new Xi,Promise.resolve()},t.prototype.au=function(t,e,r){},t.prototype.cu=function(t){},t.prototype.th=function(){},t.prototype.Ts=function(t){},t}(),Zi=function(t){this.key=t},ts=function(t){this.key=t},es=function(){function t(t,e){this.query=t,this.gu=e,this.Vu=null,this.Yt=!1,this.yu=ct(),this.qt=ct(),this.pu=br(t),this.bu=new dt(this.pu)}return Object.defineProperty(t.prototype,"vu",{get:function(){return this.gu},enumerable:!1,configurable:!0}),t.prototype.Su=function(t,e){var r=this,n=e?e.Du:new mt,i=e?e.bu:this.bu,s=e?e.qt:this.qt,o=i,a=!1,l=this.query.an()&&i.size===this.query.limit?i.last():null,h=this.query.cn()&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var u=i.get(t),c=e instanceof rr?e:null;c&&(c=gr(r.query,c)?c:null);var f=!!u&&r.qt.has(u.key),p=!!c&&(c.Ge||r.qt.has(c.key)&&c.hasCommittedMutations),d=!1;u&&c?u.data().isEqual(c.data())?f!==p&&(n.track({type:3,doc:c}),d=!0):r.Cu(u,c)||(n.track({type:2,doc:c}),d=!0,(l&&r.pu(c,l)>0||h&&r.pu(c,h)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),d=!0):u&&!c&&(n.track({type:1,doc:u}),d=!0,(l||h)&&(a=!0)),d&&(c?(o=o.add(c),s=p?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))})),this.query.an()||this.query.cn())for(;o.size>this.query.limit;){var u=this.query.an()?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),n.track({type:1,doc:u})}return{bu:o,Du:n,Nu:a,qt:s}},t.prototype.Cu=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},t.prototype.Un=function(t,e,r){var n=this,i=this.bu;this.bu=t.bu,this.qt=t.qt;var s=t.Du.Mt();s.sort((function(t,e){return function(t,e){var r=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return m()}};return r(t)-r(e)}(t.type,e.type)||n.pu(t.doc,e.doc)})),this.Fu(r);var o=e?this.ku():[],a=0===this.yu.size&&this.Yt?1:0,l=a!==this.Vu;return this.Vu=a,0!==s.length||l?{snapshot:new yt(this.query,t.bu,i,s,t.qt,0===a,l,!1),$u:o}:{$u:o}},t.prototype.xu=function(t){return this.Yt&&"Offline"===t?(this.Yt=!1,this.Un({bu:this.bu,Du:new mt,qt:this.qt,Nu:!1},!1)):{$u:[]}},t.prototype.Ou=function(t){return!this.gu.has(t)&&!!this.bu.has(t)&&!this.bu.get(t).Ge},t.prototype.Fu=function(t){var e=this;t&&(t.Jt.forEach((function(t){return e.gu=e.gu.add(t)})),t.Xt.forEach((function(t){})),t.Zt.forEach((function(t){return e.gu=e.gu.delete(t)})),this.Yt=t.Yt)},t.prototype.ku=function(){var t=this;if(!this.Yt)return[];var e=this.yu;this.yu=ct(),this.bu.forEach((function(e){t.Ou(e.key)&&(t.yu=t.yu.add(e.key))}));var r=[];return e.forEach((function(e){t.yu.has(e)||r.push(new ts(e))})),this.yu.forEach((function(t){e.has(t)||r.push(new Zi(t))})),r},t.prototype.Mu=function(t){this.gu=t.gh,this.yu=ct();var e=this.Su(t.documents);return this.Un(e,!0)},t.prototype.Lu=function(){return yt.Qt(this.query,this.bu,this.qt,0===this.Vu)},t}(),rs=function(t,e,r){this.query=t,this.targetId=e,this.view=r},ns=function(t){this.key=t,this.qu=!1},is=function(){function t(t,e,r,n,i,s){this.La=t,this.Bu=e,this.qa=r,this.Uu=n,this.currentUser=i,this.Qu=s,this.Wu=null,this.ju=new I((function(t){return yr(t)}),mr),this.Ku=new Map,this.Gu=[],this.zu=new Z(L.P),this.Hu=new Map,this.Yu=new Ci,this.Ju={},this.Xu=new Map,this.Zu=oi.eo(),this.onlineState="Unknown",this.tl=void 0}return Object.defineProperty(t.prototype,"el",{get:function(){return!0===this.tl},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){this.Wu=t},t.prototype.listen=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r,i,s,o;return n.__generator(this,(function(n){switch(n.label){case 0:return this.nl("listen()"),(i=this.ju.get(t))?(e=i.targetId,this.Uu.eu(e),r=i.view.Lu(),[3,4]):[3,1];case 1:return[4,Ti(this.La,cr(t))];case 2:return s=n.sent(),o=this.Uu.eu(s.targetId),e=s.targetId,[4,this.sl(t,e,"current"===o)];case 3:r=n.sent(),this.el&&this.Bu.listen(s),n.label=4;case 4:return[2,r]}}))}))},t.prototype.sl=function(t,e,r){return n.__awaiter(this,void 0,void 0,(function(){var i,s,o,a,l,h;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,Ai(this.La,t,!0)];case 1:return i=n.sent(),s=new es(t,i.gh),o=s.Su(i.documents),a=gt.Ht(e,r&&"Offline"!==this.onlineState),l=s.Un(o,this.el,a),this.il(e,l.$u),h=new rs(t,e,s),[2,(this.ju.set(t,h),this.Ku.has(e)?this.Ku.get(e).push(t):this.Ku.set(e,[t]),l.snapshot)]}}))}))},t.prototype.lc=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r,i=this;return n.__generator(this,(function(n){switch(n.label){case 0:return this.nl("unlisten()"),e=this.ju.get(t),(r=this.Ku.get(e.targetId)).length>1?[2,(this.Ku.set(e.targetId,r.filter((function(e){return!mr(e,t)}))),void this.ju.delete(t))]:this.el?(this.Uu.su(e.targetId),this.Uu.Yc(e.targetId)?[3,2]:[4,xi(this.La,e.targetId,!1).then((function(){i.Uu.ru(e.targetId),i.Bu.lc(e.targetId),i.rl(e.targetId)})).catch(Ii)]):[3,3];case 1:n.sent(),n.label=2;case 2:return[3,5];case 3:return this.rl(e.targetId),[4,xi(this.La,e.targetId,!0)];case 4:n.sent(),n.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s;return n.__generator(this,(function(n){switch(n.label){case 0:this.nl("write()"),n.label=1;case 1:return n.trys.push([1,5,,6]),[4,function(t,e){var r,n=v(t),i=k.now(),s=e.reduce((function(t,e){return t.add(e.key)}),ct());return n.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return n.Rh.Zn(t,s).next((function(s){r=s;for(var o=[],a=0,l=e;a<l.length;a++){var h=l[a],u=Be(h,r.get(h.key));null!=u&&o.push(new qe(h.key,u,tr(u.proto.mapValue),Ne.exists(!0)))}return n.Gn.Ir(t,i,o,e)}))})).then((function(t){var e=t.An(r);return{batchId:t.batchId,Fn:e}}))}(this.La,t)];case 2:return r=n.sent(),this.Uu.Jc(r.batchId),this.ol(r.batchId,e),[4,this.hl(r.Fn)];case 3:return n.sent(),[4,this.Bu.hc()];case 4:return n.sent(),[3,6];case 5:return i=n.sent(),s=an(i,"Failed to persist write"),e.reject(s),[3,6];case 6:return[2]}}))}))},t.prototype.mc=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r=this;return n.__generator(this,(function(n){switch(n.label){case 0:this.nl("applyRemoteEvent()"),n.label=1;case 1:return n.trys.push([1,4,,6]),[4,Ei(this.La,t)];case 2:return e=n.sent(),t.Wt.forEach((function(t,e){var n=r.Hu.get(e);n&&(y(t.Jt.size+t.Xt.size+t.Zt.size<=1),t.Jt.size>0?n.qu=!0:t.Xt.size>0?y(n.qu):t.Zt.size>0&&(y(n.qu),n.qu=!1))})),[4,this.hl(e,t)];case 3:return n.sent(),[3,6];case 4:return[4,Ii(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.xu=function(t,e){if(this.el&&0===e||!this.el&&1===e){this.nl("applyOnlineStateChange()");var r=[];this.ju.forEach((function(e,n){var i=n.view.xu(t);i.snapshot&&r.push(i.snapshot)})),this.Wu.al(t),this.Wu.Ea(r),this.onlineState=t,this.el&&this.Uu.cu(t)}},t.prototype.Ic=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s,o,a,l=this;return n.__generator(this,(function(n){switch(n.label){case 0:return this.nl("rejectListens()"),this.Uu.ou(t,"rejected",e),r=this.Hu.get(t),(i=r&&r.key)?(s=(s=new Z(L.P)).st(i,new nr(i,O.min())),o=ct().add(i),a=new vt(O.min(),new Map,new rt(_),s,o),[4,this.mc(a)]):[3,2];case 1:return n.sent(),this.zu=this.zu.remove(i),this.Hu.delete(t),this.cl(),[3,4];case 2:return[4,xi(this.La,t,!1).then((function(){return l.rl(t,e)})).catch(Ii)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.yc=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r;return n.__generator(this,(function(n){switch(n.label){case 0:this.nl("applySuccessfulWrite()"),e=t.batch.batchId,n.label=1;case 1:return n.trys.push([1,4,,6]),[4,_i(this.La,t)];case 2:return r=n.sent(),this.ul(e,null),this.ll(e),this.Uu.Zc(e,"acknowledged"),[4,this.hl(r)];case 3:return n.sent(),[3,6];case 4:return[4,Ii(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.bc=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r;return n.__generator(this,(function(n){switch(n.label){case 0:this.nl("rejectFailedWrite()"),n.label=1;case 1:return n.trys.push([1,4,,6]),[4,function(t,e){var r=v(t);return r.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var n;return r.Gn.Rr(t,e).next((function(e){return y(null!==e),n=e.keys(),r.Gn.br(t,e)})).next((function(){return r.Gn.Cr(t)})).next((function(){return r.Rh.Zn(t,n)}))}))}(this.La,t)];case 2:return r=n.sent(),this.ul(t,e),this.ll(t),this.Uu.Zc(t,"rejected",e),[4,this.hl(r)];case 3:return n.sent(),[3,6];case 4:return[4,Ii(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))},t.prototype._l=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r,i,s;return n.__generator(this,(function(n){switch(n.label){case 0:this.Bu.Ga()||c("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,function(t){var e=v(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Gn.Vr(t)}))}(this.La)];case 2:return-1===(e=n.sent())?[2,void t.resolve()]:((r=this.Xu.get(e)||[]).push(t),this.Xu.set(e,r),[3,4]);case 3:return i=n.sent(),s=an(i,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}}))}))},t.prototype.ll=function(t){(this.Xu.get(t)||[]).forEach((function(t){t.resolve()})),this.Xu.delete(t)},t.prototype.fl=function(t){this.Xu.forEach((function(e){e.forEach((function(e){e.reject(new D(C.CANCELLED,t))}))})),this.Xu.clear()},t.prototype.ol=function(t,e){var r=this.Ju[this.currentUser.$h()];r||(r=new Z(_)),r=r.st(t,e),this.Ju[this.currentUser.$h()]=r},t.prototype.ul=function(t,e){var r=this.Ju[this.currentUser.$h()];if(r){var n=r.get(t);n&&(e?n.reject(e):n.resolve(),r=r.remove(t)),this.Ju[this.currentUser.$h()]=r}},t.prototype.rl=function(t,e){var r=this;void 0===e&&(e=null),this.Uu.su(t);for(var n=0,i=this.Ku.get(t);n<i.length;n++){var s=i[n];this.ju.delete(s),e&&this.Wu.dl(s,e)}this.Ku.delete(t),this.el&&this.Yu.Ch(t).forEach((function(t){r.Yu.Nr(t)||r.wl(t)}))},t.prototype.wl=function(t){var e=this.zu.get(t);null!==e&&(this.Bu.lc(e),this.zu=this.zu.remove(t),this.Hu.delete(e),this.cl())},t.prototype.il=function(t,e){for(var r=0,n=e;r<n.length;r++){var i=n[r];i instanceof Zi?(this.Yu.Eo(i.key,t),this.Tl(i)):i instanceof ts?(c("SyncEngine","Document no longer in limbo: "+i.key),this.Yu.Io(i.key,t),this.Yu.Nr(i.key)||this.wl(i.key)):m()}},t.prototype.Tl=function(t){var e=t.key;this.zu.get(e)||(c("SyncEngine","New document in limbo: "+e),this.Gu.push(e),this.cl())},t.prototype.cl=function(){for(;this.Gu.length>0&&this.zu.size<this.Qu;){var t=this.Gu.shift(),e=this.Zu.next();this.Hu.set(e,new ns(t)),this.zu=this.zu.st(t,e),this.Bu.listen(new K(cr(lr(t.path)),e,2,Ur.Es))}},t.prototype.El=function(){return this.zu},t.prototype.ml=function(){return this.Gu},t.prototype.hl=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s,o=this;return n.__generator(this,(function(a){switch(a.label){case 0:return r=[],i=[],s=[],this.ju.forEach((function(n,a){s.push(Promise.resolve().then((function(){var e=a.view.Su(t);return e.Nu?Ai(o.La,a.query,!1).then((function(t){var r=t.documents;return a.view.Su(r,e)})):e})).then((function(t){var n=e&&e.Wt.get(a.targetId),s=a.view.Un(t,o.el,n);if(o.il(a.targetId,s.$u),s.snapshot){o.el&&o.Uu.ou(a.targetId,s.snapshot.fromCache?"not-current":"current"),r.push(s.snapshot);var l=zr._s(a.targetId,s.snapshot);i.push(l)}})))})),[4,Promise.all(s)];case 1:return a.sent(),this.Wu.Ea(r),[4,function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s,o,a,l,h,u,f;return n.__generator(this,(function(n){switch(n.label){case 0:r=v(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return $r.forEach(e,(function(e){return $r.forEach(e.us,(function(n){return r.persistence.dr.Eo(t,e.targetId,n)})).next((function(){return $r.forEach(e.ls,(function(n){return r.persistence.dr.Io(t,e.targetId,n)}))}))}))}))];case 2:return n.sent(),[3,4];case 3:if(!Xr(i=n.sent()))throw i;return c("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(s=0,o=e;s<o.length;s++)a=o[s],l=a.targetId,a.fromCache||(h=r.Eh.get(l),u=h.Z,f=h.nt(u),r.Eh=r.Eh.st(l,f));return[2]}}))}))}(this.La,i)];case 2:return a.sent(),[2]}}))}))},t.prototype.nl=function(t){},t.prototype.vc=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e;return n.__generator(this,(function(r){switch(r.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(c("SyncEngine","User change. New user:",t.$h()),[4,function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s,o;return n.__generator(this,(function(n){switch(n.label){case 0:return r=v(t),i=r.Gn,s=r.Rh,[4,r.persistence.runTransaction("Handle user change","readonly",(function(t){var n;return r.Gn.yr(t).next((function(o){return n=o,i=r.persistence.oh(e),s=new Gr(r.Ah,i,r.persistence.uh()),i.yr(t)})).next((function(e){for(var r=[],i=[],o=ct(),a=0,l=n;a<l.length;a++){var h=l[a];r.push(h.batchId);for(var u=0,c=h.mutations;u<c.length;u++){var f=c[u];o=o.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var m=d[p];i.push(m.batchId);for(var y=0,v=m.mutations;y<v.length;y++){var g=v[y];o=o.add(g.key)}}return s.Zn(t,o).next((function(t){return{Il:t,Al:r,Rl:i}}))}))}))];case 1:return o=n.sent(),[2,(r.Gn=i,r.Rh=s,r.Th.Ph(r.Rh),o)]}}))}))}(this.La,t)]);case 1:return e=r.sent(),this.currentUser=t,this.fl("'waitForPendingWrites' promise is rejected due to a user change."),this.Uu.au(t,e.Al,e.Rl),[4,this.hl(e.Il)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.Oe=function(t){var e=this.Hu.get(t);if(e&&e.qu)return ct().add(e.key);var r=ct(),n=this.Ku.get(t);if(!n)return r;for(var i=0,s=n;i<s.length;i++){var o=s[i],a=this.ju.get(o);r=r.Nt(a.view.vu)}return r},t}();function ss(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,Ai((r=v(t)).La,e.query,!0)];case 1:return i=n.sent(),s=e.view.Mu(i),[2,(r.el&&r.il(e.targetId,s.$u),s)]}}))}))}function os(t,e,r,i){return n.__awaiter(this,void 0,void 0,(function(){var s,o;return n.__generator(this,(function(n){switch(n.label){case 0:return(s=v(t)).nl("applyBatchState()"),[4,function(t,e){var r=v(t),n=v(r.Gn);return r.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return n.Pr(t,e).next((function(e){return e?r.Rh.Zn(t,e):$r.resolve(null)}))}))}(s.La,e)];case 1:return null===(o=n.sent())?[3,6]:"pending"!==r?[3,3]:[4,s.Bu.hc()];case 2:return n.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(s.ul(e,i||null),function(t,e){v(v(t).Gn).Sr(e)}(s.La,e)):m(),n.label=4;case 4:return[4,s.hl(o)];case 5:return n.sent(),[3,7];case 6:c("SyncEngine","Cannot apply mutation batch with id: "+e),n.label=7;case 7:return[2]}}))}))}function as(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s,o,a,l,h,u;return n.__generator(this,(function(n){switch(n.label){case 0:return r=v(t),!0!==e||!0===r.tl?[3,3]:(i=r.Uu.zc(),[4,ls(r,i.N())]);case 1:return s=n.sent(),r.tl=!0,[4,r.Bu.Sc(!0)];case 2:for(n.sent(),o=0,a=s;o<a.length;o++)l=a[o],r.Bu.listen(l);return[3,7];case 3:return!1!==e||!1===r.tl?[3,7]:(h=[],u=Promise.resolve(),r.Ku.forEach((function(t,e){r.Uu.iu(e)?h.push(e):u=u.then((function(){return r.rl(e),xi(r.La,e,!0)})),r.Bu.lc(e)})),[4,u]);case 4:return n.sent(),[4,ls(r,h)];case 5:return n.sent(),function(t){var e=v(t);e.Hu.forEach((function(t,r){e.Bu.lc(r)})),e.Yu.Nh(),e.Hu=new Map,e.zu=new Z(L.P)}(r),r.tl=!1,[4,r.Bu.Sc(!1)];case 6:n.sent(),n.label=7;case 7:return[2]}}))}))}function ls(t,e,r){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s,o,a,l,h,u,c,f,p,d,m,y;return n.__generator(this,(function(n){switch(n.label){case 0:r=v(t),i=[],s=[],o=0,a=e,n.label=1;case 1:return o<a.length?(l=a[o],h=void 0,(u=r.Ku.get(l))&&0!==u.length?[4,Ti(r.La,cr(u[0]))]:[3,7]):[3,13];case 2:h=n.sent(),c=0,f=u,n.label=3;case 3:return c<f.length?(p=f[c],d=r.ju.get(p),[4,ss(r,d)]):[3,6];case 4:(m=n.sent()).snapshot&&s.push(m.snapshot),n.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,Pi(r.La,l)];case 8:return y=n.sent(),[4,Ti(r.La,y)];case 9:return h=n.sent(),[4,r.sl(hs(y),l,!1)];case 10:n.sent(),n.label=11;case 11:i.push(h),n.label=12;case 12:return o++,[3,1];case 13:return[2,(r.Wu.Ea(s),i)]}}))}))}function hs(t){return ar(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function us(t){var e=v(t);return v(v(e.La).persistence).rh()}function cs(t,e,r,i){return n.__awaiter(this,void 0,void 0,(function(){var s,o,a;return n.__generator(this,(function(n){switch(n.label){case 0:return(s=v(t)).tl?(c("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!s.Ku.has(e))return[3,8];switch(r){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,function(t){var e=v(t),r=v(e.Ah);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return r.Ur(t,e.Ih)})).then((function(t){var r=t.Qr,n=t.readTime;return e.Ih=n,r}))}(s.La)];case 3:return o=n.sent(),a=vt.zt(e,"current"===r),[4,s.hl(o,a)];case 4:return n.sent(),[3,8];case 5:return[4,xi(s.La,e,!0)];case 6:return n.sent(),s.rl(e,i),[3,8];case 7:m(),n.label=8;case 8:return[2]}}))}))}function fs(t,e,r){return n.__awaiter(this,void 0,void 0,(function(){var i,s,o,a,l,h,u,f,p,d;return n.__generator(this,(function(m){switch(m.label){case 0:if(!(i=v(t)).tl)return[3,10];s=0,o=e,m.label=1;case 1:return s<o.length?(a=o[s],i.Ku.has(a)?(c("SyncEngine","Adding an already active target "+a),[3,5]):[4,Pi(i.La,a)]):[3,6];case 2:return l=m.sent(),[4,Ti(i.La,l)];case 3:return h=m.sent(),[4,i.sl(hs(l),h.targetId,!1)];case 4:m.sent(),i.Bu.listen(h),m.label=5;case 5:return s++,[3,1];case 6:u=function(t){return n.__generator(this,(function(e){switch(e.label){case 0:return i.Ku.has(t)?[4,xi(i.La,t,!1).then((function(){i.Bu.lc(t),i.rl(t)})).catch(Ii)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,p=r,m.label=7;case 7:return f<p.length?(d=p[f],[5,u(d)]):[3,10];case 8:m.sent(),m.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var ps=function(){this.Pl=void 0,this.listeners=[]},ds=function(){function t(t){this.fc=t,this.gl=new I((function(t){return yr(t)}),mr),this.onlineState="Unknown",this.Vl=new Set,this.fc.subscribe(this)}return t.prototype.listen=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r,i,s,o,a;return n.__generator(this,(function(n){switch(n.label){case 0:if(e=t.query,r=!1,(i=this.gl.get(e))||(r=!0,i=new ps),!r)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),s=i,[4,this.fc.listen(e)];case 2:return s.Pl=n.sent(),[3,4];case 3:return o=n.sent(),a=an(o,"Initialization of query '"+vr(t.query)+"' failed"),[2,void t.onError(a)];case 4:return this.gl.set(e,i),i.listeners.push(t),t.xu(this.onlineState),i.Pl&&t.yl(i.Pl)&&this.pl(),[2]}}))}))},t.prototype.lc=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r,i,s;return n.__generator(this,(function(n){return e=t.query,r=!1,(i=this.gl.get(e))&&(s=i.listeners.indexOf(t))>=0&&(i.listeners.splice(s,1),r=0===i.listeners.length),r?[2,(this.gl.delete(e),this.fc.lc(e))]:[2]}))}))},t.prototype.Ea=function(t){for(var e=!1,r=0,n=t;r<n.length;r++){var i=n[r],s=i.query,o=this.gl.get(s);if(o){for(var a=0,l=o.listeners;a<l.length;a++)l[a].yl(i)&&(e=!0);o.Pl=i}}e&&this.pl()},t.prototype.dl=function(t,e){var r=this.gl.get(t);if(r)for(var n=0,i=r.listeners;n<i.length;n++)i[n].onError(e);this.gl.delete(t)},t.prototype.al=function(t){this.onlineState=t;var e=!1;this.gl.forEach((function(r,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].xu(t)&&(e=!0)})),e&&this.pl()},t.prototype.bl=function(t){this.Vl.add(t),t.next()},t.prototype.vl=function(t){this.Vl.delete(t)},t.prototype.pl=function(){this.Vl.forEach((function(t){t.next()}))},t}(),ms=function(){function t(t,e,r){this.query=t,this.Sl=e,this.Dl=!1,this.Cl=null,this.onlineState="Unknown",this.options=r||{}}return t.prototype.yl=function(t){if(!this.options.includeMetadataChanges){for(var e=[],r=0,n=t.docChanges;r<n.length;r++){var i=n[r];3!==i.type&&e.push(i)}t=new yt(t.query,t.docs,t.Lt,e,t.qt,t.fromCache,t.Bt,!0)}var s=!1;return this.Dl?this.Nl(t)&&(this.Sl.next(t),s=!0):this.Fl(t,this.onlineState)&&(this.kl(t),s=!0),this.Cl=t,s},t.prototype.onError=function(t){this.Sl.error(t)},t.prototype.xu=function(t){this.onlineState=t;var e=!1;return this.Cl&&!this.Dl&&this.Fl(this.Cl,t)&&(this.kl(this.Cl),e=!0),e},t.prototype.Fl=function(t,e){if(!t.fromCache)return!0;var r="Offline"!==e;return!(this.options.$l&&r||t.docs._()&&"Offline"!==e)},t.prototype.Nl=function(t){if(t.docChanges.length>0)return!0;var e=this.Cl&&this.Cl.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.kl=function(t){t=yt.Qt(t.query,t.docs,t.qt,t.fromCache),this.Dl=!0,this.Sl.next(t)},t}(),ys=function(){function t(){}return t.prototype.Ph=function(t){this.xl=t},t.prototype.ns=function(t,e,r,n){var i=this;return e.hn()||r.isEqual(O.min())?this.Ol(t,e):this.xl.Zn(t,n).next((function(o){var a=i.Ml(e,o);return(e.an()||e.cn())&&i.Nu(e.nn,a,n,r)?i.Ol(t,e):(u()<=s.LogLevel.DEBUG&&c("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vr(e)),i.xl.ns(t,e,r).next((function(t){return a.forEach((function(e){t=t.st(e.key,e)})),t})))}))},t.prototype.Ml=function(t,e){var r=new rt(br(t));return e.forEach((function(e,n){n instanceof rr&&gr(t,n)&&(r=r.add(n))})),r},t.prototype.Nu=function(t,e,r,n){if(r.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(n)>0)},t.prototype.Ol=function(t,e){return u()<=s.LogLevel.DEBUG&&c("IndexFreeQueryEngine","Using full collection scan to execute query:",vr(e)),this.xl.ns(t,e,O.min())},t}(),vs=function(){function t(t,e){this.zn=t,this.dr=e,this.Gn=[],this.Ll=1,this.ql=new rt(Di.yh)}return t.prototype.mr=function(t){return $r.resolve(0===this.Gn.length)},t.prototype.Ir=function(t,e,r,n){var i=this.Ll;this.Ll++,this.Gn.length>0&&this.Gn[this.Gn.length-1];var s=new Nr(i,e,r,n);this.Gn.push(s);for(var o=0,a=n;o<a.length;o++){var l=a[o];this.ql=this.ql.add(new Di(l.key,i)),this.zn.Ar(t,l.key.path.p())}return $r.resolve(s)},t.prototype.Rr=function(t,e){return $r.resolve(this.Bl(e))},t.prototype.gr=function(t,e){var r=e+1,n=this.Ul(r),i=n<0?0:n;return $r.resolve(this.Gn.length>i?this.Gn[i]:null)},t.prototype.Vr=function(){return $r.resolve(0===this.Gn.length?-1:this.Ll-1)},t.prototype.yr=function(t){return $r.resolve(this.Gn.slice())},t.prototype.Yn=function(t,e){var r=this,n=new Di(e,0),i=new Di(e,Number.POSITIVE_INFINITY),s=[];return this.ql.St([n,i],(function(t){var e=r.Bl(t.kh);s.push(e)})),$r.resolve(s)},t.prototype.es=function(t,e){var r=this,n=new rt(_);return e.forEach((function(t){var e=new Di(t,0),i=new Di(t,Number.POSITIVE_INFINITY);r.ql.St([e,i],(function(t){n=n.add(t.kh)}))})),$r.resolve(this.Ql(n))},t.prototype.as=function(t,e){var r=e.path,n=r.length+1,i=r;L.j(i)||(i=i.child(""));var s=new Di(new L(i),0),o=new rt(_);return this.ql.Dt((function(t){var e=t.key.path;return!!r.D(e)&&(e.length===n&&(o=o.add(t.kh)),!0)}),s),$r.resolve(this.Ql(o))},t.prototype.Ql=function(t){var e=this,r=[];return t.forEach((function(t){var n=e.Bl(t);null!==n&&r.push(n)})),r},t.prototype.br=function(t,e){var r=this;y(0===this.Wl(e.batchId,"removed")),this.Gn.shift();var n=this.ql;return $r.forEach(e.mutations,(function(i){var s=new Di(i.key,e.batchId);return n=n.delete(s),r.dr.Dr(t,i.key)})).next((function(){r.ql=n}))},t.prototype.Sr=function(t){},t.prototype.Nr=function(t,e){var r=new Di(e,0),n=this.ql.Ct(r);return $r.resolve(e.isEqual(n&&n.key))},t.prototype.Cr=function(t){return this.Gn.length,$r.resolve()},t.prototype.Wl=function(t,e){return this.Ul(t)},t.prototype.Ul=function(t){return 0===this.Gn.length?0:t-this.Gn[0].batchId},t.prototype.Bl=function(t){var e=this.Ul(t);return e<0||e>=this.Gn.length?null:this.Gn[e]},t}(),gs=function(){function t(t,e){this.zn=t,this.jl=e,this.docs=new Z(L.P),this.size=0}return t.prototype.xn=function(t,e,r){var n=e.key,i=this.docs.get(n),s=i?i.size:0,o=this.jl(e);return this.docs=this.docs.st(n,{Or:e,size:o,readTime:r}),this.size+=o-s,this.zn.Ar(t,n.path.p())},t.prototype.Mn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Ln=function(t,e){var r=this.docs.get(e);return $r.resolve(r?r.Or:null)},t.prototype.getEntries=function(t,e){var r=this,n=ot();return e.forEach((function(t){var e=r.docs.get(t);n=n.st(t,e?e.Or:null)})),$r.resolve(n)},t.prototype.ns=function(t,e,r){for(var n=lt(),i=new L(e.path.child("")),s=this.docs.ut(i);s.Tt();){var o=s.wt(),a=o.key,l=o.value,h=l.Or,u=l.readTime;if(!e.path.D(a.path))break;u.o(r)<=0||h instanceof rr&&gr(e,h)&&(n=n.st(h.key,h))}return $r.resolve(n)},t.prototype.Kl=function(t,e){return $r.forEach(this.docs,(function(t){return e(t)}))},t.prototype.jr=function(e){return new t.Kr(this)},t.prototype.zr=function(t){return $r.resolve(this.size)},t}();gs.Kr=function(t){function e(e){var r=this;return(r=t.call(this)||this).Hr=e,r}return n.__extends(e,t),e.prototype.Un=function(t){var e=this,r=[];return this.Fn.forEach((function(n,i){i?r.push(e.Hr.xn(t,i,e.readTime)):e.Hr.Mn(n)})),$r.Cn(r)},e.prototype.qn=function(t,e){return this.Hr.Ln(t,e)},e.prototype.Bn=function(t,e){return this.Hr.getEntries(t,e)},e}(Vr);
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
var bs=function(){function t(t){this.persistence=t,this.Gl=new I((function(t){return z(t)}),U),this.lastRemoteSnapshotVersion=O.min(),this.highestTargetId=0,this.zl=0,this.Hl=new Ci,this.targetCount=0,this.Yl=oi.to()}return t.prototype.be=function(t,e){return this.Gl.forEach((function(t,r){return e(r)})),$r.resolve()},t.prototype.ro=function(t){return $r.resolve(this.lastRemoteSnapshotVersion)},t.prototype.oo=function(t){return $r.resolve(this.zl)},t.prototype.no=function(t){return this.highestTargetId=this.Yl.next(),$r.resolve(this.highestTargetId)},t.prototype.ho=function(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.zl&&(this.zl=e),$r.resolve()},t.prototype.co=function(t){this.Gl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yl=new oi(e),this.highestTargetId=e),t.sequenceNumber>this.zl&&(this.zl=t.sequenceNumber)},t.prototype.ao=function(t,e){return this.co(e),this.targetCount+=1,$r.resolve()},t.prototype.lo=function(t,e){return this.co(e),$r.resolve()},t.prototype._o=function(t,e){return this.Gl.delete(e.target),this.Hl.Ch(e.targetId),this.targetCount-=1,$r.resolve()},t.prototype.hr=function(t,e,r){var n=this,i=0,s=[];return this.Gl.forEach((function(o,a){a.sequenceNumber<=e&&null===r.get(a.targetId)&&(n.Gl.delete(o),s.push(n.fo(t,a.targetId)),i++)})),$r.Cn(s).next((function(){return i}))},t.prototype.do=function(t){return $r.resolve(this.targetCount)},t.prototype.wo=function(t,e){var r=this.Gl.get(e)||null;return $r.resolve(r)},t.prototype.To=function(t,e,r){return this.Hl.vh(e,r),$r.resolve()},t.prototype.mo=function(t,e,r){this.Hl.Dh(e,r);var n=this.persistence.dr,i=[];return n&&e.forEach((function(e){i.push(n.Dr(t,e))})),$r.Cn(i)},t.prototype.fo=function(t,e){return this.Hl.Ch(e),$r.resolve()},t.prototype.Ao=function(t,e){var r=this.Hl.Fh(e);return $r.resolve(r)},t.prototype.Nr=function(t,e){return $r.resolve(this.Hl.Nr(e))},t}(),_s=function(){function t(t){var e=this;this.Jl={},this.yo=new Ur(0),this.po=!1,this.po=!0,this.dr=t(this),this.ko=new bs(this),this.zn=new Vn,this.Kn=new gs(this.zn,(function(t){return e.dr.Xl(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.th=function(){return this.po=!1,Promise.resolve()},Object.defineProperty(t.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),t.prototype.Bo=function(){},t.prototype.Uo=function(){},t.prototype.uh=function(){return this.zn},t.prototype.oh=function(t){var e=this.Jl[t.$h()];return e||(e=new vs(this.zn,this.dr),this.Jl[t.$h()]=e),e},t.prototype.hh=function(){return this.ko},t.prototype.ah=function(){return this.Kn},t.prototype.runTransaction=function(t,e,r){var n=this;c("MemoryPersistence","Starting transaction:",t);var i=new ws(this.yo.next());return this.dr.Zl(),r(i).next((function(t){return n.dr.t_(i).next((function(){return t}))})).Sn().then((function(t){return i.jn(),t}))},t.prototype.e_=function(t,e){return $r.Nn(Object.values(this.Jl).map((function(r){return function(){return r.Nr(t,e)}})))},t}(),ws=function(t){function e(e){var r=this;return(r=t.call(this)||this).Ro=e,r}return n.__extends(e,t),e}(Br),Es=function(){function t(t){this.persistence=t,this.n_=new Ci,this.s_=null}return t.i_=function(e){return new t(e)},Object.defineProperty(t.prototype,"r_",{get:function(){if(this.s_)return this.s_;throw m()},enumerable:!1,configurable:!0}),t.prototype.Eo=function(t,e,r){return this.n_.Eo(r,e),this.r_.delete(r.toString()),$r.resolve()},t.prototype.Io=function(t,e,r){return this.n_.Io(r,e),this.r_.add(r.toString()),$r.resolve()},t.prototype.Dr=function(t,e){return this.r_.add(e.toString()),$r.resolve()},t.prototype.removeTarget=function(t,e){var r=this;this.n_.Ch(e.targetId).forEach((function(t){return r.r_.add(t.toString())}));var n=this.persistence.hh();return n.Ao(t,e.targetId).next((function(t){t.forEach((function(t){return r.r_.add(t.toString())}))})).next((function(){return n._o(t,e)}))},t.prototype.Zl=function(){this.s_=new Set},t.prototype.t_=function(t){var e=this,r=this.persistence.ah().jr();return $r.forEach(this.r_,(function(n){var i=L.B(n);return e.o_(t,i).next((function(t){t||r.Mn(i)}))})).next((function(){return e.s_=null,r.apply(t)}))},t.prototype.wh=function(t,e){var r=this;return this.o_(t,e).next((function(t){t?r.r_.delete(e.toString()):r.r_.add(e.toString())}))},t.prototype.Xl=function(t){return 0},t.prototype.o_=function(t,e){var r=this;return $r.Nn([function(){return $r.resolve(r.n_.Nr(e))},function(){return r.persistence.hh().Nr(t,e)},function(){return r.persistence.e_(t,e)}])},t}(),Ss=function(){function t(t){this.h_=t.h_,this.a_=t.a_}return t.prototype.wa=function(t){this.c_=t},t.prototype.ua=function(t){this.u_=t},t.prototype.onMessage=function(t){this.l_=t},t.prototype.close=function(){this.a_()},t.prototype.send=function(t){this.h_(t)},t.prototype.__=function(){this.c_()},t.prototype.f_=function(t){this.u_(t)},t.prototype.d_=function(t){this.l_(t)},t}(),Ts={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},xs=function(t){function e(e){var r=this;return(r=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,r}return n.__extends(e,t),e.prototype.A_=function(t,e,r,n){return new Promise((function(i,s){var o=new a.XhrIo;o.listenOnce(a.EventType.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case a.ErrorCode.NO_ERROR:var e=o.getResponseJson();c("Connection","XHR received:",JSON.stringify(e)),i(e);break;case a.ErrorCode.TIMEOUT:c("Connection",'RPC "'+t+'" timed out'),s(new D(C.DEADLINE_EXCEEDED,"Request time out"));break;case a.ErrorCode.HTTP_ERROR:var r=o.getStatus();if(c("Connection",'RPC "'+t+'" failed with status:',r,"response text:",o.getResponseText()),r>0){var n=o.getResponseJson().error;if(n&&n.status&&n.message){var l=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(C).indexOf(e)>=0?e:C.UNKNOWN}(n.status);s(new D(l,n.message))}else s(new D(C.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new D(C.UNAVAILABLE,"Connection failed."));break;default:m()}}finally{c("Connection",'RPC "'+t+'" completed.')}}));var l=JSON.stringify(n);o.send(e,"POST",l,r,15)}))},e.prototype.Ta=function(t,e){var r=[this.T_,"/","google.firestore.v1.Firestore","/",t,"/channel"],n=a.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.I_(i.initMessageHeaders,e),o.isMobileCordova()||o.isReactNative()||o.isElectron()||o.isIE()||o.isUWP()||o.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");c("Connection","Creating WebChannel: "+s,i);var l=n.createWebChannel(s,i),h=!1,u=!1,f=new Ss({h_:function(t){u?c("Connection","Not sending because WebChannel is closed:",t):(h||(c("Connection","Opening WebChannel transport."),l.open(),h=!0),c("Connection","WebChannel sending:",t),l.send(t))},a_:function(){return l.close()}}),d=function(t,e){l.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(a.WebChannel.EventType.OPEN,(function(){u||c("Connection","WebChannel transport opened.")})),d(a.WebChannel.EventType.CLOSE,(function(){u||(u=!0,c("Connection","WebChannel transport closed"),f.f_())})),d(a.WebChannel.EventType.ERROR,(function(t){u||(u=!0,p("Connection","WebChannel transport errored:",t),f.f_(new D(C.UNAVAILABLE,"The operation could not be completed")))})),d(a.WebChannel.EventType.MESSAGE,(function(t){var e;if(!u){var r=t.data[0];y(!!r);var n=r,i=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(i){c("Connection","WebChannel received error:",i);var s=i.status,o=function(t){var e=W[t];if(void 0!==e)return J(e)}(s),a=i.message;void 0===o&&(o=C.INTERNAL,a="Unknown error status: "+s+" with message "+i.message),u=!0,f.f_(new D(o,a)),l.close()}else c("Connection","WebChannel received:",r),f.d_(r)}})),setTimeout((function(){f.__()}),0),f},e}(function(){function t(t){this.w_=t,this.s=t.s;var e=t.ssl?"https":"http";this.T_=e+"://"+t.host,this.E_="projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents"}return t.prototype.va=function(t,e,r,n){var i=this.m_(t,e);c("RestConnection","Sending: ",i,r);var s={};return this.I_(s,n),this.A_(t,i,s,r).then((function(t){return c("RestConnection","Received: ",t),t}),(function(e){throw p("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",r),e}))},t.prototype.Sa=function(t,e,r,n){return this.va(t,e,r,n)},t.prototype.I_=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.19.0",t["Content-Type"]="text/plain",e)for(var r in e.Mh)e.Mh.hasOwnProperty(r)&&(t[r]=e.Mh[r])},t.prototype.m_=function(t,e){var r=Ts[t];return this.T_+"/v1/"+e+":"+r},t}()),As=function(){function t(){var t=this;this.R_=function(){return t.P_()},this.g_=function(){return t.V_()},this.y_=[],this.p_()}return t.prototype.Ka=function(t){this.y_.push(t)},t.prototype.th=function(){window.removeEventListener("online",this.R_),window.removeEventListener("offline",this.g_)},t.prototype.p_=function(){window.addEventListener("online",this.R_),window.addEventListener("offline",this.g_)},t.prototype.P_=function(){c("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.y_;t<e.length;t++)(0,e[t])(0)},t.prototype.V_=function(){c("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.y_;t<e.length;t++)(0,e[t])(1)},t.ks=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ps=function(){function t(){}return t.prototype.Ka=function(t){},t.prototype.th=function(){},t}();
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Is(t){return new Ht(t,!0)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var Cs="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Ds=function(){function t(){}return t.prototype.initialize=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return this.Uu=this.b_(t),this.persistence=this.v_(t),[4,this.persistence.start()];case 1:return e.sent(),this.S_=this.D_(t),this.La=this.C_(t),[2]}}))}))},t.prototype.D_=function(t){return null},t.prototype.C_=function(t){return e=this.persistence,r=new ys,n=t.N_,new bi(e,r,n);var e,r,n},t.prototype.v_=function(t){if(t.k_.F_)throw new D(C.FAILED_PRECONDITION,Cs);return new _s(Es.i_)},t.prototype.b_=function(t){return new Ji},t.prototype.terminate=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.S_&&this.S_.stop(),[4,this.Uu.th()];case 1:return t.sent(),[4,this.persistence.th()];case 2:return t.sent(),[2]}}))}))},t.prototype.clearPersistence=function(t,e){throw new D(C.FAILED_PRECONDITION,Cs)},t}(),ks=function(t){function e(e){var r=this;return(r=t.call(this)||this).x_=e,r}return n.__extends(e,t),e.prototype.initialize=function(e){return n.__awaiter(this,void 0,void 0,(function(){var r,i=this;return n.__generator(this,(function(s){switch(s.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return s.sent(),[4,this.x_.initialize(this,e)];case 2:return s.sent(),r=this.x_.fc,this.Uu instanceof Qi?(this.Uu.fc={mu:os.bind(null,r),Iu:cs.bind(null,r),Au:fs.bind(null,r),rh:us.bind(null,r)},[4,this.Uu.start()]):[3,4];case 3:s.sent(),s.label=4;case 4:return[4,this.persistence.qo((function(t){return n.__awaiter(i,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return[4,as(this.x_.fc,t)];case 1:return e.sent(),this.S_&&(t&&!this.S_.tr?this.S_.start(this.La):t||this.S_.stop()),[2]}}))}))}))];case 5:return s.sent(),[2]}}))}))},e.prototype.b_=function(t){if(t.k_.F_&&t.k_.synchronizeTabs){var e=rn();if(!Qi.ks(e))throw new D(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var r=gi(t.w_.s,t.w_.persistenceKey);return new Qi(e,t.ei,r,t.clientId,t.N_)}return new Ji},e}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.initialize=function(e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r;return n.__generator(this,(function(n){return e=v(t),r=v(e.Ah),[2,e.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return r.Wr(t)})).then((function(t){e.Ih=t}))]}))}))}(this.La)];case 2:return r.sent(),[2]}}))}))},e.prototype.D_=function(t){var e=this.persistence.dr.Yi;return new fn(e,t.ei)},e.prototype.v_=function(t){var e=gi(t.w_.s,t.w_.persistenceKey),r=Is(t.w_.s);return new pi(t.k_.synchronizeTabs,e,t.clientId,cn.Ui(t.k_.cacheSizeBytes),t.ei,rn(),nn(),r,this.Uu,t.k_.Vo)},e.prototype.b_=function(t){return new Ji},e.prototype.clearPersistence=function(t,e){return function(t){return n.__awaiter(this,void 0,void 0,(function(){var e;return n.__generator(this,(function(r){switch(r.label){case 0:return Wr.ks()?(e=t+"main",[4,Wr.delete(e)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))}(gi(t,e))},e}(Ds)),Os=function(){function t(){}return t.prototype.initialize=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r=this;return n.__generator(this,(function(n){switch(n.label){case 0:return this.La?[3,3]:(this.La=t.La,this.Uu=t.Uu,this.qa=this.O_(e),this.Bu=this.M_(e),this.fc=this.L_(e),this.q_=this.B_(e),this.Uu.Da=function(t){return r.fc.xu(t,1)},this.Bu.fc=this.fc,[4,this.Bu.start()]);case 1:return n.sent(),[4,this.Bu.Sc(this.fc.el)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.B_=function(t){return new ds(this.fc)},t.prototype.O_=function(t){var e,r=Is(t.w_.s),n=(e=t.w_,new xs(e));return function(t,e,r){return new ji(t,e,r)}(t.credentials,n,r)},t.prototype.M_=function(t){var e=this;return new Gi(this.La,this.qa,t.ei,(function(t){return e.fc.xu(t,0)}),As.ks()?new As:new Ps)},t.prototype.L_=function(t){return function(t,e,r,n,i,s,o){var a=new is(t,e,r,n,i,s);return o&&(a.tl=!0),a}(this.La,this.Bu,this.qa,this.Uu,t.N_,t.Qu,!t.k_.F_||!t.k_.synchronizeTabs)},t.prototype.terminate=function(){return this.Bu.th()},t}();
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Ms(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var r=t,n=0,i=["next","error","complete"];n<i.length;n++){var s=i[n];if(s in r&&"function"==typeof r[s])return!0}return!1}(t)}var Rs=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.U_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.U_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Q_=function(){this.muted=!0},t.prototype.U_=function(t,e){var r=this;this.muted||setTimeout((function(){r.muted||t(e)}),0)},t}();
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Fs(t,e){if(0!==e.length)throw new D(C.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Zs(e.length,"argument")+".")}function Ns(t,e,r){if(e.length!==r)throw new D(C.INVALID_ARGUMENT,"Function "+t+"() requires "+Zs(r,"argument")+", but was called with "+Zs(e.length,"argument")+".")}function Ls(t,e,r){if(e.length<r)throw new D(C.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Zs(r,"argument")+", but was called with "+Zs(e.length,"argument")+".")}function $s(t,e,r,n){if(e.length<r||e.length>n)throw new D(C.INVALID_ARGUMENT,"Function "+t+"() requires between "+r+" and "+n+" arguments, but was called with "+Zs(e.length,"argument")+".")}function Vs(t,e,r,n){qs(t,e,Js(r)+" argument",n)}function js(t,e,r,n){void 0!==n&&Vs(t,e,r,n)}function Bs(t,e,r,n){qs(t,e,r+" option",n)}function Gs(t,e,r,n){void 0!==n&&Bs(t,e,r,n)}function zs(t,e,r,n,i){void 0!==n&&function(t,e,r,n,i){for(var s=[],o=0,a=i;o<a.length;o++){var l=a[o];if(l===n)return;s.push(Ws(l))}var h=Ws(n);throw new D(C.INVALID_ARGUMENT,"Invalid value "+h+" provided to function "+t+'() for option "'+r+'". Acceptable values: '+s.join(", "))}(t,0,r,n,i)}function Us(t,e,r,n){if(!e.some((function(t){return t===n})))throw new D(C.INVALID_ARGUMENT,"Invalid value "+Ws(n)+" provided to function "+t+"() for its "+Js(r)+" argument. Acceptable values: "+e.join(", "));return n}function qs(t,e,r,n){if(!("object"===e?Hs(n):"non-empty string"===e?"string"==typeof n&&""!==n:typeof n===e)){var i=Ws(n);throw new D(C.INVALID_ARGUMENT,"Function "+t+"() requires its "+r+" to be of type "+e+", but it was: "+i)}}function Hs(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Ws(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":m()}function Ys(t,e,r){if(void 0===r)throw new D(C.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Js(e)+" argument, but it was undefined.")}function Ks(t,e,r){A(e,(function(e,n){if(r.indexOf(e)<0)throw new D(C.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+r.join(", "))}))}function Xs(t,e,r,n){var i=Ws(n);return new D(C.INVALID_ARGUMENT,"Function "+t+"() requires its "+Js(r)+" argument to be a "+e+", but it was: "+i)}function Qs(t,e,r){if(r<=0)throw new D(C.INVALID_ARGUMENT,"Function "+t+"() requires its "+Js(e)+" argument to be a positive number, but it was: "+r+".")}function Js(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Zs(t,e){return t+" "+e+(1===t?"":"s")}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function to(){if("undefined"==typeof Uint8Array)throw new D(C.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function eo(){if("undefined"==typeof atob)throw new D(C.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ro=function(){function t(t){eo(),this.W_=t}return t.fromBase64String=function(e){Ns("Blob.fromBase64String",arguments,1),Vs("Blob.fromBase64String","string",1,e),eo();try{return new t(H.fromBase64String(e))}catch(e){throw new D(C.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(Ns("Blob.fromUint8Array",arguments,1),to(),!(e instanceof Uint8Array))throw Xs("Blob.fromUint8Array","Uint8Array",1,e);return new t(H.fromUint8Array(e))},t.prototype.toBase64=function(){return Ns("Blob.toBase64",arguments,0),eo(),this.W_.toBase64()},t.prototype.toUint8Array=function(){return Ns("Blob.toUint8Array",arguments,0),to(),this.W_.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.W_.isEqual(t.W_)},t}(),no=function(t){!function(t,e,r,n){if(!(e instanceof Array)||e.length<1)throw new D(C.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Zs(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(Vs("FieldPath","string",e,t[e]),0===t[e].length)throw new D(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.j_=new N(t)},io=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.call(this,e)||this}return n.__extends(e,t),e.documentId=function(){return new e(N.L().F())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Xs("isEqual","FieldPath",1,t);return this.j_.isEqual(t.j_)},e}(no),so=new RegExp("[~\\*/\\[\\]]"),oo=function(){this.K_=this},ao=function(t){function e(e){var r=this;return(r=t.call(this)||this).G_=e,r}return n.__extends(e,t),e.prototype.z_=function(t){if(2!==t.H_)throw 1===t.H_?t.Y_(this.G_+"() can only appear at the top level of your update data"):t.Y_(this.G_+"() cannot be used with set() unless you pass {merge:true}");return t.qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(oo);
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function lo(t,e,r){return new Eo({H_:3,J_:e.settings.J_,methodName:t.G_,X_:r},e.s,e.serializer,e.ignoreUndefinedProperties)}var ho=function(t){function e(e){var r=this;return(r=t.call(this)||this).G_=e,r}return n.__extends(e,t),e.prototype.z_=function(t){return new Re(t.path,new xe)},e.prototype.isEqual=function(t){return t instanceof e},e}(oo),uo=function(t){function e(e,r){var n=this;return(n=t.call(this)||this).G_=e,n.Z_=r,n}return n.__extends(e,t),e.prototype.z_=function(t){var e=lo(this,t,!0),r=this.Z_.map((function(t){return Io(t,e)})),n=new Ae(r);return new Re(t.path,n)},e.prototype.isEqual=function(t){return this===t},e}(oo),co=function(t){function e(e,r){var n=this;return(n=t.call(this)||this).G_=e,n.Z_=r,n}return n.__extends(e,t),e.prototype.z_=function(t){var e=lo(this,t,!0),r=this.Z_.map((function(t){return Io(t,e)})),n=new Ie(r);return new Re(t.path,n)},e.prototype.isEqual=function(t){return this===t},e}(oo),fo=function(t){function e(e,r){var n=this;return(n=t.call(this)||this).G_=e,n.tf=r,n}return n.__extends(e,t),e.prototype.z_=function(t){var e=new De(t.serializer,Kt(t.serializer,this.tf));return new Re(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(oo),po=function(t){function e(){return t.call(this)||this}return n.__extends(e,t),e.delete=function(){return Fs("FieldValue.delete",arguments),new mo(new ao("FieldValue.delete"))},e.serverTimestamp=function(){return Fs("FieldValue.serverTimestamp",arguments),new mo(new ho("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ls("FieldValue.arrayUnion",arguments,1),new mo(new uo("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ls("FieldValue.arrayRemove",arguments,1),new mo(new co("FieldValue.arrayRemove",t))},e.increment=function(t){return Vs("FieldValue.increment","number",1,t),Ns("FieldValue.increment",arguments,1),new mo(new fo("FieldValue.increment",t))},e}(oo),mo=function(t){function e(e){var r=this;return(r=t.call(this)||this).K_=e,r.G_=e.G_,r}return n.__extends(e,t),e.prototype.z_=function(t){return this.K_.z_(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.K_.isEqual(t.K_)},e}(po),yo=function(){function t(t,e){if(Ns("GeoPoint",arguments,2),Vs("GeoPoint","number",1,t),Vs("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new D(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new D(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.ef=t,this.nf=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.ef},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.nf},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.ef===t.ef&&this.nf===t.nf},t.prototype.toJSON=function(){return{latitude:this.ef,longitude:this.nf}},t.prototype.T=function(t){return _(this.ef,t.ef)||_(this.nf,t.nf)},t}(),vo=/^__.*__$/,go=function(t,e,r){this.sf=t,this.if=e,this.rf=r},bo=function(){function t(t,e,r){this.data=t,this.qe=e,this.fieldTransforms=r}return t.prototype.hf=function(t,e){var r=[];return null!==this.qe?r.push(new qe(t,this.data,this.qe,e)):r.push(new Ue(t,this.data,e)),this.fieldTransforms.length>0&&r.push(new We(t,this.fieldTransforms)),r},t}(),_o=function(){function t(t,e,r){this.data=t,this.qe=e,this.fieldTransforms=r}return t.prototype.hf=function(t,e){var r=[new qe(t,this.data,this.qe,e)];return this.fieldTransforms.length>0&&r.push(new We(t,this.fieldTransforms)),r},t}();function wo(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw m()}}var Eo=function(){function t(t,e,r,n,i,s){this.settings=t,this.s=e,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.af(),this.fieldTransforms=i||[],this.qe=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"H_",{get:function(){return this.settings.H_},enumerable:!1,configurable:!0}),t.prototype.cf=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.qe)},t.prototype.uf=function(t){var e,r=null===(e=this.path)||void 0===e?void 0:e.child(t),n=this.cf({path:r,X_:!1});return n.lf(t),n},t.prototype._f=function(t){var e,r=null===(e=this.path)||void 0===e?void 0:e.child(t),n=this.cf({path:r,X_:!1});return n.af(),n},t.prototype.ff=function(t){return this.cf({path:void 0,X_:!0})},t.prototype.Y_=function(t){return Ro(t,this.settings.methodName,this.settings.df||!1,this.path,this.settings.J_)},t.prototype.contains=function(t){return void 0!==this.qe.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.af=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.lf(this.path.get(t))},t.prototype.lf=function(t){if(0===t.length)throw this.Y_("Document fields must not be empty");if(wo(this.H_)&&vo.test(t))throw this.Y_('Document fields cannot begin and end with "__"')},t}(),So=function(){function t(t,e,r){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=r||Is(t)}return t.prototype.wf=function(t,e,r,n){return void 0===n&&(n=!1),new Eo({H_:t,methodName:e,J_:r,path:N.$(),X_:!1,df:n},this.s,this.serializer,this.ignoreUndefinedProperties)},t}();function To(t,e,r,n,i,s){void 0===s&&(s={});var o=t.wf(s.merge||s.mergeFields?2:0,e,r,i);ko("Data must be an object, but it was:",o,n);var a,l,h=Co(n,o);if(s.merge)a=new Me(o.qe),l=o.fieldTransforms;else if(s.mergeFields){for(var u=[],c=0,f=s.mergeFields;c<f.length;c++){var p=f[c],d=void 0;if(p instanceof no)d=p.j_;else{if("string"!=typeof p)throw m();d=Mo(e,p,r)}if(!o.contains(d))throw new D(C.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Fo(u,d)||u.push(d)}a=new Me(u),l=o.fieldTransforms.filter((function(t){return a.Ke(t.field)}))}else a=null,l=o.fieldTransforms;return new bo(new Je(h),a,l)}function xo(t,e,r,n){var i=t.wf(1,e,r);ko("Data must be an object, but it was:",i,n);var s=[],o=new Ze;A(n,(function(t,n){var a=Mo(e,t,r),l=i._f(a);if(n instanceof oo&&n.K_ instanceof ao)s.push(a);else{var h=Io(n,l);null!=h&&(s.push(a),o.set(a,h))}}));var a=new Me(s);return new _o(o.ze(),a,i.fieldTransforms)}function Ao(t,e,r,n,i,s){var o=t.wf(1,e,r),a=[Oo(e,n,r)],l=[i];if(s.length%2!=0)throw new D(C.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<s.length;h+=2)a.push(Oo(e,s[h])),l.push(s[h+1]);for(var u=[],c=new Ze,f=a.length-1;f>=0;--f)if(!Fo(u,a[f])){var p=a[f],d=l[f],m=o._f(p);if(d instanceof oo&&d.K_ instanceof ao)u.push(p);else{var y=Io(d,m);null!=y&&(u.push(p),c.set(p,y))}}var v=new Me(u);return new _o(c.ze(),v,o.fieldTransforms)}function Po(t,e,r,n){return void 0===n&&(n=!1),Io(r,t.wf(n?4:3,e))}function Io(t,e){if(Do(t))return ko("Unsupported field value:",e,t),Co(t,e);if(t instanceof oo)return function(t,e){if(!wo(e.H_))throw e.Y_(t.G_+"() can only be used with update() and set()");if(!e.path)throw e.Y_(t.G_+"() is not currently supported inside arrays");var r=t.z_(e);r&&e.fieldTransforms.push(r)}(t,e),null;if(e.path&&e.qe.push(e.path),t instanceof Array){if(e.settings.X_&&4!==e.H_)throw e.Y_("Nested arrays are not supported");return function(t,e){for(var r=[],n=0,i=0,s=t;i<s.length;i++){var o=Io(s[i],e.ff(n));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),n++}return{arrayValue:{values:r}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Kt(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var r=k.fromDate(t);return{timestampValue:Xt(e.serializer,r)}}if(t instanceof k){var n=new k(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xt(e.serializer,n)}}if(t instanceof yo)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ro)return{bytesValue:Qt(e.serializer,t)};if(t instanceof go){var i=e.s,s=t.sf;if(!s.isEqual(i))throw e.Y_("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:te(t.sf||e.s,t.if.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Y_("Unsupported field value: "+Ws(t))}(t,e)}function Co(t,e){var r={};return P(t)?e.path&&e.path.length>0&&e.qe.push(e.path):A(t,(function(t,n){var i=Io(n,e.uf(t));null!=i&&(r[t]=i)})),{mapValue:{fields:r}}}function Do(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof k||t instanceof yo||t instanceof ro||t instanceof go||t instanceof oo)}function ko(t,e,r){if(!Do(r)||!Hs(r)){var n=Ws(r);throw"an object"===n?e.Y_(t+" a custom object"):e.Y_(t+" "+n)}}function Oo(t,e,r){if(e instanceof no)return e.j_;if("string"==typeof e)return Mo(t,e);throw Ro("Field path arguments must be of type string or FieldPath.",t,!1,void 0,r)}function Mo(t,e,r){try{return function(t){if(t.search(so)>=0)throw new D(C.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(io.bind.apply(io,n.__spreadArrays([void 0],t.split("."))))}catch(e){throw new D(C.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).j_}catch(e){throw Ro((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,r)}var i}function Ro(t,e,r,n,i){var s=n&&!n._(),o=void 0!==i,a="Function "+e+"() called with invalid data";r&&(a+=" (via `toFirestore()`)");var l="";return(s||o)&&(l+=" (found",s&&(l+=" in field "+n),o&&(l+=" in document "+i),l+=")"),new D(C.INVALID_ARGUMENT,(a+=". ")+t+l)}function Fo(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var No=function(){function t(t){this.qa=t,this.Tf=new Map,this.mutations=[],this.Ef=!1,this.mf=null,this.If=new Set}return t.prototype.Af=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,r=this;return n.__generator(this,(function(i){switch(i.label){case 0:if(this.Rf(),this.mutations.length>0)throw new D(C.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s,o,a,l;return n.__generator(this,(function(n){switch(n.label){case 0:return r=v(t),i=oe(r.serializer)+"/documents",s={documents:e.map((function(t){return re(r.serializer,t)}))},[4,r.Sa("BatchGetDocuments",i,s)];case 1:return o=n.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){y(!!e.found),e.found.name,e.found.updateTime;var r=ne(t,e.found.name),n=Zt(e.found.updateTime),i=new Je({mapValue:{fields:e.found.fields}});return new rr(r,n,i,{})}(t,e):"missing"in e?function(t,e){y(!!e.missing),y(!!e.readTime);var r=ne(t,e.missing),n=Zt(e.readTime);return new nr(r,n)}(t,e):m()}(r.serializer,t);a.set(e.key.toString(),e)})),l=[],[2,(e.forEach((function(t){var e=a.get(t.toString());y(!!e),l.push(e)})),l)]}}))}))}(this.qa,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof nr||t instanceof rr?r.Pf(t):m()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.hf(t,this.Qe(t))),this.If.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.hf(t,this.gf(t)))}catch(t){this.mf=t}this.If.add(t.toString())},t.prototype.delete=function(t){this.write([new Xe(t,this.Qe(t))]),this.If.add(t.toString())},t.prototype.commit=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e=this;return n.__generator(this,(function(r){switch(r.label){case 0:if(this.Rf(),this.mf)throw this.mf;return t=this.Tf,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,r){var n=L.B(r);e.mutations.push(new Qe(n,e.Qe(n)))})),[4,function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s;return n.__generator(this,(function(n){switch(n.label){case 0:return r=v(t),i=oe(r.serializer)+"/documents",s={writes:e.map((function(t){return he(r.serializer,t)}))},[4,r.va("Commit",i,s)];case 1:return n.sent(),[2]}}))}))}(this.qa,this.mutations)];case 1:return r.sent(),this.Ef=!0,[2]}}))}))},t.prototype.Pf=function(t){var e;if(t instanceof rr)e=t.version;else{if(!(t instanceof nr))throw m();e=O.min()}var r=this.Tf.get(t.key.toString());if(r){if(!e.isEqual(r))throw new D(C.ABORTED,"Document version changed between two reads.")}else this.Tf.set(t.key.toString(),e)},t.prototype.Qe=function(t){var e=this.Tf.get(t.toString());return!this.If.has(t.toString())&&e?Ne.updateTime(e):Ne.We()},t.prototype.gf=function(t){var e=this.Tf.get(t.toString());if(!this.If.has(t.toString())&&e){if(e.isEqual(O.min()))throw new D(C.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ne.updateTime(e)}return Ne.exists(!0)},t.prototype.write=function(t){this.Rf(),this.mutations=this.mutations.concat(t)},t.prototype.Rf=function(){},t}(),Lo=function(){function t(t,e,r,n){this.ei=t,this.qa=e,this.updateFunction=r,this.ii=n,this.Vf=5,this.Ti=new Hr(this.ei,"transaction_retry")}return t.prototype.run=function(){this.yf()},t.prototype.yf=function(){var t=this;this.Ti.bs((function(){return n.__awaiter(t,void 0,void 0,(function(){var t,e,r=this;return n.__generator(this,(function(n){return t=new No(this.qa),(e=this.pf(t))&&e.then((function(e){r.ei.ai((function(){return t.commit().then((function(){r.ii.resolve(e)})).catch((function(t){r.bf(t)}))}))})).catch((function(t){r.bf(t)})),[2]}))}))}))},t.prototype.pf=function(t){try{var e=this.updateFunction(t);return!$(e)&&e.catch&&e.then?e:(this.ii.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ii.reject(t),null}},t.prototype.bf=function(t){var e=this;this.Vf>0&&this.vf(t)?(this.Vf-=1,this.ei.ai((function(){return e.yf(),Promise.resolve()}))):this.ii.reject(t)},t.prototype.vf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Q(e)}return!1},t}(),$o=function(){function t(t,e){this.credentials=t,this.ei=e,this.clientId=b.t(),this.Sf=new qr}return t.prototype.start=function(t,e,r,n){var i=this;this.Df(),this.w_=t;var s=new qr,o=!1;return this.credentials.Bh((function(t){if(!o)return o=!0,c("FirestoreClient","Initializing. user=",t.uid),i.Cf(e,r,n,t,s).then(i.Sf.resolve,i.Sf.reject);i.ei.gi((function(){return i.Bu.vc(t)}))})),this.ei.ai((function(){return i.Sf.promise})),s.promise},t.prototype.enableNetwork=function(){var t=this;return this.Df(),this.ei.enqueue((function(){return t.persistence.Uo(!0),t.Bu.enableNetwork()}))},t.prototype.Cf=function(t,e,r,i,s){return n.__awaiter(this,void 0,void 0,(function(){var o,a,l=this;return n.__generator(this,(function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),o={ei:this.ei,w_:this.w_,clientId:this.clientId,credentials:this.credentials,N_:i,Qu:100,k_:r},[4,t.initialize(o)];case 1:return h.sent(),[4,e.initialize(t,o)];case 2:return h.sent(),this.persistence=t.persistence,this.Uu=t.Uu,this.La=t.La,this.S_=t.S_,this.qa=e.qa,this.Bu=e.Bu,this.fc=e.fc,this.Nf=e.q_,this.persistence.Bo((function(){return n.__awaiter(l,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),s.resolve(),[3,4];case 3:if(a=h.sent(),s.reject(a),!this.Ff(a))throw a;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),this.Cf(new Ds,new Os,{F_:!1},i,s))];case 4:return[2]}}))}))},t.prototype.Ff=function(t){return"FirebaseError"===t.name?t.code===C.FAILED_PRECONDITION||t.code===C.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Df=function(){if(this.ei.mi)throw new D(C.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Df(),this.ei.enqueue((function(){return t.persistence.Uo(!1),t.Bu.disableNetwork()}))},t.prototype.terminate=function(){var t=this;this.ei.Pi();var e=new qr;return this.ei.Ii((function(){return n.__awaiter(t,void 0,void 0,(function(){var t,r;return n.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),this.S_&&this.S_.stop(),[4,this.Bu.th()];case 1:return n.sent(),[4,this.Uu.th()];case 2:return n.sent(),[4,this.persistence.th()];case 3:return n.sent(),this.credentials.Uh(),e.resolve(),[3,5];case 4:return t=n.sent(),r=an(t,"Failed to shutdown persistence"),e.reject(r),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.Df();var e=new qr;return this.ei.ai((function(){return t.fc._l(e)})),e.promise},t.prototype.listen=function(t,e,r){var n=this;this.Df();var i=new Rs(r),s=new ms(t,i,e);return this.ei.ai((function(){return n.Nf.listen(s)})),function(){i.Q_(),n.ei.ai((function(){return n.Nf.lc(s)}))}},t.prototype.kf=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(e.sent(),function(t,e,r){return n.__awaiter(this,void 0,void 0,(function(){var i,s=this;return n.__generator(this,(function(o){switch(o.label){case 0:return i=new qr,[4,t.enqueue((function(){return n.__awaiter(s,void 0,void 0,(function(){var t,s,o;return n.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,function(t,e){var r=v(t);return r.persistence.runTransaction("read document","readonly",(function(t){return r.Rh.Hn(t,e)}))}(e,r)];case 1:return(t=n.sent())instanceof rr?i.resolve(t):t instanceof nr?i.resolve(null):i.reject(new D(C.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return s=n.sent(),o=an(s,"Failed to get document '"+r+" from cache"),i.reject(o),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(o.sent(),i.promise)]}}))}))}(this.ei,this.La,t))]}}))}))},t.prototype.$f=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(r){switch(r.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(r.sent(),function(t,e,r,n){var i=new qr,s=Vo(t,e,lr(r.path),{includeMetadataChanges:!0,$l:!0},{next:function(t){s();var e=t.docs.has(r);!e&&t.fromCache?i.reject(new D(C.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&n&&"server"===n.source?i.reject(new D(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(t)},error:function(t){return i.reject(t)}});return i.promise}(this.ei,this.Nf,t,e))]}}))}))},t.prototype.xf=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(e.sent(),function(t,e,r){return n.__awaiter(this,void 0,void 0,(function(){var i,s=this;return n.__generator(this,(function(o){switch(o.label){case 0:return i=new qr,[4,t.enqueue((function(){return n.__awaiter(s,void 0,void 0,(function(){var t,s,o,a,l,h;return n.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Ai(e,r,!0)];case 1:return t=n.sent(),s=new es(r,t.gh),o=s.Su(t.documents),a=s.Un(o,!1),i.resolve(a.snapshot),[3,3];case 2:return l=n.sent(),h=an(l,"Failed to execute query '"+r+" against cache"),i.reject(h),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(o.sent(),i.promise)]}}))}))}(this.ei,this.La,t))]}}))}))},t.prototype.Of=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(r){switch(r.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(r.sent(),function(t,e,r,n){var i=new qr,s=Vo(t,e,r,{includeMetadataChanges:!0,$l:!0},{next:function(t){s(),t.fromCache&&n&&"server"===n.source?i.reject(new D(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}});return i.promise}(this.ei,this.Nf,t,e))]}}))}))},t.prototype.write=function(t){var e=this;this.Df();var r=new qr;return this.ei.ai((function(){return e.fc.write(t,r)})),r.promise},t.prototype.s=function(){return this.w_.s},t.prototype.bl=function(t){var e=this;this.Df();var r=new Rs(t);return this.ei.ai((function(){return n.__awaiter(e,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2,this.Nf.bl(r)]}))}))})),function(){r.Q_(),e.ei.ai((function(){return n.__awaiter(e,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2,this.Nf.vl(r)]}))}))}))}},Object.defineProperty(t.prototype,"Mf",{get:function(){return this.ei.mi},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Df();var r=new qr;return this.ei.ai((function(){return new Lo(e.ei,e.qa,t,r).run(),Promise.resolve()})),r.promise},t}();
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Vo(t,e,r,n,i){var s=new Rs(i),o=new ms(r,s,n);return t.ai((function(){return e.listen(o)})),function(){s.Q_(),t.ai((function(){return e.lc(o)}))}}var jo=function(){function t(t,e,r,n){this.s=t,this.timestampsInSnapshots=e,this.Lf=r,this.qf=n}return t.prototype.Bf=function(t){switch(Ct(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Nt(t.integerValue||t.doubleValue);case 3:return this.Uf(t.timestampValue);case 4:return this.Qf(t);case 5:return t.stringValue;case 6:return new ro(Lt(t.bytesValue));case 7:return this.Wf(t.referenceValue);case 8:return this.jf(t.geoPointValue);case 9:return this.Kf(t.arrayValue);case 10:return this.Gf(t.mapValue);default:throw m()}},t.prototype.Gf=function(t){var e=this,r={};return A(t.fields||{},(function(t,n){r[t]=e.Bf(n)})),r},t.prototype.jf=function(t){return new yo(Nt(t.latitude),Nt(t.longitude))},t.prototype.Kf=function(t){var e=this;return(t.values||[]).map((function(t){return e.Bf(t)}))},t.prototype.Qf=function(t){switch(this.Lf){case"previous":var e=function t(e){var r=e.mapValue.fields.__previous_value__;return At(r)?t(r):r}(t);return null==e?null:this.Bf(e);case"estimate":return this.Uf(Pt(t));default:return null}},t.prototype.Uf=function(t){var e=Ft(t),r=new k(e.seconds,e.nanos);return this.timestampsInSnapshots?r:r.toDate()},t.prototype.Wf=function(t){var e=R.k(t);y(_e(e));var r=new T(e.get(1),e.get(3)),n=new L(e.V(5));return r.isEqual(this.s)||f("Document "+n+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.qf(n)},t}(),Bo=cn.ji,Go=function(){function t(t){var e,r,n,i;if(void 0===t.host){if(void 0!==t.ssl)throw new D(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Bs("settings","non-empty string","host",t.host),this.host=t.host,Gs("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Ks("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Gs("settings","object","credentials",t.credentials),this.credentials=t.credentials,Gs("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Gs("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?f("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&f("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(r=t.timestampsInSnapshots)||void 0===r||r,this.ignoreUndefinedProperties=null!==(n=t.ignoreUndefinedProperties)&&void 0!==n&&n,Gs("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=cn.Gi;else{if(t.cacheSizeBytes!==Bo&&t.cacheSizeBytes<cn.Ki)throw new D(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+cn.Ki);this.cacheSizeBytes=t.cacheSizeBytes}Gs("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),zo=function(){function t(e,r,i,s){var o=this;if(void 0===i&&(i=new Ds),void 0===s&&(s=new Os),this.zf=i,this.Hf=s,this.Yf=null,this.Jf=new on,this.INTERNAL={delete:function(){return n.__awaiter(o,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.Xf(),[4,this.Zf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var a=e;this.Yf=a,this.sf=t.td(a),this.ed=a.name,this.nd=new Ri(r)}else{var l=e;if(!l.projectId)throw new D(C.INVALID_ARGUMENT,"Must provide projectId");this.sf=new T(l.projectId,l.database),this.ed="[DEFAULT]",this.nd=new Mi}this.sd=new Go({})}return Object.defineProperty(t.prototype,"rd",{get:function(){return this.od||(this.od=new So(this.sf,this.sd.ignoreUndefinedProperties)),this.od},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){Ns("Firestore.settings",arguments,1),Vs("Firestore.settings","object",1,t);var e=new Go(t);if(this.Zf&&!this.sd.isEqual(e))throw new D(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.sd=e,void 0!==e.credentials&&(this.nd=function(t){if(!t)return new Mi;switch(t.type){case"gapi":var e=t.hd;return y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ni(e,t.zh||"0");case"provider":return t.hd;default:throw new D(C.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Xf(),this.Zf.enableNetwork()},t.prototype.disableNetwork=function(){return this.Xf(),this.Zf.disableNetwork()},t.prototype.enablePersistence=function(t){var e,r;if(this.Zf)throw new D(C.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var n=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&f("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),n=null!==(r=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==r&&r,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,n&&i))throw new D(C.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.ad(this.zf,this.Hf,{F_:!0,cacheSizeBytes:this.sd.cacheSizeBytes,synchronizeTabs:n,Vo:i})},t.prototype.clearPersistence=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e=this;return n.__generator(this,(function(r){if(void 0!==this.Zf&&!this.Zf.Mf)throw new D(C.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new qr,[2,(this.Jf.Ii((function(){return n.__awaiter(e,void 0,void 0,(function(){var e;return n.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.zf.clearPersistence(this.sf,this.ed)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return e=r.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"ud",{get:function(){return this.Xf(),this.Zf.Mf},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Xf(),this.Zf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Xf(),Ms(t))return this.Zf.bl(t);Vs("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.Zf.bl(e)},t.prototype.Xf=function(){return this.Zf||this.ad(new Ds,new Os,{F_:!1}),this.Zf},t.prototype.ld=function(){return new S(this.sf,this.ed,this.sd.host,this.sd.ssl,this.sd.forceLongPolling)},t.prototype.ad=function(t,e,r){var n=this.ld();return this.Zf=new $o(this.nd,this.Jf),this.Zf.start(n,t,e,r)},t.td=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new D(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,r=t.options.projectId;
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */if(!r||"string"!=typeof r)throw new D(C.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new T(r)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Yf)throw new D(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Ns("Firestore.collection",arguments,1),Vs("Firestore.collection","non-empty string",1,t),this.Xf(),new ia(R.k(t),this,null)},t.prototype.doc=function(t){return Ns("Firestore.doc",arguments,1),Vs("Firestore.doc","non-empty string",1,t),this.Xf(),Ho._d(R.k(t),this,null)},t.prototype.collectionGroup=function(t){if(Ns("Firestore.collectionGroup",arguments,1),Vs("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new D(C.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Xf(),new ra(function(t){return new or(R.$(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return Ns("Firestore.runTransaction",arguments,1),Vs("Firestore.runTransaction","function",1,t),this.Xf().transaction((function(r){return t(new Uo(e,r))}))},t.prototype.batch=function(){return this.Xf(),new qo(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(u()){case s.LogLevel.DEBUG:return"debug";case s.LogLevel.ERROR:return"error";case s.LogLevel.SILENT:return"silent";case s.LogLevel.WARN:return"warn";case s.LogLevel.INFO:return"info";case s.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;Ns("Firestore.setLogLevel",arguments,1),Us("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,h.setLogLevel(e)},t.prototype.fd=function(){return this.sd.timestampsInSnapshots},t}(),Uo=function(){function t(t,e){this.dd=t,this.wd=e}return t.prototype.get=function(t){var e=this;Ns("Transaction.get",arguments,1);var r=la("Transaction.get",t,this.dd);return this.wd.Af([r.if]).then((function(t){if(!t||1!==t.length)return m();var n=t[0];if(n instanceof nr)return new Yo(e.dd,r.if,null,!1,!1,r.rf);if(n instanceof rr)return new Yo(e.dd,r.if,n,!1,!1,r.rf);throw m()}))},t.prototype.set=function(t,e,r){$s("Transaction.set",arguments,2,3);var n=la("Transaction.set",t,this.dd);r=sa("Transaction.set",r);var i=ua(n.rf,e,r),s=To(this.dd.rd,"Transaction.set",n.if,i,null!==n.rf,r);return this.wd.set(n.if,s),this},t.prototype.update=function(t,e,r){for(var n,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return"string"==typeof e||e instanceof io?(Ls("Transaction.update",arguments,3),n=la("Transaction.update",t,this.dd),i=Ao(this.dd.rd,"Transaction.update",n.if,e,r,s)):(Ns("Transaction.update",arguments,2),n=la("Transaction.update",t,this.dd),i=xo(this.dd.rd,"Transaction.update",n.if,e)),this.wd.update(n.if,i),this},t.prototype.delete=function(t){Ns("Transaction.delete",arguments,1);var e=la("Transaction.delete",t,this.dd);return this.wd.delete(e.if),this},t}(),qo=function(){function t(t){this.dd=t,this.Td=[],this.Ed=!1}return t.prototype.set=function(t,e,r){$s("WriteBatch.set",arguments,2,3),this.md();var n=la("WriteBatch.set",t,this.dd);r=sa("WriteBatch.set",r);var i=ua(n.rf,e,r),s=To(this.dd.rd,"WriteBatch.set",n.if,i,null!==n.rf,r);return this.Td=this.Td.concat(s.hf(n.if,Ne.We())),this},t.prototype.update=function(t,e,r){for(var n,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return this.md(),"string"==typeof e||e instanceof io?(Ls("WriteBatch.update",arguments,3),n=la("WriteBatch.update",t,this.dd),i=Ao(this.dd.rd,"WriteBatch.update",n.if,e,r,s)):(Ns("WriteBatch.update",arguments,2),n=la("WriteBatch.update",t,this.dd),i=xo(this.dd.rd,"WriteBatch.update",n.if,e)),this.Td=this.Td.concat(i.hf(n.if,Ne.exists(!0))),this},t.prototype.delete=function(t){Ns("WriteBatch.delete",arguments,1),this.md();var e=la("WriteBatch.delete",t,this.dd);return this.Td=this.Td.concat(new Xe(e.if,Ne.We())),this},t.prototype.commit=function(){return this.md(),this.Ed=!0,this.Td.length>0?this.dd.Xf().write(this.Td):Promise.resolve()},t.prototype.md=function(){if(this.Ed)throw new D(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ho=function(t){function e(e,r,n){var i=this;return(i=t.call(this,r.sf,e,n)||this).if=e,i.firestore=r,i.rf=n,i.Zf=i.firestore.Xf(),i}return n.__extends(e,t),e._d=function(t,r,n){if(t.length%2!=0)throw new D(C.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.F()+" has "+t.length);return new e(new L(t),r,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ia(this.if.path.p(),this.firestore,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.if.path.F()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Ns("DocumentReference.collection",arguments,1),Vs("DocumentReference.collection","non-empty string",1,t),!t)throw new D(C.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=R.k(t);return new ia(this.if.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Xs("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.if.isEqual(t.if)&&this.rf===t.rf},e.prototype.set=function(t,e){$s("DocumentReference.set",arguments,1,2),e=sa("DocumentReference.set",e);var r=ua(this.rf,t,e),n=To(this.firestore.rd,"DocumentReference.set",this.if,r,null!==this.rf,e);return this.Zf.write(n.hf(this.if,Ne.We()))},e.prototype.update=function(t,e){for(var r,n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return"string"==typeof t||t instanceof io?(Ls("DocumentReference.update",arguments,2),r=Ao(this.firestore.rd,"DocumentReference.update",this.if,t,e,n)):(Ns("DocumentReference.update",arguments,1),r=xo(this.firestore.rd,"DocumentReference.update",this.if,t)),this.Zf.write(r.hf(this.if,Ne.exists(!0)))},e.prototype.delete=function(){return Ns("DocumentReference.delete",arguments,0),this.Zf.write([new Xe(this.if,Ne.We())])},e.prototype.onSnapshot=function(){for(var t,e,r,n=this,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];$s("DocumentReference.onSnapshot",arguments,1,4);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Ms(i[a])||(Ks("DocumentReference.onSnapshot",o=i[a],["includeMetadataChanges"]),Gs("DocumentReference.onSnapshot","boolean","includeMetadataChanges",o.includeMetadataChanges),a++);var l={includeMetadataChanges:o.includeMetadataChanges};if(Ms(i[a])){var h=i[a];i[a]=null===(t=h.next)||void 0===t?void 0:t.bind(h),i[a+1]=null===(e=h.error)||void 0===e?void 0:e.bind(h),i[a+2]=null===(r=h.complete)||void 0===r?void 0:r.bind(h)}else Vs("DocumentReference.onSnapshot","function",a,i[a]),js("DocumentReference.onSnapshot","function",a+1,i[a+1]),js("DocumentReference.onSnapshot","function",a+2,i[a+2]);var u={next:function(t){i[a]&&i[a](n.Id(t))},error:i[a+1],complete:i[a+2]};return this.Zf.listen(lr(this.if.path),l,u)},e.prototype.get=function(t){var e=this;$s("DocumentReference.get",arguments,0,1),aa("DocumentReference.get",t);var r=this.firestore.Xf();return t&&"cache"===t.source?r.kf(this.if).then((function(t){return new Yo(e.firestore,e.if,t,!0,t instanceof rr&&t.Ge,e.rf)})):r.$f(this.if,t).then((function(t){return e.Id(t)}))},e.prototype.withConverter=function(t){return new e(this.if,this.firestore,t)},e.prototype.Id=function(t){var e=t.docs.get(this.if);return new Yo(this.firestore,this.if,e,t.fromCache,t.hasPendingWrites,this.rf)},e}(go),Wo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Yo=function(){function t(t,e,r,n,i,s){this.dd=t,this.if=e,this.Ad=r,this.Rd=n,this.Pd=i,this.rf=s}return t.prototype.data=function(t){var e=this;if($s("DocumentSnapshot.data",arguments,0,1),t=oa("DocumentSnapshot.data",t),this.Ad){if(this.rf){var r=new Ko(this.dd,this.if,this.Ad,this.Rd,this.Pd,null);return this.rf.fromFirestore(r,t)}return new jo(this.dd.sf,this.dd.fd(),t.serverTimestamps||"none",(function(t){return new Ho(t,e.dd,null)})).Bf(this.Ad.tn())}},t.prototype.get=function(t,e){var r=this;if($s("DocumentSnapshot.get",arguments,1,2),e=oa("DocumentSnapshot.get",e),this.Ad){var n=this.Ad.data().field(Oo("DocumentSnapshot.get",t,this.if));if(null!==n)return new jo(this.dd.sf,this.dd.fd(),e.serverTimestamps||"none",(function(t){return new Ho(t,r.dd,r.rf)})).Bf(n)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ho(this.if,this.dd,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ad},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Wo(this.Pd,this.Rd)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Xs("isEqual","DocumentSnapshot",1,e);return this.dd===e.dd&&this.Rd===e.Rd&&this.if.isEqual(e.if)&&(null===this.Ad?null===e.Ad:this.Ad.isEqual(e.Ad))&&this.rf===e.rf},t}(),Ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Yo);
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Xo(t,e,r,n,i,s,o){var a;if(i.M()){if("array-contains"===s||"array-contains-any"===s)throw new D(C.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){Zo(o,s);for(var l=[],h=0,u=o;h<u.length;h++){var c=u[h];l.push(Jo(n,t,c))}a={arrayValue:{values:l}}}else a=Jo(n,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Zo(o,s),a=Po(r,e,o,"in"===s||"not-in"===s);var f=_r.create(i,s,a);return function(t,e){if(e._n()){var r=t.ln();if(null!==r&&!r.isEqual(e.field))throw new D(C.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+r.toString()+"' and '"+e.field.toString()+"'");var n=t.un();null!==n&&ta(t,e.field,n)}var i=t.fn(function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new D(C.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new D(C.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}function Qo(t,e,r){if(null!==t.startAt)throw new D(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new D(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var n=new Mr(e,r);return function(t,e){if(null===t.un()){var r=t.ln();null!==r&&ta(t,r,e.field)}}(t,n),n}function Jo(t,e,r){if("string"==typeof r){if(""===r)throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!hr(e)&&-1!==r.indexOf("/"))throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+r+"' contains a '/' character.");var n=e.path.child(R.k(r));if(!L.j(n))throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+n+"' is not because it has an odd number of segments ("+n.length+").");return $t(t,new L(n))}if(r instanceof go)return $t(t,r.if);throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ws(r)+".")}function Zo(t,e){if(!Array.isArray(t)||0===t.length)throw new D(C.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new D(C.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(t.indexOf(null)>=0)throw new D(C.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new D(C.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function ta(t,e,r){if(!r.isEqual(e))throw new D(C.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+r.toString()+"' instead.")}function ea(t){if(t.cn()&&0===t.en.length)throw new D(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ra=function(){function t(t,e,r){this.gd=t,this.firestore=e,this.rf=r}return t.prototype.where=function(e,r,n){var i;Ns("Query.where",arguments,3),Ys("Query.where",3,n),i="not-in"===r||"!="===r?r:Us("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,r);var s=Oo("Query.where",e),o=Xo(this.gd,"Query.where",this.firestore.rd,this.firestore.sf,s,i,n);return new t(function(t,e){var r=t.filters.concat([e]);return new or(t.path,t.collectionGroup,t.en.slice(),r,t.limit,t.nn,t.startAt,t.endAt)}(this.gd,o),this.firestore,this.rf)},t.prototype.orderBy=function(e,r){var n;if($s("Query.orderBy",arguments,1,2),js("Query.orderBy","non-empty string",2,r),void 0===r||"asc"===r)n="asc";else{if("desc"!==r)throw new D(C.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+r+"', expected 'asc' or 'desc'.");n="desc"}var i=Oo("Query.orderBy",e),s=Qo(this.gd,i,n);return new t(function(t,e){var r=t.en.concat([e]);return new or(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.nn,t.startAt,t.endAt)}(this.gd,s),this.firestore,this.rf)},t.prototype.limit=function(e){return Ns("Query.limit",arguments,1),Vs("Query.limit","number",1,e),Qs("Query.limit",1,e),new t(fr(this.gd,e,"F"),this.firestore,this.rf)},t.prototype.limitToLast=function(e){return Ns("Query.limitToLast",arguments,1),Vs("Query.limitToLast","number",1,e),Qs("Query.limitToLast",1,e),new t(fr(this.gd,e,"L"),this.firestore,this.rf)},t.prototype.startAt=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];Ls("Query.startAt",arguments,1);var i=this.Vd("Query.startAt",e,r,!0);return new t(pr(this.gd,i),this.firestore,this.rf)},t.prototype.startAfter=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];Ls("Query.startAfter",arguments,1);var i=this.Vd("Query.startAfter",e,r,!1);return new t(pr(this.gd,i),this.firestore,this.rf)},t.prototype.endBefore=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];Ls("Query.endBefore",arguments,1);var i=this.Vd("Query.endBefore",e,r,!0);return new t(dr(this.gd,i),this.firestore,this.rf)},t.prototype.endAt=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];Ls("Query.endAt",arguments,1);var i=this.Vd("Query.endAt",e,r,!1);return new t(dr(this.gd,i),this.firestore,this.rf)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Xs("isEqual","Query",1,e);return this.firestore===e.firestore&&mr(this.gd,e.gd)&&this.rf===e.rf},t.prototype.withConverter=function(e){return new t(this.gd,this.firestore,e)},t.prototype.Vd=function(t,e,r,i){if(Ys(t,1,e),e instanceof Yo)return Ns(t,n.__spreadArrays([e],r),1),function(t,e,r,n,i){if(!n)throw new D(C.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+r+"().");for(var s=[],o=0,a=ur(t);o<a.length;o++){var l=a[o];if(l.field.M())s.push($t(e,n.key));else{var h=n.field(l.field);if(At(h))throw new D(C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var u=l.field.F();throw new D(C.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}s.push(h)}}return new Cr(s,i)}(this.gd,this.firestore.sf,t,e.Ad,i);var s=[e].concat(r);return function(t,e,r,n,i,s){var o=t.en;if(i.length>o.length)throw new D(C.INVALID_ARGUMENT,"Too many arguments provided to "+n+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],l=0;l<i.length;l++){var h=i[l];if(o[l].field.M()){if("string"!=typeof h)throw new D(C.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+n+"(), but got a "+typeof h);if(!hr(t)&&-1!==h.indexOf("/"))throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+n+"() must be a plain document ID, but '"+h+"' contains a slash.");var u=t.path.child(R.k(h));if(!L.j(u))throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+n+"() must result in a valid document path, but '"+u+"' is not because it contains an odd number of segments.");var c=new L(u);a.push($t(e,c))}else{var f=Po(r,n,h);a.push(f)}}return new Cr(a,s)}(this.gd,this.firestore.sf,this.firestore.rd,t,s,i)},t.prototype.onSnapshot=function(){for(var t,e,r,n=this,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];$s("Query.onSnapshot",arguments,1,4);var o={},a=0;if("object"!=typeof i[a]||Ms(i[a])||(Ks("Query.onSnapshot",o=i[a],["includeMetadataChanges"]),Gs("Query.onSnapshot","boolean","includeMetadataChanges",o.includeMetadataChanges),a++),Ms(i[a])){var l=i[a];i[a]=null===(t=l.next)||void 0===t?void 0:t.bind(l),i[a+1]=null===(e=l.error)||void 0===e?void 0:e.bind(l),i[a+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}else Vs("Query.onSnapshot","function",a,i[a]),js("Query.onSnapshot","function",a+1,i[a+1]),js("Query.onSnapshot","function",a+2,i[a+2]);var h={next:function(t){i[a]&&i[a](new na(n.firestore,n.gd,t,n.rf))},error:i[a+1],complete:i[a+2]};return ea(this.gd),this.firestore.Xf().listen(this.gd,o,h)},t.prototype.get=function(t){var e=this;$s("Query.get",arguments,0,1),aa("Query.get",t),ea(this.gd);var r=this.firestore.Xf();return(t&&"cache"===t.source?r.xf(this.gd):r.Of(this.gd,t)).then((function(t){return new na(e.firestore,e.gd,t,e.rf)}))},t}(),na=function(){function t(t,e,r,n){this.dd=t,this.yd=e,this.pd=r,this.rf=n,this.bd=null,this.vd=null,this.metadata=new Wo(r.hasPendingWrites,r.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.pd.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.pd.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var r=this;$s("QuerySnapshot.forEach",arguments,1,2),Vs("QuerySnapshot.forEach","function",1,t),this.pd.docs.forEach((function(n){t.call(e,r.Sd(n,r.metadata.fromCache,r.pd.qt.has(n.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new ra(this.yd,this.dd,this.rf)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(Ks("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Gs("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.pd.Ut)throw new D(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.bd&&this.vd===e||(this.bd=function(t,e,r){if(t.Lt._()){var n=0;return t.docChanges.map((function(e){var i=r(e.doc,t.fromCache,t.qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:n++}}))}var i=t.Lt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=r(e.doc,t.fromCache,t.qt.has(e.doc.key)),s=-1,o=-1;return 0!==e.type&&(s=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(o=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:ha(e.type),doc:n,oldIndex:s,newIndex:o}}))}(this.pd,e,this.Sd.bind(this)),this.vd=e),this.bd},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Xs("isEqual","QuerySnapshot",1,e);return this.dd===e.dd&&mr(this.yd,e.yd)&&this.pd.isEqual(e.pd)&&this.rf===e.rf},t.prototype.Sd=function(t,e,r){return new Ko(this.dd,t.key,t,e,r,this.rf)},t}(),ia=function(t){function e(e,r,n){var i=this;if((i=t.call(this,lr(e),r,n)||this).Dd=e,e.length%2!=1)throw new D(C.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.F()+" has "+e.length);return i}return n.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.gd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.gd.path.p();return t._()?null:new Ho(new L(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.gd.path.F()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){$s("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=b.t()),Vs("CollectionReference.doc","non-empty string",1,t);var e=R.k(t);return Ho._d(this.gd.path.child(e),this.firestore,this.rf)},e.prototype.add=function(t){Ns("CollectionReference.add",arguments,1),Vs("CollectionReference.add","object",1,this.rf?this.rf.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.Dd,this.firestore,t)},e}(ra);function sa(t,e){if(void 0===e)return{merge:!1};if(Ks(t,e,["merge","mergeFields"]),Gs(t,"boolean","merge",e.merge),function(t,e,r,n,i){void 0!==n&&function(t,e,r,n,i){if(!(n instanceof Array))throw new D(C.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Ws(n));for(var s=0;s<n.length;++s)if(!i(n[s]))throw new D(C.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+s+" was: "+Ws(n[s]))}(t,"mergeFields",0,n,(function(t){return"string"==typeof t||t instanceof io}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new D(C.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function oa(t,e){return void 0===e?{}:(Ks(t,e,["serverTimestamps"]),zs(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function aa(t,e){js(t,"object",1,e),e&&(Ks(t,e,["source"]),zs(t,0,"source",e.source,["default","server","cache"]))}function la(t,e,r){if(e instanceof go){if(e.firestore!==r)throw new D(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Xs(t,"DocumentReference",1,e)}function ha(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return m()}}function ua(t,e,r){return t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e}var ca={Firestore:zo,GeoPoint:yo,Timestamp:k,Blob:ro,Transaction:Uo,WriteBatch:qo,DocumentReference:Ho,DocumentSnapshot:Yo,Query:ra,QueryDocumentSnapshot:Ko,QuerySnapshot:na,CollectionReference:ia,FieldPath:io,FieldValue:po,setLogLevel:zo.setLogLevel,CACHE_SIZE_UNLIMITED:Bo};
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function fa(t){!function(t,e){t.INTERNAL.registerComponent(new l.Component("firestore",(function(t){return function(t,e){var r=new Os,n=new ks(r);return new zo(t,e,n,r)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},ca)))}(t),t.registerVersion("@firebase/firestore","1.16.5")}fa(i),e.__PRIVATE_registerFirestore=fa}));unwrapExports(index_cjs$4);var index_cjs_1$3=index_cjs$4.__PRIVATE_registerFirestore;class Lighter{constructor(){this.analytics=null,this.firestore=null,this.docs=null}create(){var t=this;return _asyncToGenerator((function*(){index_cjs$3.initializeApp({apiKey:"AIzaSyAHM5sZ39JLrQsR0m8Xy0uaNmxI_0x4i50",authDomain:"jiashe-ng.firebaseapp.com",databaseURL:"https://jiashe-ng.firebaseio.com",projectId:"jiashe-ng",storageBucket:"jiashe-ng.appspot.com",messagingSenderId:"814550513437",appId:"1:814550513437:web:af93c50dce81733b19d3f4",measurementId:"G-5QQWXLWBMZ"}),t.analytics=null==firebase$2?void 0:index_cjs$3.analytics(),t.firestore=index_cjs$3.firestore(),t.docs=(yield t.firestore.collection(t.collection).get()).docs}))()}get collection(){var{href:t}=window.location,e=t.split("/");""===e[e.length-1]&&e.pop(),/#|\?/.test(e[e.length-1])&&e.pop();var r=e.pop(),n=t;return n=(n=n.substr(n.indexOf("//")+2)).substr(0,n.indexOf("/")),r.includes(n)?"portfolio":r}}class Main{constructor(){if(this.mTV=new TV,this.miscellaneousScrollingAnimator=new ScrollAnimator,this.scrollToContinueFrameAnimator=new FrameAnimator,this.mHamburger=new Hamburger(this.miscellaneousScrollingAnimator),this.mWindowUtility=new WindowUtility,this.mSign=new Sign,this.mLottieButton=new LottieButton,this.mLigher=new Lighter,!Main.isBeingInstantiated)throw new Error("Constructor called directly");Main.isBeingInstantiated=!1}static braceForInstantiation(){Main.isBeingInstantiated=!0}static create(){return _asyncToGenerator((function*(){ForUtility.addToArrayPrototype(),SmoothScroll({animationTime:500,touchpadSupport:!1,pulseScale:6}),pace.start({ajax:{ignoreURLs:["firestore.googleapis.com",/livereload/]}}),"complete"!==document.readyState&&"interactive"!==document.readyState&&(yield new Promise(t=>$$1(document).on("DOMContentLoaded",t))),Main.braceForInstantiation();var t=new Main;yield t.addScrollToContinueFrameAnimation(),yield t.addHeaderFrameAnimation(),yield t.addMiscellaneousScrollingAnimations(),yield t.mSign.create(),yield t.mLigher.create(),yield t.mTV.create(t.mLigher.docs)}))()}addMiscellaneousScrollingAnimations(){var t=this;return _asyncToGenerator((function*(){var e,r=t.miscellaneousScrollingAnimator;yield r.add({type:"meta",index:-2,items:{onFrame:(t,e)=>{var{uid:r,totalFrames:n}=t.items,i=(100*Math.min(Math.max(e,0)/(n-1),1)).toString();switch(!0){case"NaN"===i||"0"===i:i=".00";break;case"0."===i.substr(0,2):i=i.substr(1).substring(0,3);break;case"."===i.substring(1,2):i=i.substring(0,3);break;case"100"===i:break;default:i=i.substr(0,i.indexOf(".")).padStart(3,"0")}$$1(".scrollCounter > h1").textContent="".concat(i,"%"),[$$1(".scrollCounter > h2").textContent]=r.split(" ")}}}),yield r.add({index:-1,type:"null",items:{uid:"portfolio",onVisible:()=>{t.scrollToContinueFrameAnimator.animatorContainers.forEach(e=>t.scrollToContinueFrameAnimator.activate(e))},onHidden:()=>{t.scrollToContinueFrameAnimator.animatorContainers.forEach(e=>t.scrollToContinueFrameAnimator.deactivate(e))}}}),yield r.add({type:null,index:0,items:{uid:"who_am_i?"}}),yield r.add({type:null,index:0,items:{uid:"screen_controller",totalFrames:120,bezier:[.75,0,.25,1],onHidden:()=>{$$1(".screen").css({transform:"scale(1)"}),$$(".splash").fastEach(t=>t.css({transform:"scale(1)"}))},onFrame:(t,e)=>{var{totalFrames:r}=t.items;$$1(".screen").css({transform:"scale(".concat(1+e/r/2,")")}),$$(".splash").fastEach(t=>t.css({transform:"scale(".concat(1-e/r/4,")")}))}}}),yield r.add({index:0,type:"null",items:{totalFrames:120,onFrame:(t,e)=>{var{totalFrames:n}=t.items,i="none";e>n/2&&(i="auto"),r.animations[0].fastEach(t=>{var{domContent:e}=t.items;e&&e.css({pointerEvents:i})})}}}),yield r.add({index:0,type:"lottie",data:yield $$1().getJSON("/assets/js/raw/lottie/blocks.json"),items:{uid:"blocks",respectDevicePixelRatio:!1,totalFrames:150}}),yield r.add({index:0,type:"lottie",data:yield $$1().getJSON("/assets/js/raw/lottie/aux about me stuff.json"),items:{uid:"aux_about_me_stuff",respectDevicePixelRatio:!1,invert:!0,totalFrames:120}}),yield r.add({index:0,type:"lottie",data:yield $$1().getJSON("/assets/js/raw/lottie/aux about me dots.json"),items:{uid:"aux_about_me_dots",respectDevicePixelRatio:!1,invert:!0,totalFrames:120}}),yield r.add({index:0,type:"null",items:{uid:"overlayController",domContent:$$1(".overlay"),totalFrames:120,onFrame:(t,e)=>{var{domContent:n}=t.items;n.css({opacity:Math.min(e/r.totalFrames*2,.5)})}}}),yield r.add({index:1,type:"solid",items:{uid:"what_now?",respectDevicePixelRatio:!1,totalFrames:150}}),yield r.add({index:1,type:"lottie",data:yield $$1().getJSON("/assets/js/raw/lottie/aux what now stuff.json"),items:{uid:"aux_what_now_stuff",respectDevicePixelRatio:!1,invert:!0,totalFrames:120}}),yield r.add({index:1,type:"lottie",data:yield $$1().getJSON("/assets/js/raw/lottie/aux what now dots.json"),items:{uid:"aux_what_now_dots",respectDevicePixelRatio:!1,invert:!0,totalFrames:120}}),yield r.add({index:2,type:"solid",items:{uid:"contact_me",respectDevicePixelRatio:!1,totalFrames:150}}),yield r.add({index:2,type:"lottie",data:yield $$1().getJSON("/assets/js/raw/lottie/aux contact me stuff.json"),items:{uid:"aux_contact_me_stuff",respectDevicePixelRatio:!1,invert:!0,totalFrames:120}}),yield r.add({index:2,type:"lottie",data:yield $$1().getJSON("/assets/js/raw/lottie/aux contact me dots.json"),items:{uid:"aux_contact_me_dots",respectDevicePixelRatio:!1,invert:!0,totalFrames:120}});var n=(yield r.add({index:2,type:"lottie",data:yield $$1().getJSON(null!==(e=window.lottieButtonJsonUrl)&&void 0!==e?e:"/assets/js/raw/lottie/email.json"),items:{uid:"lottieButton",invert:!0,totalFrames:120}})).items.domContent,{dpr:i,resolutionMultiplier:s}=r;t.mLottieButton.create({domContent:n,dpr:i,intent:window.lottieButtonIntent,resolutionMultiplier:s})}))()}addScrollToContinueFrameAnimation(){var t=this;return _asyncToGenerator((function*(){var e=t.scrollToContinueFrameAnimator;yield e.add({index:0,type:"lottie",data:yield $$1().getJSON("/assets/js/raw/lottie/scroll to continue.json"),items:{uid:"scrollToContinue",respectDevicePixelRatio:!0,totalFrames:180,width:{maximum:1300},onVisible:t=>{var{onRedraw:r}=t.items;r(t),e.animatorContainersWrapper.addClass("invert")},onRedraw:t=>{var{domContent:e}=t.items;e.css({transform:"translateY(".concat(WindowUtility.viewport.height/3/Math.max(window.devicePixelRatio/2,1),"px)")})}}}),e.repeat(0,180)}))()}addHeaderFrameAnimation(){var t=this;return _asyncToGenerator((function*(){var e=new FrameAnimator;yield e.add({index:0,type:"null",items:{uid:"logo",totalFrames:240,offset:80,domContent:$$1(".logo"),bezier:[.77,0,.175,1],onVisible:t=>{var{domContent:e}=t.items;e.removeClass("hidden")},onFrame:(t,e)=>{var{domContent:r,totalFrames:n}=t.items;r.css({transform:"translateY(".concat(e/n*120-120,"px)")})}}}),yield e.add({index:0,type:"null",items:{uid:"scrollCounter",totalFrames:240,offset:40,domContent:$$1(".scrollCounter"),bezier:[.77,0,.175,1],onVisible:t=>{var{domContent:e}=t.items;e.removeClass("hidden"),e.css({transform:"translateY(-10000px)"})},onFrame:(t,e)=>{var{domContent:r,totalFrames:n}=t.items;r.css({transform:"translateY(".concat(e/n*-120- -120,"px)")})}}}),yield e.add({index:0,type:"null",data:yield t.mHamburger.getLottieData(),items:{uid:"hamburger",totalFrames:240,offset:0,domContent:t.mHamburger.hamburgerIconDom,bezier:[.77,0,.175,1],onVisible:e=>{var{items:r,data:n}=e,{domContent:i}=r;i.removeClass("hidden"),i.css({transform:"translateY(-10000px)"}),t.mHamburger.create(n)},onFrame:(t,e)=>{var{domContent:r,totalFrames:n}=t.items;r.css({transform:"translateY(".concat(e/n*120-120,"px)")})}}});var r=()=>{var t=WindowUtility.viewport.height,e=WindowUtility.inner.height,r=$$1(".header.containersWrapper"),n=$$1(".__hamburgerMenu.containersWrapper");t===e?(r.css({height:t}),n.css({height:t})):(r.css({height:e}),n.css({height:e}))};r(),$$1(window).on("resize",r),e.animate(0,240)}))()}}Main.isBeingInstantiated=!1,_asyncToGenerator((function*(){yield Main.create()}))()}();
//# sourceMappingURL=bundle.js.map
